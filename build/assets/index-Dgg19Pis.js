function TM(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in r)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function M0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function _M(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var n=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:function(){return r[s]}})}),t}var om={exports:{}},Pl={},im={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function MM(){if($b)return tt;$b=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function g(W){return W===null||typeof W!="object"?null:(W=m&&W[m]||W["@@iterator"],typeof W=="function"?W:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function j(W,ae,q){this.props=W,this.context=ae,this.refs=w,this.updater=q||y}j.prototype.isReactComponent={},j.prototype.setState=function(W,ae){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ae,"setState")},j.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function C(){}C.prototype=j.prototype;function N(W,ae,q){this.props=W,this.context=ae,this.refs=w,this.updater=q||y}var k=N.prototype=new C;k.constructor=N,v(k,j.prototype),k.isPureReactComponent=!0;var T=Array.isArray,E=Object.prototype.hasOwnProperty,D={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function P(W,ae,q){var ce,we={},xe=null,se=null;if(ae!=null)for(ce in ae.ref!==void 0&&(se=ae.ref),ae.key!==void 0&&(xe=""+ae.key),ae)E.call(ae,ce)&&!M.hasOwnProperty(ce)&&(we[ce]=ae[ce]);var K=arguments.length-2;if(K===1)we.children=q;else if(1<K){for(var fe=Array(K),ie=0;ie<K;ie++)fe[ie]=arguments[ie+2];we.children=fe}if(W&&W.defaultProps)for(ce in K=W.defaultProps,K)we[ce]===void 0&&(we[ce]=K[ce]);return{$$typeof:r,type:W,key:xe,ref:se,props:we,_owner:D.current}}function R(W,ae){return{$$typeof:r,type:W.type,key:ae,ref:W.ref,props:W.props,_owner:W._owner}}function F(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function I(W){var ae={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(q){return ae[q]})}var U=/\/+/g;function L(W,ae){return typeof W=="object"&&W!==null&&W.key!=null?I(""+W.key):ae.toString(36)}function X(W,ae,q,ce,we){var xe=typeof W;(xe==="undefined"||xe==="boolean")&&(W=null);var se=!1;if(W===null)se=!0;else switch(xe){case"string":case"number":se=!0;break;case"object":switch(W.$$typeof){case r:case e:se=!0}}if(se)return se=W,we=we(se),W=ce===""?"."+L(se,0):ce,T(we)?(q="",W!=null&&(q=W.replace(U,"$&/")+"/"),X(we,ae,q,"",function(ie){return ie})):we!=null&&(F(we)&&(we=R(we,q+(!we.key||se&&se.key===we.key?"":(""+we.key).replace(U,"$&/")+"/")+W)),ae.push(we)),1;if(se=0,ce=ce===""?".":ce+":",T(W))for(var K=0;K<W.length;K++){xe=W[K];var fe=ce+L(xe,K);se+=X(xe,ae,q,fe,we)}else if(fe=g(W),typeof fe=="function")for(W=fe.call(W),K=0;!(xe=W.next()).done;)xe=xe.value,fe=ce+L(xe,K++),se+=X(xe,ae,q,fe,we);else if(xe==="object")throw ae=String(W),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.");return se}function de(W,ae,q){if(W==null)return W;var ce=[],we=0;return X(W,ce,"","",function(xe){return ae.call(q,xe,we++)}),ce}function B(W){if(W._status===-1){var ae=W._result;ae=ae(),ae.then(function(q){(W._status===0||W._status===-1)&&(W._status=1,W._result=q)},function(q){(W._status===0||W._status===-1)&&(W._status=2,W._result=q)}),W._status===-1&&(W._status=0,W._result=ae)}if(W._status===1)return W._result.default;throw W._result}var V={current:null},O={transition:null},Z={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:O,ReactCurrentOwner:D};function Q(){throw Error("act(...) is not supported in production builds of React.")}return tt.Children={map:de,forEach:function(W,ae,q){de(W,function(){ae.apply(this,arguments)},q)},count:function(W){var ae=0;return de(W,function(){ae++}),ae},toArray:function(W){return de(W,function(ae){return ae})||[]},only:function(W){if(!F(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},tt.Component=j,tt.Fragment=t,tt.Profiler=n,tt.PureComponent=N,tt.StrictMode=s,tt.Suspense=u,tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,tt.act=Q,tt.cloneElement=function(W,ae,q){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var ce=v({},W.props),we=W.key,xe=W.ref,se=W._owner;if(ae!=null){if(ae.ref!==void 0&&(xe=ae.ref,se=D.current),ae.key!==void 0&&(we=""+ae.key),W.type&&W.type.defaultProps)var K=W.type.defaultProps;for(fe in ae)E.call(ae,fe)&&!M.hasOwnProperty(fe)&&(ce[fe]=ae[fe]===void 0&&K!==void 0?K[fe]:ae[fe])}var fe=arguments.length-2;if(fe===1)ce.children=q;else if(1<fe){K=Array(fe);for(var ie=0;ie<fe;ie++)K[ie]=arguments[ie+2];ce.children=K}return{$$typeof:r,type:W.type,key:we,ref:xe,props:ce,_owner:se}},tt.createContext=function(W){return W={$$typeof:l,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:i,_context:W},W.Consumer=W},tt.createElement=P,tt.createFactory=function(W){var ae=P.bind(null,W);return ae.type=W,ae},tt.createRef=function(){return{current:null}},tt.forwardRef=function(W){return{$$typeof:d,render:W}},tt.isValidElement=F,tt.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:B}},tt.memo=function(W,ae){return{$$typeof:h,type:W,compare:ae===void 0?null:ae}},tt.startTransition=function(W){var ae=O.transition;O.transition={};try{W()}finally{O.transition=ae}},tt.unstable_act=Q,tt.useCallback=function(W,ae){return V.current.useCallback(W,ae)},tt.useContext=function(W){return V.current.useContext(W)},tt.useDebugValue=function(){},tt.useDeferredValue=function(W){return V.current.useDeferredValue(W)},tt.useEffect=function(W,ae){return V.current.useEffect(W,ae)},tt.useId=function(){return V.current.useId()},tt.useImperativeHandle=function(W,ae,q){return V.current.useImperativeHandle(W,ae,q)},tt.useInsertionEffect=function(W,ae){return V.current.useInsertionEffect(W,ae)},tt.useLayoutEffect=function(W,ae){return V.current.useLayoutEffect(W,ae)},tt.useMemo=function(W,ae){return V.current.useMemo(W,ae)},tt.useReducer=function(W,ae,q){return V.current.useReducer(W,ae,q)},tt.useRef=function(W){return V.current.useRef(W)},tt.useState=function(W){return V.current.useState(W)},tt.useSyncExternalStore=function(W,ae,q){return V.current.useSyncExternalStore(W,ae,q)},tt.useTransition=function(){return V.current.useTransition()},tt.version="18.3.1",tt}var Gb;function Cc(){return Gb||(Gb=1,im.exports=MM()),im.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function EM(){if(Yb)return Pl;Yb=1;var r=Cc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,h){var p,m={},g=null,y=null;h!==void 0&&(g=""+h),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(y=u.ref);for(p in u)s.call(u,p)&&!i.hasOwnProperty(p)&&(m[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)m[p]===void 0&&(m[p]=u[p]);return{$$typeof:e,type:d,key:g,ref:y,props:m,_owner:n.current}}return Pl.Fragment=t,Pl.jsx=l,Pl.jsxs=l,Pl}var Xb;function PM(){return Xb||(Xb=1,om.exports=EM()),om.exports}var o=PM(),Ud={},am={exports:{}},zr={},lm={exports:{}},cm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function DM(){return Kb||(Kb=1,(function(r){function e(O,Z){var Q=O.length;O.push(Z);e:for(;0<Q;){var W=Q-1>>>1,ae=O[W];if(0<n(ae,Z))O[W]=Z,O[Q]=ae,Q=W;else break e}}function t(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var Z=O[0],Q=O.pop();if(Q!==Z){O[0]=Q;e:for(var W=0,ae=O.length,q=ae>>>1;W<q;){var ce=2*(W+1)-1,we=O[ce],xe=ce+1,se=O[xe];if(0>n(we,Q))xe<ae&&0>n(se,we)?(O[W]=se,O[xe]=Q,W=xe):(O[W]=we,O[ce]=Q,W=ce);else if(xe<ae&&0>n(se,Q))O[W]=se,O[xe]=Q,W=xe;else break e}}return Z}function n(O,Z){var Q=O.sortIndex-Z.sortIndex;return Q!==0?Q:O.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();r.unstable_now=function(){return l.now()-d}}var u=[],h=[],p=1,m=null,g=3,y=!1,v=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(O){for(var Z=t(h);Z!==null;){if(Z.callback===null)s(h);else if(Z.startTime<=O)s(h),Z.sortIndex=Z.expirationTime,e(u,Z);else break;Z=t(h)}}function T(O){if(w=!1,k(O),!v)if(t(u)!==null)v=!0,B(E);else{var Z=t(h);Z!==null&&V(T,Z.startTime-O)}}function E(O,Z){v=!1,w&&(w=!1,C(P),P=-1),y=!0;var Q=g;try{for(k(Z),m=t(u);m!==null&&(!(m.expirationTime>Z)||O&&!I());){var W=m.callback;if(typeof W=="function"){m.callback=null,g=m.priorityLevel;var ae=W(m.expirationTime<=Z);Z=r.unstable_now(),typeof ae=="function"?m.callback=ae:m===t(u)&&s(u),k(Z)}else s(u);m=t(u)}if(m!==null)var q=!0;else{var ce=t(h);ce!==null&&V(T,ce.startTime-Z),q=!1}return q}finally{m=null,g=Q,y=!1}}var D=!1,M=null,P=-1,R=5,F=-1;function I(){return!(r.unstable_now()-F<R)}function U(){if(M!==null){var O=r.unstable_now();F=O;var Z=!0;try{Z=M(!0,O)}finally{Z?L():(D=!1,M=null)}}else D=!1}var L;if(typeof N=="function")L=function(){N(U)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,de=X.port2;X.port1.onmessage=U,L=function(){de.postMessage(null)}}else L=function(){j(U,0)};function B(O){M=O,D||(D=!0,L())}function V(O,Z){P=j(function(){O(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(O){O.callback=null},r.unstable_continueExecution=function(){v||y||(v=!0,B(E))},r.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(O){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var Q=g;g=Z;try{return O()}finally{g=Q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(O,Z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Q=g;g=O;try{return Z()}finally{g=Q}},r.unstable_scheduleCallback=function(O,Z,Q){var W=r.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,O){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,O={id:p++,callback:Z,priorityLevel:O,startTime:Q,expirationTime:ae,sortIndex:-1},Q>W?(O.sortIndex=Q,e(h,O),t(u)===null&&O===t(h)&&(w?(C(P),P=-1):w=!0,V(T,Q-W))):(O.sortIndex=ae,e(u,O),v||y||(v=!0,B(E))),O},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(O){var Z=g;return function(){var Q=g;g=Z;try{return O.apply(this,arguments)}finally{g=Q}}}})(cm)),cm}var qb;function AM(){return qb||(qb=1,lm.exports=DM()),lm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb;function RM(){if(Zb)return zr;Zb=1;var r=Cc(),e=AM();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,n={};function i(a,c){l(a,c),l(a+"Capture",c)}function l(a,c){for(n[a]=c,a=0;a<c.length;a++)s.add(c[a])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function g(a){return u.call(m,a)?!0:u.call(p,a)?!1:h.test(a)?m[a]=!0:(p[a]=!0,!1)}function y(a,c,f,x){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function v(a,c,f,x){if(c===null||typeof c>"u"||y(a,c,f,x))return!0;if(x)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(a,c,f,x,S,_,A){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=S,this.mustUseProperty=f,this.propertyName=a,this.type=c,this.sanitizeURL=_,this.removeEmptyString=A}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){j[a]=new w(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];j[c]=new w(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){j[a]=new w(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){j[a]=new w(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){j[a]=new w(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){j[a]=new w(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){j[a]=new w(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){j[a]=new w(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){j[a]=new w(a,5,!1,a.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function N(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(C,N);j[c]=new w(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(C,N);j[c]=new w(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(C,N);j[c]=new w(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){j[a]=new w(a,1,!1,a.toLowerCase(),null,!1,!1)}),j.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){j[a]=new w(a,1,!1,a.toLowerCase(),null,!0,!0)});function k(a,c,f,x){var S=j.hasOwnProperty(c)?j[c]:null;(S!==null?S.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(v(c,f,S,x)&&(f=null),x||S===null?g(c)&&(f===null?a.removeAttribute(c):a.setAttribute(c,""+f)):S.mustUseProperty?a[S.propertyName]=f===null?S.type===3?!1:"":f:(c=S.attributeName,x=S.attributeNamespace,f===null?a.removeAttribute(c):(S=S.type,f=S===3||S===4&&f===!0?"":""+f,x?a.setAttributeNS(x,c,f):a.setAttribute(c,f))))}var T=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),D=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),I=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),O=Symbol.iterator;function Z(a){return a===null||typeof a!="object"?null:(a=O&&a[O]||a["@@iterator"],typeof a=="function"?a:null)}var Q=Object.assign,W;function ae(a){if(W===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);W=c&&c[1]||""}return`
`+W+a}var q=!1;function ce(a,c){if(!a||q)return"";q=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(le){var x=le}Reflect.construct(a,[],c)}else{try{c.call()}catch(le){x=le}a.call(c.prototype)}else{try{throw Error()}catch(le){x=le}a()}}catch(le){if(le&&x&&typeof le.stack=="string"){for(var S=le.stack.split(`
`),_=x.stack.split(`
`),A=S.length-1,z=_.length-1;1<=A&&0<=z&&S[A]!==_[z];)z--;for(;1<=A&&0<=z;A--,z--)if(S[A]!==_[z]){if(A!==1||z!==1)do if(A--,z--,0>z||S[A]!==_[z]){var $=`
`+S[A].replace(" at new "," at ");return a.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",a.displayName)),$}while(1<=A&&0<=z);break}}}finally{q=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?ae(a):""}function we(a){switch(a.tag){case 5:return ae(a.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return a=ce(a.type,!1),a;case 11:return a=ce(a.type.render,!1),a;case 1:return a=ce(a.type,!0),a;default:return""}}function xe(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case M:return"Fragment";case D:return"Portal";case R:return"Profiler";case P:return"StrictMode";case L:return"Suspense";case X:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case I:return(a.displayName||"Context")+".Consumer";case F:return(a._context.displayName||"Context")+".Provider";case U:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case de:return c=a.displayName||null,c!==null?c:xe(a.type)||"Memo";case B:c=a._payload,a=a._init;try{return xe(a(c))}catch{}}return null}function se(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function K(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function fe(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ie(a){var c=fe(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),x=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,_=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return S.call(this)},set:function(A){x=""+A,_.call(this,A)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(A){x=""+A},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Te(a){a._valueTracker||(a._valueTracker=ie(a))}function pe(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),x="";return a&&(x=fe(a)?a.checked?"true":"false":a.value),a=x,a!==f?(c.setValue(a),!0):!1}function ue(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function re(a,c){var f=c.checked;return Q({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function J(a,c){var f=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;f=K(c.value!=null?c.value:f),a._wrapperState={initialChecked:x,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ge(a,c){c=c.checked,c!=null&&k(a,"checked",c,!1)}function oe(a,c){ge(a,c);var f=K(c.value),x=c.type;if(f!=null)x==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(x==="submit"||x==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?Re(a,c.type,f):c.hasOwnProperty("defaultValue")&&Re(a,c.type,K(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function ve(a,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,f||c===a.value||(a.value=c),a.defaultValue=c}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function Re(a,c,f){(c!=="number"||ue(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var De=Array.isArray;function Je(a,c,f,x){if(a=a.options,c){c={};for(var S=0;S<f.length;S++)c["$"+f[S]]=!0;for(f=0;f<a.length;f++)S=c.hasOwnProperty("$"+a[f].value),a[f].selected!==S&&(a[f].selected=S),S&&x&&(a[f].defaultSelected=!0)}else{for(f=""+K(f),c=null,S=0;S<a.length;S++){if(a[S].value===f){a[S].selected=!0,x&&(a[S].defaultSelected=!0);return}c!==null||a[S].disabled||(c=a[S])}c!==null&&(c.selected=!0)}}function He(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function he(a,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(t(92));if(De(f)){if(1<f.length)throw Error(t(93));f=f[0]}c=f}c==null&&(c=""),f=c}a._wrapperState={initialValue:K(f)}}function Ge(a,c){var f=K(c.value),x=K(c.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),c.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),x!=null&&(a.defaultValue=""+x)}function st(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function lt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?lt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var kr,$s=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,x,S){MSApp.execUnsafeLocalFunction(function(){return a(c,f,x,S)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(kr=kr||document.createElement("div"),kr.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=kr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Pt(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];Object.keys(hr).forEach(function(a){me.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),hr[c]=hr[a]})});function _e(a,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||hr.hasOwnProperty(a)&&hr[a]?(""+c).trim():c+"px"}function Ce(a,c){a=a.style;for(var f in c)if(c.hasOwnProperty(f)){var x=f.indexOf("--")===0,S=_e(f,c[f],x);f==="float"&&(f="cssFloat"),x?a.setProperty(f,S):a[f]=S}}var Ee=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function We(a,c){if(c){if(Ee[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function Uo(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $o=null;function ns(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ka=null,Kn=null,Sn=null;function qa(a){if(a=gl(a)){if(typeof Ka!="function")throw Error(t(280));var c=a.stateNode;c&&(c=od(c),Ka(a.stateNode,a.type,c))}}function qe(a){Kn?Sn?Sn.push(a):Sn=[a]:Kn=a}function Rt(){if(Kn){var a=Kn,c=Sn;if(Sn=Kn=null,qa(a),c)for(a=0;a<c.length;a++)qa(c[a])}}function Kt(a,c){return a(c)}function fr(){}var qn=!1;function Ut(a,c,f){if(qn)return a(c,f);qn=!0;try{return Kt(a,c,f)}finally{qn=!1,(Kn!==null||Sn!==null)&&(fr(),Rt())}}function rr(a,c){var f=a.stateNode;if(f===null)return null;var x=od(f);if(x===null)return null;f=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(a=a.type,x=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!x;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,c,typeof f));return f}var Zn=!1;if(d)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{Zn=!1}function Xr(a,c,f,x,S,_,A,z,$){var le=Array.prototype.slice.call(arguments,3);try{c.apply(f,le)}catch(be){this.onError(be)}}var Jn=!1,os=null,Za=!1,kf=null,R_={onError:function(a){Jn=!0,os=a}};function O_(a,c,f,x,S,_,A,z,$){Jn=!1,os=null,Xr.apply(R_,arguments)}function F_(a,c,f,x,S,_,A,z,$){if(O_.apply(this,arguments),Jn){if(Jn){var le=os;Jn=!1,os=null}else throw Error(t(198));Za||(Za=!0,kf=le)}}function Go(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function py(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function my(a){if(Go(a)!==a)throw Error(t(188))}function L_(a){var c=a.alternate;if(!c){if(c=Go(a),c===null)throw Error(t(188));return c!==a?null:a}for(var f=a,x=c;;){var S=f.return;if(S===null)break;var _=S.alternate;if(_===null){if(x=S.return,x!==null){f=x;continue}break}if(S.child===_.child){for(_=S.child;_;){if(_===f)return my(S),a;if(_===x)return my(S),c;_=_.sibling}throw Error(t(188))}if(f.return!==x.return)f=S,x=_;else{for(var A=!1,z=S.child;z;){if(z===f){A=!0,f=S,x=_;break}if(z===x){A=!0,x=S,f=_;break}z=z.sibling}if(!A){for(z=_.child;z;){if(z===f){A=!0,f=_,x=S;break}if(z===x){A=!0,x=_,f=S;break}z=z.sibling}if(!A)throw Error(t(189))}}if(f.alternate!==x)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:c}function gy(a){return a=L_(a),a!==null?xy(a):null}function xy(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=xy(a);if(c!==null)return c;a=a.sibling}return null}var yy=e.unstable_scheduleCallback,vy=e.unstable_cancelCallback,z_=e.unstable_shouldYield,I_=e.unstable_requestPaint,Ot=e.unstable_now,B_=e.unstable_getCurrentPriorityLevel,jf=e.unstable_ImmediatePriority,by=e.unstable_UserBlockingPriority,Ic=e.unstable_NormalPriority,V_=e.unstable_LowPriority,wy=e.unstable_IdlePriority,Bc=null,Gs=null;function W_(a){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Bc,a,void 0,(a.current.flags&128)===128)}catch{}}var Ns=Math.clz32?Math.clz32:$_,H_=Math.log,U_=Math.LN2;function $_(a){return a>>>=0,a===0?32:31-(H_(a)/U_|0)|0}var Vc=64,Wc=4194304;function Ja(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Hc(a,c){var f=a.pendingLanes;if(f===0)return 0;var x=0,S=a.suspendedLanes,_=a.pingedLanes,A=f&268435455;if(A!==0){var z=A&~S;z!==0?x=Ja(z):(_&=A,_!==0&&(x=Ja(_)))}else A=f&~S,A!==0?x=Ja(A):_!==0&&(x=Ja(_));if(x===0)return 0;if(c!==0&&c!==x&&(c&S)===0&&(S=x&-x,_=c&-c,S>=_||S===16&&(_&4194240)!==0))return c;if((x&4)!==0&&(x|=f&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=x;0<c;)f=31-Ns(c),S=1<<f,x|=a[f],c&=~S;return x}function G_(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y_(a,c){for(var f=a.suspendedLanes,x=a.pingedLanes,S=a.expirationTimes,_=a.pendingLanes;0<_;){var A=31-Ns(_),z=1<<A,$=S[A];$===-1?((z&f)===0||(z&x)!==0)&&(S[A]=G_(z,c)):$<=c&&(a.expiredLanes|=z),_&=~z}}function Nf(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Sy(){var a=Vc;return Vc<<=1,(Vc&4194240)===0&&(Vc=64),a}function Tf(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function Qa(a,c,f){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Ns(c),a[c]=f}function X_(a,c){var f=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var x=a.eventTimes;for(a=a.expirationTimes;0<f;){var S=31-Ns(f),_=1<<S;c[S]=0,x[S]=-1,a[S]=-1,f&=~_}}function _f(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var x=31-Ns(f),S=1<<x;S&c|a[x]&c&&(a[x]|=c),f&=~S}}var ut=0;function Cy(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var ky,Mf,jy,Ny,Ty,Ef=!1,Uc=[],Qn=null,eo=null,to=null,el=new Map,tl=new Map,ro=[],K_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _y(a,c){switch(a){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":el.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(c.pointerId)}}function rl(a,c,f,x,S,_){return a===null||a.nativeEvent!==_?(a={blockedOn:c,domEventName:f,eventSystemFlags:x,nativeEvent:_,targetContainers:[S]},c!==null&&(c=gl(c),c!==null&&Mf(c)),a):(a.eventSystemFlags|=x,c=a.targetContainers,S!==null&&c.indexOf(S)===-1&&c.push(S),a)}function q_(a,c,f,x,S){switch(c){case"focusin":return Qn=rl(Qn,a,c,f,x,S),!0;case"dragenter":return eo=rl(eo,a,c,f,x,S),!0;case"mouseover":return to=rl(to,a,c,f,x,S),!0;case"pointerover":var _=S.pointerId;return el.set(_,rl(el.get(_)||null,a,c,f,x,S)),!0;case"gotpointercapture":return _=S.pointerId,tl.set(_,rl(tl.get(_)||null,a,c,f,x,S)),!0}return!1}function My(a){var c=Yo(a.target);if(c!==null){var f=Go(c);if(f!==null){if(c=f.tag,c===13){if(c=py(f),c!==null){a.blockedOn=c,Ty(a.priority,function(){jy(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function $c(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Df(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var x=new f.constructor(f.type,f);$o=x,f.target.dispatchEvent(x),$o=null}else return c=gl(f),c!==null&&Mf(c),a.blockedOn=f,!1;c.shift()}return!0}function Ey(a,c,f){$c(a)&&f.delete(c)}function Z_(){Ef=!1,Qn!==null&&$c(Qn)&&(Qn=null),eo!==null&&$c(eo)&&(eo=null),to!==null&&$c(to)&&(to=null),el.forEach(Ey),tl.forEach(Ey)}function sl(a,c){a.blockedOn===c&&(a.blockedOn=null,Ef||(Ef=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Z_)))}function nl(a){function c(S){return sl(S,a)}if(0<Uc.length){sl(Uc[0],a);for(var f=1;f<Uc.length;f++){var x=Uc[f];x.blockedOn===a&&(x.blockedOn=null)}}for(Qn!==null&&sl(Qn,a),eo!==null&&sl(eo,a),to!==null&&sl(to,a),el.forEach(c),tl.forEach(c),f=0;f<ro.length;f++)x=ro[f],x.blockedOn===a&&(x.blockedOn=null);for(;0<ro.length&&(f=ro[0],f.blockedOn===null);)My(f),f.blockedOn===null&&ro.shift()}var _i=T.ReactCurrentBatchConfig,Gc=!0;function J_(a,c,f,x){var S=ut,_=_i.transition;_i.transition=null;try{ut=1,Pf(a,c,f,x)}finally{ut=S,_i.transition=_}}function Q_(a,c,f,x){var S=ut,_=_i.transition;_i.transition=null;try{ut=4,Pf(a,c,f,x)}finally{ut=S,_i.transition=_}}function Pf(a,c,f,x){if(Gc){var S=Df(a,c,f,x);if(S===null)Kf(a,c,x,Yc,f),_y(a,x);else if(q_(S,a,c,f,x))x.stopPropagation();else if(_y(a,x),c&4&&-1<K_.indexOf(a)){for(;S!==null;){var _=gl(S);if(_!==null&&ky(_),_=Df(a,c,f,x),_===null&&Kf(a,c,x,Yc,f),_===S)break;S=_}S!==null&&x.stopPropagation()}else Kf(a,c,x,null,f)}}var Yc=null;function Df(a,c,f,x){if(Yc=null,a=ns(x),a=Yo(a),a!==null)if(c=Go(a),c===null)a=null;else if(f=c.tag,f===13){if(a=py(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return Yc=a,null}function Py(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B_()){case jf:return 1;case by:return 4;case Ic:case V_:return 16;case wy:return 536870912;default:return 16}default:return 16}}var so=null,Af=null,Xc=null;function Dy(){if(Xc)return Xc;var a,c=Af,f=c.length,x,S="value"in so?so.value:so.textContent,_=S.length;for(a=0;a<f&&c[a]===S[a];a++);var A=f-a;for(x=1;x<=A&&c[f-x]===S[_-x];x++);return Xc=S.slice(a,1<x?1-x:void 0)}function Kc(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function qc(){return!0}function Ay(){return!1}function Kr(a){function c(f,x,S,_,A){this._reactName=f,this._targetInst=S,this.type=x,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var z in a)a.hasOwnProperty(z)&&(f=a[z],this[z]=f?f(_):_[z]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?qc:Ay,this.isPropagationStopped=Ay,this}return Q(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),c}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rf=Kr(Mi),ol=Q({},Mi,{view:0,detail:0}),e5=Kr(ol),Of,Ff,il,Zc=Q({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==il&&(il&&a.type==="mousemove"?(Of=a.screenX-il.screenX,Ff=a.screenY-il.screenY):Ff=Of=0,il=a),Of)},movementY:function(a){return"movementY"in a?a.movementY:Ff}}),Ry=Kr(Zc),t5=Q({},Zc,{dataTransfer:0}),r5=Kr(t5),s5=Q({},ol,{relatedTarget:0}),Lf=Kr(s5),n5=Q({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),o5=Kr(n5),i5=Q({},Mi,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),a5=Kr(i5),l5=Q({},Mi,{data:0}),Oy=Kr(l5),c5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h5(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=u5[a])?!!c[a]:!1}function zf(){return h5}var f5=Q({},ol,{key:function(a){if(a.key){var c=c5[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Kc(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?d5[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zf,charCode:function(a){return a.type==="keypress"?Kc(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Kc(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),p5=Kr(f5),m5=Q({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fy=Kr(m5),g5=Q({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zf}),x5=Kr(g5),y5=Q({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),v5=Kr(y5),b5=Q({},Zc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),w5=Kr(b5),S5=[9,13,27,32],If=d&&"CompositionEvent"in window,al=null;d&&"documentMode"in document&&(al=document.documentMode);var C5=d&&"TextEvent"in window&&!al,Ly=d&&(!If||al&&8<al&&11>=al),zy=" ",Iy=!1;function By(a,c){switch(a){case"keyup":return S5.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vy(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ei=!1;function k5(a,c){switch(a){case"compositionend":return Vy(c);case"keypress":return c.which!==32?null:(Iy=!0,zy);case"textInput":return a=c.data,a===zy&&Iy?null:a;default:return null}}function j5(a,c){if(Ei)return a==="compositionend"||!If&&By(a,c)?(a=Dy(),Xc=Af=so=null,Ei=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ly&&c.locale!=="ko"?null:c.data;default:return null}}var N5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wy(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!N5[a.type]:c==="textarea"}function Hy(a,c,f,x){qe(x),c=rd(c,"onChange"),0<c.length&&(f=new Rf("onChange","change",null,f,x),a.push({event:f,listeners:c}))}var ll=null,cl=null;function T5(a){av(a,0)}function Jc(a){var c=Oi(a);if(pe(c))return a}function _5(a,c){if(a==="change")return c}var Uy=!1;if(d){var Bf;if(d){var Vf="oninput"in document;if(!Vf){var $y=document.createElement("div");$y.setAttribute("oninput","return;"),Vf=typeof $y.oninput=="function"}Bf=Vf}else Bf=!1;Uy=Bf&&(!document.documentMode||9<document.documentMode)}function Gy(){ll&&(ll.detachEvent("onpropertychange",Yy),cl=ll=null)}function Yy(a){if(a.propertyName==="value"&&Jc(cl)){var c=[];Hy(c,cl,a,ns(a)),Ut(T5,c)}}function M5(a,c,f){a==="focusin"?(Gy(),ll=c,cl=f,ll.attachEvent("onpropertychange",Yy)):a==="focusout"&&Gy()}function E5(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Jc(cl)}function P5(a,c){if(a==="click")return Jc(c)}function D5(a,c){if(a==="input"||a==="change")return Jc(c)}function A5(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Ts=typeof Object.is=="function"?Object.is:A5;function dl(a,c){if(Ts(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),x=Object.keys(c);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var S=f[x];if(!u.call(c,S)||!Ts(a[S],c[S]))return!1}return!0}function Xy(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ky(a,c){var f=Xy(a);a=0;for(var x;f;){if(f.nodeType===3){if(x=a+f.textContent.length,a<=c&&x>=c)return{node:f,offset:c-a};a=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Xy(f)}}function qy(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?qy(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Zy(){for(var a=window,c=ue();c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=ue(a.document)}return c}function Wf(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function R5(a){var c=Zy(),f=a.focusedElem,x=a.selectionRange;if(c!==f&&f&&f.ownerDocument&&qy(f.ownerDocument.documentElement,f)){if(x!==null&&Wf(f)){if(c=x.start,a=x.end,a===void 0&&(a=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(a,f.value.length);else if(a=(c=f.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var S=f.textContent.length,_=Math.min(x.start,S);x=x.end===void 0?_:Math.min(x.end,S),!a.extend&&_>x&&(S=x,x=_,_=S),S=Ky(f,_);var A=Ky(f,x);S&&A&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==A.node||a.focusOffset!==A.offset)&&(c=c.createRange(),c.setStart(S.node,S.offset),a.removeAllRanges(),_>x?(a.addRange(c),a.extend(A.node,A.offset)):(c.setEnd(A.node,A.offset),a.addRange(c)))}}for(c=[],a=f;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)a=c[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var O5=d&&"documentMode"in document&&11>=document.documentMode,Pi=null,Hf=null,ul=null,Uf=!1;function Jy(a,c,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Uf||Pi==null||Pi!==ue(x)||(x=Pi,"selectionStart"in x&&Wf(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),ul&&dl(ul,x)||(ul=x,x=rd(Hf,"onSelect"),0<x.length&&(c=new Rf("onSelect","select",null,c,f),a.push({event:c,listeners:x}),c.target=Pi)))}function Qc(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var Di={animationend:Qc("Animation","AnimationEnd"),animationiteration:Qc("Animation","AnimationIteration"),animationstart:Qc("Animation","AnimationStart"),transitionend:Qc("Transition","TransitionEnd")},$f={},Qy={};d&&(Qy=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);function ed(a){if($f[a])return $f[a];if(!Di[a])return a;var c=Di[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in Qy)return $f[a]=c[f];return a}var ev=ed("animationend"),tv=ed("animationiteration"),rv=ed("animationstart"),sv=ed("transitionend"),nv=new Map,ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function no(a,c){nv.set(a,c),i(c,[a])}for(var Gf=0;Gf<ov.length;Gf++){var Yf=ov[Gf],F5=Yf.toLowerCase(),L5=Yf[0].toUpperCase()+Yf.slice(1);no(F5,"on"+L5)}no(ev,"onAnimationEnd"),no(tv,"onAnimationIteration"),no(rv,"onAnimationStart"),no("dblclick","onDoubleClick"),no("focusin","onFocus"),no("focusout","onBlur"),no(sv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z5=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function iv(a,c,f){var x=a.type||"unknown-event";a.currentTarget=f,F_(x,c,void 0,a),a.currentTarget=null}function av(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var x=a[f],S=x.event;x=x.listeners;e:{var _=void 0;if(c)for(var A=x.length-1;0<=A;A--){var z=x[A],$=z.instance,le=z.currentTarget;if(z=z.listener,$!==_&&S.isPropagationStopped())break e;iv(S,z,le),_=$}else for(A=0;A<x.length;A++){if(z=x[A],$=z.instance,le=z.currentTarget,z=z.listener,$!==_&&S.isPropagationStopped())break e;iv(S,z,le),_=$}}}if(Za)throw a=kf,Za=!1,kf=null,a}function gt(a,c){var f=c[tp];f===void 0&&(f=c[tp]=new Set);var x=a+"__bubble";f.has(x)||(lv(c,a,2,!1),f.add(x))}function Xf(a,c,f){var x=0;c&&(x|=4),lv(f,a,x,c)}var td="_reactListening"+Math.random().toString(36).slice(2);function fl(a){if(!a[td]){a[td]=!0,s.forEach(function(f){f!=="selectionchange"&&(z5.has(f)||Xf(f,!1,a),Xf(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[td]||(c[td]=!0,Xf("selectionchange",!1,c))}}function lv(a,c,f,x){switch(Py(c)){case 1:var S=J_;break;case 4:S=Q_;break;default:S=Pf}f=S.bind(null,c,f,a),S=void 0,!Zn||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(S=!0),x?S!==void 0?a.addEventListener(c,f,{capture:!0,passive:S}):a.addEventListener(c,f,!0):S!==void 0?a.addEventListener(c,f,{passive:S}):a.addEventListener(c,f,!1)}function Kf(a,c,f,x,S){var _=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var A=x.tag;if(A===3||A===4){var z=x.stateNode.containerInfo;if(z===S||z.nodeType===8&&z.parentNode===S)break;if(A===4)for(A=x.return;A!==null;){var $=A.tag;if(($===3||$===4)&&($=A.stateNode.containerInfo,$===S||$.nodeType===8&&$.parentNode===S))return;A=A.return}for(;z!==null;){if(A=Yo(z),A===null)return;if($=A.tag,$===5||$===6){x=_=A;continue e}z=z.parentNode}}x=x.return}Ut(function(){var le=_,be=ns(f),ke=[];e:{var ye=nv.get(a);if(ye!==void 0){var Ae=Rf,Le=a;switch(a){case"keypress":if(Kc(f)===0)break e;case"keydown":case"keyup":Ae=p5;break;case"focusin":Le="focus",Ae=Lf;break;case"focusout":Le="blur",Ae=Lf;break;case"beforeblur":case"afterblur":Ae=Lf;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Ry;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=r5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=x5;break;case ev:case tv:case rv:Ae=o5;break;case sv:Ae=v5;break;case"scroll":Ae=e5;break;case"wheel":Ae=w5;break;case"copy":case"cut":case"paste":Ae=a5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=Fy}var Be=(c&4)!==0,Ft=!Be&&a==="scroll",ee=Be?ye!==null?ye+"Capture":null:ye;Be=[];for(var Y=le,te;Y!==null;){te=Y;var Me=te.stateNode;if(te.tag===5&&Me!==null&&(te=Me,ee!==null&&(Me=rr(Y,ee),Me!=null&&Be.push(pl(Y,Me,te)))),Ft)break;Y=Y.return}0<Be.length&&(ye=new Ae(ye,Le,null,f,be),ke.push({event:ye,listeners:Be}))}}if((c&7)===0){e:{if(ye=a==="mouseover"||a==="pointerover",Ae=a==="mouseout"||a==="pointerout",ye&&f!==$o&&(Le=f.relatedTarget||f.fromElement)&&(Yo(Le)||Le[Cn]))break e;if((Ae||ye)&&(ye=be.window===be?be:(ye=be.ownerDocument)?ye.defaultView||ye.parentWindow:window,Ae?(Le=f.relatedTarget||f.toElement,Ae=le,Le=Le?Yo(Le):null,Le!==null&&(Ft=Go(Le),Le!==Ft||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Ae=null,Le=le),Ae!==Le)){if(Be=Ry,Me="onMouseLeave",ee="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Be=Fy,Me="onPointerLeave",ee="onPointerEnter",Y="pointer"),Ft=Ae==null?ye:Oi(Ae),te=Le==null?ye:Oi(Le),ye=new Be(Me,Y+"leave",Ae,f,be),ye.target=Ft,ye.relatedTarget=te,Me=null,Yo(be)===le&&(Be=new Be(ee,Y+"enter",Le,f,be),Be.target=te,Be.relatedTarget=Ft,Me=Be),Ft=Me,Ae&&Le)t:{for(Be=Ae,ee=Le,Y=0,te=Be;te;te=Ai(te))Y++;for(te=0,Me=ee;Me;Me=Ai(Me))te++;for(;0<Y-te;)Be=Ai(Be),Y--;for(;0<te-Y;)ee=Ai(ee),te--;for(;Y--;){if(Be===ee||ee!==null&&Be===ee.alternate)break t;Be=Ai(Be),ee=Ai(ee)}Be=null}else Be=null;Ae!==null&&cv(ke,ye,Ae,Be,!1),Le!==null&&Ft!==null&&cv(ke,Ft,Le,Be,!0)}}e:{if(ye=le?Oi(le):window,Ae=ye.nodeName&&ye.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&ye.type==="file")var Ve=_5;else if(Wy(ye))if(Uy)Ve=D5;else{Ve=E5;var Ue=M5}else(Ae=ye.nodeName)&&Ae.toLowerCase()==="input"&&(ye.type==="checkbox"||ye.type==="radio")&&(Ve=P5);if(Ve&&(Ve=Ve(a,le))){Hy(ke,Ve,f,be);break e}Ue&&Ue(a,ye,le),a==="focusout"&&(Ue=ye._wrapperState)&&Ue.controlled&&ye.type==="number"&&Re(ye,"number",ye.value)}switch(Ue=le?Oi(le):window,a){case"focusin":(Wy(Ue)||Ue.contentEditable==="true")&&(Pi=Ue,Hf=le,ul=null);break;case"focusout":ul=Hf=Pi=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,Jy(ke,f,be);break;case"selectionchange":if(O5)break;case"keydown":case"keyup":Jy(ke,f,be)}var $e;if(If)e:{switch(a){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Ei?By(a,f)&&(Ke="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Ke="onCompositionStart");Ke&&(Ly&&f.locale!=="ko"&&(Ei||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Ei&&($e=Dy()):(so=be,Af="value"in so?so.value:so.textContent,Ei=!0)),Ue=rd(le,Ke),0<Ue.length&&(Ke=new Oy(Ke,a,null,f,be),ke.push({event:Ke,listeners:Ue}),$e?Ke.data=$e:($e=Vy(f),$e!==null&&(Ke.data=$e)))),($e=C5?k5(a,f):j5(a,f))&&(le=rd(le,"onBeforeInput"),0<le.length&&(be=new Oy("onBeforeInput","beforeinput",null,f,be),ke.push({event:be,listeners:le}),be.data=$e))}av(ke,c)})}function pl(a,c,f){return{instance:a,listener:c,currentTarget:f}}function rd(a,c){for(var f=c+"Capture",x=[];a!==null;){var S=a,_=S.stateNode;S.tag===5&&_!==null&&(S=_,_=rr(a,f),_!=null&&x.unshift(pl(a,_,S)),_=rr(a,c),_!=null&&x.push(pl(a,_,S))),a=a.return}return x}function Ai(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function cv(a,c,f,x,S){for(var _=c._reactName,A=[];f!==null&&f!==x;){var z=f,$=z.alternate,le=z.stateNode;if($!==null&&$===x)break;z.tag===5&&le!==null&&(z=le,S?($=rr(f,_),$!=null&&A.unshift(pl(f,$,z))):S||($=rr(f,_),$!=null&&A.push(pl(f,$,z)))),f=f.return}A.length!==0&&a.push({event:c,listeners:A})}var I5=/\r\n?/g,B5=/\u0000|\uFFFD/g;function dv(a){return(typeof a=="string"?a:""+a).replace(I5,`
`).replace(B5,"")}function sd(a,c,f){if(c=dv(c),dv(a)!==c&&f)throw Error(t(425))}function nd(){}var qf=null,Zf=null;function Jf(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Qf=typeof setTimeout=="function"?setTimeout:void 0,V5=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,W5=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(a){return uv.resolve(null).then(a).catch(H5)}:Qf;function H5(a){setTimeout(function(){throw a})}function ep(a,c){var f=c,x=0;do{var S=f.nextSibling;if(a.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(x===0){a.removeChild(S),nl(c);return}x--}else f!=="$"&&f!=="$?"&&f!=="$!"||x++;f=S}while(f);nl(c)}function oo(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function hv(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}var Ri=Math.random().toString(36).slice(2),Ys="__reactFiber$"+Ri,ml="__reactProps$"+Ri,Cn="__reactContainer$"+Ri,tp="__reactEvents$"+Ri,U5="__reactListeners$"+Ri,$5="__reactHandles$"+Ri;function Yo(a){var c=a[Ys];if(c)return c;for(var f=a.parentNode;f;){if(c=f[Cn]||f[Ys]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=hv(a);a!==null;){if(f=a[Ys])return f;a=hv(a)}return c}a=f,f=a.parentNode}return null}function gl(a){return a=a[Ys]||a[Cn],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Oi(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function od(a){return a[ml]||null}var rp=[],Fi=-1;function io(a){return{current:a}}function xt(a){0>Fi||(a.current=rp[Fi],rp[Fi]=null,Fi--)}function pt(a,c){Fi++,rp[Fi]=a.current,a.current=c}var ao={},pr=io(ao),Ar=io(!1),Xo=ao;function Li(a,c){var f=a.type.contextTypes;if(!f)return ao;var x=a.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var S={},_;for(_ in f)S[_]=c[_];return x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=S),S}function Rr(a){return a=a.childContextTypes,a!=null}function id(){xt(Ar),xt(pr)}function fv(a,c,f){if(pr.current!==ao)throw Error(t(168));pt(pr,c),pt(Ar,f)}function pv(a,c,f){var x=a.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return f;x=x.getChildContext();for(var S in x)if(!(S in c))throw Error(t(108,se(a)||"Unknown",S));return Q({},f,x)}function ad(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ao,Xo=pr.current,pt(pr,a),pt(Ar,Ar.current),!0}function mv(a,c,f){var x=a.stateNode;if(!x)throw Error(t(169));f?(a=pv(a,c,Xo),x.__reactInternalMemoizedMergedChildContext=a,xt(Ar),xt(pr),pt(pr,a)):xt(Ar),pt(Ar,f)}var kn=null,ld=!1,sp=!1;function gv(a){kn===null?kn=[a]:kn.push(a)}function G5(a){ld=!0,gv(a)}function lo(){if(!sp&&kn!==null){sp=!0;var a=0,c=ut;try{var f=kn;for(ut=1;a<f.length;a++){var x=f[a];do x=x(!0);while(x!==null)}kn=null,ld=!1}catch(S){throw kn!==null&&(kn=kn.slice(a+1)),yy(jf,lo),S}finally{ut=c,sp=!1}}return null}var zi=[],Ii=0,cd=null,dd=0,is=[],as=0,Ko=null,jn=1,Nn="";function qo(a,c){zi[Ii++]=dd,zi[Ii++]=cd,cd=a,dd=c}function xv(a,c,f){is[as++]=jn,is[as++]=Nn,is[as++]=Ko,Ko=a;var x=jn;a=Nn;var S=32-Ns(x)-1;x&=~(1<<S),f+=1;var _=32-Ns(c)+S;if(30<_){var A=S-S%5;_=(x&(1<<A)-1).toString(32),x>>=A,S-=A,jn=1<<32-Ns(c)+S|f<<S|x,Nn=_+a}else jn=1<<_|f<<S|x,Nn=a}function np(a){a.return!==null&&(qo(a,1),xv(a,1,0))}function op(a){for(;a===cd;)cd=zi[--Ii],zi[Ii]=null,dd=zi[--Ii],zi[Ii]=null;for(;a===Ko;)Ko=is[--as],is[as]=null,Nn=is[--as],is[as]=null,jn=is[--as],is[as]=null}var qr=null,Zr=null,vt=!1,_s=null;function yv(a,c){var f=us(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=a,c=a.deletions,c===null?(a.deletions=[f],a.flags|=16):c.push(f)}function vv(a,c){switch(a.tag){case 5:var f=a.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,qr=a,Zr=oo(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,qr=a,Zr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=Ko!==null?{id:jn,overflow:Nn}:null,a.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=us(18,null,null,0),f.stateNode=c,f.return=a,a.child=f,qr=a,Zr=null,!0):!1;default:return!1}}function ip(a){return(a.mode&1)!==0&&(a.flags&128)===0}function ap(a){if(vt){var c=Zr;if(c){var f=c;if(!vv(a,c)){if(ip(a))throw Error(t(418));c=oo(f.nextSibling);var x=qr;c&&vv(a,c)?yv(x,f):(a.flags=a.flags&-4097|2,vt=!1,qr=a)}}else{if(ip(a))throw Error(t(418));a.flags=a.flags&-4097|2,vt=!1,qr=a}}}function bv(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;qr=a}function ud(a){if(a!==qr)return!1;if(!vt)return bv(a),vt=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Jf(a.type,a.memoizedProps)),c&&(c=Zr)){if(ip(a))throw wv(),Error(t(418));for(;c;)yv(a,c),c=oo(c.nextSibling)}if(bv(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(c===0){Zr=oo(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}a=a.nextSibling}Zr=null}}else Zr=qr?oo(a.stateNode.nextSibling):null;return!0}function wv(){for(var a=Zr;a;)a=oo(a.nextSibling)}function Bi(){Zr=qr=null,vt=!1}function lp(a){_s===null?_s=[a]:_s.push(a)}var Y5=T.ReactCurrentBatchConfig;function xl(a,c,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var x=f.stateNode}if(!x)throw Error(t(147,a));var S=x,_=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===_?c.ref:(c=function(A){var z=S.refs;A===null?delete z[_]:z[_]=A},c._stringRef=_,c)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function hd(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function Sv(a){var c=a._init;return c(a._payload)}function Cv(a){function c(ee,Y){if(a){var te=ee.deletions;te===null?(ee.deletions=[Y],ee.flags|=16):te.push(Y)}}function f(ee,Y){if(!a)return null;for(;Y!==null;)c(ee,Y),Y=Y.sibling;return null}function x(ee,Y){for(ee=new Map;Y!==null;)Y.key!==null?ee.set(Y.key,Y):ee.set(Y.index,Y),Y=Y.sibling;return ee}function S(ee,Y){return ee=xo(ee,Y),ee.index=0,ee.sibling=null,ee}function _(ee,Y,te){return ee.index=te,a?(te=ee.alternate,te!==null?(te=te.index,te<Y?(ee.flags|=2,Y):te):(ee.flags|=2,Y)):(ee.flags|=1048576,Y)}function A(ee){return a&&ee.alternate===null&&(ee.flags|=2),ee}function z(ee,Y,te,Me){return Y===null||Y.tag!==6?(Y=Qp(te,ee.mode,Me),Y.return=ee,Y):(Y=S(Y,te),Y.return=ee,Y)}function $(ee,Y,te,Me){var Ve=te.type;return Ve===M?be(ee,Y,te.props.children,Me,te.key):Y!==null&&(Y.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===B&&Sv(Ve)===Y.type)?(Me=S(Y,te.props),Me.ref=xl(ee,Y,te),Me.return=ee,Me):(Me=Fd(te.type,te.key,te.props,null,ee.mode,Me),Me.ref=xl(ee,Y,te),Me.return=ee,Me)}function le(ee,Y,te,Me){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==te.containerInfo||Y.stateNode.implementation!==te.implementation?(Y=em(te,ee.mode,Me),Y.return=ee,Y):(Y=S(Y,te.children||[]),Y.return=ee,Y)}function be(ee,Y,te,Me,Ve){return Y===null||Y.tag!==7?(Y=ni(te,ee.mode,Me,Ve),Y.return=ee,Y):(Y=S(Y,te),Y.return=ee,Y)}function ke(ee,Y,te){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=Qp(""+Y,ee.mode,te),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return te=Fd(Y.type,Y.key,Y.props,null,ee.mode,te),te.ref=xl(ee,null,Y),te.return=ee,te;case D:return Y=em(Y,ee.mode,te),Y.return=ee,Y;case B:var Me=Y._init;return ke(ee,Me(Y._payload),te)}if(De(Y)||Z(Y))return Y=ni(Y,ee.mode,te,null),Y.return=ee,Y;hd(ee,Y)}return null}function ye(ee,Y,te,Me){var Ve=Y!==null?Y.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Ve!==null?null:z(ee,Y,""+te,Me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case E:return te.key===Ve?$(ee,Y,te,Me):null;case D:return te.key===Ve?le(ee,Y,te,Me):null;case B:return Ve=te._init,ye(ee,Y,Ve(te._payload),Me)}if(De(te)||Z(te))return Ve!==null?null:be(ee,Y,te,Me,null);hd(ee,te)}return null}function Ae(ee,Y,te,Me,Ve){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return ee=ee.get(te)||null,z(Y,ee,""+Me,Ve);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case E:return ee=ee.get(Me.key===null?te:Me.key)||null,$(Y,ee,Me,Ve);case D:return ee=ee.get(Me.key===null?te:Me.key)||null,le(Y,ee,Me,Ve);case B:var Ue=Me._init;return Ae(ee,Y,te,Ue(Me._payload),Ve)}if(De(Me)||Z(Me))return ee=ee.get(te)||null,be(Y,ee,Me,Ve,null);hd(Y,Me)}return null}function Le(ee,Y,te,Me){for(var Ve=null,Ue=null,$e=Y,Ke=Y=0,or=null;$e!==null&&Ke<te.length;Ke++){$e.index>Ke?(or=$e,$e=null):or=$e.sibling;var at=ye(ee,$e,te[Ke],Me);if(at===null){$e===null&&($e=or);break}a&&$e&&at.alternate===null&&c(ee,$e),Y=_(at,Y,Ke),Ue===null?Ve=at:Ue.sibling=at,Ue=at,$e=or}if(Ke===te.length)return f(ee,$e),vt&&qo(ee,Ke),Ve;if($e===null){for(;Ke<te.length;Ke++)$e=ke(ee,te[Ke],Me),$e!==null&&(Y=_($e,Y,Ke),Ue===null?Ve=$e:Ue.sibling=$e,Ue=$e);return vt&&qo(ee,Ke),Ve}for($e=x(ee,$e);Ke<te.length;Ke++)or=Ae($e,ee,Ke,te[Ke],Me),or!==null&&(a&&or.alternate!==null&&$e.delete(or.key===null?Ke:or.key),Y=_(or,Y,Ke),Ue===null?Ve=or:Ue.sibling=or,Ue=or);return a&&$e.forEach(function(yo){return c(ee,yo)}),vt&&qo(ee,Ke),Ve}function Be(ee,Y,te,Me){var Ve=Z(te);if(typeof Ve!="function")throw Error(t(150));if(te=Ve.call(te),te==null)throw Error(t(151));for(var Ue=Ve=null,$e=Y,Ke=Y=0,or=null,at=te.next();$e!==null&&!at.done;Ke++,at=te.next()){$e.index>Ke?(or=$e,$e=null):or=$e.sibling;var yo=ye(ee,$e,at.value,Me);if(yo===null){$e===null&&($e=or);break}a&&$e&&yo.alternate===null&&c(ee,$e),Y=_(yo,Y,Ke),Ue===null?Ve=yo:Ue.sibling=yo,Ue=yo,$e=or}if(at.done)return f(ee,$e),vt&&qo(ee,Ke),Ve;if($e===null){for(;!at.done;Ke++,at=te.next())at=ke(ee,at.value,Me),at!==null&&(Y=_(at,Y,Ke),Ue===null?Ve=at:Ue.sibling=at,Ue=at);return vt&&qo(ee,Ke),Ve}for($e=x(ee,$e);!at.done;Ke++,at=te.next())at=Ae($e,ee,Ke,at.value,Me),at!==null&&(a&&at.alternate!==null&&$e.delete(at.key===null?Ke:at.key),Y=_(at,Y,Ke),Ue===null?Ve=at:Ue.sibling=at,Ue=at);return a&&$e.forEach(function(NM){return c(ee,NM)}),vt&&qo(ee,Ke),Ve}function Ft(ee,Y,te,Me){if(typeof te=="object"&&te!==null&&te.type===M&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case E:e:{for(var Ve=te.key,Ue=Y;Ue!==null;){if(Ue.key===Ve){if(Ve=te.type,Ve===M){if(Ue.tag===7){f(ee,Ue.sibling),Y=S(Ue,te.props.children),Y.return=ee,ee=Y;break e}}else if(Ue.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===B&&Sv(Ve)===Ue.type){f(ee,Ue.sibling),Y=S(Ue,te.props),Y.ref=xl(ee,Ue,te),Y.return=ee,ee=Y;break e}f(ee,Ue);break}else c(ee,Ue);Ue=Ue.sibling}te.type===M?(Y=ni(te.props.children,ee.mode,Me,te.key),Y.return=ee,ee=Y):(Me=Fd(te.type,te.key,te.props,null,ee.mode,Me),Me.ref=xl(ee,Y,te),Me.return=ee,ee=Me)}return A(ee);case D:e:{for(Ue=te.key;Y!==null;){if(Y.key===Ue)if(Y.tag===4&&Y.stateNode.containerInfo===te.containerInfo&&Y.stateNode.implementation===te.implementation){f(ee,Y.sibling),Y=S(Y,te.children||[]),Y.return=ee,ee=Y;break e}else{f(ee,Y);break}else c(ee,Y);Y=Y.sibling}Y=em(te,ee.mode,Me),Y.return=ee,ee=Y}return A(ee);case B:return Ue=te._init,Ft(ee,Y,Ue(te._payload),Me)}if(De(te))return Le(ee,Y,te,Me);if(Z(te))return Be(ee,Y,te,Me);hd(ee,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,Y!==null&&Y.tag===6?(f(ee,Y.sibling),Y=S(Y,te),Y.return=ee,ee=Y):(f(ee,Y),Y=Qp(te,ee.mode,Me),Y.return=ee,ee=Y),A(ee)):f(ee,Y)}return Ft}var Vi=Cv(!0),kv=Cv(!1),fd=io(null),pd=null,Wi=null,cp=null;function dp(){cp=Wi=pd=null}function up(a){var c=fd.current;xt(fd),a._currentValue=c}function hp(a,c,f){for(;a!==null;){var x=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),a===f)break;a=a.return}}function Hi(a,c){pd=a,cp=Wi=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Or=!0),a.firstContext=null)}function ls(a){var c=a._currentValue;if(cp!==a)if(a={context:a,memoizedValue:c,next:null},Wi===null){if(pd===null)throw Error(t(308));Wi=a,pd.dependencies={lanes:0,firstContext:a}}else Wi=Wi.next=a;return c}var Zo=null;function fp(a){Zo===null?Zo=[a]:Zo.push(a)}function jv(a,c,f,x){var S=c.interleaved;return S===null?(f.next=f,fp(c)):(f.next=S.next,S.next=f),c.interleaved=f,Tn(a,x)}function Tn(a,c){a.lanes|=c;var f=a.alternate;for(f!==null&&(f.lanes|=c),f=a,a=a.return;a!==null;)a.childLanes|=c,f=a.alternate,f!==null&&(f.childLanes|=c),f=a,a=a.return;return f.tag===3?f.stateNode:null}var co=!1;function pp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nv(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function _n(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function uo(a,c,f){var x=a.updateQueue;if(x===null)return null;if(x=x.shared,(ot&2)!==0){var S=x.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),x.pending=c,Tn(a,f)}return S=x.interleaved,S===null?(c.next=c,fp(x)):(c.next=S.next,S.next=c),x.interleaved=c,Tn(a,f)}function md(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var x=c.lanes;x&=a.pendingLanes,f|=x,c.lanes=f,_f(a,f)}}function Tv(a,c){var f=a.updateQueue,x=a.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var S=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var A={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};_===null?S=_=A:_=_.next=A,f=f.next}while(f!==null);_===null?S=_=c:_=_.next=c}else S=_=c;f={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:_,shared:x.shared,effects:x.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}function gd(a,c,f,x){var S=a.updateQueue;co=!1;var _=S.firstBaseUpdate,A=S.lastBaseUpdate,z=S.shared.pending;if(z!==null){S.shared.pending=null;var $=z,le=$.next;$.next=null,A===null?_=le:A.next=le,A=$;var be=a.alternate;be!==null&&(be=be.updateQueue,z=be.lastBaseUpdate,z!==A&&(z===null?be.firstBaseUpdate=le:z.next=le,be.lastBaseUpdate=$))}if(_!==null){var ke=S.baseState;A=0,be=le=$=null,z=_;do{var ye=z.lane,Ae=z.eventTime;if((x&ye)===ye){be!==null&&(be=be.next={eventTime:Ae,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var Le=a,Be=z;switch(ye=c,Ae=f,Be.tag){case 1:if(Le=Be.payload,typeof Le=="function"){ke=Le.call(Ae,ke,ye);break e}ke=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Be.payload,ye=typeof Le=="function"?Le.call(Ae,ke,ye):Le,ye==null)break e;ke=Q({},ke,ye);break e;case 2:co=!0}}z.callback!==null&&z.lane!==0&&(a.flags|=64,ye=S.effects,ye===null?S.effects=[z]:ye.push(z))}else Ae={eventTime:Ae,lane:ye,tag:z.tag,payload:z.payload,callback:z.callback,next:null},be===null?(le=be=Ae,$=ke):be=be.next=Ae,A|=ye;if(z=z.next,z===null){if(z=S.shared.pending,z===null)break;ye=z,z=ye.next,ye.next=null,S.lastBaseUpdate=ye,S.shared.pending=null}}while(!0);if(be===null&&($=ke),S.baseState=$,S.firstBaseUpdate=le,S.lastBaseUpdate=be,c=S.shared.interleaved,c!==null){S=c;do A|=S.lane,S=S.next;while(S!==c)}else _===null&&(S.shared.lanes=0);ei|=A,a.lanes=A,a.memoizedState=ke}}function _v(a,c,f){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var x=a[c],S=x.callback;if(S!==null){if(x.callback=null,x=f,typeof S!="function")throw Error(t(191,S));S.call(x)}}}var yl={},Xs=io(yl),vl=io(yl),bl=io(yl);function Jo(a){if(a===yl)throw Error(t(174));return a}function mp(a,c){switch(pt(bl,c),pt(vl,a),pt(Xs,yl),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:yt(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=yt(c,a)}xt(Xs),pt(Xs,c)}function Ui(){xt(Xs),xt(vl),xt(bl)}function Mv(a){Jo(bl.current);var c=Jo(Xs.current),f=yt(c,a.type);c!==f&&(pt(vl,a),pt(Xs,f))}function gp(a){vl.current===a&&(xt(Xs),xt(vl))}var kt=io(0);function xd(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var xp=[];function yp(){for(var a=0;a<xp.length;a++)xp[a]._workInProgressVersionPrimary=null;xp.length=0}var yd=T.ReactCurrentDispatcher,vp=T.ReactCurrentBatchConfig,Qo=0,jt=null,qt=null,sr=null,vd=!1,wl=!1,Sl=0,X5=0;function mr(){throw Error(t(321))}function bp(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!Ts(a[f],c[f]))return!1;return!0}function wp(a,c,f,x,S,_){if(Qo=_,jt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,yd.current=a===null||a.memoizedState===null?J5:Q5,a=f(x,S),wl){_=0;do{if(wl=!1,Sl=0,25<=_)throw Error(t(301));_+=1,sr=qt=null,c.updateQueue=null,yd.current=eM,a=f(x,S)}while(wl)}if(yd.current=Sd,c=qt!==null&&qt.next!==null,Qo=0,sr=qt=jt=null,vd=!1,c)throw Error(t(300));return a}function Sp(){var a=Sl!==0;return Sl=0,a}function Ks(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?jt.memoizedState=sr=a:sr=sr.next=a,sr}function cs(){if(qt===null){var a=jt.alternate;a=a!==null?a.memoizedState:null}else a=qt.next;var c=sr===null?jt.memoizedState:sr.next;if(c!==null)sr=c,qt=a;else{if(a===null)throw Error(t(310));qt=a,a={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},sr===null?jt.memoizedState=sr=a:sr=sr.next=a}return sr}function Cl(a,c){return typeof c=="function"?c(a):c}function Cp(a){var c=cs(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var x=qt,S=x.baseQueue,_=f.pending;if(_!==null){if(S!==null){var A=S.next;S.next=_.next,_.next=A}x.baseQueue=S=_,f.pending=null}if(S!==null){_=S.next,x=x.baseState;var z=A=null,$=null,le=_;do{var be=le.lane;if((Qo&be)===be)$!==null&&($=$.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),x=le.hasEagerState?le.eagerState:a(x,le.action);else{var ke={lane:be,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};$===null?(z=$=ke,A=x):$=$.next=ke,jt.lanes|=be,ei|=be}le=le.next}while(le!==null&&le!==_);$===null?A=x:$.next=z,Ts(x,c.memoizedState)||(Or=!0),c.memoizedState=x,c.baseState=A,c.baseQueue=$,f.lastRenderedState=x}if(a=f.interleaved,a!==null){S=a;do _=S.lane,jt.lanes|=_,ei|=_,S=S.next;while(S!==a)}else S===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function kp(a){var c=cs(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var x=f.dispatch,S=f.pending,_=c.memoizedState;if(S!==null){f.pending=null;var A=S=S.next;do _=a(_,A.action),A=A.next;while(A!==S);Ts(_,c.memoizedState)||(Or=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),f.lastRenderedState=_}return[_,x]}function Ev(){}function Pv(a,c){var f=jt,x=cs(),S=c(),_=!Ts(x.memoizedState,S);if(_&&(x.memoizedState=S,Or=!0),x=x.queue,jp(Rv.bind(null,f,x,a),[a]),x.getSnapshot!==c||_||sr!==null&&sr.memoizedState.tag&1){if(f.flags|=2048,kl(9,Av.bind(null,f,x,S,c),void 0,null),nr===null)throw Error(t(349));(Qo&30)!==0||Dv(f,c,S)}return S}function Dv(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=jt.updateQueue,c===null?(c={lastEffect:null,stores:null},jt.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function Av(a,c,f,x){c.value=f,c.getSnapshot=x,Ov(c)&&Fv(a)}function Rv(a,c,f){return f(function(){Ov(c)&&Fv(a)})}function Ov(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!Ts(a,f)}catch{return!0}}function Fv(a){var c=Tn(a,1);c!==null&&Ds(c,a,1,-1)}function Lv(a){var c=Ks();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:a},c.queue=a,a=a.dispatch=Z5.bind(null,jt,a),[c.memoizedState,a]}function kl(a,c,f,x){return a={tag:a,create:c,destroy:f,deps:x,next:null},c=jt.updateQueue,c===null?(c={lastEffect:null,stores:null},jt.updateQueue=c,c.lastEffect=a.next=a):(f=c.lastEffect,f===null?c.lastEffect=a.next=a:(x=f.next,f.next=a,a.next=x,c.lastEffect=a)),a}function zv(){return cs().memoizedState}function bd(a,c,f,x){var S=Ks();jt.flags|=a,S.memoizedState=kl(1|c,f,void 0,x===void 0?null:x)}function wd(a,c,f,x){var S=cs();x=x===void 0?null:x;var _=void 0;if(qt!==null){var A=qt.memoizedState;if(_=A.destroy,x!==null&&bp(x,A.deps)){S.memoizedState=kl(c,f,_,x);return}}jt.flags|=a,S.memoizedState=kl(1|c,f,_,x)}function Iv(a,c){return bd(8390656,8,a,c)}function jp(a,c){return wd(2048,8,a,c)}function Bv(a,c){return wd(4,2,a,c)}function Vv(a,c){return wd(4,4,a,c)}function Wv(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Hv(a,c,f){return f=f!=null?f.concat([a]):null,wd(4,4,Wv.bind(null,c,a),f)}function Np(){}function Uv(a,c){var f=cs();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&bp(c,x[1])?x[0]:(f.memoizedState=[a,c],a)}function $v(a,c){var f=cs();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&bp(c,x[1])?x[0]:(a=a(),f.memoizedState=[a,c],a)}function Gv(a,c,f){return(Qo&21)===0?(a.baseState&&(a.baseState=!1,Or=!0),a.memoizedState=f):(Ts(f,c)||(f=Sy(),jt.lanes|=f,ei|=f,a.baseState=!0),c)}function K5(a,c){var f=ut;ut=f!==0&&4>f?f:4,a(!0);var x=vp.transition;vp.transition={};try{a(!1),c()}finally{ut=f,vp.transition=x}}function Yv(){return cs().memoizedState}function q5(a,c,f){var x=mo(a);if(f={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null},Xv(a))Kv(c,f);else if(f=jv(a,c,f,x),f!==null){var S=Nr();Ds(f,a,x,S),qv(f,c,x)}}function Z5(a,c,f){var x=mo(a),S={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null};if(Xv(a))Kv(c,S);else{var _=a.alternate;if(a.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var A=c.lastRenderedState,z=_(A,f);if(S.hasEagerState=!0,S.eagerState=z,Ts(z,A)){var $=c.interleaved;$===null?(S.next=S,fp(c)):(S.next=$.next,$.next=S),c.interleaved=S;return}}catch{}finally{}f=jv(a,c,S,x),f!==null&&(S=Nr(),Ds(f,a,x,S),qv(f,c,x))}}function Xv(a){var c=a.alternate;return a===jt||c!==null&&c===jt}function Kv(a,c){wl=vd=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function qv(a,c,f){if((f&4194240)!==0){var x=c.lanes;x&=a.pendingLanes,f|=x,c.lanes=f,_f(a,f)}}var Sd={readContext:ls,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},J5={readContext:ls,useCallback:function(a,c){return Ks().memoizedState=[a,c===void 0?null:c],a},useContext:ls,useEffect:Iv,useImperativeHandle:function(a,c,f){return f=f!=null?f.concat([a]):null,bd(4194308,4,Wv.bind(null,c,a),f)},useLayoutEffect:function(a,c){return bd(4194308,4,a,c)},useInsertionEffect:function(a,c){return bd(4,2,a,c)},useMemo:function(a,c){var f=Ks();return c=c===void 0?null:c,a=a(),f.memoizedState=[a,c],a},useReducer:function(a,c,f){var x=Ks();return c=f!==void 0?f(c):c,x.memoizedState=x.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},x.queue=a,a=a.dispatch=q5.bind(null,jt,a),[x.memoizedState,a]},useRef:function(a){var c=Ks();return a={current:a},c.memoizedState=a},useState:Lv,useDebugValue:Np,useDeferredValue:function(a){return Ks().memoizedState=a},useTransition:function(){var a=Lv(!1),c=a[0];return a=K5.bind(null,a[1]),Ks().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,f){var x=jt,S=Ks();if(vt){if(f===void 0)throw Error(t(407));f=f()}else{if(f=c(),nr===null)throw Error(t(349));(Qo&30)!==0||Dv(x,c,f)}S.memoizedState=f;var _={value:f,getSnapshot:c};return S.queue=_,Iv(Rv.bind(null,x,_,a),[a]),x.flags|=2048,kl(9,Av.bind(null,x,_,f,c),void 0,null),f},useId:function(){var a=Ks(),c=nr.identifierPrefix;if(vt){var f=Nn,x=jn;f=(x&~(1<<32-Ns(x)-1)).toString(32)+f,c=":"+c+"R"+f,f=Sl++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=X5++,c=":"+c+"r"+f.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},Q5={readContext:ls,useCallback:Uv,useContext:ls,useEffect:jp,useImperativeHandle:Hv,useInsertionEffect:Bv,useLayoutEffect:Vv,useMemo:$v,useReducer:Cp,useRef:zv,useState:function(){return Cp(Cl)},useDebugValue:Np,useDeferredValue:function(a){var c=cs();return Gv(c,qt.memoizedState,a)},useTransition:function(){var a=Cp(Cl)[0],c=cs().memoizedState;return[a,c]},useMutableSource:Ev,useSyncExternalStore:Pv,useId:Yv,unstable_isNewReconciler:!1},eM={readContext:ls,useCallback:Uv,useContext:ls,useEffect:jp,useImperativeHandle:Hv,useInsertionEffect:Bv,useLayoutEffect:Vv,useMemo:$v,useReducer:kp,useRef:zv,useState:function(){return kp(Cl)},useDebugValue:Np,useDeferredValue:function(a){var c=cs();return qt===null?c.memoizedState=a:Gv(c,qt.memoizedState,a)},useTransition:function(){var a=kp(Cl)[0],c=cs().memoizedState;return[a,c]},useMutableSource:Ev,useSyncExternalStore:Pv,useId:Yv,unstable_isNewReconciler:!1};function Ms(a,c){if(a&&a.defaultProps){c=Q({},c),a=a.defaultProps;for(var f in a)c[f]===void 0&&(c[f]=a[f]);return c}return c}function Tp(a,c,f,x){c=a.memoizedState,f=f(x,c),f=f==null?c:Q({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Cd={isMounted:function(a){return(a=a._reactInternals)?Go(a)===a:!1},enqueueSetState:function(a,c,f){a=a._reactInternals;var x=Nr(),S=mo(a),_=_n(x,S);_.payload=c,f!=null&&(_.callback=f),c=uo(a,_,S),c!==null&&(Ds(c,a,S,x),md(c,a,S))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var x=Nr(),S=mo(a),_=_n(x,S);_.tag=1,_.payload=c,f!=null&&(_.callback=f),c=uo(a,_,S),c!==null&&(Ds(c,a,S,x),md(c,a,S))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=Nr(),x=mo(a),S=_n(f,x);S.tag=2,c!=null&&(S.callback=c),c=uo(a,S,x),c!==null&&(Ds(c,a,x,f),md(c,a,x))}};function Zv(a,c,f,x,S,_,A){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(x,_,A):c.prototype&&c.prototype.isPureReactComponent?!dl(f,x)||!dl(S,_):!0}function Jv(a,c,f){var x=!1,S=ao,_=c.contextType;return typeof _=="object"&&_!==null?_=ls(_):(S=Rr(c)?Xo:pr.current,x=c.contextTypes,_=(x=x!=null)?Li(a,S):ao),c=new c(f,_),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Cd,a.stateNode=c,c._reactInternals=a,x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=_),c}function Qv(a,c,f,x){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,x),c.state!==a&&Cd.enqueueReplaceState(c,c.state,null)}function _p(a,c,f,x){var S=a.stateNode;S.props=f,S.state=a.memoizedState,S.refs={},pp(a);var _=c.contextType;typeof _=="object"&&_!==null?S.context=ls(_):(_=Rr(c)?Xo:pr.current,S.context=Li(a,_)),S.state=a.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(Tp(a,c,_,f),S.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(c=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),c!==S.state&&Cd.enqueueReplaceState(S,S.state,null),gd(a,f,S,x),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function $i(a,c){try{var f="",x=c;do f+=we(x),x=x.return;while(x);var S=f}catch(_){S=`
Error generating stack: `+_.message+`
`+_.stack}return{value:a,source:c,stack:S,digest:null}}function Mp(a,c,f){return{value:a,source:null,stack:f??null,digest:c??null}}function Ep(a,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var tM=typeof WeakMap=="function"?WeakMap:Map;function eb(a,c,f){f=_n(-1,f),f.tag=3,f.payload={element:null};var x=c.value;return f.callback=function(){Ed||(Ed=!0,$p=x),Ep(a,c)},f}function tb(a,c,f){f=_n(-1,f),f.tag=3;var x=a.type.getDerivedStateFromError;if(typeof x=="function"){var S=c.value;f.payload=function(){return x(S)},f.callback=function(){Ep(a,c)}}var _=a.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(f.callback=function(){Ep(a,c),typeof x!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})}),f}function rb(a,c,f){var x=a.pingCache;if(x===null){x=a.pingCache=new tM;var S=new Set;x.set(c,S)}else S=x.get(c),S===void 0&&(S=new Set,x.set(c,S));S.has(f)||(S.add(f),a=mM.bind(null,a,c,f),c.then(a,a))}function sb(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function nb(a,c,f,x,S){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=_n(-1,1),c.tag=2,uo(f,c,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var rM=T.ReactCurrentOwner,Or=!1;function jr(a,c,f,x){c.child=a===null?kv(c,null,f,x):Vi(c,a.child,f,x)}function ob(a,c,f,x,S){f=f.render;var _=c.ref;return Hi(c,S),x=wp(a,c,f,x,_,S),f=Sp(),a!==null&&!Or?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~S,Mn(a,c,S)):(vt&&f&&np(c),c.flags|=1,jr(a,c,x,S),c.child)}function ib(a,c,f,x,S){if(a===null){var _=f.type;return typeof _=="function"&&!Jp(_)&&_.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=_,ab(a,c,_,x,S)):(a=Fd(f.type,null,x,c,c.mode,S),a.ref=c.ref,a.return=c,c.child=a)}if(_=a.child,(a.lanes&S)===0){var A=_.memoizedProps;if(f=f.compare,f=f!==null?f:dl,f(A,x)&&a.ref===c.ref)return Mn(a,c,S)}return c.flags|=1,a=xo(_,x),a.ref=c.ref,a.return=c,c.child=a}function ab(a,c,f,x,S){if(a!==null){var _=a.memoizedProps;if(dl(_,x)&&a.ref===c.ref)if(Or=!1,c.pendingProps=x=_,(a.lanes&S)!==0)(a.flags&131072)!==0&&(Or=!0);else return c.lanes=a.lanes,Mn(a,c,S)}return Pp(a,c,f,x,S)}function lb(a,c,f){var x=c.pendingProps,S=x.children,_=a!==null?a.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Yi,Jr),Jr|=f;else{if((f&1073741824)===0)return a=_!==null?_.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,pt(Yi,Jr),Jr|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=_!==null?_.baseLanes:f,pt(Yi,Jr),Jr|=x}else _!==null?(x=_.baseLanes|f,c.memoizedState=null):x=f,pt(Yi,Jr),Jr|=x;return jr(a,c,S,f),c.child}function cb(a,c){var f=c.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function Pp(a,c,f,x,S){var _=Rr(f)?Xo:pr.current;return _=Li(c,_),Hi(c,S),f=wp(a,c,f,x,_,S),x=Sp(),a!==null&&!Or?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~S,Mn(a,c,S)):(vt&&x&&np(c),c.flags|=1,jr(a,c,f,S),c.child)}function db(a,c,f,x,S){if(Rr(f)){var _=!0;ad(c)}else _=!1;if(Hi(c,S),c.stateNode===null)jd(a,c),Jv(c,f,x),_p(c,f,x,S),x=!0;else if(a===null){var A=c.stateNode,z=c.memoizedProps;A.props=z;var $=A.context,le=f.contextType;typeof le=="object"&&le!==null?le=ls(le):(le=Rr(f)?Xo:pr.current,le=Li(c,le));var be=f.getDerivedStateFromProps,ke=typeof be=="function"||typeof A.getSnapshotBeforeUpdate=="function";ke||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(z!==x||$!==le)&&Qv(c,A,x,le),co=!1;var ye=c.memoizedState;A.state=ye,gd(c,x,A,S),$=c.memoizedState,z!==x||ye!==$||Ar.current||co?(typeof be=="function"&&(Tp(c,f,be,x),$=c.memoizedState),(z=co||Zv(c,f,z,x,ye,$,le))?(ke||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=$),A.props=x,A.state=$,A.context=le,x=z):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{A=c.stateNode,Nv(a,c),z=c.memoizedProps,le=c.type===c.elementType?z:Ms(c.type,z),A.props=le,ke=c.pendingProps,ye=A.context,$=f.contextType,typeof $=="object"&&$!==null?$=ls($):($=Rr(f)?Xo:pr.current,$=Li(c,$));var Ae=f.getDerivedStateFromProps;(be=typeof Ae=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(z!==ke||ye!==$)&&Qv(c,A,x,$),co=!1,ye=c.memoizedState,A.state=ye,gd(c,x,A,S);var Le=c.memoizedState;z!==ke||ye!==Le||Ar.current||co?(typeof Ae=="function"&&(Tp(c,f,Ae,x),Le=c.memoizedState),(le=co||Zv(c,f,le,x,ye,Le,$)||!1)?(be||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(x,Le,$),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(x,Le,$)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||z===a.memoizedProps&&ye===a.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&ye===a.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Le),A.props=x,A.state=Le,A.context=$,x=le):(typeof A.componentDidUpdate!="function"||z===a.memoizedProps&&ye===a.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&ye===a.memoizedState||(c.flags|=1024),x=!1)}return Dp(a,c,f,x,_,S)}function Dp(a,c,f,x,S,_){cb(a,c);var A=(c.flags&128)!==0;if(!x&&!A)return S&&mv(c,f,!1),Mn(a,c,_);x=c.stateNode,rM.current=c;var z=A&&typeof f.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,a!==null&&A?(c.child=Vi(c,a.child,null,_),c.child=Vi(c,null,z,_)):jr(a,c,z,_),c.memoizedState=x.state,S&&mv(c,f,!0),c.child}function ub(a){var c=a.stateNode;c.pendingContext?fv(a,c.pendingContext,c.pendingContext!==c.context):c.context&&fv(a,c.context,!1),mp(a,c.containerInfo)}function hb(a,c,f,x,S){return Bi(),lp(S),c.flags|=256,jr(a,c,f,x),c.child}var Ap={dehydrated:null,treeContext:null,retryLane:0};function Rp(a){return{baseLanes:a,cachePool:null,transitions:null}}function fb(a,c,f){var x=c.pendingProps,S=kt.current,_=!1,A=(c.flags&128)!==0,z;if((z=A)||(z=a!==null&&a.memoizedState===null?!1:(S&2)!==0),z?(_=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),pt(kt,S&1),a===null)return ap(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(A=x.children,a=x.fallback,_?(x=c.mode,_=c.child,A={mode:"hidden",children:A},(x&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=A):_=Ld(A,x,0,null),a=ni(a,x,f,null),_.return=c,a.return=c,_.sibling=a,c.child=_,c.child.memoizedState=Rp(f),c.memoizedState=Ap,a):Op(c,A));if(S=a.memoizedState,S!==null&&(z=S.dehydrated,z!==null))return sM(a,c,A,x,z,S,f);if(_){_=x.fallback,A=c.mode,S=a.child,z=S.sibling;var $={mode:"hidden",children:x.children};return(A&1)===0&&c.child!==S?(x=c.child,x.childLanes=0,x.pendingProps=$,c.deletions=null):(x=xo(S,$),x.subtreeFlags=S.subtreeFlags&14680064),z!==null?_=xo(z,_):(_=ni(_,A,f,null),_.flags|=2),_.return=c,x.return=c,x.sibling=_,c.child=x,x=_,_=c.child,A=a.child.memoizedState,A=A===null?Rp(f):{baseLanes:A.baseLanes|f,cachePool:null,transitions:A.transitions},_.memoizedState=A,_.childLanes=a.childLanes&~f,c.memoizedState=Ap,x}return _=a.child,a=_.sibling,x=xo(_,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=f),x.return=c,x.sibling=null,a!==null&&(f=c.deletions,f===null?(c.deletions=[a],c.flags|=16):f.push(a)),c.child=x,c.memoizedState=null,x}function Op(a,c){return c=Ld({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function kd(a,c,f,x){return x!==null&&lp(x),Vi(c,a.child,null,f),a=Op(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function sM(a,c,f,x,S,_,A){if(f)return c.flags&256?(c.flags&=-257,x=Mp(Error(t(422))),kd(a,c,A,x)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(_=x.fallback,S=c.mode,x=Ld({mode:"visible",children:x.children},S,0,null),_=ni(_,S,A,null),_.flags|=2,x.return=c,_.return=c,x.sibling=_,c.child=x,(c.mode&1)!==0&&Vi(c,a.child,null,A),c.child.memoizedState=Rp(A),c.memoizedState=Ap,_);if((c.mode&1)===0)return kd(a,c,A,null);if(S.data==="$!"){if(x=S.nextSibling&&S.nextSibling.dataset,x)var z=x.dgst;return x=z,_=Error(t(419)),x=Mp(_,x,void 0),kd(a,c,A,x)}if(z=(A&a.childLanes)!==0,Or||z){if(x=nr,x!==null){switch(A&-A){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(x.suspendedLanes|A))!==0?0:S,S!==0&&S!==_.retryLane&&(_.retryLane=S,Tn(a,S),Ds(x,a,S,-1))}return Zp(),x=Mp(Error(t(421))),kd(a,c,A,x)}return S.data==="$?"?(c.flags|=128,c.child=a.child,c=gM.bind(null,a),S._reactRetry=c,null):(a=_.treeContext,Zr=oo(S.nextSibling),qr=c,vt=!0,_s=null,a!==null&&(is[as++]=jn,is[as++]=Nn,is[as++]=Ko,jn=a.id,Nn=a.overflow,Ko=c),c=Op(c,x.children),c.flags|=4096,c)}function pb(a,c,f){a.lanes|=c;var x=a.alternate;x!==null&&(x.lanes|=c),hp(a.return,c,f)}function Fp(a,c,f,x,S){var _=a.memoizedState;_===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:S}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=x,_.tail=f,_.tailMode=S)}function mb(a,c,f){var x=c.pendingProps,S=x.revealOrder,_=x.tail;if(jr(a,c,x.children,f),x=kt.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&pb(a,f,c);else if(a.tag===19)pb(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}x&=1}if(pt(kt,x),(c.mode&1)===0)c.memoizedState=null;else switch(S){case"forwards":for(f=c.child,S=null;f!==null;)a=f.alternate,a!==null&&xd(a)===null&&(S=f),f=f.sibling;f=S,f===null?(S=c.child,c.child=null):(S=f.sibling,f.sibling=null),Fp(c,!1,S,f,_);break;case"backwards":for(f=null,S=c.child,c.child=null;S!==null;){if(a=S.alternate,a!==null&&xd(a)===null){c.child=S;break}a=S.sibling,S.sibling=f,f=S,S=a}Fp(c,!0,f,null,_);break;case"together":Fp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function jd(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Mn(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),ei|=c.lanes,(f&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,f=xo(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=xo(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function nM(a,c,f){switch(c.tag){case 3:ub(c),Bi();break;case 5:Mv(c);break;case 1:Rr(c.type)&&ad(c);break;case 4:mp(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,S=c.memoizedProps.value;pt(fd,x._currentValue),x._currentValue=S;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(pt(kt,kt.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?fb(a,c,f):(pt(kt,kt.current&1),a=Mn(a,c,f),a!==null?a.sibling:null);pt(kt,kt.current&1);break;case 19:if(x=(f&c.childLanes)!==0,(a.flags&128)!==0){if(x)return mb(a,c,f);c.flags|=128}if(S=c.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),pt(kt,kt.current),x)break;return null;case 22:case 23:return c.lanes=0,lb(a,c,f)}return Mn(a,c,f)}var gb,Lp,xb,yb;gb=function(a,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Lp=function(){},xb=function(a,c,f,x){var S=a.memoizedProps;if(S!==x){a=c.stateNode,Jo(Xs.current);var _=null;switch(f){case"input":S=re(a,S),x=re(a,x),_=[];break;case"select":S=Q({},S,{value:void 0}),x=Q({},x,{value:void 0}),_=[];break;case"textarea":S=He(a,S),x=He(a,x),_=[];break;default:typeof S.onClick!="function"&&typeof x.onClick=="function"&&(a.onclick=nd)}We(f,x);var A;f=null;for(le in S)if(!x.hasOwnProperty(le)&&S.hasOwnProperty(le)&&S[le]!=null)if(le==="style"){var z=S[le];for(A in z)z.hasOwnProperty(A)&&(f||(f={}),f[A]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(n.hasOwnProperty(le)?_||(_=[]):(_=_||[]).push(le,null));for(le in x){var $=x[le];if(z=S?.[le],x.hasOwnProperty(le)&&$!==z&&($!=null||z!=null))if(le==="style")if(z){for(A in z)!z.hasOwnProperty(A)||$&&$.hasOwnProperty(A)||(f||(f={}),f[A]="");for(A in $)$.hasOwnProperty(A)&&z[A]!==$[A]&&(f||(f={}),f[A]=$[A])}else f||(_||(_=[]),_.push(le,f)),f=$;else le==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,z=z?z.__html:void 0,$!=null&&z!==$&&(_=_||[]).push(le,$)):le==="children"?typeof $!="string"&&typeof $!="number"||(_=_||[]).push(le,""+$):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(n.hasOwnProperty(le)?($!=null&&le==="onScroll"&&gt("scroll",a),_||z===$||(_=[])):(_=_||[]).push(le,$))}f&&(_=_||[]).push("style",f);var le=_;(c.updateQueue=le)&&(c.flags|=4)}},yb=function(a,c,f,x){f!==x&&(c.flags|=4)};function jl(a,c){if(!vt)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:x.sibling=null}}function gr(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,x=0;if(c)for(var S=a.child;S!==null;)f|=S.lanes|S.childLanes,x|=S.subtreeFlags&14680064,x|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)f|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=x,a.childLanes=f,c}function oM(a,c,f){var x=c.pendingProps;switch(op(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(c),null;case 1:return Rr(c.type)&&id(),gr(c),null;case 3:return x=c.stateNode,Ui(),xt(Ar),xt(pr),yp(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(a===null||a.child===null)&&(ud(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,_s!==null&&(Xp(_s),_s=null))),Lp(a,c),gr(c),null;case 5:gp(c);var S=Jo(bl.current);if(f=c.type,a!==null&&c.stateNode!=null)xb(a,c,f,x,S),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(t(166));return gr(c),null}if(a=Jo(Xs.current),ud(c)){x=c.stateNode,f=c.type;var _=c.memoizedProps;switch(x[Ys]=c,x[ml]=_,a=(c.mode&1)!==0,f){case"dialog":gt("cancel",x),gt("close",x);break;case"iframe":case"object":case"embed":gt("load",x);break;case"video":case"audio":for(S=0;S<hl.length;S++)gt(hl[S],x);break;case"source":gt("error",x);break;case"img":case"image":case"link":gt("error",x),gt("load",x);break;case"details":gt("toggle",x);break;case"input":J(x,_),gt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!_.multiple},gt("invalid",x);break;case"textarea":he(x,_),gt("invalid",x)}We(f,_),S=null;for(var A in _)if(_.hasOwnProperty(A)){var z=_[A];A==="children"?typeof z=="string"?x.textContent!==z&&(_.suppressHydrationWarning!==!0&&sd(x.textContent,z,a),S=["children",z]):typeof z=="number"&&x.textContent!==""+z&&(_.suppressHydrationWarning!==!0&&sd(x.textContent,z,a),S=["children",""+z]):n.hasOwnProperty(A)&&z!=null&&A==="onScroll"&&gt("scroll",x)}switch(f){case"input":Te(x),ve(x,_,!0);break;case"textarea":Te(x),st(x);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(x.onclick=nd)}x=S,c.updateQueue=x,x!==null&&(c.flags|=4)}else{A=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=lt(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=A.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof x.is=="string"?a=A.createElement(f,{is:x.is}):(a=A.createElement(f),f==="select"&&(A=a,x.multiple?A.multiple=!0:x.size&&(A.size=x.size))):a=A.createElementNS(a,f),a[Ys]=c,a[ml]=x,gb(a,c,!1,!1),c.stateNode=a;e:{switch(A=Uo(f,x),f){case"dialog":gt("cancel",a),gt("close",a),S=x;break;case"iframe":case"object":case"embed":gt("load",a),S=x;break;case"video":case"audio":for(S=0;S<hl.length;S++)gt(hl[S],a);S=x;break;case"source":gt("error",a),S=x;break;case"img":case"image":case"link":gt("error",a),gt("load",a),S=x;break;case"details":gt("toggle",a),S=x;break;case"input":J(a,x),S=re(a,x),gt("invalid",a);break;case"option":S=x;break;case"select":a._wrapperState={wasMultiple:!!x.multiple},S=Q({},x,{value:void 0}),gt("invalid",a);break;case"textarea":he(a,x),S=He(a,x),gt("invalid",a);break;default:S=x}We(f,S),z=S;for(_ in z)if(z.hasOwnProperty(_)){var $=z[_];_==="style"?Ce(a,$):_==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&$s(a,$)):_==="children"?typeof $=="string"?(f!=="textarea"||$!=="")&&Pt(a,$):typeof $=="number"&&Pt(a,""+$):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(n.hasOwnProperty(_)?$!=null&&_==="onScroll"&&gt("scroll",a):$!=null&&k(a,_,$,A))}switch(f){case"input":Te(a),ve(a,x,!1);break;case"textarea":Te(a),st(a);break;case"option":x.value!=null&&a.setAttribute("value",""+K(x.value));break;case"select":a.multiple=!!x.multiple,_=x.value,_!=null?Je(a,!!x.multiple,_,!1):x.defaultValue!=null&&Je(a,!!x.multiple,x.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=nd)}switch(f){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return gr(c),null;case 6:if(a&&c.stateNode!=null)yb(a,c,a.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(t(166));if(f=Jo(bl.current),Jo(Xs.current),ud(c)){if(x=c.stateNode,f=c.memoizedProps,x[Ys]=c,(_=x.nodeValue!==f)&&(a=qr,a!==null))switch(a.tag){case 3:sd(x.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&sd(x.nodeValue,f,(a.mode&1)!==0)}_&&(c.flags|=4)}else x=(f.nodeType===9?f:f.ownerDocument).createTextNode(x),x[Ys]=c,c.stateNode=x}return gr(c),null;case 13:if(xt(kt),x=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(vt&&Zr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)wv(),Bi(),c.flags|=98560,_=!1;else if(_=ud(c),x!==null&&x.dehydrated!==null){if(a===null){if(!_)throw Error(t(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Ys]=c}else Bi(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;gr(c),_=!1}else _s!==null&&(Xp(_s),_s=null),_=!0;if(!_)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(x=x!==null,x!==(a!==null&&a.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(kt.current&1)!==0?Zt===0&&(Zt=3):Zp())),c.updateQueue!==null&&(c.flags|=4),gr(c),null);case 4:return Ui(),Lp(a,c),a===null&&fl(c.stateNode.containerInfo),gr(c),null;case 10:return up(c.type._context),gr(c),null;case 17:return Rr(c.type)&&id(),gr(c),null;case 19:if(xt(kt),_=c.memoizedState,_===null)return gr(c),null;if(x=(c.flags&128)!==0,A=_.rendering,A===null)if(x)jl(_,!1);else{if(Zt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(A=xd(a),A!==null){for(c.flags|=128,jl(_,!1),x=A.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=f,f=c.child;f!==null;)_=f,a=x,_.flags&=14680066,A=_.alternate,A===null?(_.childLanes=0,_.lanes=a,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=A.childLanes,_.lanes=A.lanes,_.child=A.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=A.memoizedProps,_.memoizedState=A.memoizedState,_.updateQueue=A.updateQueue,_.type=A.type,a=A.dependencies,_.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return pt(kt,kt.current&1|2),c.child}a=a.sibling}_.tail!==null&&Ot()>Xi&&(c.flags|=128,x=!0,jl(_,!1),c.lanes=4194304)}else{if(!x)if(a=xd(A),a!==null){if(c.flags|=128,x=!0,f=a.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),jl(_,!0),_.tail===null&&_.tailMode==="hidden"&&!A.alternate&&!vt)return gr(c),null}else 2*Ot()-_.renderingStartTime>Xi&&f!==1073741824&&(c.flags|=128,x=!0,jl(_,!1),c.lanes=4194304);_.isBackwards?(A.sibling=c.child,c.child=A):(f=_.last,f!==null?f.sibling=A:c.child=A,_.last=A)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=Ot(),c.sibling=null,f=kt.current,pt(kt,x?f&1|2:f&1),c):(gr(c),null);case 22:case 23:return qp(),x=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(Jr&1073741824)!==0&&(gr(c),c.subtreeFlags&6&&(c.flags|=8192)):gr(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function iM(a,c){switch(op(c),c.tag){case 1:return Rr(c.type)&&id(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Ui(),xt(Ar),xt(pr),yp(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return gp(c),null;case 13:if(xt(kt),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Bi()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return xt(kt),null;case 4:return Ui(),null;case 10:return up(c.type._context),null;case 22:case 23:return qp(),null;case 24:return null;default:return null}}var Nd=!1,xr=!1,aM=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Gi(a,c){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(x){Dt(a,c,x)}else f.current=null}function zp(a,c,f){try{f()}catch(x){Dt(a,c,x)}}var vb=!1;function lM(a,c){if(qf=Gc,a=Zy(),Wf(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var S=x.anchorOffset,_=x.focusNode;x=x.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var A=0,z=-1,$=-1,le=0,be=0,ke=a,ye=null;t:for(;;){for(var Ae;ke!==f||S!==0&&ke.nodeType!==3||(z=A+S),ke!==_||x!==0&&ke.nodeType!==3||($=A+x),ke.nodeType===3&&(A+=ke.nodeValue.length),(Ae=ke.firstChild)!==null;)ye=ke,ke=Ae;for(;;){if(ke===a)break t;if(ye===f&&++le===S&&(z=A),ye===_&&++be===x&&($=A),(Ae=ke.nextSibling)!==null)break;ke=ye,ye=ke.parentNode}ke=Ae}f=z===-1||$===-1?null:{start:z,end:$}}else f=null}f=f||{start:0,end:0}}else f=null;for(Zf={focusedElem:a,selectionRange:f},Gc=!1,Fe=c;Fe!==null;)if(c=Fe,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Fe=a;else for(;Fe!==null;){c=Fe;try{var Le=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var Be=Le.memoizedProps,Ft=Le.memoizedState,ee=c.stateNode,Y=ee.getSnapshotBeforeUpdate(c.elementType===c.type?Be:Ms(c.type,Be),Ft);ee.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var te=c.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Me){Dt(c,c.return,Me)}if(a=c.sibling,a!==null){a.return=c.return,Fe=a;break}Fe=c.return}return Le=vb,vb=!1,Le}function Nl(a,c,f){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var S=x=x.next;do{if((S.tag&a)===a){var _=S.destroy;S.destroy=void 0,_!==void 0&&zp(c,f,_)}S=S.next}while(S!==x)}}function Td(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&a)===a){var x=f.create;f.destroy=x()}f=f.next}while(f!==c)}}function Ip(a){var c=a.ref;if(c!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof c=="function"?c(a):c.current=a}}function bb(a){var c=a.alternate;c!==null&&(a.alternate=null,bb(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Ys],delete c[ml],delete c[tp],delete c[U5],delete c[$5])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function wb(a){return a.tag===5||a.tag===3||a.tag===4}function Sb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||wb(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Bp(a,c,f){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(a,c):f.insertBefore(a,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(a,f)):(c=f,c.appendChild(a)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=nd));else if(x!==4&&(a=a.child,a!==null))for(Bp(a,c,f),a=a.sibling;a!==null;)Bp(a,c,f),a=a.sibling}function Vp(a,c,f){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(x!==4&&(a=a.child,a!==null))for(Vp(a,c,f),a=a.sibling;a!==null;)Vp(a,c,f),a=a.sibling}var ar=null,Es=!1;function ho(a,c,f){for(f=f.child;f!==null;)Cb(a,c,f),f=f.sibling}function Cb(a,c,f){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Bc,f)}catch{}switch(f.tag){case 5:xr||Gi(f,c);case 6:var x=ar,S=Es;ar=null,ho(a,c,f),ar=x,Es=S,ar!==null&&(Es?(a=ar,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):ar.removeChild(f.stateNode));break;case 18:ar!==null&&(Es?(a=ar,f=f.stateNode,a.nodeType===8?ep(a.parentNode,f):a.nodeType===1&&ep(a,f),nl(a)):ep(ar,f.stateNode));break;case 4:x=ar,S=Es,ar=f.stateNode.containerInfo,Es=!0,ho(a,c,f),ar=x,Es=S;break;case 0:case 11:case 14:case 15:if(!xr&&(x=f.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){S=x=x.next;do{var _=S,A=_.destroy;_=_.tag,A!==void 0&&((_&2)!==0||(_&4)!==0)&&zp(f,c,A),S=S.next}while(S!==x)}ho(a,c,f);break;case 1:if(!xr&&(Gi(f,c),x=f.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=f.memoizedProps,x.state=f.memoizedState,x.componentWillUnmount()}catch(z){Dt(f,c,z)}ho(a,c,f);break;case 21:ho(a,c,f);break;case 22:f.mode&1?(xr=(x=xr)||f.memoizedState!==null,ho(a,c,f),xr=x):ho(a,c,f);break;default:ho(a,c,f)}}function kb(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new aM),c.forEach(function(x){var S=xM.bind(null,a,x);f.has(x)||(f.add(x),x.then(S,S))})}}function Ps(a,c){var f=c.deletions;if(f!==null)for(var x=0;x<f.length;x++){var S=f[x];try{var _=a,A=c,z=A;e:for(;z!==null;){switch(z.tag){case 5:ar=z.stateNode,Es=!1;break e;case 3:ar=z.stateNode.containerInfo,Es=!0;break e;case 4:ar=z.stateNode.containerInfo,Es=!0;break e}z=z.return}if(ar===null)throw Error(t(160));Cb(_,A,S),ar=null,Es=!1;var $=S.alternate;$!==null&&($.return=null),S.return=null}catch(le){Dt(S,c,le)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)jb(c,a),c=c.sibling}function jb(a,c){var f=a.alternate,x=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Ps(c,a),qs(a),x&4){try{Nl(3,a,a.return),Td(3,a)}catch(Be){Dt(a,a.return,Be)}try{Nl(5,a,a.return)}catch(Be){Dt(a,a.return,Be)}}break;case 1:Ps(c,a),qs(a),x&512&&f!==null&&Gi(f,f.return);break;case 5:if(Ps(c,a),qs(a),x&512&&f!==null&&Gi(f,f.return),a.flags&32){var S=a.stateNode;try{Pt(S,"")}catch(Be){Dt(a,a.return,Be)}}if(x&4&&(S=a.stateNode,S!=null)){var _=a.memoizedProps,A=f!==null?f.memoizedProps:_,z=a.type,$=a.updateQueue;if(a.updateQueue=null,$!==null)try{z==="input"&&_.type==="radio"&&_.name!=null&&ge(S,_),Uo(z,A);var le=Uo(z,_);for(A=0;A<$.length;A+=2){var be=$[A],ke=$[A+1];be==="style"?Ce(S,ke):be==="dangerouslySetInnerHTML"?$s(S,ke):be==="children"?Pt(S,ke):k(S,be,ke,le)}switch(z){case"input":oe(S,_);break;case"textarea":Ge(S,_);break;case"select":var ye=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!_.multiple;var Ae=_.value;Ae!=null?Je(S,!!_.multiple,Ae,!1):ye!==!!_.multiple&&(_.defaultValue!=null?Je(S,!!_.multiple,_.defaultValue,!0):Je(S,!!_.multiple,_.multiple?[]:"",!1))}S[ml]=_}catch(Be){Dt(a,a.return,Be)}}break;case 6:if(Ps(c,a),qs(a),x&4){if(a.stateNode===null)throw Error(t(162));S=a.stateNode,_=a.memoizedProps;try{S.nodeValue=_}catch(Be){Dt(a,a.return,Be)}}break;case 3:if(Ps(c,a),qs(a),x&4&&f!==null&&f.memoizedState.isDehydrated)try{nl(c.containerInfo)}catch(Be){Dt(a,a.return,Be)}break;case 4:Ps(c,a),qs(a);break;case 13:Ps(c,a),qs(a),S=a.child,S.flags&8192&&(_=S.memoizedState!==null,S.stateNode.isHidden=_,!_||S.alternate!==null&&S.alternate.memoizedState!==null||(Up=Ot())),x&4&&kb(a);break;case 22:if(be=f!==null&&f.memoizedState!==null,a.mode&1?(xr=(le=xr)||be,Ps(c,a),xr=le):Ps(c,a),qs(a),x&8192){if(le=a.memoizedState!==null,(a.stateNode.isHidden=le)&&!be&&(a.mode&1)!==0)for(Fe=a,be=a.child;be!==null;){for(ke=Fe=be;Fe!==null;){switch(ye=Fe,Ae=ye.child,ye.tag){case 0:case 11:case 14:case 15:Nl(4,ye,ye.return);break;case 1:Gi(ye,ye.return);var Le=ye.stateNode;if(typeof Le.componentWillUnmount=="function"){x=ye,f=ye.return;try{c=x,Le.props=c.memoizedProps,Le.state=c.memoizedState,Le.componentWillUnmount()}catch(Be){Dt(x,f,Be)}}break;case 5:Gi(ye,ye.return);break;case 22:if(ye.memoizedState!==null){_b(ke);continue}}Ae!==null?(Ae.return=ye,Fe=Ae):_b(ke)}be=be.sibling}e:for(be=null,ke=a;;){if(ke.tag===5){if(be===null){be=ke;try{S=ke.stateNode,le?(_=S.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(z=ke.stateNode,$=ke.memoizedProps.style,A=$!=null&&$.hasOwnProperty("display")?$.display:null,z.style.display=_e("display",A))}catch(Be){Dt(a,a.return,Be)}}}else if(ke.tag===6){if(be===null)try{ke.stateNode.nodeValue=le?"":ke.memoizedProps}catch(Be){Dt(a,a.return,Be)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===a)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===a)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===a)break e;be===ke&&(be=null),ke=ke.return}be===ke&&(be=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:Ps(c,a),qs(a),x&4&&kb(a);break;case 21:break;default:Ps(c,a),qs(a)}}function qs(a){var c=a.flags;if(c&2){try{e:{for(var f=a.return;f!==null;){if(wb(f)){var x=f;break e}f=f.return}throw Error(t(160))}switch(x.tag){case 5:var S=x.stateNode;x.flags&32&&(Pt(S,""),x.flags&=-33);var _=Sb(a);Vp(a,_,S);break;case 3:case 4:var A=x.stateNode.containerInfo,z=Sb(a);Bp(a,z,A);break;default:throw Error(t(161))}}catch($){Dt(a,a.return,$)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function cM(a,c,f){Fe=a,Nb(a)}function Nb(a,c,f){for(var x=(a.mode&1)!==0;Fe!==null;){var S=Fe,_=S.child;if(S.tag===22&&x){var A=S.memoizedState!==null||Nd;if(!A){var z=S.alternate,$=z!==null&&z.memoizedState!==null||xr;z=Nd;var le=xr;if(Nd=A,(xr=$)&&!le)for(Fe=S;Fe!==null;)A=Fe,$=A.child,A.tag===22&&A.memoizedState!==null?Mb(S):$!==null?($.return=A,Fe=$):Mb(S);for(;_!==null;)Fe=_,Nb(_),_=_.sibling;Fe=S,Nd=z,xr=le}Tb(a)}else(S.subtreeFlags&8772)!==0&&_!==null?(_.return=S,Fe=_):Tb(a)}}function Tb(a){for(;Fe!==null;){var c=Fe;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:xr||Td(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!xr)if(f===null)x.componentDidMount();else{var S=c.elementType===c.type?f.memoizedProps:Ms(c.type,f.memoizedProps);x.componentDidUpdate(S,f.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var _=c.updateQueue;_!==null&&_v(c,_,x);break;case 3:var A=c.updateQueue;if(A!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}_v(c,A,f)}break;case 5:var z=c.stateNode;if(f===null&&c.flags&4){f=z;var $=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&f.focus();break;case"img":$.src&&(f.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var le=c.alternate;if(le!==null){var be=le.memoizedState;if(be!==null){var ke=be.dehydrated;ke!==null&&nl(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}xr||c.flags&512&&Ip(c)}catch(ye){Dt(c,c.return,ye)}}if(c===a){Fe=null;break}if(f=c.sibling,f!==null){f.return=c.return,Fe=f;break}Fe=c.return}}function _b(a){for(;Fe!==null;){var c=Fe;if(c===a){Fe=null;break}var f=c.sibling;if(f!==null){f.return=c.return,Fe=f;break}Fe=c.return}}function Mb(a){for(;Fe!==null;){var c=Fe;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{Td(4,c)}catch($){Dt(c,f,$)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var S=c.return;try{x.componentDidMount()}catch($){Dt(c,S,$)}}var _=c.return;try{Ip(c)}catch($){Dt(c,_,$)}break;case 5:var A=c.return;try{Ip(c)}catch($){Dt(c,A,$)}}}catch($){Dt(c,c.return,$)}if(c===a){Fe=null;break}var z=c.sibling;if(z!==null){z.return=c.return,Fe=z;break}Fe=c.return}}var dM=Math.ceil,_d=T.ReactCurrentDispatcher,Wp=T.ReactCurrentOwner,ds=T.ReactCurrentBatchConfig,ot=0,nr=null,$t=null,lr=0,Jr=0,Yi=io(0),Zt=0,Tl=null,ei=0,Md=0,Hp=0,_l=null,Fr=null,Up=0,Xi=1/0,En=null,Ed=!1,$p=null,fo=null,Pd=!1,po=null,Dd=0,Ml=0,Gp=null,Ad=-1,Rd=0;function Nr(){return(ot&6)!==0?Ot():Ad!==-1?Ad:Ad=Ot()}function mo(a){return(a.mode&1)===0?1:(ot&2)!==0&&lr!==0?lr&-lr:Y5.transition!==null?(Rd===0&&(Rd=Sy()),Rd):(a=ut,a!==0||(a=window.event,a=a===void 0?16:Py(a.type)),a)}function Ds(a,c,f,x){if(50<Ml)throw Ml=0,Gp=null,Error(t(185));Qa(a,f,x),((ot&2)===0||a!==nr)&&(a===nr&&((ot&2)===0&&(Md|=f),Zt===4&&go(a,lr)),Lr(a,x),f===1&&ot===0&&(c.mode&1)===0&&(Xi=Ot()+500,ld&&lo()))}function Lr(a,c){var f=a.callbackNode;Y_(a,c);var x=Hc(a,a===nr?lr:0);if(x===0)f!==null&&vy(f),a.callbackNode=null,a.callbackPriority=0;else if(c=x&-x,a.callbackPriority!==c){if(f!=null&&vy(f),c===1)a.tag===0?G5(Pb.bind(null,a)):gv(Pb.bind(null,a)),W5(function(){(ot&6)===0&&lo()}),f=null;else{switch(Cy(x)){case 1:f=jf;break;case 4:f=by;break;case 16:f=Ic;break;case 536870912:f=wy;break;default:f=Ic}f=Ib(f,Eb.bind(null,a))}a.callbackPriority=c,a.callbackNode=f}}function Eb(a,c){if(Ad=-1,Rd=0,(ot&6)!==0)throw Error(t(327));var f=a.callbackNode;if(Ki()&&a.callbackNode!==f)return null;var x=Hc(a,a===nr?lr:0);if(x===0)return null;if((x&30)!==0||(x&a.expiredLanes)!==0||c)c=Od(a,x);else{c=x;var S=ot;ot|=2;var _=Ab();(nr!==a||lr!==c)&&(En=null,Xi=Ot()+500,ri(a,c));do try{fM();break}catch(z){Db(a,z)}while(!0);dp(),_d.current=_,ot=S,$t!==null?c=0:(nr=null,lr=0,c=Zt)}if(c!==0){if(c===2&&(S=Nf(a),S!==0&&(x=S,c=Yp(a,S))),c===1)throw f=Tl,ri(a,0),go(a,x),Lr(a,Ot()),f;if(c===6)go(a,x);else{if(S=a.current.alternate,(x&30)===0&&!uM(S)&&(c=Od(a,x),c===2&&(_=Nf(a),_!==0&&(x=_,c=Yp(a,_))),c===1))throw f=Tl,ri(a,0),go(a,x),Lr(a,Ot()),f;switch(a.finishedWork=S,a.finishedLanes=x,c){case 0:case 1:throw Error(t(345));case 2:si(a,Fr,En);break;case 3:if(go(a,x),(x&130023424)===x&&(c=Up+500-Ot(),10<c)){if(Hc(a,0)!==0)break;if(S=a.suspendedLanes,(S&x)!==x){Nr(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=Qf(si.bind(null,a,Fr,En),c);break}si(a,Fr,En);break;case 4:if(go(a,x),(x&4194240)===x)break;for(c=a.eventTimes,S=-1;0<x;){var A=31-Ns(x);_=1<<A,A=c[A],A>S&&(S=A),x&=~_}if(x=S,x=Ot()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*dM(x/1960))-x,10<x){a.timeoutHandle=Qf(si.bind(null,a,Fr,En),x);break}si(a,Fr,En);break;case 5:si(a,Fr,En);break;default:throw Error(t(329))}}}return Lr(a,Ot()),a.callbackNode===f?Eb.bind(null,a):null}function Yp(a,c){var f=_l;return a.current.memoizedState.isDehydrated&&(ri(a,c).flags|=256),a=Od(a,c),a!==2&&(c=Fr,Fr=f,c!==null&&Xp(c)),a}function Xp(a){Fr===null?Fr=a:Fr.push.apply(Fr,a)}function uM(a){for(var c=a;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var x=0;x<f.length;x++){var S=f[x],_=S.getSnapshot;S=S.value;try{if(!Ts(_(),S))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function go(a,c){for(c&=~Hp,c&=~Md,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var f=31-Ns(c),x=1<<f;a[f]=-1,c&=~x}}function Pb(a){if((ot&6)!==0)throw Error(t(327));Ki();var c=Hc(a,0);if((c&1)===0)return Lr(a,Ot()),null;var f=Od(a,c);if(a.tag!==0&&f===2){var x=Nf(a);x!==0&&(c=x,f=Yp(a,x))}if(f===1)throw f=Tl,ri(a,0),go(a,c),Lr(a,Ot()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,si(a,Fr,En),Lr(a,Ot()),null}function Kp(a,c){var f=ot;ot|=1;try{return a(c)}finally{ot=f,ot===0&&(Xi=Ot()+500,ld&&lo())}}function ti(a){po!==null&&po.tag===0&&(ot&6)===0&&Ki();var c=ot;ot|=1;var f=ds.transition,x=ut;try{if(ds.transition=null,ut=1,a)return a()}finally{ut=x,ds.transition=f,ot=c,(ot&6)===0&&lo()}}function qp(){Jr=Yi.current,xt(Yi)}function ri(a,c){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,V5(f)),$t!==null)for(f=$t.return;f!==null;){var x=f;switch(op(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&id();break;case 3:Ui(),xt(Ar),xt(pr),yp();break;case 5:gp(x);break;case 4:Ui();break;case 13:xt(kt);break;case 19:xt(kt);break;case 10:up(x.type._context);break;case 22:case 23:qp()}f=f.return}if(nr=a,$t=a=xo(a.current,null),lr=Jr=c,Zt=0,Tl=null,Hp=Md=ei=0,Fr=_l=null,Zo!==null){for(c=0;c<Zo.length;c++)if(f=Zo[c],x=f.interleaved,x!==null){f.interleaved=null;var S=x.next,_=f.pending;if(_!==null){var A=_.next;_.next=S,x.next=A}f.pending=x}Zo=null}return a}function Db(a,c){do{var f=$t;try{if(dp(),yd.current=Sd,vd){for(var x=jt.memoizedState;x!==null;){var S=x.queue;S!==null&&(S.pending=null),x=x.next}vd=!1}if(Qo=0,sr=qt=jt=null,wl=!1,Sl=0,Wp.current=null,f===null||f.return===null){Zt=1,Tl=c,$t=null;break}e:{var _=a,A=f.return,z=f,$=c;if(c=lr,z.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var le=$,be=z,ke=be.tag;if((be.mode&1)===0&&(ke===0||ke===11||ke===15)){var ye=be.alternate;ye?(be.updateQueue=ye.updateQueue,be.memoizedState=ye.memoizedState,be.lanes=ye.lanes):(be.updateQueue=null,be.memoizedState=null)}var Ae=sb(A);if(Ae!==null){Ae.flags&=-257,nb(Ae,A,z,_,c),Ae.mode&1&&rb(_,le,c),c=Ae,$=le;var Le=c.updateQueue;if(Le===null){var Be=new Set;Be.add($),c.updateQueue=Be}else Le.add($);break e}else{if((c&1)===0){rb(_,le,c),Zp();break e}$=Error(t(426))}}else if(vt&&z.mode&1){var Ft=sb(A);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),nb(Ft,A,z,_,c),lp($i($,z));break e}}_=$=$i($,z),Zt!==4&&(Zt=2),_l===null?_l=[_]:_l.push(_),_=A;do{switch(_.tag){case 3:_.flags|=65536,c&=-c,_.lanes|=c;var ee=eb(_,$,c);Tv(_,ee);break e;case 1:z=$;var Y=_.type,te=_.stateNode;if((_.flags&128)===0&&(typeof Y.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(fo===null||!fo.has(te)))){_.flags|=65536,c&=-c,_.lanes|=c;var Me=tb(_,z,c);Tv(_,Me);break e}}_=_.return}while(_!==null)}Ob(f)}catch(Ve){c=Ve,$t===f&&f!==null&&($t=f=f.return);continue}break}while(!0)}function Ab(){var a=_d.current;return _d.current=Sd,a===null?Sd:a}function Zp(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),nr===null||(ei&268435455)===0&&(Md&268435455)===0||go(nr,lr)}function Od(a,c){var f=ot;ot|=2;var x=Ab();(nr!==a||lr!==c)&&(En=null,ri(a,c));do try{hM();break}catch(S){Db(a,S)}while(!0);if(dp(),ot=f,_d.current=x,$t!==null)throw Error(t(261));return nr=null,lr=0,Zt}function hM(){for(;$t!==null;)Rb($t)}function fM(){for(;$t!==null&&!z_();)Rb($t)}function Rb(a){var c=zb(a.alternate,a,Jr);a.memoizedProps=a.pendingProps,c===null?Ob(a):$t=c,Wp.current=null}function Ob(a){var c=a;do{var f=c.alternate;if(a=c.return,(c.flags&32768)===0){if(f=oM(f,c,Jr),f!==null){$t=f;return}}else{if(f=iM(f,c),f!==null){f.flags&=32767,$t=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Zt=6,$t=null;return}}if(c=c.sibling,c!==null){$t=c;return}$t=c=a}while(c!==null);Zt===0&&(Zt=5)}function si(a,c,f){var x=ut,S=ds.transition;try{ds.transition=null,ut=1,pM(a,c,f,x)}finally{ds.transition=S,ut=x}return null}function pM(a,c,f,x){do Ki();while(po!==null);if((ot&6)!==0)throw Error(t(327));f=a.finishedWork;var S=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var _=f.lanes|f.childLanes;if(X_(a,_),a===nr&&($t=nr=null,lr=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Pd||(Pd=!0,Ib(Ic,function(){return Ki(),null})),_=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||_){_=ds.transition,ds.transition=null;var A=ut;ut=1;var z=ot;ot|=4,Wp.current=null,lM(a,f),jb(f,a),R5(Zf),Gc=!!qf,Zf=qf=null,a.current=f,cM(f),I_(),ot=z,ut=A,ds.transition=_}else a.current=f;if(Pd&&(Pd=!1,po=a,Dd=S),_=a.pendingLanes,_===0&&(fo=null),W_(f.stateNode),Lr(a,Ot()),c!==null)for(x=a.onRecoverableError,f=0;f<c.length;f++)S=c[f],x(S.value,{componentStack:S.stack,digest:S.digest});if(Ed)throw Ed=!1,a=$p,$p=null,a;return(Dd&1)!==0&&a.tag!==0&&Ki(),_=a.pendingLanes,(_&1)!==0?a===Gp?Ml++:(Ml=0,Gp=a):Ml=0,lo(),null}function Ki(){if(po!==null){var a=Cy(Dd),c=ds.transition,f=ut;try{if(ds.transition=null,ut=16>a?16:a,po===null)var x=!1;else{if(a=po,po=null,Dd=0,(ot&6)!==0)throw Error(t(331));var S=ot;for(ot|=4,Fe=a.current;Fe!==null;){var _=Fe,A=_.child;if((Fe.flags&16)!==0){var z=_.deletions;if(z!==null){for(var $=0;$<z.length;$++){var le=z[$];for(Fe=le;Fe!==null;){var be=Fe;switch(be.tag){case 0:case 11:case 15:Nl(8,be,_)}var ke=be.child;if(ke!==null)ke.return=be,Fe=ke;else for(;Fe!==null;){be=Fe;var ye=be.sibling,Ae=be.return;if(bb(be),be===le){Fe=null;break}if(ye!==null){ye.return=Ae,Fe=ye;break}Fe=Ae}}}var Le=_.alternate;if(Le!==null){var Be=Le.child;if(Be!==null){Le.child=null;do{var Ft=Be.sibling;Be.sibling=null,Be=Ft}while(Be!==null)}}Fe=_}}if((_.subtreeFlags&2064)!==0&&A!==null)A.return=_,Fe=A;else e:for(;Fe!==null;){if(_=Fe,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Nl(9,_,_.return)}var ee=_.sibling;if(ee!==null){ee.return=_.return,Fe=ee;break e}Fe=_.return}}var Y=a.current;for(Fe=Y;Fe!==null;){A=Fe;var te=A.child;if((A.subtreeFlags&2064)!==0&&te!==null)te.return=A,Fe=te;else e:for(A=Y;Fe!==null;){if(z=Fe,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Td(9,z)}}catch(Ve){Dt(z,z.return,Ve)}if(z===A){Fe=null;break e}var Me=z.sibling;if(Me!==null){Me.return=z.return,Fe=Me;break e}Fe=z.return}}if(ot=S,lo(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Bc,a)}catch{}x=!0}return x}finally{ut=f,ds.transition=c}}return!1}function Fb(a,c,f){c=$i(f,c),c=eb(a,c,1),a=uo(a,c,1),c=Nr(),a!==null&&(Qa(a,1,c),Lr(a,c))}function Dt(a,c,f){if(a.tag===3)Fb(a,a,f);else for(;c!==null;){if(c.tag===3){Fb(c,a,f);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(fo===null||!fo.has(x))){a=$i(f,a),a=tb(c,a,1),c=uo(c,a,1),a=Nr(),c!==null&&(Qa(c,1,a),Lr(c,a));break}}c=c.return}}function mM(a,c,f){var x=a.pingCache;x!==null&&x.delete(c),c=Nr(),a.pingedLanes|=a.suspendedLanes&f,nr===a&&(lr&f)===f&&(Zt===4||Zt===3&&(lr&130023424)===lr&&500>Ot()-Up?ri(a,0):Hp|=f),Lr(a,c)}function Lb(a,c){c===0&&((a.mode&1)===0?c=1:(c=Wc,Wc<<=1,(Wc&130023424)===0&&(Wc=4194304)));var f=Nr();a=Tn(a,c),a!==null&&(Qa(a,c,f),Lr(a,f))}function gM(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),Lb(a,f)}function xM(a,c){var f=0;switch(a.tag){case 13:var x=a.stateNode,S=a.memoizedState;S!==null&&(f=S.retryLane);break;case 19:x=a.stateNode;break;default:throw Error(t(314))}x!==null&&x.delete(c),Lb(a,f)}var zb;zb=function(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps||Ar.current)Or=!0;else{if((a.lanes&f)===0&&(c.flags&128)===0)return Or=!1,nM(a,c,f);Or=(a.flags&131072)!==0}else Or=!1,vt&&(c.flags&1048576)!==0&&xv(c,dd,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;jd(a,c),a=c.pendingProps;var S=Li(c,pr.current);Hi(c,f),S=wp(null,c,x,a,S,f);var _=Sp();return c.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Rr(x)?(_=!0,ad(c)):_=!1,c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,pp(c),S.updater=Cd,c.stateNode=S,S._reactInternals=c,_p(c,x,a,f),c=Dp(null,c,x,!0,_,f)):(c.tag=0,vt&&_&&np(c),jr(null,c,S,f),c=c.child),c;case 16:x=c.elementType;e:{switch(jd(a,c),a=c.pendingProps,S=x._init,x=S(x._payload),c.type=x,S=c.tag=vM(x),a=Ms(x,a),S){case 0:c=Pp(null,c,x,a,f);break e;case 1:c=db(null,c,x,a,f);break e;case 11:c=ob(null,c,x,a,f);break e;case 14:c=ib(null,c,x,Ms(x.type,a),f);break e}throw Error(t(306,x,""))}return c;case 0:return x=c.type,S=c.pendingProps,S=c.elementType===x?S:Ms(x,S),Pp(a,c,x,S,f);case 1:return x=c.type,S=c.pendingProps,S=c.elementType===x?S:Ms(x,S),db(a,c,x,S,f);case 3:e:{if(ub(c),a===null)throw Error(t(387));x=c.pendingProps,_=c.memoizedState,S=_.element,Nv(a,c),gd(c,x,null,f);var A=c.memoizedState;if(x=A.element,_.isDehydrated)if(_={element:x,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){S=$i(Error(t(423)),c),c=hb(a,c,x,f,S);break e}else if(x!==S){S=$i(Error(t(424)),c),c=hb(a,c,x,f,S);break e}else for(Zr=oo(c.stateNode.containerInfo.firstChild),qr=c,vt=!0,_s=null,f=kv(c,null,x,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Bi(),x===S){c=Mn(a,c,f);break e}jr(a,c,x,f)}c=c.child}return c;case 5:return Mv(c),a===null&&ap(c),x=c.type,S=c.pendingProps,_=a!==null?a.memoizedProps:null,A=S.children,Jf(x,S)?A=null:_!==null&&Jf(x,_)&&(c.flags|=32),cb(a,c),jr(a,c,A,f),c.child;case 6:return a===null&&ap(c),null;case 13:return fb(a,c,f);case 4:return mp(c,c.stateNode.containerInfo),x=c.pendingProps,a===null?c.child=Vi(c,null,x,f):jr(a,c,x,f),c.child;case 11:return x=c.type,S=c.pendingProps,S=c.elementType===x?S:Ms(x,S),ob(a,c,x,S,f);case 7:return jr(a,c,c.pendingProps,f),c.child;case 8:return jr(a,c,c.pendingProps.children,f),c.child;case 12:return jr(a,c,c.pendingProps.children,f),c.child;case 10:e:{if(x=c.type._context,S=c.pendingProps,_=c.memoizedProps,A=S.value,pt(fd,x._currentValue),x._currentValue=A,_!==null)if(Ts(_.value,A)){if(_.children===S.children&&!Ar.current){c=Mn(a,c,f);break e}}else for(_=c.child,_!==null&&(_.return=c);_!==null;){var z=_.dependencies;if(z!==null){A=_.child;for(var $=z.firstContext;$!==null;){if($.context===x){if(_.tag===1){$=_n(-1,f&-f),$.tag=2;var le=_.updateQueue;if(le!==null){le=le.shared;var be=le.pending;be===null?$.next=$:($.next=be.next,be.next=$),le.pending=$}}_.lanes|=f,$=_.alternate,$!==null&&($.lanes|=f),hp(_.return,f,c),z.lanes|=f;break}$=$.next}}else if(_.tag===10)A=_.type===c.type?null:_.child;else if(_.tag===18){if(A=_.return,A===null)throw Error(t(341));A.lanes|=f,z=A.alternate,z!==null&&(z.lanes|=f),hp(A,f,c),A=_.sibling}else A=_.child;if(A!==null)A.return=_;else for(A=_;A!==null;){if(A===c){A=null;break}if(_=A.sibling,_!==null){_.return=A.return,A=_;break}A=A.return}_=A}jr(a,c,S.children,f),c=c.child}return c;case 9:return S=c.type,x=c.pendingProps.children,Hi(c,f),S=ls(S),x=x(S),c.flags|=1,jr(a,c,x,f),c.child;case 14:return x=c.type,S=Ms(x,c.pendingProps),S=Ms(x.type,S),ib(a,c,x,S,f);case 15:return ab(a,c,c.type,c.pendingProps,f);case 17:return x=c.type,S=c.pendingProps,S=c.elementType===x?S:Ms(x,S),jd(a,c),c.tag=1,Rr(x)?(a=!0,ad(c)):a=!1,Hi(c,f),Jv(c,x,S),_p(c,x,S,f),Dp(null,c,x,!0,a,f);case 19:return mb(a,c,f);case 22:return lb(a,c,f)}throw Error(t(156,c.tag))};function Ib(a,c){return yy(a,c)}function yM(a,c,f,x){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(a,c,f,x){return new yM(a,c,f,x)}function Jp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function vM(a){if(typeof a=="function")return Jp(a)?1:0;if(a!=null){if(a=a.$$typeof,a===U)return 11;if(a===de)return 14}return 2}function xo(a,c){var f=a.alternate;return f===null?(f=us(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function Fd(a,c,f,x,S,_){var A=2;if(x=a,typeof a=="function")Jp(a)&&(A=1);else if(typeof a=="string")A=5;else e:switch(a){case M:return ni(f.children,S,_,c);case P:A=8,S|=8;break;case R:return a=us(12,f,c,S|2),a.elementType=R,a.lanes=_,a;case L:return a=us(13,f,c,S),a.elementType=L,a.lanes=_,a;case X:return a=us(19,f,c,S),a.elementType=X,a.lanes=_,a;case V:return Ld(f,S,_,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case F:A=10;break e;case I:A=9;break e;case U:A=11;break e;case de:A=14;break e;case B:A=16,x=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=us(A,f,c,S),c.elementType=a,c.type=x,c.lanes=_,c}function ni(a,c,f,x){return a=us(7,a,x,c),a.lanes=f,a}function Ld(a,c,f,x){return a=us(22,a,x,c),a.elementType=V,a.lanes=f,a.stateNode={isHidden:!1},a}function Qp(a,c,f){return a=us(6,a,null,c),a.lanes=f,a}function em(a,c,f){return c=us(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function bM(a,c,f,x,S){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tf(0),this.expirationTimes=Tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tf(0),this.identifierPrefix=x,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function tm(a,c,f,x,S,_,A,z,$){return a=new bM(a,c,f,z,$),c===1?(c=1,_===!0&&(c|=8)):c=0,_=us(3,null,null,c),a.current=_,_.stateNode=a,_.memoizedState={element:x,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},pp(_),a}function wM(a,c,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:x==null?null:""+x,children:a,containerInfo:c,implementation:f}}function Bb(a){if(!a)return ao;a=a._reactInternals;e:{if(Go(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Rr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(Rr(f))return pv(a,f,c)}return c}function Vb(a,c,f,x,S,_,A,z,$){return a=tm(f,x,!0,a,S,_,A,z,$),a.context=Bb(null),f=a.current,x=Nr(),S=mo(f),_=_n(x,S),_.callback=c??null,uo(f,_,S),a.current.lanes=S,Qa(a,S,x),Lr(a,x),a}function zd(a,c,f,x){var S=c.current,_=Nr(),A=mo(S);return f=Bb(f),c.context===null?c.context=f:c.pendingContext=f,c=_n(_,A),c.payload={element:a},x=x===void 0?null:x,x!==null&&(c.callback=x),a=uo(S,c,A),a!==null&&(Ds(a,S,A,_),md(a,S,A)),A}function Id(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wb(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function rm(a,c){Wb(a,c),(a=a.alternate)&&Wb(a,c)}function SM(){return null}var Hb=typeof reportError=="function"?reportError:function(a){console.error(a)};function sm(a){this._internalRoot=a}Bd.prototype.render=sm.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));zd(a,c,null,null)},Bd.prototype.unmount=sm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;ti(function(){zd(null,a,null,null)}),c[Cn]=null}};function Bd(a){this._internalRoot=a}Bd.prototype.unstable_scheduleHydration=function(a){if(a){var c=Ny();a={blockedOn:null,target:a,priority:c};for(var f=0;f<ro.length&&c!==0&&c<ro[f].priority;f++);ro.splice(f,0,a),f===0&&My(a)}};function nm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Vd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Ub(){}function CM(a,c,f,x,S){if(S){if(typeof x=="function"){var _=x;x=function(){var le=Id(A);_.call(le)}}var A=Vb(c,x,a,0,null,!1,!1,"",Ub);return a._reactRootContainer=A,a[Cn]=A.current,fl(a.nodeType===8?a.parentNode:a),ti(),A}for(;S=a.lastChild;)a.removeChild(S);if(typeof x=="function"){var z=x;x=function(){var le=Id($);z.call(le)}}var $=tm(a,0,!1,null,null,!1,!1,"",Ub);return a._reactRootContainer=$,a[Cn]=$.current,fl(a.nodeType===8?a.parentNode:a),ti(function(){zd(c,$,f,x)}),$}function Wd(a,c,f,x,S){var _=f._reactRootContainer;if(_){var A=_;if(typeof S=="function"){var z=S;S=function(){var $=Id(A);z.call($)}}zd(c,A,a,S)}else A=CM(f,c,a,S,x);return Id(A)}ky=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var f=Ja(c.pendingLanes);f!==0&&(_f(c,f|1),Lr(c,Ot()),(ot&6)===0&&(Xi=Ot()+500,lo()))}break;case 13:ti(function(){var x=Tn(a,1);if(x!==null){var S=Nr();Ds(x,a,1,S)}}),rm(a,1)}},Mf=function(a){if(a.tag===13){var c=Tn(a,134217728);if(c!==null){var f=Nr();Ds(c,a,134217728,f)}rm(a,134217728)}},jy=function(a){if(a.tag===13){var c=mo(a),f=Tn(a,c);if(f!==null){var x=Nr();Ds(f,a,c,x)}rm(a,c)}},Ny=function(){return ut},Ty=function(a,c){var f=ut;try{return ut=a,c()}finally{ut=f}},Ka=function(a,c,f){switch(c){case"input":if(oe(a,f),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var x=f[c];if(x!==a&&x.form===a.form){var S=od(x);if(!S)throw Error(t(90));pe(x),oe(x,S)}}}break;case"textarea":Ge(a,f);break;case"select":c=f.value,c!=null&&Je(a,!!f.multiple,c,!1)}},Kt=Kp,fr=ti;var kM={usingClientEntryPoint:!1,Events:[gl,Oi,od,qe,Rt,Kp]},El={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jM={bundleType:El.bundleType,version:El.version,rendererPackageName:El.rendererPackageName,rendererConfig:El.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=gy(a),a===null?null:a.stateNode},findFiberByHostInstance:El.findFiberByHostInstance||SM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{Bc=Hd.inject(jM),Gs=Hd}catch{}}return zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kM,zr.createPortal=function(a,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nm(c))throw Error(t(200));return wM(a,c,null,f)},zr.createRoot=function(a,c){if(!nm(a))throw Error(t(299));var f=!1,x="",S=Hb;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),c=tm(a,1,!1,null,null,f,!1,x,S),a[Cn]=c.current,fl(a.nodeType===8?a.parentNode:a),new sm(c)},zr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=gy(c),a=a===null?null:a.stateNode,a},zr.flushSync=function(a){return ti(a)},zr.hydrate=function(a,c,f){if(!Vd(c))throw Error(t(200));return Wd(null,a,c,!0,f)},zr.hydrateRoot=function(a,c,f){if(!nm(a))throw Error(t(405));var x=f!=null&&f.hydratedSources||null,S=!1,_="",A=Hb;if(f!=null&&(f.unstable_strictMode===!0&&(S=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onRecoverableError!==void 0&&(A=f.onRecoverableError)),c=Vb(c,null,a,1,f??null,S,!1,_,A),a[Cn]=c.current,fl(a),x)for(a=0;a<x.length;a++)f=x[a],S=f._getVersion,S=S(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,S]:c.mutableSourceEagerHydrationData.push(f,S);return new Bd(c)},zr.render=function(a,c,f){if(!Vd(c))throw Error(t(200));return Wd(null,a,c,!1,f)},zr.unmountComponentAtNode=function(a){if(!Vd(a))throw Error(t(40));return a._reactRootContainer?(ti(function(){Wd(null,null,a,!1,function(){a._reactRootContainer=null,a[Cn]=null})}),!0):!1},zr.unstable_batchedUpdates=Kp,zr.unstable_renderSubtreeIntoContainer=function(a,c,f,x){if(!Vd(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Wd(a,c,f,!1,x)},zr.version="18.3.1-next-f1338f8080-20240426",zr}var Jb;function zh(){if(Jb)return am.exports;Jb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),am.exports=RM(),am.exports}var Qb;function OM(){if(Qb)return Ud;Qb=1;var r=zh();return Ud.createRoot=r.createRoot,Ud.hydrateRoot=r.hydrateRoot,Ud}var FM=OM(),b=Cc();const Ne=M0(b),F2=TM({__proto__:null,default:Ne},[b]);function Ye(r,e,{checkForDefaultPrevented:t=!0}={}){return function(n){if(r?.(n),t===!1||!n.defaultPrevented)return e?.(n)}}function ew(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function L2(...r){return e=>{let t=!1;const s=r.map(n=>{const i=ew(n,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let n=0;n<s.length;n++){const i=s[n];typeof i=="function"?i():ew(r[n],null)}}}}function nt(...r){return b.useCallback(L2(...r),r)}function yn(r,e=[]){let t=[];function s(i,l){const d=b.createContext(l),u=t.length;t=[...t,l];const h=m=>{const{scope:g,children:y,...v}=m,w=g?.[r]?.[u]||d,j=b.useMemo(()=>v,Object.values(v));return o.jsx(w.Provider,{value:j,children:y})};h.displayName=i+"Provider";function p(m,g){const y=g?.[r]?.[u]||d,v=b.useContext(y);if(v)return v;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[h,p]}const n=()=>{const i=t.map(l=>b.createContext(l));return function(d){const u=d?.[r]||i;return b.useMemo(()=>({[`__scope${r}`]:{...d,[r]:u}}),[d,u])}};return n.scopeName=r,[s,LM(n,...e)]}function LM(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const s=r.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const l=s.reduce((d,{useScope:u,scopeName:h})=>{const m=u(i)[`__scope${h}`];return{...d,...m}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var Lo=zh();const z2=M0(Lo);function rc(r){const e=zM(r),t=b.forwardRef((s,n)=>{const{children:i,...l}=s,d=b.Children.toArray(i),u=d.find(BM);if(u){const h=u.props.children,p=d.map(m=>m===u?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:m);return o.jsx(e,{...l,ref:n,children:b.isValidElement(h)?b.cloneElement(h,void 0,p):null})}return o.jsx(e,{...l,ref:n,children:i})});return t.displayName=`${r}.Slot`,t}var I2=rc("Slot");function zM(r){const e=b.forwardRef((t,s)=>{const{children:n,...i}=t;if(b.isValidElement(n)){const l=WM(n),d=VM(i,n.props);return n.type!==b.Fragment&&(d.ref=s?L2(s,l):l),b.cloneElement(n,d)}return b.Children.count(n)>1?b.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var B2=Symbol("radix.slottable");function IM(r){const e=({children:t})=>o.jsx(o.Fragment,{children:t});return e.displayName=`${r}.Slottable`,e.__radixId=B2,e}function BM(r){return b.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===B2}function VM(r,e){const t={...e};for(const s in e){const n=r[s],i=e[s];/^on[A-Z]/.test(s)?n&&i?t[s]=(...d)=>{const u=i(...d);return n(...d),u}:n&&(t[s]=n):s==="style"?t[s]={...n,...i}:s==="className"&&(t[s]=[n,i].filter(Boolean).join(" "))}return{...r,...t}}function WM(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var HM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ze=HM.reduce((r,e)=>{const t=rc(`Primitive.${e}`),s=b.forwardRef((n,i)=>{const{asChild:l,...d}=n,u=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(u,{...d,ref:i})});return s.displayName=`Primitive.${e}`,{...r,[e]:s}},{});function UM(r,e){r&&Lo.flushSync(()=>r.dispatchEvent(e))}function Mr(r){const e=b.useRef(r);return b.useEffect(()=>{e.current=r}),b.useMemo(()=>(...t)=>e.current?.(...t),[])}function $M(r,e=globalThis?.document){const t=Mr(r);b.useEffect(()=>{const s=n=>{n.key==="Escape"&&t(n)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var GM="DismissableLayer",ig="dismissableLayer.update",YM="dismissableLayer.pointerDownOutside",XM="dismissableLayer.focusOutside",tw,V2=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),E0=b.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:l,onDismiss:d,...u}=r,h=b.useContext(V2),[p,m]=b.useState(null),g=p?.ownerDocument??globalThis?.document,[,y]=b.useState({}),v=nt(e,M=>m(M)),w=Array.from(h.layers),[j]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=w.indexOf(j),N=p?w.indexOf(p):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,T=N>=C,E=ZM(M=>{const P=M.target,R=[...h.branches].some(F=>F.contains(P));!T||R||(n?.(M),l?.(M),M.defaultPrevented||d?.())},g),D=JM(M=>{const P=M.target;[...h.branches].some(F=>F.contains(P))||(i?.(M),l?.(M),M.defaultPrevented||d?.())},g);return $M(M=>{N===h.layers.size-1&&(s?.(M),!M.defaultPrevented&&d&&(M.preventDefault(),d()))},g),b.useEffect(()=>{if(p)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(tw=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),rw(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=tw)}},[p,g,t,h]),b.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),rw())},[p,h]),b.useEffect(()=>{const M=()=>y({});return document.addEventListener(ig,M),()=>document.removeEventListener(ig,M)},[]),o.jsx(Ze.div,{...u,ref:v,style:{pointerEvents:k?T?"auto":"none":void 0,...r.style},onFocusCapture:Ye(r.onFocusCapture,D.onFocusCapture),onBlurCapture:Ye(r.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Ye(r.onPointerDownCapture,E.onPointerDownCapture)})});E0.displayName=GM;var KM="DismissableLayerBranch",qM=b.forwardRef((r,e)=>{const t=b.useContext(V2),s=b.useRef(null),n=nt(e,s);return b.useEffect(()=>{const i=s.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),o.jsx(Ze.div,{...r,ref:n})});qM.displayName=KM;function ZM(r,e=globalThis?.document){const t=Mr(r),s=b.useRef(!1),n=b.useRef(()=>{});return b.useEffect(()=>{const i=d=>{if(d.target&&!s.current){let u=function(){W2(YM,t,h,{discrete:!0})};const h={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",n.current),n.current=u,e.addEventListener("click",n.current,{once:!0})):u()}else e.removeEventListener("click",n.current);s.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",i),e.removeEventListener("click",n.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function JM(r,e=globalThis?.document){const t=Mr(r),s=b.useRef(!1);return b.useEffect(()=>{const n=i=>{i.target&&!s.current&&W2(XM,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",n),()=>e.removeEventListener("focusin",n)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function rw(){const r=new CustomEvent(ig);document.dispatchEvent(r)}function W2(r,e,t,{discrete:s}){const n=t.originalEvent.target,i=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&n.addEventListener(r,e,{once:!0}),s?UM(n,i):n.dispatchEvent(i)}var ur=globalThis?.document?b.useLayoutEffect:()=>{},QM=F2[" useId ".trim().toString()]||(()=>{}),eE=0;function Da(r){const[e,t]=b.useState(QM());return ur(()=>{t(s=>s??String(eE++))},[r]),e?`radix-${e}`:""}const tE=["top","right","bottom","left"],Po=Math.min,es=Math.max,nh=Math.round,$d=Math.floor,dn=r=>({x:r,y:r}),rE={left:"right",right:"left",bottom:"top",top:"bottom"},sE={start:"end",end:"start"};function ag(r,e,t){return es(r,Po(e,t))}function Bn(r,e){return typeof r=="function"?r(e):r}function Vn(r){return r.split("-")[0]}function Aa(r){return r.split("-")[1]}function P0(r){return r==="x"?"y":"x"}function D0(r){return r==="y"?"height":"width"}const nE=new Set(["top","bottom"]);function ln(r){return nE.has(Vn(r))?"y":"x"}function A0(r){return P0(ln(r))}function oE(r,e,t){t===void 0&&(t=!1);const s=Aa(r),n=A0(r),i=D0(n);let l=n==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=oh(l)),[l,oh(l)]}function iE(r){const e=oh(r);return[lg(r),e,lg(e)]}function lg(r){return r.replace(/start|end/g,e=>sE[e])}const sw=["left","right"],nw=["right","left"],aE=["top","bottom"],lE=["bottom","top"];function cE(r,e,t){switch(r){case"top":case"bottom":return t?e?nw:sw:e?sw:nw;case"left":case"right":return e?aE:lE;default:return[]}}function dE(r,e,t,s){const n=Aa(r);let i=cE(Vn(r),t==="start",s);return n&&(i=i.map(l=>l+"-"+n),e&&(i=i.concat(i.map(lg)))),i}function oh(r){return r.replace(/left|right|bottom|top/g,e=>rE[e])}function uE(r){return{top:0,right:0,bottom:0,left:0,...r}}function H2(r){return typeof r!="number"?uE(r):{top:r,right:r,bottom:r,left:r}}function ih(r){const{x:e,y:t,width:s,height:n}=r;return{width:s,height:n,top:t,left:e,right:e+s,bottom:t+n,x:e,y:t}}function ow(r,e,t){let{reference:s,floating:n}=r;const i=ln(e),l=A0(e),d=D0(l),u=Vn(e),h=i==="y",p=s.x+s.width/2-n.width/2,m=s.y+s.height/2-n.height/2,g=s[d]/2-n[d]/2;let y;switch(u){case"top":y={x:p,y:s.y-n.height};break;case"bottom":y={x:p,y:s.y+s.height};break;case"right":y={x:s.x+s.width,y:m};break;case"left":y={x:s.x-n.width,y:m};break;default:y={x:s.x,y:s.y}}switch(Aa(e)){case"start":y[l]-=g*(t&&h?-1:1);break;case"end":y[l]+=g*(t&&h?-1:1);break}return y}const hE=async(r,e,t)=>{const{placement:s="bottom",strategy:n="absolute",middleware:i=[],platform:l}=t,d=i.filter(Boolean),u=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:r,floating:e,strategy:n}),{x:p,y:m}=ow(h,s,u),g=s,y={},v=0;for(let w=0;w<d.length;w++){const{name:j,fn:C}=d[w],{x:N,y:k,data:T,reset:E}=await C({x:p,y:m,initialPlacement:s,placement:g,strategy:n,middlewareData:y,rects:h,platform:l,elements:{reference:r,floating:e}});p=N??p,m=k??m,y={...y,[j]:{...y[j],...T}},E&&v<=50&&(v++,typeof E=="object"&&(E.placement&&(g=E.placement),E.rects&&(h=E.rects===!0?await l.getElementRects({reference:r,floating:e,strategy:n}):E.rects),{x:p,y:m}=ow(h,g,u)),w=-1)}return{x:p,y:m,placement:g,strategy:n,middlewareData:y}};async function sc(r,e){var t;e===void 0&&(e={});const{x:s,y:n,platform:i,rects:l,elements:d,strategy:u}=r,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:g=!1,padding:y=0}=Bn(e,r),v=H2(y),j=d[g?m==="floating"?"reference":"floating":m],C=ih(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(j)))==null||t?j:j.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(d.floating)),boundary:h,rootBoundary:p,strategy:u})),N=m==="floating"?{x:s,y:n,width:l.floating.width,height:l.floating.height}:l.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d.floating)),T=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},E=ih(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:N,offsetParent:k,strategy:u}):N);return{top:(C.top-E.top+v.top)/T.y,bottom:(E.bottom-C.bottom+v.bottom)/T.y,left:(C.left-E.left+v.left)/T.x,right:(E.right-C.right+v.right)/T.x}}const fE=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:s,placement:n,rects:i,platform:l,elements:d,middlewareData:u}=e,{element:h,padding:p=0}=Bn(r,e)||{};if(h==null)return{};const m=H2(p),g={x:t,y:s},y=A0(n),v=D0(y),w=await l.getDimensions(h),j=y==="y",C=j?"top":"left",N=j?"bottom":"right",k=j?"clientHeight":"clientWidth",T=i.reference[v]+i.reference[y]-g[y]-i.floating[v],E=g[y]-i.reference[y],D=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let M=D?D[k]:0;(!M||!await(l.isElement==null?void 0:l.isElement(D)))&&(M=d.floating[k]||i.floating[v]);const P=T/2-E/2,R=M/2-w[v]/2-1,F=Po(m[C],R),I=Po(m[N],R),U=F,L=M-w[v]-I,X=M/2-w[v]/2+P,de=ag(U,X,L),B=!u.arrow&&Aa(n)!=null&&X!==de&&i.reference[v]/2-(X<U?F:I)-w[v]/2<0,V=B?X<U?X-U:X-L:0;return{[y]:g[y]+V,data:{[y]:de,centerOffset:X-de-V,...B&&{alignmentOffset:V}},reset:B}}}),pE=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,s;const{placement:n,middlewareData:i,rects:l,initialPlacement:d,platform:u,elements:h}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,...j}=Bn(r,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const C=Vn(n),N=ln(d),k=Vn(d)===d,T=await(u.isRTL==null?void 0:u.isRTL(h.floating)),E=g||(k||!w?[oh(d)]:iE(d)),D=v!=="none";!g&&D&&E.push(...dE(d,w,v,T));const M=[d,...E],P=await sc(e,j),R=[];let F=((s=i.flip)==null?void 0:s.overflows)||[];if(p&&R.push(P[C]),m){const X=oE(n,l,T);R.push(P[X[0]],P[X[1]])}if(F=[...F,{placement:n,overflows:R}],!R.every(X=>X<=0)){var I,U;const X=(((I=i.flip)==null?void 0:I.index)||0)+1,de=M[X];if(de&&(!(m==="alignment"?N!==ln(de):!1)||F.every(O=>ln(O.placement)===N?O.overflows[0]>0:!0)))return{data:{index:X,overflows:F},reset:{placement:de}};let B=(U=F.filter(V=>V.overflows[0]<=0).sort((V,O)=>V.overflows[1]-O.overflows[1])[0])==null?void 0:U.placement;if(!B)switch(y){case"bestFit":{var L;const V=(L=F.filter(O=>{if(D){const Z=ln(O.placement);return Z===N||Z==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(Z=>Z>0).reduce((Z,Q)=>Z+Q,0)]).sort((O,Z)=>O[1]-Z[1])[0])==null?void 0:L[0];V&&(B=V);break}case"initialPlacement":B=d;break}if(n!==B)return{reset:{placement:B}}}return{}}}};function iw(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function aw(r){return tE.some(e=>r[e]>=0)}const mE=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...n}=Bn(r,e);switch(s){case"referenceHidden":{const i=await sc(e,{...n,elementContext:"reference"}),l=iw(i,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:aw(l)}}}case"escaped":{const i=await sc(e,{...n,altBoundary:!0}),l=iw(i,t.floating);return{data:{escapedOffsets:l,escaped:aw(l)}}}default:return{}}}}},U2=new Set(["left","top"]);async function gE(r,e){const{placement:t,platform:s,elements:n}=r,i=await(s.isRTL==null?void 0:s.isRTL(n.floating)),l=Vn(t),d=Aa(t),u=ln(t)==="y",h=U2.has(l)?-1:1,p=i&&u?-1:1,m=Bn(e,r);let{mainAxis:g,crossAxis:y,alignmentAxis:v}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return d&&typeof v=="number"&&(y=d==="end"?v*-1:v),u?{x:y*p,y:g*h}:{x:g*h,y:y*p}}const xE=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,s;const{x:n,y:i,placement:l,middlewareData:d}=e,u=await gE(e,r);return l===((t=d.offset)==null?void 0:t.placement)&&(s=d.arrow)!=null&&s.alignmentOffset?{}:{x:n+u.x,y:i+u.y,data:{...u,placement:l}}}}},yE=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:s,placement:n}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:d={fn:j=>{let{x:C,y:N}=j;return{x:C,y:N}}},...u}=Bn(r,e),h={x:t,y:s},p=await sc(e,u),m=ln(Vn(n)),g=P0(m);let y=h[g],v=h[m];if(i){const j=g==="y"?"top":"left",C=g==="y"?"bottom":"right",N=y+p[j],k=y-p[C];y=ag(N,y,k)}if(l){const j=m==="y"?"top":"left",C=m==="y"?"bottom":"right",N=v+p[j],k=v-p[C];v=ag(N,v,k)}const w=d.fn({...e,[g]:y,[m]:v});return{...w,data:{x:w.x-t,y:w.y-s,enabled:{[g]:i,[m]:l}}}}}},vE=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:s,placement:n,rects:i,middlewareData:l}=e,{offset:d=0,mainAxis:u=!0,crossAxis:h=!0}=Bn(r,e),p={x:t,y:s},m=ln(n),g=P0(m);let y=p[g],v=p[m];const w=Bn(d,e),j=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(u){const k=g==="y"?"height":"width",T=i.reference[g]-i.floating[k]+j.mainAxis,E=i.reference[g]+i.reference[k]-j.mainAxis;y<T?y=T:y>E&&(y=E)}if(h){var C,N;const k=g==="y"?"width":"height",T=U2.has(Vn(n)),E=i.reference[m]-i.floating[k]+(T&&((C=l.offset)==null?void 0:C[m])||0)+(T?0:j.crossAxis),D=i.reference[m]+i.reference[k]+(T?0:((N=l.offset)==null?void 0:N[m])||0)-(T?j.crossAxis:0);v<E?v=E:v>D&&(v=D)}return{[g]:y,[m]:v}}}},bE=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,s;const{placement:n,rects:i,platform:l,elements:d}=e,{apply:u=()=>{},...h}=Bn(r,e),p=await sc(e,h),m=Vn(n),g=Aa(n),y=ln(n)==="y",{width:v,height:w}=i.floating;let j,C;m==="top"||m==="bottom"?(j=m,C=g===(await(l.isRTL==null?void 0:l.isRTL(d.floating))?"start":"end")?"left":"right"):(C=m,j=g==="end"?"top":"bottom");const N=w-p.top-p.bottom,k=v-p.left-p.right,T=Po(w-p[j],N),E=Po(v-p[C],k),D=!e.middlewareData.shift;let M=T,P=E;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=k),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(M=N),D&&!g){const F=es(p.left,0),I=es(p.right,0),U=es(p.top,0),L=es(p.bottom,0);y?P=v-2*(F!==0||I!==0?F+I:es(p.left,p.right)):M=w-2*(U!==0||L!==0?U+L:es(p.top,p.bottom))}await u({...e,availableWidth:P,availableHeight:M});const R=await l.getDimensions(d.floating);return v!==R.width||w!==R.height?{reset:{rects:!0}}:{}}}};function Ih(){return typeof window<"u"}function Ra(r){return $2(r)?(r.nodeName||"").toLowerCase():"#document"}function rs(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function vn(r){var e;return(e=($2(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function $2(r){return Ih()?r instanceof Node||r instanceof rs(r).Node:!1}function Hs(r){return Ih()?r instanceof Element||r instanceof rs(r).Element:!1}function mn(r){return Ih()?r instanceof HTMLElement||r instanceof rs(r).HTMLElement:!1}function lw(r){return!Ih()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof rs(r).ShadowRoot}const wE=new Set(["inline","contents"]);function kc(r){const{overflow:e,overflowX:t,overflowY:s,display:n}=Us(r);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!wE.has(n)}const SE=new Set(["table","td","th"]);function CE(r){return SE.has(Ra(r))}const kE=[":popover-open",":modal"];function Bh(r){return kE.some(e=>{try{return r.matches(e)}catch{return!1}})}const jE=["transform","translate","scale","rotate","perspective"],NE=["transform","translate","scale","rotate","perspective","filter"],TE=["paint","layout","strict","content"];function R0(r){const e=O0(),t=Hs(r)?Us(r):r;return jE.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||NE.some(s=>(t.willChange||"").includes(s))||TE.some(s=>(t.contain||"").includes(s))}function _E(r){let e=Do(r);for(;mn(e)&&!Ca(e);){if(R0(e))return e;if(Bh(e))return null;e=Do(e)}return null}function O0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ME=new Set(["html","body","#document"]);function Ca(r){return ME.has(Ra(r))}function Us(r){return rs(r).getComputedStyle(r)}function Vh(r){return Hs(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Do(r){if(Ra(r)==="html")return r;const e=r.assignedSlot||r.parentNode||lw(r)&&r.host||vn(r);return lw(e)?e.host:e}function G2(r){const e=Do(r);return Ca(e)?r.ownerDocument?r.ownerDocument.body:r.body:mn(e)&&kc(e)?e:G2(e)}function nc(r,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const n=G2(r),i=n===((s=r.ownerDocument)==null?void 0:s.body),l=rs(n);if(i){const d=cg(l);return e.concat(l,l.visualViewport||[],kc(n)?n:[],d&&t?nc(d):[])}return e.concat(n,nc(n,[],t))}function cg(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Y2(r){const e=Us(r);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const n=mn(r),i=n?r.offsetWidth:t,l=n?r.offsetHeight:s,d=nh(t)!==i||nh(s)!==l;return d&&(t=i,s=l),{width:t,height:s,$:d}}function F0(r){return Hs(r)?r:r.contextElement}function ga(r){const e=F0(r);if(!mn(e))return dn(1);const t=e.getBoundingClientRect(),{width:s,height:n,$:i}=Y2(e);let l=(i?nh(t.width):t.width)/s,d=(i?nh(t.height):t.height)/n;return(!l||!Number.isFinite(l))&&(l=1),(!d||!Number.isFinite(d))&&(d=1),{x:l,y:d}}const EE=dn(0);function X2(r){const e=rs(r);return!O0()||!e.visualViewport?EE:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function PE(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==rs(r)?!1:e}function vi(r,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const n=r.getBoundingClientRect(),i=F0(r);let l=dn(1);e&&(s?Hs(s)&&(l=ga(s)):l=ga(r));const d=PE(i,t,s)?X2(i):dn(0);let u=(n.left+d.x)/l.x,h=(n.top+d.y)/l.y,p=n.width/l.x,m=n.height/l.y;if(i){const g=rs(i),y=s&&Hs(s)?rs(s):s;let v=g,w=cg(v);for(;w&&s&&y!==v;){const j=ga(w),C=w.getBoundingClientRect(),N=Us(w),k=C.left+(w.clientLeft+parseFloat(N.paddingLeft))*j.x,T=C.top+(w.clientTop+parseFloat(N.paddingTop))*j.y;u*=j.x,h*=j.y,p*=j.x,m*=j.y,u+=k,h+=T,v=rs(w),w=cg(v)}}return ih({width:p,height:m,x:u,y:h})}function Wh(r,e){const t=Vh(r).scrollLeft;return e?e.left+t:vi(vn(r)).left+t}function K2(r,e){const t=r.getBoundingClientRect(),s=t.left+e.scrollLeft-Wh(r,t),n=t.top+e.scrollTop;return{x:s,y:n}}function DE(r){let{elements:e,rect:t,offsetParent:s,strategy:n}=r;const i=n==="fixed",l=vn(s),d=e?Bh(e.floating):!1;if(s===l||d&&i)return t;let u={scrollLeft:0,scrollTop:0},h=dn(1);const p=dn(0),m=mn(s);if((m||!m&&!i)&&((Ra(s)!=="body"||kc(l))&&(u=Vh(s)),mn(s))){const y=vi(s);h=ga(s),p.x=y.x+s.clientLeft,p.y=y.y+s.clientTop}const g=l&&!m&&!i?K2(l,u):dn(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-u.scrollLeft*h.x+p.x+g.x,y:t.y*h.y-u.scrollTop*h.y+p.y+g.y}}function AE(r){return Array.from(r.getClientRects())}function RE(r){const e=vn(r),t=Vh(r),s=r.ownerDocument.body,n=es(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=es(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let l=-t.scrollLeft+Wh(r);const d=-t.scrollTop;return Us(s).direction==="rtl"&&(l+=es(e.clientWidth,s.clientWidth)-n),{width:n,height:i,x:l,y:d}}const cw=25;function OE(r,e){const t=rs(r),s=vn(r),n=t.visualViewport;let i=s.clientWidth,l=s.clientHeight,d=0,u=0;if(n){i=n.width,l=n.height;const p=O0();(!p||p&&e==="fixed")&&(d=n.offsetLeft,u=n.offsetTop)}const h=Wh(s);if(h<=0){const p=s.ownerDocument,m=p.body,g=getComputedStyle(m),y=p.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,v=Math.abs(s.clientWidth-m.clientWidth-y);v<=cw&&(i-=v)}else h<=cw&&(i+=h);return{width:i,height:l,x:d,y:u}}const FE=new Set(["absolute","fixed"]);function LE(r,e){const t=vi(r,!0,e==="fixed"),s=t.top+r.clientTop,n=t.left+r.clientLeft,i=mn(r)?ga(r):dn(1),l=r.clientWidth*i.x,d=r.clientHeight*i.y,u=n*i.x,h=s*i.y;return{width:l,height:d,x:u,y:h}}function dw(r,e,t){let s;if(e==="viewport")s=OE(r,t);else if(e==="document")s=RE(vn(r));else if(Hs(e))s=LE(e,t);else{const n=X2(r);s={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return ih(s)}function q2(r,e){const t=Do(r);return t===e||!Hs(t)||Ca(t)?!1:Us(t).position==="fixed"||q2(t,e)}function zE(r,e){const t=e.get(r);if(t)return t;let s=nc(r,[],!1).filter(d=>Hs(d)&&Ra(d)!=="body"),n=null;const i=Us(r).position==="fixed";let l=i?Do(r):r;for(;Hs(l)&&!Ca(l);){const d=Us(l),u=R0(l);!u&&d.position==="fixed"&&(n=null),(i?!u&&!n:!u&&d.position==="static"&&!!n&&FE.has(n.position)||kc(l)&&!u&&q2(r,l))?s=s.filter(p=>p!==l):n=d,l=Do(l)}return e.set(r,s),s}function IE(r){let{element:e,boundary:t,rootBoundary:s,strategy:n}=r;const l=[...t==="clippingAncestors"?Bh(e)?[]:zE(e,this._c):[].concat(t),s],d=l[0],u=l.reduce((h,p)=>{const m=dw(e,p,n);return h.top=es(m.top,h.top),h.right=Po(m.right,h.right),h.bottom=Po(m.bottom,h.bottom),h.left=es(m.left,h.left),h},dw(e,d,n));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function BE(r){const{width:e,height:t}=Y2(r);return{width:e,height:t}}function VE(r,e,t){const s=mn(e),n=vn(e),i=t==="fixed",l=vi(r,!0,i,e);let d={scrollLeft:0,scrollTop:0};const u=dn(0);function h(){u.x=Wh(n)}if(s||!s&&!i)if((Ra(e)!=="body"||kc(n))&&(d=Vh(e)),s){const y=vi(e,!0,i,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else n&&h();i&&!s&&n&&h();const p=n&&!s&&!i?K2(n,d):dn(0),m=l.left+d.scrollLeft-u.x-p.x,g=l.top+d.scrollTop-u.y-p.y;return{x:m,y:g,width:l.width,height:l.height}}function dm(r){return Us(r).position==="static"}function uw(r,e){if(!mn(r)||Us(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return vn(r)===t&&(t=t.ownerDocument.body),t}function Z2(r,e){const t=rs(r);if(Bh(r))return t;if(!mn(r)){let n=Do(r);for(;n&&!Ca(n);){if(Hs(n)&&!dm(n))return n;n=Do(n)}return t}let s=uw(r,e);for(;s&&CE(s)&&dm(s);)s=uw(s,e);return s&&Ca(s)&&dm(s)&&!R0(s)?t:s||_E(r)||t}const WE=async function(r){const e=this.getOffsetParent||Z2,t=this.getDimensions,s=await t(r.floating);return{reference:VE(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function HE(r){return Us(r).direction==="rtl"}const UE={convertOffsetParentRelativeRectToViewportRelativeRect:DE,getDocumentElement:vn,getClippingRect:IE,getOffsetParent:Z2,getElementRects:WE,getClientRects:AE,getDimensions:BE,getScale:ga,isElement:Hs,isRTL:HE};function J2(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function $E(r,e){let t=null,s;const n=vn(r);function i(){var d;clearTimeout(s),(d=t)==null||d.disconnect(),t=null}function l(d,u){d===void 0&&(d=!1),u===void 0&&(u=1),i();const h=r.getBoundingClientRect(),{left:p,top:m,width:g,height:y}=h;if(d||e(),!g||!y)return;const v=$d(m),w=$d(n.clientWidth-(p+g)),j=$d(n.clientHeight-(m+y)),C=$d(p),k={rootMargin:-v+"px "+-w+"px "+-j+"px "+-C+"px",threshold:es(0,Po(1,u))||1};let T=!0;function E(D){const M=D[0].intersectionRatio;if(M!==u){if(!T)return l();M?l(!1,M):s=setTimeout(()=>{l(!1,1e-7)},1e3)}M===1&&!J2(h,r.getBoundingClientRect())&&l(),T=!1}try{t=new IntersectionObserver(E,{...k,root:n.ownerDocument})}catch{t=new IntersectionObserver(E,k)}t.observe(r)}return l(!0),i}function GE(r,e,t,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,h=F0(r),p=n||i?[...h?nc(h):[],...nc(e)]:[];p.forEach(C=>{n&&C.addEventListener("scroll",t,{passive:!0}),i&&C.addEventListener("resize",t)});const m=h&&d?$E(h,t):null;let g=-1,y=null;l&&(y=new ResizeObserver(C=>{let[N]=C;N&&N.target===h&&y&&(y.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var k;(k=y)==null||k.observe(e)})),t()}),h&&!u&&y.observe(h),y.observe(e));let v,w=u?vi(r):null;u&&j();function j(){const C=vi(r);w&&!J2(w,C)&&t(),w=C,v=requestAnimationFrame(j)}return t(),()=>{var C;p.forEach(N=>{n&&N.removeEventListener("scroll",t),i&&N.removeEventListener("resize",t)}),m?.(),(C=y)==null||C.disconnect(),y=null,u&&cancelAnimationFrame(v)}}const YE=xE,XE=yE,KE=pE,qE=bE,ZE=mE,hw=fE,JE=vE,QE=(r,e,t)=>{const s=new Map,n={platform:UE,...t},i={...n.platform,_c:s};return hE(r,e,{...n,platform:i})};var eP=typeof document<"u",tP=function(){},Hu=eP?b.useLayoutEffect:tP;function ah(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,s,n;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!ah(r[s],e[s]))return!1;return!0}if(n=Object.keys(r),t=n.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,n[s]))return!1;for(s=t;s--!==0;){const i=n[s];if(!(i==="_owner"&&r.$$typeof)&&!ah(r[i],e[i]))return!1}return!0}return r!==r&&e!==e}function Q2(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function fw(r,e){const t=Q2(r);return Math.round(e*t)/t}function um(r){const e=b.useRef(r);return Hu(()=>{e.current=r}),e}function rP(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:n,elements:{reference:i,floating:l}={},transform:d=!0,whileElementsMounted:u,open:h}=r,[p,m]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[g,y]=b.useState(s);ah(g,s)||y(s);const[v,w]=b.useState(null),[j,C]=b.useState(null),N=b.useCallback(O=>{O!==D.current&&(D.current=O,w(O))},[]),k=b.useCallback(O=>{O!==M.current&&(M.current=O,C(O))},[]),T=i||v,E=l||j,D=b.useRef(null),M=b.useRef(null),P=b.useRef(p),R=u!=null,F=um(u),I=um(n),U=um(h),L=b.useCallback(()=>{if(!D.current||!M.current)return;const O={placement:e,strategy:t,middleware:g};I.current&&(O.platform=I.current),QE(D.current,M.current,O).then(Z=>{const Q={...Z,isPositioned:U.current!==!1};X.current&&!ah(P.current,Q)&&(P.current=Q,Lo.flushSync(()=>{m(Q)}))})},[g,e,t,I,U]);Hu(()=>{h===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,m(O=>({...O,isPositioned:!1})))},[h]);const X=b.useRef(!1);Hu(()=>(X.current=!0,()=>{X.current=!1}),[]),Hu(()=>{if(T&&(D.current=T),E&&(M.current=E),T&&E){if(F.current)return F.current(T,E,L);L()}},[T,E,L,F,R]);const de=b.useMemo(()=>({reference:D,floating:M,setReference:N,setFloating:k}),[N,k]),B=b.useMemo(()=>({reference:T,floating:E}),[T,E]),V=b.useMemo(()=>{const O={position:t,left:0,top:0};if(!B.floating)return O;const Z=fw(B.floating,p.x),Q=fw(B.floating,p.y);return d?{...O,transform:"translate("+Z+"px, "+Q+"px)",...Q2(B.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Z,top:Q}},[t,d,B.floating,p.x,p.y]);return b.useMemo(()=>({...p,update:L,refs:de,elements:B,floatingStyles:V}),[p,L,de,B,V])}const sP=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:s,padding:n}=typeof r=="function"?r(t):r;return s&&e(s)?s.current!=null?hw({element:s.current,padding:n}).fn(t):{}:s?hw({element:s,padding:n}).fn(t):{}}}},nP=(r,e)=>({...YE(r),options:[r,e]}),oP=(r,e)=>({...XE(r),options:[r,e]}),iP=(r,e)=>({...JE(r),options:[r,e]}),aP=(r,e)=>({...KE(r),options:[r,e]}),lP=(r,e)=>({...qE(r),options:[r,e]}),cP=(r,e)=>({...ZE(r),options:[r,e]}),dP=(r,e)=>({...sP(r),options:[r,e]});var uP="Arrow",eC=b.forwardRef((r,e)=>{const{children:t,width:s=10,height:n=5,...i}=r;return o.jsx(Ze.svg,{...i,ref:e,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});eC.displayName=uP;var hP=eC;function L0(r){const[e,t]=b.useState(void 0);return ur(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const s=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let l,d;if("borderBoxSize"in i){const u=i.borderBoxSize,h=Array.isArray(u)?u[0]:u;l=h.inlineSize,d=h.blockSize}else l=r.offsetWidth,d=r.offsetHeight;t({width:l,height:d})});return s.observe(r,{box:"border-box"}),()=>s.unobserve(r)}else t(void 0)},[r]),e}var z0="Popper",[tC,Hh]=yn(z0),[fP,rC]=tC(z0),sC=r=>{const{__scopePopper:e,children:t}=r,[s,n]=b.useState(null);return o.jsx(fP,{scope:e,anchor:s,onAnchorChange:n,children:t})};sC.displayName=z0;var nC="PopperAnchor",oC=b.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:s,...n}=r,i=rC(nC,t),l=b.useRef(null),d=nt(e,l),u=b.useRef(null);return b.useEffect(()=>{const h=u.current;u.current=s?.current||l.current,h!==u.current&&i.onAnchorChange(u.current)}),s?null:o.jsx(Ze.div,{...n,ref:d})});oC.displayName=nC;var I0="PopperContent",[pP,mP]=tC(I0),iC=b.forwardRef((r,e)=>{const{__scopePopper:t,side:s="bottom",sideOffset:n=0,align:i="center",alignOffset:l=0,arrowPadding:d=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:v,...w}=r,j=rC(I0,t),[C,N]=b.useState(null),k=nt(e,se=>N(se)),[T,E]=b.useState(null),D=L0(T),M=D?.width??0,P=D?.height??0,R=s+(i!=="center"?"-"+i:""),F=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},I=Array.isArray(h)?h:[h],U=I.length>0,L={padding:F,boundary:I.filter(xP),altBoundary:U},{refs:X,floatingStyles:de,placement:B,isPositioned:V,middlewareData:O}=rP({strategy:"fixed",placement:R,whileElementsMounted:(...se)=>GE(...se,{animationFrame:y==="always"}),elements:{reference:j.anchor},middleware:[nP({mainAxis:n+P,alignmentAxis:l}),u&&oP({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?iP():void 0,...L}),u&&aP({...L}),lP({...L,apply:({elements:se,rects:K,availableWidth:fe,availableHeight:ie})=>{const{width:Te,height:pe}=K.reference,ue=se.floating.style;ue.setProperty("--radix-popper-available-width",`${fe}px`),ue.setProperty("--radix-popper-available-height",`${ie}px`),ue.setProperty("--radix-popper-anchor-width",`${Te}px`),ue.setProperty("--radix-popper-anchor-height",`${pe}px`)}}),T&&dP({element:T,padding:d}),yP({arrowWidth:M,arrowHeight:P}),g&&cP({strategy:"referenceHidden",...L})]}),[Z,Q]=cC(B),W=Mr(v);ur(()=>{V&&W?.()},[V,W]);const ae=O.arrow?.x,q=O.arrow?.y,ce=O.arrow?.centerOffset!==0,[we,xe]=b.useState();return ur(()=>{C&&xe(window.getComputedStyle(C).zIndex)},[C]),o.jsx("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:V?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[O.transformOrigin?.x,O.transformOrigin?.y].join(" "),...O.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:o.jsx(pP,{scope:t,placedSide:Z,onArrowChange:E,arrowX:ae,arrowY:q,shouldHideArrow:ce,children:o.jsx(Ze.div,{"data-side":Z,"data-align":Q,...w,ref:k,style:{...w.style,animation:V?void 0:"none"}})})})});iC.displayName=I0;var aC="PopperArrow",gP={top:"bottom",right:"left",bottom:"top",left:"right"},lC=b.forwardRef(function(e,t){const{__scopePopper:s,...n}=e,i=mP(aC,s),l=gP[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(hP,{...n,ref:t,style:{...n.style,display:"block"}})})});lC.displayName=aC;function xP(r){return r!==null}var yP=r=>({name:"transformOrigin",options:r,fn(e){const{placement:t,rects:s,middlewareData:n}=e,l=n.arrow?.centerOffset!==0,d=l?0:r.arrowWidth,u=l?0:r.arrowHeight,[h,p]=cC(t),m={start:"0%",center:"50%",end:"100%"}[p],g=(n.arrow?.x??0)+d/2,y=(n.arrow?.y??0)+u/2;let v="",w="";return h==="bottom"?(v=l?m:`${g}px`,w=`${-u}px`):h==="top"?(v=l?m:`${g}px`,w=`${s.floating.height+u}px`):h==="right"?(v=`${-u}px`,w=l?m:`${y}px`):h==="left"&&(v=`${s.floating.width+u}px`,w=l?m:`${y}px`),{data:{x:v,y:w}}}});function cC(r){const[e,t="center"]=r.split("-");return[e,t]}var dC=sC,uC=oC,hC=iC,fC=lC,vP="Portal",B0=b.forwardRef((r,e)=>{const{container:t,...s}=r,[n,i]=b.useState(!1);ur(()=>i(!0),[]);const l=t||n&&globalThis?.document?.body;return l?z2.createPortal(o.jsx(Ze.div,{...s,ref:e}),l):null});B0.displayName=vP;function bP(r,e){return b.useReducer((t,s)=>e[t][s]??t,r)}var zo=r=>{const{present:e,children:t}=r,s=wP(e),n=typeof t=="function"?t({present:s.isPresent}):b.Children.only(t),i=nt(s.ref,SP(n));return typeof t=="function"||s.isPresent?b.cloneElement(n,{ref:i}):null};zo.displayName="Presence";function wP(r){const[e,t]=b.useState(),s=b.useRef(null),n=b.useRef(r),i=b.useRef("none"),l=r?"mounted":"unmounted",[d,u]=bP(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const h=Gd(s.current);i.current=d==="mounted"?h:"none"},[d]),ur(()=>{const h=s.current,p=n.current;if(p!==r){const g=i.current,y=Gd(h);r?u("MOUNT"):y==="none"||h?.display==="none"?u("UNMOUNT"):u(p&&g!==y?"ANIMATION_OUT":"UNMOUNT"),n.current=r}},[r,u]),ur(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,m=y=>{const w=Gd(s.current).includes(CSS.escape(y.animationName));if(y.target===e&&w&&(u("ANIMATION_END"),!n.current)){const j=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=j)})}},g=y=>{y.target===e&&(i.current=Gd(s.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:b.useCallback(h=>{s.current=h?getComputedStyle(h):null,t(h)},[])}}function Gd(r){return r?.animationName||"none"}function SP(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var CP=F2[" useInsertionEffect ".trim().toString()]||ur;function bi({prop:r,defaultProp:e,onChange:t=()=>{},caller:s}){const[n,i,l]=kP({defaultProp:e,onChange:t}),d=r!==void 0,u=d?r:n;{const p=b.useRef(r!==void 0);b.useEffect(()=>{const m=p.current;m!==d&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=d},[d,s])}const h=b.useCallback(p=>{if(d){const m=jP(p)?p(r):p;m!==r&&l.current?.(m)}else i(p)},[d,r,i,l]);return[u,h]}function kP({defaultProp:r,onChange:e}){const[t,s]=b.useState(r),n=b.useRef(t),i=b.useRef(e);return CP(()=>{i.current=e},[e]),b.useEffect(()=>{n.current!==t&&(i.current?.(t),n.current=t)},[t,n]),[t,s,i]}function jP(r){return typeof r=="function"}var pC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NP="VisuallyHidden",mC=b.forwardRef((r,e)=>o.jsx(Ze.span,{...r,ref:e,style:{...pC,...r.style}}));mC.displayName=NP;var TP=mC,[Uh]=yn("Tooltip",[Hh]),$h=Hh(),gC="TooltipProvider",_P=700,dg="tooltip.open",[MP,V0]=Uh(gC),xC=r=>{const{__scopeTooltip:e,delayDuration:t=_P,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:i}=r,l=b.useRef(!0),d=b.useRef(!1),u=b.useRef(0);return b.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),o.jsx(MP,{scope:e,isOpenDelayedRef:l,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(u.current),l.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.current=!0,s)},[s]),isPointerInTransitRef:d,onPointerInTransitChange:b.useCallback(h=>{d.current=h},[]),disableHoverableContent:n,children:i})};xC.displayName=gC;var oc="Tooltip",[EP,jc]=Uh(oc),yC=r=>{const{__scopeTooltip:e,children:t,open:s,defaultOpen:n,onOpenChange:i,disableHoverableContent:l,delayDuration:d}=r,u=V0(oc,r.__scopeTooltip),h=$h(e),[p,m]=b.useState(null),g=Da(),y=b.useRef(0),v=l??u.disableHoverableContent,w=d??u.delayDuration,j=b.useRef(!1),[C,N]=bi({prop:s,defaultProp:n??!1,onChange:M=>{M?(u.onOpen(),document.dispatchEvent(new CustomEvent(dg))):u.onClose(),i?.(M)},caller:oc}),k=b.useMemo(()=>C?j.current?"delayed-open":"instant-open":"closed",[C]),T=b.useCallback(()=>{window.clearTimeout(y.current),y.current=0,j.current=!1,N(!0)},[N]),E=b.useCallback(()=>{window.clearTimeout(y.current),y.current=0,N(!1)},[N]),D=b.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{j.current=!0,N(!0),y.current=0},w)},[w,N]);return b.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),o.jsx(dC,{...h,children:o.jsx(EP,{scope:e,contentId:g,open:C,stateAttribute:k,trigger:p,onTriggerChange:m,onTriggerEnter:b.useCallback(()=>{u.isOpenDelayedRef.current?D():T()},[u.isOpenDelayedRef,D,T]),onTriggerLeave:b.useCallback(()=>{v?E():(window.clearTimeout(y.current),y.current=0)},[E,v]),onOpen:T,onClose:E,disableHoverableContent:v,children:t})})};yC.displayName=oc;var ug="TooltipTrigger",vC=b.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=jc(ug,t),i=V0(ug,t),l=$h(t),d=b.useRef(null),u=nt(e,d,n.onTriggerChange),h=b.useRef(!1),p=b.useRef(!1),m=b.useCallback(()=>h.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(uC,{asChild:!0,...l,children:o.jsx(Ze.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:u,onPointerMove:Ye(r.onPointerMove,g=>{g.pointerType!=="touch"&&!p.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),p.current=!0)}),onPointerLeave:Ye(r.onPointerLeave,()=>{n.onTriggerLeave(),p.current=!1}),onPointerDown:Ye(r.onPointerDown,()=>{n.open&&n.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Ye(r.onFocus,()=>{h.current||n.onOpen()}),onBlur:Ye(r.onBlur,n.onClose),onClick:Ye(r.onClick,n.onClose)})})});vC.displayName=ug;var W0="TooltipPortal",[PP,DP]=Uh(W0,{forceMount:void 0}),bC=r=>{const{__scopeTooltip:e,forceMount:t,children:s,container:n}=r,i=jc(W0,e);return o.jsx(PP,{scope:e,forceMount:t,children:o.jsx(zo,{present:t||i.open,children:o.jsx(B0,{asChild:!0,container:n,children:s})})})};bC.displayName=W0;var ka="TooltipContent",wC=b.forwardRef((r,e)=>{const t=DP(ka,r.__scopeTooltip),{forceMount:s=t.forceMount,side:n="top",...i}=r,l=jc(ka,r.__scopeTooltip);return o.jsx(zo,{present:s||l.open,children:l.disableHoverableContent?o.jsx(SC,{side:n,...i,ref:e}):o.jsx(AP,{side:n,...i,ref:e})})}),AP=b.forwardRef((r,e)=>{const t=jc(ka,r.__scopeTooltip),s=V0(ka,r.__scopeTooltip),n=b.useRef(null),i=nt(e,n),[l,d]=b.useState(null),{trigger:u,onClose:h}=t,p=n.current,{onPointerInTransitChange:m}=s,g=b.useCallback(()=>{d(null),m(!1)},[m]),y=b.useCallback((v,w)=>{const j=v.currentTarget,C={x:v.clientX,y:v.clientY},N=LP(C,j.getBoundingClientRect()),k=zP(C,N),T=IP(w.getBoundingClientRect()),E=VP([...k,...T]);d(E),m(!0)},[m]);return b.useEffect(()=>()=>g(),[g]),b.useEffect(()=>{if(u&&p){const v=j=>y(j,p),w=j=>y(j,u);return u.addEventListener("pointerleave",v),p.addEventListener("pointerleave",w),()=>{u.removeEventListener("pointerleave",v),p.removeEventListener("pointerleave",w)}}},[u,p,y,g]),b.useEffect(()=>{if(l){const v=w=>{const j=w.target,C={x:w.clientX,y:w.clientY},N=u?.contains(j)||p?.contains(j),k=!BP(C,l);N?g():k&&(g(),h())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,p,l,h,g]),o.jsx(SC,{...r,ref:i})}),[RP,OP]=Uh(oc,{isInside:!1}),FP=IM("TooltipContent"),SC=b.forwardRef((r,e)=>{const{__scopeTooltip:t,children:s,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:l,...d}=r,u=jc(ka,t),h=$h(t),{onClose:p}=u;return b.useEffect(()=>(document.addEventListener(dg,p),()=>document.removeEventListener(dg,p)),[p]),b.useEffect(()=>{if(u.trigger){const m=g=>{g.target?.contains(u.trigger)&&p()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[u.trigger,p]),o.jsx(E0,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:m=>m.preventDefault(),onDismiss:p,children:o.jsxs(hC,{"data-state":u.stateAttribute,...h,...d,ref:e,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(FP,{children:s}),o.jsx(RP,{scope:t,isInside:!0,children:o.jsx(TP,{id:u.contentId,role:"tooltip",children:n||s})})]})})});wC.displayName=ka;var CC="TooltipArrow",kC=b.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=$h(t);return OP(CC,t).isInside?null:o.jsx(fC,{...n,...s,ref:e})});kC.displayName=CC;function LP(r,e){const t=Math.abs(e.top-r.y),s=Math.abs(e.bottom-r.y),n=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,s,n,i)){case i:return"left";case n:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function zP(r,e,t=5){const s=[];switch(e){case"top":s.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":s.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":s.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":s.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return s}function IP(r){const{top:e,right:t,bottom:s,left:n}=r;return[{x:n,y:e},{x:t,y:e},{x:t,y:s},{x:n,y:s}]}function BP(r,e){const{x:t,y:s}=r;let n=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){const d=e[i],u=e[l],h=d.x,p=d.y,m=u.x,g=u.y;p>s!=g>s&&t<(m-h)*(s-p)/(g-p)+h&&(n=!n)}return n}function VP(r){const e=r.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),WP(e)}function WP(r){if(r.length<=1)return r.slice();const e=[];for(let s=0;s<r.length;s++){const n=r[s];for(;e.length>=2;){const i=e[e.length-1],l=e[e.length-2];if((i.x-l.x)*(n.y-l.y)>=(i.y-l.y)*(n.x-l.x))e.pop();else break}e.push(n)}e.pop();const t=[];for(let s=r.length-1;s>=0;s--){const n=r[s];for(;t.length>=2;){const i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(n.y-l.y)>=(i.y-l.y)*(n.x-l.x))t.pop();else break}t.push(n)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var HP=xC,UP=yC,$P=vC,GP=bC,YP=wC,XP=kC;function jC(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(e=0;e<n;e++)r[e]&&(t=jC(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function NC(){for(var r,e,t=0,s="",n=arguments.length;t<n;t++)(r=arguments[t])&&(e=jC(r))&&(s&&(s+=" "),s+=e);return s}const H0="-",KP=r=>{const e=ZP(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:l=>{const d=l.split(H0);return d[0]===""&&d.length!==1&&d.shift(),TC(d,e)||qP(l)},getConflictingClassGroupIds:(l,d)=>{const u=t[l]||[];return d&&s[l]?[...u,...s[l]]:u}}},TC=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),n=s?TC(r.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const i=r.join(H0);return e.validators.find(({validator:l})=>l(i))?.classGroupId},pw=/^\[(.+)\]$/,qP=r=>{if(pw.test(r)){const e=pw.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ZP=r=>{const{theme:e,classGroups:t}=r,s={nextPart:new Map,validators:[]};for(const n in t)hg(t[n],s,n,e);return s},hg=(r,e,t,s)=>{r.forEach(n=>{if(typeof n=="string"){const i=n===""?e:mw(e,n);i.classGroupId=t;return}if(typeof n=="function"){if(JP(n)){hg(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([i,l])=>{hg(l,mw(e,i),t,s)})})},mw=(r,e)=>{let t=r;return e.split(H0).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},JP=r=>r.isThemeGetter,QP=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(i,l)=>{t.set(i,l),e++,e>r&&(e=0,s=t,t=new Map)};return{get(i){let l=t.get(i);if(l!==void 0)return l;if((l=s.get(i))!==void 0)return n(i,l),l},set(i,l){t.has(i)?t.set(i,l):n(i,l)}}},fg="!",pg=":",e4=pg.length,t4=r=>{const{prefix:e,experimentalParseClassName:t}=r;let s=n=>{const i=[];let l=0,d=0,u=0,h;for(let v=0;v<n.length;v++){let w=n[v];if(l===0&&d===0){if(w===pg){i.push(n.slice(u,v)),u=v+e4;continue}if(w==="/"){h=v;continue}}w==="["?l++:w==="]"?l--:w==="("?d++:w===")"&&d--}const p=i.length===0?n:n.substring(u),m=r4(p),g=m!==p,y=h&&h>u?h-u:void 0;return{modifiers:i,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:y}};if(e){const n=e+pg,i=s;s=l=>l.startsWith(n)?i(l.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){const n=s;s=i=>t({className:i,parseClassName:n})}return s},r4=r=>r.endsWith(fg)?r.substring(0,r.length-1):r.startsWith(fg)?r.substring(1):r,s4=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const n=[];let i=[];return s.forEach(l=>{l[0]==="["||e[l]?(n.push(...i.sort(),l),i=[]):i.push(l)}),n.push(...i.sort()),n}},n4=r=>({cache:QP(r.cacheSize),parseClassName:t4(r),sortModifiers:s4(r),...KP(r)}),o4=/\s+/,i4=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:i}=e,l=[],d=r.trim().split(o4);let u="";for(let h=d.length-1;h>=0;h-=1){const p=d[h],{isExternal:m,modifiers:g,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:w}=t(p);if(m){u=p+(u.length>0?" "+u:u);continue}let j=!!w,C=s(j?v.substring(0,w):v);if(!C){if(!j){u=p+(u.length>0?" "+u:u);continue}if(C=s(v),!C){u=p+(u.length>0?" "+u:u);continue}j=!1}const N=i(g).join(":"),k=y?N+fg:N,T=k+C;if(l.includes(T))continue;l.push(T);const E=n(C,j);for(let D=0;D<E.length;++D){const M=E[D];l.push(k+M)}u=p+(u.length>0?" "+u:u)}return u};function a4(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=_C(e))&&(s&&(s+=" "),s+=t);return s}const _C=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=_C(r[s]))&&(t&&(t+=" "),t+=e);return t};function l4(r,...e){let t,s,n,i=l;function l(u){const h=e.reduce((p,m)=>m(p),r());return t=n4(h),s=t.cache.get,n=t.cache.set,i=d,d(u)}function d(u){const h=s(u);if(h)return h;const p=i4(u,t);return n(u,p),p}return function(){return i(a4.apply(null,arguments))}}const Jt=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},MC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,EC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,c4=/^\d+\/\d+$/,d4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,u4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,h4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,f4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,p4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qi=r=>c4.test(r),et=r=>!!r&&!Number.isNaN(Number(r)),vo=r=>!!r&&Number.isInteger(Number(r)),hm=r=>r.endsWith("%")&&et(r.slice(0,-1)),Pn=r=>d4.test(r),m4=()=>!0,g4=r=>u4.test(r)&&!h4.test(r),PC=()=>!1,x4=r=>f4.test(r),y4=r=>p4.test(r),v4=r=>!ze(r)&&!Ie(r),b4=r=>Oa(r,RC,PC),ze=r=>MC.test(r),oi=r=>Oa(r,OC,g4),fm=r=>Oa(r,j4,et),gw=r=>Oa(r,DC,PC),w4=r=>Oa(r,AC,y4),Yd=r=>Oa(r,FC,x4),Ie=r=>EC.test(r),Dl=r=>Fa(r,OC),S4=r=>Fa(r,N4),xw=r=>Fa(r,DC),C4=r=>Fa(r,RC),k4=r=>Fa(r,AC),Xd=r=>Fa(r,FC,!0),Oa=(r,e,t)=>{const s=MC.exec(r);return s?s[1]?e(s[1]):t(s[2]):!1},Fa=(r,e,t=!1)=>{const s=EC.exec(r);return s?s[1]?e(s[1]):t:!1},DC=r=>r==="position"||r==="percentage",AC=r=>r==="image"||r==="url",RC=r=>r==="length"||r==="size"||r==="bg-size",OC=r=>r==="length",j4=r=>r==="number",N4=r=>r==="family-name",FC=r=>r==="shadow",T4=()=>{const r=Jt("color"),e=Jt("font"),t=Jt("text"),s=Jt("font-weight"),n=Jt("tracking"),i=Jt("leading"),l=Jt("breakpoint"),d=Jt("container"),u=Jt("spacing"),h=Jt("radius"),p=Jt("shadow"),m=Jt("inset-shadow"),g=Jt("text-shadow"),y=Jt("drop-shadow"),v=Jt("blur"),w=Jt("perspective"),j=Jt("aspect"),C=Jt("ease"),N=Jt("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...T(),Ie,ze],D=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],P=()=>[Ie,ze,u],R=()=>[qi,"full","auto",...P()],F=()=>[vo,"none","subgrid",Ie,ze],I=()=>["auto",{span:["full",vo,Ie,ze]},vo,Ie,ze],U=()=>[vo,"auto",Ie,ze],L=()=>["auto","min","max","fr",Ie,ze],X=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],de=()=>["start","end","center","stretch","center-safe","end-safe"],B=()=>["auto",...P()],V=()=>[qi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],O=()=>[r,Ie,ze],Z=()=>[...T(),xw,gw,{position:[Ie,ze]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W=()=>["auto","cover","contain",C4,b4,{size:[Ie,ze]}],ae=()=>[hm,Dl,oi],q=()=>["","none","full",h,Ie,ze],ce=()=>["",et,Dl,oi],we=()=>["solid","dashed","dotted","double"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>[et,hm,xw,gw],K=()=>["","none",v,Ie,ze],fe=()=>["none",et,Ie,ze],ie=()=>["none",et,Ie,ze],Te=()=>[et,Ie,ze],pe=()=>[qi,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Pn],breakpoint:[Pn],color:[m4],container:[Pn],"drop-shadow":[Pn],ease:["in","out","in-out"],font:[v4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Pn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Pn],shadow:[Pn],spacing:["px",et],text:[Pn],"text-shadow":[Pn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qi,ze,Ie,j]}],container:["container"],columns:[{columns:[et,ze,Ie,d]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[vo,"auto",Ie,ze]}],basis:[{basis:[qi,"full","auto",d,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[et,qi,"auto","initial","none",ze]}],grow:[{grow:["",et,Ie,ze]}],shrink:[{shrink:["",et,Ie,ze]}],order:[{order:[vo,"first","last","none",Ie,ze]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...X(),"normal"]}],"justify-items":[{"justify-items":[...de(),"normal"]}],"justify-self":[{"justify-self":["auto",...de()]}],"align-content":[{content:["normal",...X()]}],"align-items":[{items:[...de(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...de(),{baseline:["","last"]}]}],"place-content":[{"place-content":X()}],"place-items":[{"place-items":[...de(),"baseline"]}],"place-self":[{"place-self":["auto",...de()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:B()}],mx:[{mx:B()}],my:[{my:B()}],ms:[{ms:B()}],me:[{me:B()}],mt:[{mt:B()}],mr:[{mr:B()}],mb:[{mb:B()}],ml:[{ml:B()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[d,"screen",...V()]}],"min-w":[{"min-w":[d,"screen","none",...V()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[l]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",t,Dl,oi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Ie,fm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",hm,ze]}],"font-family":[{font:[S4,ze,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,Ie,ze]}],"line-clamp":[{"line-clamp":[et,"none",Ie,fm]}],leading:[{leading:[i,...P()]}],"list-image":[{"list-image":["none",Ie,ze]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ie,ze]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...we(),"wavy"]}],"text-decoration-thickness":[{decoration:[et,"from-font","auto",Ie,oi]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[et,"auto",Ie,ze]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ie,ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ie,ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},vo,Ie,ze],radial:["",Ie,ze],conic:[vo,Ie,ze]},k4,w4]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:ae()}],"gradient-via-pos":[{via:ae()}],"gradient-to-pos":[{to:ae()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...we(),"hidden","none"]}],"divide-style":[{divide:[...we(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...we(),"none","hidden"]}],"outline-offset":[{"outline-offset":[et,Ie,ze]}],"outline-w":[{outline:["",et,Dl,oi]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",p,Xd,Yd]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",m,Xd,Yd]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[et,oi]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",g,Xd,Yd]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[et,Ie,ze]}],"mix-blend":[{"mix-blend":[...xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[et]}],"mask-image-linear-from-pos":[{"mask-linear-from":se()}],"mask-image-linear-to-pos":[{"mask-linear-to":se()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":se()}],"mask-image-t-to-pos":[{"mask-t-to":se()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":se()}],"mask-image-r-to-pos":[{"mask-r-to":se()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":se()}],"mask-image-b-to-pos":[{"mask-b-to":se()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":se()}],"mask-image-l-to-pos":[{"mask-l-to":se()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":se()}],"mask-image-x-to-pos":[{"mask-x-to":se()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":se()}],"mask-image-y-to-pos":[{"mask-y-to":se()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[Ie,ze]}],"mask-image-radial-from-pos":[{"mask-radial-from":se()}],"mask-image-radial-to-pos":[{"mask-radial-to":se()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[et]}],"mask-image-conic-from-pos":[{"mask-conic-from":se()}],"mask-image-conic-to-pos":[{"mask-conic-to":se()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ie,ze]}],filter:[{filter:["","none",Ie,ze]}],blur:[{blur:K()}],brightness:[{brightness:[et,Ie,ze]}],contrast:[{contrast:[et,Ie,ze]}],"drop-shadow":[{"drop-shadow":["","none",y,Xd,Yd]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",et,Ie,ze]}],"hue-rotate":[{"hue-rotate":[et,Ie,ze]}],invert:[{invert:["",et,Ie,ze]}],saturate:[{saturate:[et,Ie,ze]}],sepia:[{sepia:["",et,Ie,ze]}],"backdrop-filter":[{"backdrop-filter":["","none",Ie,ze]}],"backdrop-blur":[{"backdrop-blur":K()}],"backdrop-brightness":[{"backdrop-brightness":[et,Ie,ze]}],"backdrop-contrast":[{"backdrop-contrast":[et,Ie,ze]}],"backdrop-grayscale":[{"backdrop-grayscale":["",et,Ie,ze]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et,Ie,ze]}],"backdrop-invert":[{"backdrop-invert":["",et,Ie,ze]}],"backdrop-opacity":[{"backdrop-opacity":[et,Ie,ze]}],"backdrop-saturate":[{"backdrop-saturate":[et,Ie,ze]}],"backdrop-sepia":[{"backdrop-sepia":["",et,Ie,ze]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ie,ze]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[et,"initial",Ie,ze]}],ease:[{ease:["linear","initial",C,Ie,ze]}],delay:[{delay:[et,Ie,ze]}],animate:[{animate:["none",N,Ie,ze]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Ie,ze]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:Te()}],"skew-x":[{"skew-x":Te()}],"skew-y":[{"skew-y":Te()}],transform:[{transform:[Ie,ze,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pe()}],"translate-x":[{"translate-x":pe()}],"translate-y":[{"translate-y":pe()}],"translate-z":[{"translate-z":pe()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie,ze]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie,ze]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[et,Dl,oi,fm]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},_4=l4(T4);function Et(...r){return _4(NC(r))}function ws({delayDuration:r=0,...e}){return o.jsx(HP,{"data-slot":"tooltip-provider",delayDuration:r,...e})}function _t({...r}){return o.jsx(ws,{children:o.jsx(UP,{"data-slot":"tooltip",...r})})}const bt=b.forwardRef((r,e)=>o.jsx($P,{ref:e,"data-slot":"tooltip-trigger",...r}));bt.displayName="TooltipTrigger";const wt=b.forwardRef(({className:r,sideOffset:e=0,children:t,...s},n)=>o.jsx(GP,{children:o.jsxs(YP,{ref:n,"data-slot":"tooltip-content",sideOffset:e,className:Et("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",r),...s,children:[t,o.jsx(XP,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})}));wt.displayName="TooltipContent";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),yw=r=>{const e=E4(r);return e.charAt(0).toUpperCase()+e.slice(1)},LC=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var P4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=b.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:n="",children:i,iconNode:l,...d},u)=>b.createElement("svg",{ref:u,...P4,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:LC("lucide",n),...d},[...l.map(([h,p])=>b.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(r,e)=>{const t=b.forwardRef(({className:s,...n},i)=>b.createElement(D4,{ref:i,iconNode:e,className:LC(`lucide-${M4(yw(r))}`,`lucide-${r}`,s),...n}));return t.displayName=yw(r),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],R4=je("archive",A4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Nc=je("arrow-left",O4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],zC=je("award",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],lh=je("bell",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Gh=je("book-open",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],mg=je("bot",I4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]],vw=je("brush",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],W4=je("calculator",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],IC=je("calendar",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],$4=je("chart-no-axes-column-increasing",U4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Y4=je("check",G4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],U0=je("chevron-down",X4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],q4=je("chevron-left",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],J4=je("chevron-right",Z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],eD=je("chevron-up",Q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rD=je("circle-check-big",tD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ch=je("circle",sD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ja=je("clock",nD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],dh=je("coins",oD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],An=je("copy",iD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ic=je("crown",aD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],cD=je("dice-6",lD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Zs=je("droplets",dD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],ac=je("ellipsis",uD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fD=je("eye-off",hD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wi=je("eye",pD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],BC=je("file-text",mD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],$0=je("folder-open",gD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],VC=je("folder-plus",xD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vD=je("funnel",yD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],G0=je("gavel",bD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]],SD=je("gem",wD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],kD=je("gift",CD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ND=je("globe",jD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.2 9.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4 2 2 0 0 0 1.8-1.2z",key:"1u8q3z"}],["circle",{cx:"11.5",cy:"12.5",r:".5",fill:"currentColor",key:"16onso"}]],_D=je("guitar",TD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Y0=je("hash",MD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Mo=je("heart",ED);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],DD=je("highlighter",PD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],RD=je("house",AD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Zi=je("layers",OD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],bw=je("link-2",FD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zD=je("lock",LD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],BD=je("mail",ID);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],WD=je("maximize-2",VD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],UD=je("medal",HD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],GD=je("megaphone",$D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Sr=je("message-circle",YD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],KD=je("message-square",XD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],gg=je("mic",qD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Tc=je("minimize-2",ZD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M5 12h14",key:"1ays0h"}]],Hl=je("minus",JD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],uh=je("move",QD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]],WC=je("music-2",e3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Na=je("music",t3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],s3=je("package",r3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],xs=je("palette",n3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],i3=je("panels-top-left",o3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],HC=je("paperclip",a3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Yh=je("pause",l3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xg=je("pen",c3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M18.5 8c-1.4 0-2.6-.8-3.2-2A6.87 6.87 0 0 0 2 9v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8.5C22 9.6 20.4 8 18.5 8",key:"lag0yf"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M6 14v4",key:"9ng0ue"}],["path",{d:"M10 14v4",key:"1v8uk5"}],["path",{d:"M14 14v4",key:"1tqops"}],["path",{d:"M18 14v4",key:"18uqwm"}]],u3=je("piano",d3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],_c=je("play",h3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Si=je("plus",f3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],m3=je("radio",p3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],ww=je("redo",g3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],y3=je("refresh-cw",x3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ci=je("rotate-ccw",v3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Io=je("search",b3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Mc=je("send",w3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ia=je("settings",S3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],UC=je("share",C3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],j3=je("shield",k3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],yg=je("shopping-bag",N3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],X0=je("shopping-cart",T3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],Sw=je("sliders-vertical",_3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],$C=je("smile",M3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Br=je("sparkles",E3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],yr=je("square",P3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],rt=je("star",D3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M14 3v4a2 2 0 0 0 2 2h4",key:"36rjfy"}],["path",{d:"M8 13h.01",key:"1sbv64"}],["path",{d:"M16 13h.01",key:"wip0gl"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]],R3=je("sticker",A3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ms=je("target",O3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],GC=je("timer",F3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],lc=je("trash-2",L3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],hh=je("trending-up",z3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],Cw=je("triangle",I3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Ni=je("trophy",B3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],vg=je("type",V3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],kw=je("undo",W3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],bg=je("upload",H3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],wg=je("user-plus",U3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],G3=je("user",$3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ss=je("users",Y3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],YC=je("volume-2",X3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],q3=je("volume-x",K3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cr=je("x",Z3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],zs=je("zap",J3),jw=["DJ","Lil","Big","MC","Grandpa","Auntie","Sir","Lord","Dumpster","Hotdog","Yeet","Moist","Turbo","Mega","Crispy","Wubby","Thicc","Clout","Baby","Chonk","Dank","Booty","Trash","Farty","Gravy","Beefy","Piss","Shrek","Crab","Daddy","Mommy","Only","Uncle","Aunt","Senator","Baby","Couch","Crypto","DumpsterFire","Mega","Captain","Broke","JuiceBox","Grandpa","Chairman","Liquid","Overlord","Pastor","DeepFried","Quantum","Budget","Nurse","Judge","Detective","Sheriff","Burger","Pizza","Spicy","Rusty","Greasy","Cursed","Sticky","Chunky","Slimy","Chad","Karen","Broccoli","Cabbage","Pickle","Onion","Mayo","Ketchup","Toothless","Grandwizard","Space","Void","Cosmic","Taco","Pancake","Waffle","Biscuit","Lobster","Crab","Clam","DumpsterFire","TrailerPark","Sewer","Yeet","Thicc","Rotten","Soggy","Cheapskate","RentFree","CouchSurfer","NPC","Bald","Hairline","Glizzy","Feral","Rabid","Horny","Zucc"],Nw=["Wizard","Guppy","TunaCan","69","420","RimJobs","XxX","Meatspin","McSlap","Dumpster","FeetPics","Goblin","Daddy","Mommy","Fupa","Panda","Clamslam","Chugger","ThighGap","Slamwich","TheThirdLeg","Gobstopper","PogLord","GravyTrain","McNugget","4Prez","Inator","Factory","Eater","Lover","Simulator","Maxxing","Gremlin","Deluxe","Gobstopper","Enthusiast","Enjoyer","Destroyer","Inventor","Palooza","Mania","Afficionado","Collector","420","69","666","9000","Overlord","McNugget","Jr","Sr","the3rd","XD","UwU","OwO","Chan","Kun","Senpai","Thug","Killer","Boy","Girl","Man","Woman","Daddy","Mommy","Goblin","Gremlin","Demon","Angel","Bot","AI",".exe","Virus","Error","Broken","VHS","Tape","Soup","Snack","Meal","Burger","FeetPics","Only","Deluxe","Lite","Plus","Max","Ultra","Pro"],ts=["PixelSmith","VerseWriter","CodeCrafter","SynthMaster","NovaMuse","ArtisanAva","EchoKnox","ProtoPunk","GlyphGuru","CollabCat","BugHunter","SnapSage","DevDruid","GameGarden","PhotoPhantom","BrushBloom","ZineZebra","LoomLark","ByteBarista","PaperPirate","RetroRanger","PolyPanda","CloudCarver","LoopLord","ShaderFox","BeatBuddy","MemeDealer","InkWizard","VectorVoid","DigitalDove","CraftyCrow","AudioArk","VisualViper","StoryStorm","FontForge","ColorCrash","LayerLion","FrameFox","MotionMuse","SoundSage","DesignDragon","ArtAtlas","CreativeCub","MakerMoon","BuilderBee","PaintPaw","SketchSky","DoodleDuck","RenderRaven","ModernMoth","TechTiger","CraftCat","MixMagic","EditElf","FilterFish","EffectEagle","StudioStag","WorkspaceWolf","CanvasChief","PalettePanda","BrushBear","PenPenguin","ToolTurtle","AppApe","BeanCoinInvestor","Shrekonomics","SadBoyEnergy","HotSauceWizard","DankMoth","BuggedOutGoose","urmomsfinancialadvisor","BeatHarderThnMyMeat","thisguyfuqs","YeetMachine9000","socool","SmokingBigDoinks","steverimjobs","ShrekOnXans","PostNutClarity","JpegWarrior","StankSock","McNutt","Tenderloin69","DumpsterDuck","BetaMaleGod","JuulCough","OnlyFrogs","DownBadWizard","ChairSniffer","iLickBatteries","HighCollegeDropout","SkibidiInMe","CertifiedStepBro","Error420Blaze","RawDoggedByLife","GoatedWithTheSauce","HotSingleInUrArea","UncleSpork","VapeChrist","ZuccDaddy","Tom","DumpsterDaddy","LigmaSurvivor","BananaLord","ShrimpOnRoids","ToasterBath","CrotchGoblin","ThugPug","LeanMachine","TurboYEET","Stan","Shartacus","SniffingPens","DustOFF","BenadrylNightmare","InfiniteShrimp","SandyClappedCheeks","LordFarquaadsPlug","ShrekTheThirdLeg","YeetussDeletuss","Backshots4Jesus","HititrawnCode","GravyTrain","GooseOnTheLoose","VibeGoblin","ThiccerThanSnickers","BigMacWithNoDrip","ChugJugMommy","ChugJugDaddy","ObamaPrism","TwoPumpKing","SoggyDorito","LimpBis","BeatEnderDragonNaked","ChairSmash","SigmaGrindsetNPC","BoofedMyHomework","SpicyTendies","BeefCurtain","MilkToast","ChewbaccaOnCrack","ClitYeastWood","BetaFishAlphaMale","GlizzyGoblin","NPCOverlord","ManletMage","NutellaWaterfall","RanchMommy","NightstandLotion","UwUOnMyTaxes","ShlongMcDong","DiscordKitten","SnorlaxInsulin","BillSpanks","BreadstickBandit","CrustSocks","PPPooper","HotdogWater","REEEEEE","IwriteStuff","TwilightRacoonFanFic","SendMeStickers","AnimeThighTax","TunaCan","LoafOfGod","MeatOnTheBeat","DrakesMiddleSchooler","ReleaseTheFiles","OnTheFlightList","KickstartMyFart","GoobyGirl","LeftHandStranger","Doodler","GigaRat","CLAMSLAM","GirthQuake","StepSis","UwUNextTuesday","HotCheetoFingers","OnlyToes","BratzDollFromHell","ThighsOfFury","FeralHelloKitty","SussyCoder","ToxicLipGloss","AnimeMILF","SkrrtSkirt","PastelDumpster","SadBaddie","YeetAndDelete","MoistMermaid","ThiccPixie","GothGF","RunescapeGF","MemeFurnace","Sk8erboi","Twerkules","SoggyPanties","MenaceInMascara","SadGirlVibes","UwuGothGF","ChungusKitten","SnaccGremlin","Zoomies","PeachBandit","QuantumToad","LinkInBio","KittenWithAnAK","BabyBatBitch","SimpStress","CumLaudeDropout","FartBarbie","StepSisWithWifi","SpicySobbing","CockroachCutie","VapeInMyBra","DumpSterKitten","RatchetRapunzel","HoeOnMain","CherryGlock","BananaHoe","HelloClitty","PissBaby","AstroSlut","HotGirlAnxiety","DonttalkToMe","Crippling","IHaveMesothelioma","InfiniteRest","DiscordMOD","PutTheMemesINTHEBAG","TellmeULoveMe","ThighGap","Simp","OnlyGups","LilFishy","TinyTordus","lilbirb","RatPack","TrashPanda","FeralRaccoon","PantryRAT","StealurDad","YouWouldnt","DoItForTheVine","OneOfUsNeeds2Change","IThotWeWereFriends","LifeSavings2CURFeet","Whateven","DoA360","CoughingupVapeJuice","Slime","FapGod","toebane","cursedchair","hotdogwizard","sleepy_goth","glizzygremlin","frogfella","notyourdad","spicyshrimp","yeetwizard","grandmacloud","tax_evasion_420","milkymayo","skibidi_worm","shrekdaddy","breadlord","beatharderthanmymeat","clown_boi","bananaking","toecollector","pixel_goblin","sadworm","eggdealer","mothmom","dumpsterdiva","basicblorbos","bonkpolice","memepriest","susygoblin","flavortown","wifiskeleton","data_lord","chaoschild"];function Sg(){const r=jw[Math.floor(Math.random()*jw.length)],e=Nw[Math.floor(Math.random()*Nw.length)];return`${r}${e}`}function Cg(){return ts[Math.floor(Math.random()*ts.length)]}const Tw=["First Drop","Community Helper","Beat Master","Collaboration King","Sticker Collector","Legendary Trader","Stream Master","Challenge Champion","Creative Genius","Rising Star","Meme Lord","Pixel Pioneer","Sound Wizard","Remix King","Chat Moderator","Golden Supporter","Hall of Fame","Trendsetter","Innovation Award","Community MVP","Beat Battle Winner","Sample Flip Champion","Lo-Fi Legend","Trap Master","Synthwave Guru","Collab Master","Freestyle Flow","Genre Bender","One-Shot Wonder","Vintage Vibes Expert","Future Funk Pioneer","Emotional Landscape","Rhythm Roulette Winner","Melody Madness","Bass Face Champion","Minimalist Monday","Maximal Thursday","Weird Wednesday","Smooth Saturday","Experimental Hour","Speed Producer","Hardware Hero","Mobile Music Maker","Nostalgic November","Dreamy December"],Q3=["Sticker","Card","Badge","Pin","Token","Coin","Gem","Crystal","Artifact","Relic"],eA=["Common","Uncommon","Rare","Epic","Legendary","Mythic","Cursed","Blessed","Ancient","Divine"],tA=[{id:"megaphone-101",message:"yo its eggdealer  new sticker pack just dropped go cop it before i cry ",active:!0,scope:"global",priority:1},{id:"megaphone-102",message:"SynthMaster here, im live rn cookin up some cursed 808s  come thru",active:!0,scope:"global",priority:2},{id:"megaphone-103",message:"MemeDealer: stop asking for free packs u broke goblins  buy my clamslam card",active:!0,scope:"global",priority:3},{id:"megaphone-104",message:"BrushBloom megaphone check  new art, same brainrot ",active:!0,scope:"global",priority:4},{id:"megaphone-105",message:"DumpsterDaddy here, just vibin, pls collect my toilet fire legendary ",active:!0,scope:"global",priority:5},{id:"megaphone-106",message:"HotSauceWizard: just spilled cholula on my midi keyboard send help (or likes)",active:!0,scope:"global",priority:6},{id:"megaphone-107",message:"urmomsfinancialadvisor says BUY LOW SELL HIGH also buy my stickers ",active:!0,scope:"global",priority:7},{id:"megaphone-108",message:"ShrekTheThirdLeg  i only make ogre beats. deal with it ",active:!0,scope:"global",priority:8},{id:"megaphone-109",message:"Tenderloin69: yall asleep on my collab track wake tf up ",active:!0,scope:"global",priority:9},{id:"megaphone-110",message:"LoafOfGod megaphone moment: breadcore is REAL ",active:!0,scope:"global",priority:10},{id:"megaphone-111",message:"SkibidiInMe: bro i minted a skibidi sticker and it already sold out ",active:!0,scope:"global",priority:11},{id:"megaphone-112",message:"BuggedOutGoose honk honk mfers  stream my weird jazz beat",active:!0,scope:"global",priority:12},{id:"megaphone-113",message:"BeefCurtain here name aside, my track kinda slaps ",active:!0,scope:"global",priority:13},{id:"megaphone-114",message:"VerseWriter just vibin in the hub. also pls like my post so i feel something",active:!0,scope:"global",priority:14},{id:"megaphone-115",message:"JpegWarrior: i turned my harddrive crash into a sticker. art is pain lol",active:!0,scope:"global",priority:15},{id:"megaphone-201",message:"DumpsterDaddy: who tf stole my leftover burrito sticker ",active:!0,scope:"global",priority:1},{id:"megaphone-202",message:"ChairSmash: just broke my ikea chair live on stream ",active:!0,scope:"global",priority:2},{id:"megaphone-203",message:"LoafOfGod: bread cult applications are open again ",active:!0,scope:"global",priority:3},{id:"megaphone-204",message:"BillSpanks: new card drop  its literally just my tax return",active:!0,scope:"global",priority:4},{id:"megaphone-205",message:"CLAMSLAM: stop asking if i eat raw clams yes i do ",active:!0,scope:"global",priority:5},{id:"megaphone-206",message:"McNutt: petition to add more raccoon emotes ",active:!0,scope:"global",priority:6},{id:"megaphone-207",message:"FeralRaccoon: caught me in ur dumpster AGAIN ",active:!0,scope:"global",priority:7},{id:"megaphone-208",message:"HotSauceWizard: my lips are still burning from that challenge ",active:!0,scope:"global",priority:8},{id:"megaphone-209",message:"GooseOnTheLoose: if u see me in chat honk back pls ",active:!0,scope:"global",priority:9},{id:"megaphone-210",message:"Tenderloin69: dropped my steak sticker and it sold out?? ",active:!0,scope:"global",priority:10},{id:"megaphone-211",message:"BenadrylNightmare: i saw 3 megaphones at once help",active:!0,scope:"global",priority:11},{id:"megaphone-212",message:"ObamaPrism: not obama just a shape ",active:!0,scope:"global",priority:12},{id:"megaphone-213",message:"ToasterBath: yall ever smell burnt wifi?",active:!0,scope:"global",priority:13},{id:"megaphone-214",message:"Shrekonomics: im taking over wall street with onions ",active:!0,scope:"global",priority:14},{id:"megaphone-215",message:"UwUOnMyTaxes: IRS pls stop dming me",active:!0,scope:"global",priority:15},{id:"megaphone-216",message:"StankSock: free smell with every card ",active:!0,scope:"global",priority:16},{id:"megaphone-217",message:"TrashPanda: found ur NFT in the garbage ",active:!0,scope:"global",priority:17},{id:"megaphone-218",message:"ShlongMcDong: yall childish stop laughing at my name ",active:!0,scope:"global",priority:18},{id:"megaphone-219",message:"QuantumToad: i may be small but im everywhere at once ",active:!0,scope:"global",priority:19},{id:"megaphone-220",message:"Backshots4Jesus: pls stop tagging me in church chat",active:!0,scope:"global",priority:20},{id:"megaphone-221",message:"CrotchGoblin: stop reporting my goblin stickers theyre family friendly ",active:!0,scope:"global",priority:1},{id:"megaphone-222",message:"SnaccGremlin: traded my lunchable for a rare card worth it tbh",active:!0,scope:"global",priority:2},{id:"megaphone-223",message:"YeetMachine9000: just launched my microwave across the street ",active:!0,scope:"global",priority:3},{id:"megaphone-224",message:"HotSingleInUrArea: why does nobody ever click my link ",active:!0,scope:"global",priority:4},{id:"megaphone-225",message:"DumpsterDuck: quack if u live in the trash too ",active:!0,scope:"global",priority:5},{id:"megaphone-226",message:"LigmaSurvivor: my doctor said its terminal but i said ligma what",active:!0,scope:"global",priority:6},{id:"megaphone-227",message:"BananaLord: slipped on my own merch ",active:!0,scope:"global",priority:7},{id:"megaphone-228",message:"SandyClappedCheeks: just got banned from the beach again ",active:!0,scope:"global",priority:8},{id:"megaphone-229",message:"Error420Blaze: system crashed after too many dabs ",active:!0,scope:"global",priority:9},{id:"megaphone-230",message:"StepSisWithWifi: help im stuck buffering ",active:!0,scope:"global",priority:10},{id:"megaphone-231",message:"GoatedWithTheSauce: spilt the sauce all over my keyboard send help",active:!0,scope:"global",priority:11},{id:"megaphone-232",message:"MoistMermaid: why yall calling me soggy ",active:!0,scope:"global",priority:12},{id:"megaphone-233",message:"Shartacus: today i fought my toilet and lost",active:!0,scope:"global",priority:13},{id:"megaphone-234",message:"SpicyTendies: new sticker smells like buffalo sauce ngl",active:!0,scope:"global",priority:14},{id:"megaphone-235",message:"UwUNextTuesday: stop pinging me in serious channels pls ",active:!0,scope:"global",priority:15},{id:"megaphone-236",message:"McNutt: someone stole my nut stash ",active:!0,scope:"global",priority:16},{id:"megaphone-237",message:"CockroachCutie: crawled under ur bed for free rent ",active:!0,scope:"global",priority:17},{id:"megaphone-238",message:"NightstandLotion: my last drop dried up too fast ",active:!0,scope:"global",priority:18},{id:"megaphone-239",message:"Twerkules: broke my back on cam again ",active:!0,scope:"global",priority:19},{id:"megaphone-240",message:"PissBaby: stop downvoting me i cant help my brand",active:!0,scope:"global",priority:20},{id:"megaphone-241",message:"DumpsterDaddy: @ShrekOnXans stop stealing my sticker ideas bro ",active:!0,scope:"global",priority:1},{id:"megaphone-242",message:"SnorlaxInsulin: @JuulCough you owe me 2 burritos from last night ",active:!0,scope:"global",priority:2},{id:"megaphone-243",message:"CLAMSLAM: collab dropping soon w/ @UwUNextTuesday stay tuned ",active:!0,scope:"global",priority:3},{id:"megaphone-244",message:"PixelGoblin: @TrashPanda quit DMing me raccoon memes ",active:!0,scope:"global",priority:4},{id:"megaphone-245",message:"ShrimpOnRoids: @BananaLord stop flexing ur potassium ",active:!0,scope:"global",priority:5},{id:"megaphone-246",message:"GothGF: @SadBoyEnergy ur poetry made me cry in walmart again",active:!0,scope:"global",priority:6},{id:"megaphone-247",message:"LordFarquaadsPlug: trading w/ @GoatedWithTheSauce hit me up rn ",active:!0,scope:"global",priority:7},{id:"megaphone-248",message:"ChairSniffer: @StepSisWithWifi i found ur chair ",active:!0,scope:"global",priority:8},{id:"megaphone-249",message:"ObamaPrism: @SigmaGrindsetNPC ur grindset is mid ngl",active:!0,scope:"global",priority:9},{id:"megaphone-250",message:"ZuccDaddy: @DiscordKitten log out of my account rn ",active:!0,scope:"global",priority:10},{id:"megaphone-251",message:"KickstartMyFart: @HotSauceWizard sponsor me already ",active:!0,scope:"global",priority:11},{id:"megaphone-252",message:"BeefCurtain: @StankSock duel me in the comments coward",active:!0,scope:"global",priority:12},{id:"megaphone-253",message:"TrashPanda: @DumpsterDuck lets collab on the trash pack ",active:!0,scope:"global",priority:13},{id:"megaphone-254",message:"JuulCough: @BeatHarderThnMyMeat ur username still wild as hell ",active:!0,scope:"global",priority:14},{id:"megaphone-255",message:"RanchMommy: @HotCheetoFingers stop leaving stains on my posts",active:!0,scope:"global",priority:15},{id:"megaphone-256",message:"MemeDealer: shoutout to @Tom for buying 10 cursed packs in 1 day ",active:!0,scope:"global",priority:16},{id:"megaphone-257",message:"GoobyGirl: @GigaRat ur profile pic gave me nightmares ",active:!0,scope:"global",priority:17},{id:"megaphone-258",message:"LoafOfGod: @BreadstickBandit we gotta form a carb gang ",active:!0,scope:"global",priority:18},{id:"megaphone-259",message:"BenadrylNightmare: @FeralRaccoon i saw u in my dreams last night ",active:!0,scope:"global",priority:19},{id:"megaphone-260",message:"RawDoggedByLife: @ChairSmash lets start a support group ",active:!0,scope:"global",priority:20}],fh=["fire","sick","clean","crisp","smooth","raw","heavy","light","dreamy","atmospheric","bouncy","groovy","funky","soulful","emotional","powerful","delicate","intricate","complex","simple","pure","organic","synthetic","vintage","modern","futuristic","nostalgic","euphoric","melancholic","uplifting","dark","bright","warm","cold","aggressive","gentle","experimental","thicc","juicy","crispy","moist","spicy","toxic","stanky","sussy","basic","cursed","busted","gassy","pogged","feral","broke","soggy","shiny","dank","mid","goated","extra","crusty","horny","girthy"],ph=["chill","hype","moody","ethereal","gritty","polished","lo-fi","hi-fi","analog","digital","sussy","horny","feral","stanky","soggy","based","goblin","clapped","mid","yeetable","unholy","poggy","saucy","moistcore","vibeless","girthquake","emo","gremlin","alpha","sigma","minimal","maximal","spacey","earthy","cosmic","urban","rural","industrial","natural","chaotic","organized","flowing","stuttering","driving","floating","grounding","lifting","fermented","crispless","overcooked","unhinged","beefy","sticky","powdered","sideways","blurry","smelly","illegal","expired","inflated","busted","gassy","meaty","flatulent","caffeinated","burnt","goopy"],cc=["Hip-Hop","Lo-Fi","Trap","Drill","Boom Bap","Jazz Hop","Chillhop","Future Bass","Synthwave","Vaporwave","House","Techno","Ambient","Drum & Bass","Dubstep","UK Garage","Jersey Club","Fartwave","Pornogrind","Clownstep","Nightcore","ShitpostRap","LoFiToiletBeats","Goblincore","SimpHop","DoomerPop","GigaTrap","BrokeWave","StepBroStep","DumpsterSynth","SadBoiAcoustic","EmoPolka","HornyJazz","Weebwave","Afrobeat","Reggaeton","Latin Trap","K-Pop","J-Pop","Indie Pop","Bedroom Pop","Dream Pop","Shoegaze","Post Rock","Math Rock","Emo","Punk","Metal","Folk","Country","Blues","R&B","Soul"],kg=["FL Studio","Ableton","Logic","Pro Tools","Reaper","GarageBand","Cubase","Studio One","Reason","Bitwig","Audacity","Vegas Pro","Premiere","After Effects","Photoshop","MS Paint","GIMP","Blender","Unity","Unreal","Discord","Zoom","TikTok","Instagram"],jg=["80","90","00","10","20"],_w=["FL Studio","Ableton","Logic","Pro Tools","Reaper","GarageBand","Cubase","Studio One","Reason","Bitwig","Audacity","Vegas Pro","Premiere","After Effects","Photoshop","MS Paint","GIMP","Blender","Unity","Unreal","Discord","Zoom","TikTok","Instagram","Illustrator","InDesign","Lightroom","DaVinci Resolve","Final Cut Pro","Avid Media Composer","Sony Acid","Traktor","Serato","Virtual DJ","OBS Studio","Streamlabs","XSplit","Cinema 4D","Maya","ZBrush","Substance Painter","Krita","Clip Studio Paint","Paint Tool SAI","CorelDRAW","Canva","Figma","Sketch","Framer","Affinity Designer","Affinity Photo","Procreate","Notion","Slack","Trello","Asana","Jira","Monday.com","ClickUp","Google Docs","Google Sheets","Google Slides","Google Drive","Dropbox","OneDrive","Evernote","Notepad++","Sublime Text","Atom","VS Code","IntelliJ","PyCharm","WebStorm","Eclipse","NetBeans","Android Studio","Xcode","GameMaker Studio","Godot","Construct","RPG Maker","CryEngine","Audition","Sound Forge","WaveLab","Melodyne","Auto-Tune","iZotope Ozone","Kontakt","Massive","Serum","Omnisphere","Sylenth1","Vital","Splice","Loopcloud","LANDR","BandLab","Spotify for Artists","SoundCloud Pro","YouTube Studio","Anchor","Podbean","Buzzsprout","WordPress","Squarespace","Wix","Shopify","BigCommerce","Magento","WooCommerce","Excel","PowerPoint","Word","Outlook","Teams","SharePoint","Steam","Epic Games Launcher","Battle.net","Origin","Uplay","Itch.io","Telegram","WhatsApp","Messenger","Signal","Skype","Reddit","Twitter","Facebook","MidJourney","Stable Diffusion","DALLE","RunwayML","Topaz Labs","Remini"],rA={supporter:["{user} became a monthly supporter of {target}","{user} renewed support for {target}","{user} upgraded to premium supporter of {target}"],tip:["{user} tipped {amount} to {target}","{user} sent {amount} stars to {target}","{user} donated {amount} during {target}'s stream"],like:["{user} liked {target}'s post","{user} hearted {target}'s latest creation"],follow:["{user} started following {target}","{user} joined {target}'s creative journey"]},Mw=['Just dropped my "{collectible}" sticker. Peak internet chaos achieved.',"Working on a new {genre} track. The vibes are {adjective}! ","New lo-fi track dropping tonight! Perfect for those late night study sessions.","Anyone know why my {software} keeps crashing? Asking for a friend... "],sA=[{emoji:"",name:"fire"},{emoji:"",name:"dead"},{emoji:"",name:"crying"},{emoji:"",name:"musical"},{emoji:"",name:"hundred"},{emoji:"",name:"sparkles"}],Ew=["yo this {adjective} {genre} drop from @{user} is wild","someone trade me a {collectible}, mine just vanished lol","anyone else crashing in {software}? or is it just me","lmao @{user} your {collectible} looks like a cursed MS Paint doodle","brb gonna mint a sticker of leftover pizza ","anyone down to collab on a {decade} style drop?","dropped my coffee on my MIDI keyboard again send help","why does every {genre} track sound like my washing machine rn","@{user} ur drop literally broke my speakers ","petition to add a horny jail sticker to the shop ","ok but who keeps buying all the cat stickers before I can","can we get a shrek in 4k collab challenge going pls","ayo someone just paid 500 for a {collectible} insane","why is my timeline only burritos rn ","thinking about minting a taxes due card just to scare ppl","ngl this site is more addictive than {software}","anyone seen the new {adjective} shader pack in {software}? looks sick","the megaphones are just people screaming memes rn and i love it","sticker idea: goth mommy energy","every drop today feels like 2007 MySpace core lol","shoutout to @{user} for gifting me a sticker ","not me accidentally bidding all my  on toenail clippings","this challenge is basically impossible without a time machine ","just released a free {genre} pack, grab it before it disappears","yo @{user} stop flexing your legendary card we get it ","lowkey wanna start a group just for cursed drops","made my sticker in MS Paint and it still slaps","is it bad i only come here for the memes and stickers","who else stuck in create drop menu cuz its offscreen lol","every time I open chat someones yelling about burritos again","@{user} became a monthly supporter of me LETS GOOO ","bro someone really minted a sticker called gas station sushi ","okay but why is the rarest card always food related","i swear {software} auto-saves everything except the stuff i need","imagine explaining to your mom you lost 200 on horny jail bids","daily reminder that {user} is cracked at collabs","yo who just dropped a {adjective} challenge called sock drawer vibes","this site feels like Twitch chat but with more stickers","why are the {decade} trends making a comeback AGAIN","can we get a sticker of the community hub being on fire ","this {genre} beat feels like a mental breakdown in HD","the emotes menu is stacked, feels like Discord x2","lmao someone actually minted bonk hammer 3000","every time i see a {collectible} i wanna throw money at the screen","can we get more chalkboard drawings in the hub plsss","stop making me spend all my  im broke now","just copped a {adjective} {collectible} from @{user}, flexing forever","yall sleeping on the {genre} side of DropSource","just realized i can gift stickers sending cursed ones only","bro the megaphone rn says tell ur mom i said hi im crying","community hub glows like vegas lights rn ","@{user} you owe me 20 from that auction yesterday","yo imagine if someone minted an NFT of my browser history ","half this chat feels like a fever dream tbh","someone pls start streaming, im bored","ayo @{user} your {collectible} just broke the auction house","cant believe i lost 300 on a sticker called expired milk","ngl this {adjective} collab feels like cursed jazz from {decade}","someone help me debug {software}, its eating my project","new rule: every chat must mention burritos ","i just saw @{user} list sock lint as epic rarity","brb drawing the community hub in MS Paint again","shoutout to whoever minted toothpaste vibes ","petition to add  inflation to the lore","my chalkboard doodle looks like a crime scene ","@{user} you cant just drop banana peel energy and leave","auction war rn feels like pokemon card battles in middle school","this site needs a bozo of the week badge fr","why do i keep buying {collectible}s i dont even like","ok but the {genre} side of DropSource is underrated","yo the megaphone rn says @{user} owes me a soda lmao","somebody trade me for my midnight beans sticker pls","lowkey {software} tutorials be saving my life rn","gotta flex, i just became a monthly supporter of @{user}","drop idea: 100% sounds recorded in a walmart parking lot","bro my stream had 5 viewers and 3 were bots ","watching auctions is basically esports at this point","petition to add a slap react button","daily reminder {user} is a menace in auctions","can we get more cursed emotes in chat pls","ngl half these usernames feel like AI fever dreams","community hub rn = chaos simulator","anyone else treating this like second life but with memes","challenge idea: only use {decade} commercials for samples","yo who made the gas leak vibes card legendary ","shoutout to the random guy minting uncooked pasta stickers","stream idea: me crying in {software} for 3 hrs straight","megaphones are just people screaming follow me @username rn","petition to make horny jail a real location on site","this drop literally looks like cursed clipart","ok but why is fartcore trending rn ","brb making a drop about procrastination","someone minted reheated burrito and its already sold out","chat rn feels like a group project in chaos mode","whoever invented  economy, i need a word with you","yo @{user} stop flexing your elite {collectible}","auction timer anxiety is too real rn","challenge idea: no plugins, just {software} stock sounds","fun fact: {user} has never missed a daily drop","megaphone idea: tell ur dog i said hi","petition to let us trade  for snacks","who dropped garfield in 4k  i need that","bro the new update made everything glow too hard lol","not me losing 50 cuz i misclicked react instead of bid","petition to add ok boomer sticker in epic rarity","auction house rn feels like stock market crash simulator","brb gifting randoms toe bean stickers","my stream peaked at 12 viewers, im basically famous","dropSource shop is wild, who priced wet sock at 999","ok but chalkboard doodles need a whole gallery","someone just made trash panda legendary, respect ","community hub rn has the energy of {decade} internet forums","petition to let us mint 404 error as a sticker","challenge: only samples from kazoo and spoons","ayo @{user} why is ur drop just a jpeg of spaghetti","legit this site feels like twitch x ebay x discord","watch me speedrun a collab req in under 10 seconds","petition for a react thats just ","bro the megaphones are getting unhinged","stream title: watch me suffer in {software}","anyone else collecting only cursed food stickers","petition to mint boneless pizza as elite rarity","not me donating $5 just for a fart sticker","ayo did someone actually draw that chalkboard meme","community hub rn is all burritos and breakdowns","daily reminder to stay hydrated or ur drops will sound mid","auction rn: 500 on grandmas lasagna card","petition to add leftover vibes as a genre tag","this chat has more lore than the marvel universe","megaphone rn says free hugs at @dumpsterfire lmao","x started streaming! 100+ ppl watching rn ","challenge idea: only use {software} stock sounds","this comment section feels like 2012 YouTube energy","ok who made beatharderthanmymeat a real username ","cant believe i lost an auction to someone called clamslam","this whole place runs on chaos energy and i respect it","why does every drop feel like a group project gone wrong","ayo @{user} mint me a sticker pack pls","watch me drop a mid sticker just to piss ppl off","is there a badge for most time wasted in chat","the leaderboard flex is unreal rn","dont lie, yall only here for the goth mommy sticker","funny how {genre} and {genre} always beef in chat","megaphones rn are basically Twitch donations but louder","auction house rn is a warzone ","someone actually listed toe beans as legendary lmao","yo whoever drew that chalkboard doodle deserves 100","lowkey this feels like RuneScape grand exchange but unhinged","petition to add a bring back burrito challenge","we need a button just to mute @{user} for spamming tacos","watch me become top donor by spending $5 ","ngl, i thought this site was fake until i saw horny jail sticker","the collab requests are either fire or absolute chaos","yall really bidding on melted ice cream rn","stop making me laugh im trying to be productive in {software}"];class aa{static instance;listeners=new Set;state;channels=[{id:"general",name:"#general",unread:0},{id:"show-and-tell",name:"#show-and-tell",unread:3},{id:"memes",name:"#memes",unread:12},{id:"trades",name:"#trades",unread:5},{id:"stickers",name:"#stickers",unread:0}];messagesByChannel={};messageInterval=null;constructor(){const e=this.loadFromStorage();this.state={isOpen:!1,channelId:e?.lastActiveChannel||"general",isDocked:e?.isDocked||!1,draftByChannel:e?.draftByChannel||{},unreadByChannel:e?.unreadByChannel||{},lastActiveChannel:e?.lastActiveChannel||"general",...e},this.initializeMessages(),this.startMessageGeneration(),this.handleURLParams(),window.addEventListener("popstate",()=>{this.handleURLParams()})}static getInstance(){return aa.instance||(aa.instance=new aa),aa.instance}initializeMessages(){this.channels.forEach(e=>{this.messagesByChannel[e.id]=this.generateSampleMessages(e.id)})}generateSampleMessages(e){return[{content:"hey everyone! ",username:"beatmaker2023",type:"text"},{content:"working on some fire beats tonight ",username:"LoFiKing",type:"text"},{content:"anyone up for a collab?",username:"synthwave_sarah",type:"text"}].map((s,n)=>({id:`${e}-${n}`,username:s.username,handle:`@${s.username.toLowerCase()}`,avatar:s.username.slice(0,2).toUpperCase(),content:s.content,timestamp:new Date(Date.now()-n*3e5),type:s.type}))}startMessageGeneration(){this.messageInterval&&clearInterval(this.messageInterval),this.messageInterval=setInterval(()=>{this.generateRandomMessage()},Math.random()*3e3+3e3)}generateRandomMessage(){const e=[{id:"general",weight:40},{id:"show-and-tell",weight:20},{id:"memes",weight:15},{id:"trades",weight:15},{id:"stickers",weight:10}],t=e.reduce((d,u)=>d+u.weight,0);let s=Math.random()*t,n="general";for(const d of e)if(s-=d.weight,s<=0){n=d.id;break}const i=ts[Math.floor(Math.random()*ts.length)];let l=Ew[Math.floor(Math.random()*Ew.length)];l=l.replace(/{username}/g,ts[Math.floor(Math.random()*ts.length)]).replace(/{genre}/g,cc[Math.floor(Math.random()*cc.length)]).replace(/{adjective}/g,[...fh,...ph][Math.floor(Math.random()*(fh.length+ph.length))]).replace(/{software}/g,kg[Math.floor(Math.random()*kg.length)]).replace(/{decade}/g,jg[Math.floor(Math.random()*jg.length)]).replace(/{collectible}/g,["Big Chungus Energy","Dumpster Baby","Clam Slam","GothMommy","Horny Jail"][Math.floor(Math.random()*5)]),this.addMessage(n,{username:i,handle:`@${i.toLowerCase()}`,avatar:i.slice(0,2).toUpperCase(),content:l,type:"text"})}loadFromStorage(){try{const e=sessionStorage.getItem("dropsource:chat");return e?JSON.parse(e):null}catch{return null}}saveToStorage(){try{sessionStorage.setItem("dropsource:chat",JSON.stringify({channelId:this.state.channelId,isDocked:this.state.isDocked,draftByChannel:this.state.draftByChannel,unreadByChannel:this.state.unreadByChannel,lastActiveChannel:this.state.lastActiveChannel}))}catch{}}handleURLParams(){const e=new URL(window.location.href),t=e.searchParams.get("chat")||e.hash.replace("#chat/","");t&&this.channels.find(s=>s.id===t)&&this.open(t)}updateURL(e){const t=new URL(window.location.href);this.state.isOpen&&e?t.searchParams.set("chat",e):t.searchParams.delete("chat"),window.history.replaceState({},"",t.toString())}notify(){this.listeners.forEach(e=>e(this.state)),this.saveToStorage()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getState(){return{...this.state}}getChannels(){return[...this.channels]}getMessages(e){return this.messagesByChannel[e]||[]}open(e,t){const s=e||this.state.lastActiveChannel||"general";this.state={...this.state,isOpen:!0,channelId:s,lastActiveChannel:s,isDocked:t?.docked??this.state.isDocked},this.state.unreadByChannel[s]=0,this.updateURL(s),this.notify()}close(){this.state={...this.state,isOpen:!1},this.updateURL(),this.notify()}toggle(e){this.state.isOpen?this.close():this.open(e)}switchChannel(e){this.channels.find(t=>t.id===e)&&(this.state={...this.state,channelId:e,lastActiveChannel:e},this.state.unreadByChannel[e]=0,this.updateURL(e),this.notify())}setDocked(e){this.state={...this.state,isDocked:e},this.notify()}setDraft(e,t){this.state.draftByChannel[e]=t,this.notify()}getDraft(e){return this.state.draftByChannel[e]||""}addMessage(e,t){const s={...t,id:`${e}-${Date.now()}`,timestamp:new Date};this.messagesByChannel[e]||(this.messagesByChannel[e]=[]),this.messagesByChannel[e].push(s),this.messagesByChannel[e].length>50&&(this.messagesByChannel[e]=this.messagesByChannel[e].slice(-50)),(!this.state.isOpen||this.state.channelId!==e)&&(this.state.unreadByChannel[e]=(this.state.unreadByChannel[e]||0)+1),this.notify()}focus(){this.state.isOpen&&this.notify()}destroy(){this.messageInterval&&(clearInterval(this.messageInterval),this.messageInterval=null)}}const Nt=aa.getInstance(),XC=b.createContext(null);function nA({children:r}){const[e,t]=b.useState(Nt.getState()),[s]=b.useState(Nt.getChannels()),[n,i]=b.useState(Nt.getMessages(e.channelId));b.useEffect(()=>Nt.subscribe(u=>{t(u),i(Nt.getMessages(u.channelId))}),[]);const l={state:e,channels:s,messages:n,open:Nt.open.bind(Nt),close:Nt.close.bind(Nt),toggle:Nt.toggle.bind(Nt),switchChannel:Nt.switchChannel.bind(Nt),setDocked:Nt.setDocked.bind(Nt),setDraft:Nt.setDraft.bind(Nt),getDraft:Nt.getDraft.bind(Nt),addMessage:Nt.addMessage.bind(Nt),focus:Nt.focus.bind(Nt)};return o.jsx(XC.Provider,{value:l,children:r})}function K0(){const r=b.useContext(XC);if(!r)throw new Error("useChat must be used within a ChatProvider");return r}const Pw=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Dw=NC,KC=(r,e)=>t=>{var s;if(e?.variants==null)return Dw(r,t?.class,t?.className);const{variants:n,defaultVariants:i}=e,l=Object.keys(n).map(h=>{const p=t?.[h],m=i?.[h];if(p===null)return null;const g=Pw(p)||Pw(m);return n[h][g]}),d=t&&Object.entries(t).reduce((h,p)=>{let[m,g]=p;return g===void 0||(h[m]=g),h},{}),u=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((h,p)=>{let{class:m,className:g,...y}=p;return Object.entries(y).every(v=>{let[w,j]=v;return Array.isArray(j)?j.includes({...i,...d}[w]):{...i,...d}[w]===j})?[...h,m,g]:h},[]);return Dw(r,l,u,t?.class,t?.className)},oA=KC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Se=b.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},i)=>{const l=s?I2:"button";return o.jsx(l,{"data-slot":"button",className:Et(oA({variant:e,size:t,className:r})),ref:i,...n})});Se.displayName="Button";function Gr({className:r,type:e,...t}){return o.jsx("input",{type:e,"data-slot":"input",className:Et("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...t})}const Aw=KC("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/90",accent:"text-foreground bg-accent hover:bg-accent-foreground/10",ad:["bg-[#FFB039]","text-zinc-900 dark:text-black","border border-[#FFC466]/40","shadow-[inset_0_0_0_1px_rgba(255,255,255,.25)]","hover:brightness-105 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-[#FFB039]","pointer-events-none"].join(" ")}},defaultVariants:{variant:"default"}});function ht({className:r,variant:e,asChild:t=!1,title:s,children:n,...i}){const l=t?I2:"span";return s&&!t?o.jsx(ws,{children:o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx(l,{"data-slot":"badge",className:Et(Aw({variant:e}),r),title:s,"aria-label":s,...i,children:n})}),o.jsx(wt,{children:s})]})}):o.jsx(l,{"data-slot":"badge",className:Et(Aw({variant:e}),r),title:s,"aria-label":s,...i,children:n})}function iA(){const{state:r,channels:e,messages:t,close:s,switchChannel:n,setDraft:i,getDraft:l,addMessage:d}=K0(),[u,h]=b.useState(""),[p,m]=b.useState(!1),g=b.useRef(null),y=b.useRef(null),v=["Share a WIP","Drop a sticker","Shout out a creator with @"],[w,j]=b.useState(0);b.useEffect(()=>{const D=()=>{m(window.innerWidth<768)};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),b.useEffect(()=>{const D=l(r.channelId);h(D)},[r.channelId,l]),b.useEffect(()=>{i(r.channelId,u)},[u,r.channelId,i]),b.useEffect(()=>{const D=setInterval(()=>{j(M=>(M+1)%v.length)},3e3);return()=>clearInterval(D)},[]),b.useEffect(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[t]),b.useEffect(()=>{const D=M=>{M.key==="Escape"&&s()};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[s]),b.useEffect(()=>{if(r.isOpen){const D=document.querySelector(".chat-input");D&&setTimeout(()=>D.focus(),100)}},[r.isOpen]),b.useEffect(()=>{if(y.current){const D=y.current,M=P=>{const R=P.deltaY<0,F=P.deltaY>0,I=D.scrollTop===0,U=D.scrollTop+D.clientHeight>=D.scrollHeight-1;(R&&!I||F&&!U)&&P.stopPropagation()};return D.addEventListener("wheel",M,{passive:!1}),()=>D.removeEventListener("wheel",M)}},[]);const C=D=>({common:"#22C55E",rare:"#FF70A6",epic:"#60A5FA",legendary:"#F59E0B"})[D]||"#22C55E",N=D=>{const M=D.type==="system";return o.jsxs("div",{className:`flex gap-3 ${M?"justify-center":""} group`,children:[!M&&o.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-xs font-semibold text-white flex-shrink-0",children:D.avatar}),o.jsxs("div",{className:`flex-1 ${M?"text-center":""}`,children:[!M&&o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-semibold text-white",children:D.username}),o.jsx("span",{className:"text-xs text-gray-400",children:D.handle}),o.jsx("span",{className:"text-xs text-gray-500",children:D.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),o.jsx("div",{className:`text-sm ${M?"text-gray-400 italic":"text-gray-200"}`,children:D.content}),D.attachments&&o.jsx("div",{className:"mt-2 flex gap-2",children:D.attachments.map((P,R)=>o.jsxs("div",{className:"relative group/attachment",children:[P.type==="sticker"&&o.jsx("div",{className:"w-24 h-24 rounded border-2 bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold hover:scale-105 transition-transform cursor-pointer",style:{borderColor:C(P.rarity||"common")},children:""}),P.type==="card"&&o.jsx("div",{className:"w-32 h-20 rounded border-2 bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center text-white font-bold hover:scale-105 transition-transform cursor-pointer",style:{borderColor:C(P.rarity||"common")},children:""}),P.type==="image"&&o.jsx("img",{src:P.url,alt:P.title,className:"max-w-xs rounded hover:scale-105 transition-transform cursor-pointer"})]},R))})]})]},D.id)},k=()=>{u.trim()&&(d(r.channelId,{username:"You",handle:"@you",avatar:"",content:u,type:"text"}),h(""))};if(!r.isOpen)return null;let T=document.getElementById("portal-root");T||(T=document.createElement("div"),T.id="portal-root",document.body.appendChild(T));const E=o.jsx("div",{className:"fixed inset-0 z-[1000] flex",style:{background:p?"rgba(0, 0, 0, 0.5)":"transparent",pointerEvents:"none"},children:o.jsxs("div",{className:"bg-gray-900 border-l border-gray-700 flex flex-col",style:{width:p?"100%":"400px",height:p?"85vh":"calc(100vh - 80px)",top:p?"auto":"80px",bottom:p?"0":"auto",right:p?"auto":"0",position:"fixed",pointerEvents:"auto",transform:"translateX(0)",transition:"transform 300ms ease-out",willChange:"transform",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.3)",zIndex:1001},children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-gray-800",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Sr,{className:"w-5 h-5 text-blue-400"}),o.jsx("h3",{className:"font-semibold text-white",children:"Live Chat"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Se,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:o.jsx(Io,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:o.jsx(Si,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:s,className:"text-gray-400 hover:text-red-400",children:o.jsx(Cr,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"p-3 border-b border-gray-700 bg-gray-850",children:o.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-thin",children:e.map(D=>o.jsxs("button",{onClick:()=>n(D.id),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-all flex items-center gap-2 ${r.channelId===D.id?"bg-blue-600 text-white shadow-lg shadow-blue-600/30":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[D.name,D.unread>0&&o.jsx(ht,{className:"px-1 py-0 text-xs",style:{backgroundColor:"#EF4444",color:"#FFF",minWidth:"16px",height:"16px",fontSize:"10px"},children:D.unread>99?"99+":D.unread})]},D.id))})}),o.jsxs("div",{ref:y,className:"flex-1 overflow-y-auto p-4 space-y-4",style:{scrollbarWidth:"thin",scrollbarColor:"#374151 #1F2937"},children:[t.map(N),o.jsx("div",{ref:g})]}),o.jsx("div",{className:"p-4 border-t border-gray-700 bg-gray-850",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(Gr,{value:u,onChange:D=>h(D.target.value),placeholder:v[w],className:"pr-16 bg-gray-800 border-gray-600 text-white placeholder-gray-400 chat-input",onKeyPress:D=>{D.key==="Enter"&&(D.preventDefault(),k())}}),o.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1",children:[o.jsx(Se,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-400 hover:text-white",children:o.jsx($C,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-400 hover:text-white",children:o.jsx(HC,{className:"w-4 h-4"})})]})]}),o.jsx(Se,{size:"sm",className:"bg-blue-600 hover:bg-blue-500",disabled:!u.trim(),onClick:k,children:o.jsx(Mc,{className:"w-4 h-4"})})]})})]})});return Lo.createPortal(E,T)}const aA=["'s","'s","ing","ed","es","s"];function Ng(r){const e=[],t=/[A-Za-z'']+/g;let s;for(;s=t.exec(r);){const n=s[0],i=n.toLowerCase(),l=lA(i);e.push({start:s.index,end:s.index+n.length,text:n,norm:l})}return e}function lA(r){for(const e of aA)if(r.length>e.length+1&&r.endsWith(e))return r.slice(0,-e.length);return r}function Tg(r){return r.length<2?null:r.length>=4?r.slice(-3):r.slice(-2)}function cA(r){let e=5381;for(let t=0;t<r.length;t++)e=(e<<5)+e+r.charCodeAt(t);return e>>>0}const Rw=["var(--rhyme-1)","var(--rhyme-2)","var(--rhyme-3)","var(--rhyme-4)","var(--rhyme-5)","var(--rhyme-6)","var(--rhyme-7)","var(--rhyme-8)","var(--rhyme-9)","var(--rhyme-10)","var(--rhyme-11)","var(--rhyme-12)"];function Ow(r){const e=Ng(r),t=new Map;for(const n of e){const i=Tg(n.norm);i&&(t.has(i)||t.set(i,[]),t.get(i).push(n))}const s=[];for(const[n,i]of t){if(i.length<2)continue;const l=cA(n)%Rw.length,d=Rw[l];for(const u of i)s.push({start:u.start,end:u.end,color:d,key:n})}return s.sort((n,i)=>n.start-i.start)}function Kd(r){return r.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,"&quot;")}function dA({isRhymeHighlightEnabled:r=!1,isDrawingMode:e=!1,onDrawingStart:t,onTextChange:s,onSelectionChange:n,showStats:i=!1,selectedColor:l="#60A5FA",brushSize:d=3,selectedTool:u="brush",onUndo:h,onClearDrawing:p}){const[m,g]=b.useState(""),[y,v]=b.useState(0),[w,j]=b.useState(0),C=b.useRef(null),N=b.useRef(null),[k,T]=b.useState(!1),[E,D]=b.useState({x:0,y:0}),[M,P]=b.useState([]),[R,F]=b.useState(()=>Ow(m)),I=b.useRef(null);b.useEffect(()=>{I.current&&cancelAnimationFrame(I.current);const K=m,fe=r;return I.current=requestAnimationFrame(()=>{F(fe?Ow(K):[])}),()=>{I.current&&cancelAnimationFrame(I.current)}},[m,r]);const U=b.useMemo(()=>{if(!R.length)return Kd(m).replace(/\n/g,"<br/>");let K="",fe=0;for(const ie of R){fe<ie.start&&(K+=Kd(m.slice(fe,ie.start)));const Te=Kd(m.slice(ie.start,ie.end));K+=`<span class="rhyme-span" style="background:${ie.color}">${Te}</span>`,fe=ie.end}return fe<m.length&&(K+=Kd(m.slice(fe))),K.replace(/\n/g,"<br/>")},[m,R]);b.useEffect(()=>{C.current&&(C.current.style.height="auto",C.current.style.height=C.current.scrollHeight+"px")},[m]),b.useEffect(()=>{if(e&&N.current){const K=N.current,fe=K.getContext("2d");if(fe){const ie=K.getBoundingClientRect();K.width=ie.width,K.height=ie.height,fe.lineCap="round",fe.lineJoin="round"}}},[e]);const L=K=>{const fe=K.target.value;g(fe),s&&s(fe)},X=()=>{if(C.current){const K=C.current.selectionStart,fe=C.current.selectionEnd;v(K),j(fe),n&&n({start:K,end:fe})}},de=K=>{if(K.key==="Tab"){K.preventDefault();const fe=K.currentTarget,ie=fe.selectionStart,Te=fe.selectionEnd,pe=m.substring(0,ie)+"  "+m.substring(Te);g(pe),s&&s(pe),setTimeout(()=>{C.current&&(C.current.selectionStart=C.current.selectionEnd=ie+2)},0)}},B=K=>{const fe=`
[${K}]
`,ie=C.current;if(ie){const Te=ie.selectionStart,pe=m.substring(0,Te)+fe+m.substring(Te);g(pe),s&&s(pe),setTimeout(()=>{ie.selectionStart=ie.selectionEnd=Te+fe.length,ie.focus()},0)}},V=()=>{if(!N.current)return;const K=N.current.getContext("2d");if(K){const fe=K.getImageData(0,0,N.current.width,N.current.height);P(ie=>[...ie,fe].slice(-20))}},O=()=>{if(M.length===0||!N.current)return;const K=N.current.getContext("2d");if(K){const fe=M[M.length-1];K.putImageData(fe,0,0),P(ie=>ie.slice(0,-1))}h&&h()},Z=()=>{if(!N.current)return;const K=N.current.getContext("2d");K&&(K.clearRect(0,0,N.current.width,N.current.height),P([])),p&&p()},Q=K=>{const fe=N.current;if(!fe)return{x:0,y:0};const ie=fe.getBoundingClientRect();if("touches"in K){const Te=K.touches[0];return{x:(Te.clientX-ie.left)*(fe.width/ie.width),y:(Te.clientY-ie.top)*(fe.height/ie.height)}}else return{x:(K.clientX-ie.left)*(fe.width/ie.width),y:(K.clientY-ie.top)*(fe.height/ie.height)}},W=K=>{if(!e||!N.current)return;K.preventDefault(),V(),T(!0);const{x:fe,y:ie}=Q(K);D({x:fe,y:ie}),t&&t()},ae=K=>{if(!k||!N.current)return;K.preventDefault();const ie=N.current.getContext("2d");if(!ie)return;const{x:Te,y:pe}=Q(K);switch(ie.globalCompositeOperation=u==="eraser"?"destination-out":"source-over",ie.strokeStyle=u==="eraser"?"rgba(0,0,0,1)":l,ie.lineWidth=d,u){case"pencil":ie.globalAlpha=.9,ie.lineCap="round",ie.lineJoin="round";break;case"brush":ie.globalAlpha=.8,ie.lineCap="round",ie.lineJoin="round";break;case"highlighter":ie.globalAlpha=.3,ie.lineCap="square",ie.lineJoin="miter";break;case"eraser":ie.globalAlpha=1,ie.lineCap="round",ie.lineJoin="round";break}ie.beginPath(),ie.moveTo(E.x,E.y),ie.lineTo(Te,pe),ie.stroke(),D({x:Te,y:pe})},q=()=>{T(!1)},ce=m.trim().split(/\s+/).filter(K=>K.length>0),we=m.split(`
`).length,xe=K=>{if(!K)return 0;K=K.toLowerCase().replace(/[^a-z]/g,"");let fe=0,ie=!1;for(let Te=0;Te<K.length;Te++){const pe="aeiouy".includes(K[Te]);pe&&!ie&&fe++,ie=pe}return K.endsWith("e")&&fe>1&&fe--,Math.max(1,fe)},se=ce.reduce((K,fe)=>{const ie=fe.replace(/[^\w]/g,"");return K+xe(ie)},0);return b.useEffect(()=>{window.insertIntoLyrics=B,window.undoDrawing=O,window.clearDrawing=Z},[]),o.jsxs("div",{className:"h-full dropsource-editor dropsource-inset-shadow rounded-xl relative overflow-hidden",children:[o.jsx("div",{className:"rhyme-layer","aria-hidden":"true",style:{padding:"2rem",fontSize:"18px",lineHeight:"1.8",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace'},dangerouslySetInnerHTML:{__html:U}}),o.jsx("textarea",{ref:C,className:`
          w-full h-full p-8 bg-transparent border-none outline-none resize-none 
          dropsource-text-primary placeholder:dropsource-text-secondary placeholder:opacity-50 
          leading-relaxed font-mono
          ${e?"pointer-events-none":""}
        `,style:{fontSize:"18px",lineHeight:"1.8",caretColor:"#06b6d4",minHeight:"100%"},value:m,onChange:L,onSelect:X,onKeyDown:de,placeholder:"Start writing here...",spellCheck:!0}),i&&m&&o.jsxs("div",{className:"absolute bottom-4 right-4 px-3 py-2 bg-gray-900/90 rounded-lg border border-gray-700 dropsource-text-secondary text-sm space-y-1 z-20",children:[o.jsxs("div",{children:[ce.length," words"]}),o.jsxs("div",{children:[we," lines"]}),o.jsxs("div",{children:[se," syllables"]})]}),o.jsx("canvas",{ref:N,className:`absolute inset-0 z-30 ${e?"cursor-crosshair pointer-events-auto touch-none":"pointer-events-none"}`,onMouseDown:W,onMouseMove:ae,onMouseUp:q,onMouseLeave:q,onTouchStart:W,onTouchMove:ae,onTouchEnd:q,style:{width:"100%",height:"100%",touchAction:"none"}})]})}var uA=b.createContext(void 0);function Ec(r){const e=b.useContext(uA);return r||e||"ltr"}function dc(r,[e,t]){return Math.min(t,Math.max(e,r))}function hA(r,e){return b.useReducer((t,s)=>e[t][s]??t,r)}var q0="ScrollArea",[qC]=yn(q0),[fA,js]=qC(q0),ZC=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:n,scrollHideDelay:i=600,...l}=r,[d,u]=b.useState(null),[h,p]=b.useState(null),[m,g]=b.useState(null),[y,v]=b.useState(null),[w,j]=b.useState(null),[C,N]=b.useState(0),[k,T]=b.useState(0),[E,D]=b.useState(!1),[M,P]=b.useState(!1),R=nt(e,I=>u(I)),F=Ec(n);return o.jsx(fA,{scope:t,type:s,dir:F,scrollHideDelay:i,scrollArea:d,viewport:h,onViewportChange:p,content:m,onContentChange:g,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:E,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:j,scrollbarYEnabled:M,onScrollbarYEnabledChange:P,onCornerWidthChange:N,onCornerHeightChange:T,children:o.jsx(Ze.div,{dir:F,...l,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":k+"px",...r.style}})})});ZC.displayName=q0;var JC="ScrollAreaViewport",QC=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:s,nonce:n,...i}=r,l=js(JC,t),d=b.useRef(null),u=nt(e,d,l.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(Ze.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...r.style},children:o.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});QC.displayName=JC;var bn="ScrollAreaScrollbar",ek=b.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=js(bn,r.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=n,d=r.orientation==="horizontal";return b.useEffect(()=>(d?i(!0):l(!0),()=>{d?i(!1):l(!1)}),[d,i,l]),n.type==="hover"?o.jsx(pA,{...s,ref:e,forceMount:t}):n.type==="scroll"?o.jsx(mA,{...s,ref:e,forceMount:t}):n.type==="auto"?o.jsx(tk,{...s,ref:e,forceMount:t}):n.type==="always"?o.jsx(Z0,{...s,ref:e}):null});ek.displayName=bn;var pA=b.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=js(bn,r.__scopeScrollArea),[i,l]=b.useState(!1);return b.useEffect(()=>{const d=n.scrollArea;let u=0;if(d){const h=()=>{window.clearTimeout(u),l(!0)},p=()=>{u=window.setTimeout(()=>l(!1),n.scrollHideDelay)};return d.addEventListener("pointerenter",h),d.addEventListener("pointerleave",p),()=>{window.clearTimeout(u),d.removeEventListener("pointerenter",h),d.removeEventListener("pointerleave",p)}}},[n.scrollArea,n.scrollHideDelay]),o.jsx(zo,{present:t||i,children:o.jsx(tk,{"data-state":i?"visible":"hidden",...s,ref:e})})}),mA=b.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=js(bn,r.__scopeScrollArea),i=r.orientation==="horizontal",l=Kh(()=>u("SCROLL_END"),100),[d,u]=hA("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(d==="idle"){const h=window.setTimeout(()=>u("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[d,n.scrollHideDelay,u]),b.useEffect(()=>{const h=n.viewport,p=i?"scrollLeft":"scrollTop";if(h){let m=h[p];const g=()=>{const y=h[p];m!==y&&(u("SCROLL"),l()),m=y};return h.addEventListener("scroll",g),()=>h.removeEventListener("scroll",g)}},[n.viewport,i,u,l]),o.jsx(zo,{present:t||d!=="hidden",children:o.jsx(Z0,{"data-state":d==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:Ye(r.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Ye(r.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),tk=b.forwardRef((r,e)=>{const t=js(bn,r.__scopeScrollArea),{forceMount:s,...n}=r,[i,l]=b.useState(!1),d=r.orientation==="horizontal",u=Kh(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,p=t.viewport.offsetHeight<t.viewport.scrollHeight;l(d?h:p)}},10);return Ta(t.viewport,u),Ta(t.content,u),o.jsx(zo,{present:s||i,children:o.jsx(Z0,{"data-state":i?"visible":"hidden",...n,ref:e})})}),Z0=b.forwardRef((r,e)=>{const{orientation:t="vertical",...s}=r,n=js(bn,r.__scopeScrollArea),i=b.useRef(null),l=b.useRef(0),[d,u]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=ik(d.viewport,d.content),p={...s,sizes:d,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:g=>i.current=g,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:g=>l.current=g};function m(g,y){return wA(g,l.current,d,y)}return t==="horizontal"?o.jsx(gA,{...p,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const g=n.viewport.scrollLeft,y=Fw(g,d,n.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:g=>{n.viewport&&(n.viewport.scrollLeft=g)},onDragScroll:g=>{n.viewport&&(n.viewport.scrollLeft=m(g,n.dir))}}):t==="vertical"?o.jsx(xA,{...p,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const g=n.viewport.scrollTop,y=Fw(g,d);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:g=>{n.viewport&&(n.viewport.scrollTop=g)},onDragScroll:g=>{n.viewport&&(n.viewport.scrollTop=m(g))}}):null}),gA=b.forwardRef((r,e)=>{const{sizes:t,onSizesChange:s,...n}=r,i=js(bn,r.__scopeScrollArea),[l,d]=b.useState(),u=b.useRef(null),h=nt(e,u,i.onScrollbarXChange);return b.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),o.jsx(sk,{"data-orientation":"horizontal",...n,ref:h,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xh(t)+"px",...r.style},onThumbPointerDown:p=>r.onThumbPointerDown(p.x),onDragScroll:p=>r.onDragScroll(p.x),onWheelScroll:(p,m)=>{if(i.viewport){const g=i.viewport.scrollLeft+p.deltaX;r.onWheelScroll(g),lk(g,m)&&p.preventDefault()}},onResize:()=>{u.current&&i.viewport&&l&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:gh(l.paddingLeft),paddingEnd:gh(l.paddingRight)}})}})}),xA=b.forwardRef((r,e)=>{const{sizes:t,onSizesChange:s,...n}=r,i=js(bn,r.__scopeScrollArea),[l,d]=b.useState(),u=b.useRef(null),h=nt(e,u,i.onScrollbarYChange);return b.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),o.jsx(sk,{"data-orientation":"vertical",...n,ref:h,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xh(t)+"px",...r.style},onThumbPointerDown:p=>r.onThumbPointerDown(p.y),onDragScroll:p=>r.onDragScroll(p.y),onWheelScroll:(p,m)=>{if(i.viewport){const g=i.viewport.scrollTop+p.deltaY;r.onWheelScroll(g),lk(g,m)&&p.preventDefault()}},onResize:()=>{u.current&&i.viewport&&l&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:gh(l.paddingTop),paddingEnd:gh(l.paddingBottom)}})}})}),[yA,rk]=qC(bn),sk=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:n,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:d,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:p,onResize:m,...g}=r,y=js(bn,t),[v,w]=b.useState(null),j=nt(e,R=>w(R)),C=b.useRef(null),N=b.useRef(""),k=y.viewport,T=s.content-s.viewport,E=Mr(p),D=Mr(u),M=Kh(m,10);function P(R){if(C.current){const F=R.clientX-C.current.left,I=R.clientY-C.current.top;h({x:F,y:I})}}return b.useEffect(()=>{const R=F=>{const I=F.target;v?.contains(I)&&E(F,T)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[k,v,T,E]),b.useEffect(D,[s,D]),Ta(v,M),Ta(y.content,M),o.jsx(yA,{scope:t,scrollbar:v,hasThumb:n,onThumbChange:Mr(i),onThumbPointerUp:Mr(l),onThumbPositionChange:D,onThumbPointerDown:Mr(d),children:o.jsx(Ze.div,{...g,ref:j,style:{position:"absolute",...g.style},onPointerDown:Ye(r.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),C.current=v.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),P(R))}),onPointerMove:Ye(r.onPointerMove,P),onPointerUp:Ye(r.onPointerUp,R=>{const F=R.target;F.hasPointerCapture(R.pointerId)&&F.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=N.current,y.viewport&&(y.viewport.style.scrollBehavior=""),C.current=null})})})}),mh="ScrollAreaThumb",nk=b.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=rk(mh,r.__scopeScrollArea);return o.jsx(zo,{present:t||n.hasThumb,children:o.jsx(vA,{ref:e,...s})})}),vA=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:s,...n}=r,i=js(mh,t),l=rk(mh,t),{onThumbPositionChange:d}=l,u=nt(e,m=>l.onThumbChange(m)),h=b.useRef(void 0),p=Kh(()=>{h.current&&(h.current(),h.current=void 0)},100);return b.useEffect(()=>{const m=i.viewport;if(m){const g=()=>{if(p(),!h.current){const y=SA(m,d);h.current=y,d()}};return d(),m.addEventListener("scroll",g),()=>m.removeEventListener("scroll",g)}},[i.viewport,p,d]),o.jsx(Ze.div,{"data-state":l.hasThumb?"visible":"hidden",...n,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Ye(r.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),v=m.clientX-y.left,w=m.clientY-y.top;l.onThumbPointerDown({x:v,y:w})}),onPointerUp:Ye(r.onPointerUp,l.onThumbPointerUp)})});nk.displayName=mh;var J0="ScrollAreaCorner",ok=b.forwardRef((r,e)=>{const t=js(J0,r.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?o.jsx(bA,{...r,ref:e}):null});ok.displayName=J0;var bA=b.forwardRef((r,e)=>{const{__scopeScrollArea:t,...s}=r,n=js(J0,t),[i,l]=b.useState(0),[d,u]=b.useState(0),h=!!(i&&d);return Ta(n.scrollbarX,()=>{const p=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(p),u(p)}),Ta(n.scrollbarY,()=>{const p=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(p),l(p)}),h?o.jsx(Ze.div,{...s,ref:e,style:{width:i,height:d,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function gh(r){return r?parseInt(r,10):0}function ik(r,e){const t=r/e;return isNaN(t)?0:t}function Xh(r){const e=ik(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,s=(r.scrollbar.size-t)*e;return Math.max(s,18)}function wA(r,e,t,s="ltr"){const n=Xh(t),i=n/2,l=e||i,d=n-l,u=t.scrollbar.paddingStart+l,h=t.scrollbar.size-t.scrollbar.paddingEnd-d,p=t.content-t.viewport,m=s==="ltr"?[0,p]:[p*-1,0];return ak([u,h],m)(r)}function Fw(r,e,t="ltr"){const s=Xh(e),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-n,l=e.content-e.viewport,d=i-s,u=t==="ltr"?[0,l]:[l*-1,0],h=dc(r,u);return ak([0,l],[0,d])(h)}function ak(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(r[1]-r[0]);return e[0]+s*(t-r[0])}}function lk(r,e){return r>0&&r<e}var SA=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},s=0;return(function n(){const i={left:r.scrollLeft,top:r.scrollTop},l=t.left!==i.left,d=t.top!==i.top;(l||d)&&e(),t=i,s=window.requestAnimationFrame(n)})(),()=>window.cancelAnimationFrame(s)};function Kh(r,e){const t=Mr(r),s=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),b.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function Ta(r,e){const t=Mr(e);ur(()=>{let s=0;if(r){const n=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return n.observe(r),()=>{window.cancelAnimationFrame(s),n.unobserve(r)}}},[r,t])}var CA=ZC,kA=QC,jA=ok;const un=b.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(CA,{ref:s,"data-slot":"scroll-area",className:Et("relative",r),...t,children:[o.jsx(kA,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),o.jsx(ck,{}),o.jsx(jA,{})]}));un.displayName="ScrollArea";const ck=b.forwardRef(({className:r,orientation:e="vertical",...t},s)=>o.jsx(ek,{ref:s,"data-slot":"scroll-area-scrollbar",orientation:e,className:Et("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",r),...t,children:o.jsx(nk,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})}));ck.displayName="ScrollBar";function NA({isOpen:r,onClose:e,projects:t,currentProjectId:s,onSelectProject:n,onCreateProject:i,onDuplicateProject:l,onDeleteProject:d}){return r?o.jsxs(ws,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40",onClick:e}),o.jsxs("div",{className:"fixed left-0 top-0 h-full w-80 dropsource-panel border-r border-gray-700 z-50 transform transition-transform duration-300 ease-out dropsource-floating-card",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Na,{className:"w-5 h-5 text-cyan-400"}),o.jsx("h2",{className:"dropsource-text-primary font-medium",children:"Projects"})]}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:e,className:"dropsource-text-secondary hover:dropsource-glow-cyan",children:o.jsx(Cr,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"p-4 border-b border-gray-700 space-y-3",children:[o.jsxs("div",{className:"flex justify-between gap-2",children:[o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx(Se,{variant:"ghost",size:"sm",className:"flex-1 dropsource-text-secondary hover:dropsource-glow-cyan",children:o.jsx(Br,{className:"w-4 h-4"})})}),o.jsx(wt,{children:"AI organize projects"})]}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx(Se,{variant:"ghost",size:"sm",className:"flex-1 dropsource-text-secondary hover:dropsource-glow-cyan",children:o.jsx(VC,{className:"w-4 h-4"})})}),o.jsx(wt,{children:"New folder"})]}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx(Se,{variant:"ghost",size:"sm",className:"flex-1 dropsource-text-secondary hover:dropsource-glow-cyan",children:o.jsx(cD,{className:"w-4 h-4"})})}),o.jsx(wt,{children:"Open random project"})]}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx(Se,{variant:"ghost",size:"sm",className:"flex-1 dropsource-text-secondary hover:dropsource-glow-cyan",children:o.jsx(ac,{className:"w-4 h-4"})})}),o.jsx(wt,{children:"More options"})]})]}),o.jsxs(Se,{onClick:i,className:"w-full dropsource-gradient hover:dropsource-glow-blue",children:[o.jsx(Si,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),o.jsx(un,{className:"flex-1 h-[calc(100vh-140px)]",children:o.jsx("div",{className:"p-2 space-y-2",children:t.map(u=>o.jsx("div",{className:`group p-3 rounded-lg border transition-all duration-200 cursor-pointer hover:border-cyan-500/50 ${u.id===s?"bg-cyan-900/20 border-cyan-500/50 dropsource-glow-cyan":"border-gray-700 hover:bg-gray-800/50"}`,onClick:()=>n(u.id),children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"dropsource-text-primary font-medium truncate",children:u.title}),u.hasUnreadChanges&&o.jsx(ch,{className:"w-2 h-2 fill-cyan-400 text-cyan-400"})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm dropsource-text-secondary",children:[o.jsxs("span",{children:[u.bpm," BPM"]}),o.jsx("span",{children:""}),o.jsx("span",{children:u.key})]}),o.jsx("p",{className:"text-xs dropsource-text-secondary mt-1",children:u.lastModified.toLocaleDateString()})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx(Se,{variant:"ghost",size:"sm",onClick:h=>{h.stopPropagation(),l(u.id)},className:"h-6 w-6 p-0 dropsource-text-secondary hover:dropsource-glow-cyan",children:o.jsx(An,{className:"w-3 h-3"})})}),o.jsx(wt,{children:"Duplicate project"})]}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx(Se,{variant:"ghost",size:"sm",onClick:h=>{h.stopPropagation(),d(u.id)},className:"h-6 w-6 p-0 text-red-400 hover:dropsource-glow-red",children:o.jsx(lc,{className:"w-3 h-3"})})}),o.jsx(wt,{children:"Delete project"})]})]})]})},u.id))})})]})]}):null}const TA="modulepreload",_A=function(r){return"/"+r},Lw={},tn=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){let l=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");n=l(t.map(h=>{if(h=_A(h),h in Lw)return;Lw[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":TA,p||(g.as="script"),g.crossOrigin="",g.href=h,u&&g.setAttribute("nonce",u),document.head.appendChild(g),p)return new Promise((y,v)=>{g.addEventListener("load",y),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return n.then(l=>{for(const d of l||[])d.status==="rejected"&&i(d.reason);return e().catch(i)})},MA=[{id:"music",icon:WC,label:"Music"},{id:"writing",icon:xg,label:"Writing"},{id:"drawing",icon:xs,label:"Drawing"},{id:"stickers",icon:R3,label:"Stickers"}],EA={music:[{id:"metronome",icon:GC,label:"Metronome",description:"Keep time and tap BPM"},{id:"chord",icon:WC,label:"Chord Helper",description:"Guitar & piano chords"},{id:"audio",icon:gg,label:"Audio Notes",description:"Record and upload audio"}],writing:[{id:"rhyme-highlight",icon:DD,label:"Highlight Rhymes",description:"Highlight rhyming words inline",isToggle:!0},{id:"rhyme",icon:Y0,label:"Rhyme Helper",description:"Find rhymes and suggestions"},{id:"syllable",icon:W4,label:"Syllable Counter",description:"Count syllables and words"},{id:"formatting",icon:vg,label:"Formatting",description:"Text formatting options"}],drawing:[{id:"brush-pencil",icon:xg,label:"Pencil",description:"Smooth pencil brush"},{id:"brush-marker",icon:vw,label:"Marker",description:"Bold marker brush"},{id:"brush-texture",icon:Br,label:"Texture",description:"Textured brush"},{id:"brush-smudge",icon:zs,label:"Smudge",description:"Blend colors"},{id:"brush-airbrush",icon:Zs,label:"Airbrush",description:"Soft airbrush"},{id:"brush-watercolor",icon:Zs,label:"Watercolor",description:"Watercolor effect"},{id:"brush-oil",icon:xs,label:"Oil Paint",description:"Oil painting brush"},{id:"brush-charcoal",icon:Hl,label:"Charcoal",description:"Charcoal drawing"},{id:"brush-crayon",icon:yr,label:"Crayon",description:"Waxy crayon effect"},{id:"gradient-red-yellow",icon:xs,label:"RedYellow",description:"Linear gradient brush"},{id:"gradient-green-blue",icon:xs,label:"GreenBlue",description:"Linear gradient brush"},{id:"gradient-pink-cyan",icon:xs,label:"PinkCyan",description:"Linear gradient brush"},{id:"sparkle",icon:Br,label:"Sparkle",description:"Sparkle particle brush"},{id:"star",icon:rt,label:"Star",description:"Star particle brush"},{id:"confetti",icon:Br,label:"Confetti",description:"Confetti particle brush"},{id:"shape-rect",icon:yr,label:"Rectangle",description:"Draw rectangles"},{id:"shape-circle",icon:ch,label:"Circle",description:"Draw circles"},{id:"shape-triangle",icon:Cw,label:"Triangle",description:"Draw triangles"},{id:"shape-polygon",icon:ms,label:"Polygon",description:"Draw polygons"},{id:"shape-line",icon:Hl,label:"Line",description:"Draw straight lines"},{id:"shape-arrow",icon:ms,label:"Arrow",description:"Draw arrows"},{id:"layer-add",icon:Zi,label:"Add Layer",description:"Add new layer"},{id:"layer-duplicate",icon:An,label:"Duplicate",description:"Duplicate layer"},{id:"layer-merge",icon:Zi,label:"Merge",description:"Merge layers"},{id:"layer-flatten",icon:Zi,label:"Flatten",description:"Flatten all layers"},{id:"layer-opacity",icon:Sw,label:"Opacity",description:"Adjust layer opacity"},{id:"layer-visibility",icon:wi,label:"Visibility",description:"Toggle layer visibility"},{id:"transform-move",icon:uh,label:"Move",description:"Move objects"},{id:"transform-rotate",icon:ci,label:"Rotate",description:"Rotate objects"},{id:"transform-scale",icon:yr,label:"Scale",description:"Resize objects"},{id:"transform-flip",icon:ci,label:"Flip",description:"Flip objects"},{id:"transform-skew",icon:yr,label:"Skew",description:"Skew objects"},{id:"effect-blur",icon:zs,label:"Blur",description:"Apply blur effect"},{id:"effect-sharpen",icon:zs,label:"Sharpen",description:"Sharpen details"},{id:"effect-glow",icon:Br,label:"Glow",description:"Add glow effect"},{id:"effect-shadow",icon:yr,label:"Shadow",description:"Add drop shadow"},{id:"effect-gradient",icon:Zs,label:"Gradient",description:"Create gradients"},{id:"effect-noise",icon:Br,label:"Noise",description:"Add texture noise"},{id:"color-picker",icon:ms,label:"Color Picker",description:"Pick colors from canvas"},{id:"color-fill",icon:Zs,label:"Fill",description:"Fill with color"},{id:"color-gradient",icon:Zs,label:"Gradient",description:"Create color gradients"},{id:"color-palette",icon:xs,label:"Palette",description:"Color palette"},{id:"color-history",icon:ci,label:"History",description:"Color history"},{id:"color-swatches",icon:yr,label:"Swatches",description:"Color swatches"},{id:"tool-undo",icon:kw,label:"Undo",description:"Undo last action"},{id:"tool-redo",icon:ww,label:"Redo",description:"Redo last action"},{id:"tool-copy",icon:An,label:"Copy",description:"Copy selection"},{id:"tool-paste",icon:An,label:"Paste",description:"Paste clipboard"},{id:"tool-clear",icon:lc,label:"Clear",description:"Clear canvas"},{id:"tool-select",icon:ms,label:"Select",description:"Select objects"},{id:"tool-crop",icon:yr,label:"Crop",description:"Crop canvas"},{id:"settings-brush",icon:ia,label:"Brush Settings",description:"Configure brush"},{id:"settings-canvas",icon:ia,label:"Canvas Settings",description:"Configure canvas"}],stickers:[{id:"minting",icon:dh,label:"Mint Sticker",description:"Create collectible stickers"},{id:"brush-pencil",icon:xg,label:"Pencil",description:"Smooth pencil brush"},{id:"brush-marker",icon:vw,label:"Marker",description:"Bold marker brush"},{id:"brush-texture",icon:Br,label:"Texture",description:"Textured brush"},{id:"brush-smudge",icon:zs,label:"Smudge",description:"Blend colors"},{id:"brush-airbrush",icon:Zs,label:"Airbrush",description:"Soft airbrush"},{id:"brush-watercolor",icon:Zs,label:"Watercolor",description:"Watercolor effect"},{id:"brush-oil",icon:xs,label:"Oil Paint",description:"Oil painting brush"},{id:"brush-charcoal",icon:Hl,label:"Charcoal",description:"Charcoal drawing"},{id:"brush-crayon",icon:yr,label:"Crayon",description:"Waxy crayon effect"},{id:"shape-rect",icon:yr,label:"Rectangle",description:"Draw rectangles"},{id:"shape-circle",icon:ch,label:"Circle",description:"Draw circles"},{id:"shape-triangle",icon:Cw,label:"Triangle",description:"Draw triangles"},{id:"shape-polygon",icon:ms,label:"Polygon",description:"Draw polygons"},{id:"shape-line",icon:Hl,label:"Line",description:"Draw straight lines"},{id:"shape-arrow",icon:ms,label:"Arrow",description:"Draw arrows"},{id:"layer-add",icon:Zi,label:"Add Layer",description:"Add new layer"},{id:"layer-duplicate",icon:An,label:"Duplicate",description:"Duplicate layer"},{id:"layer-merge",icon:Zi,label:"Merge",description:"Merge layers"},{id:"layer-flatten",icon:Zi,label:"Flatten",description:"Flatten all layers"},{id:"layer-opacity",icon:Sw,label:"Opacity",description:"Adjust layer opacity"},{id:"layer-visibility",icon:wi,label:"Visibility",description:"Toggle layer visibility"},{id:"transform-move",icon:uh,label:"Move",description:"Move objects"},{id:"transform-rotate",icon:ci,label:"Rotate",description:"Rotate objects"},{id:"transform-scale",icon:yr,label:"Scale",description:"Resize objects"},{id:"transform-flip",icon:ci,label:"Flip",description:"Flip objects"},{id:"transform-skew",icon:yr,label:"Skew",description:"Skew objects"},{id:"effect-blur",icon:zs,label:"Blur",description:"Apply blur effect"},{id:"effect-sharpen",icon:zs,label:"Sharpen",description:"Sharpen details"},{id:"effect-glow",icon:Br,label:"Glow",description:"Add glow effect"},{id:"effect-shadow",icon:yr,label:"Shadow",description:"Add drop shadow"},{id:"effect-gradient",icon:Zs,label:"Gradient",description:"Create gradients"},{id:"effect-noise",icon:Br,label:"Noise",description:"Add texture noise"},{id:"color-picker",icon:ms,label:"Color Picker",description:"Pick colors from canvas"},{id:"color-fill",icon:Zs,label:"Fill",description:"Fill with color"},{id:"color-gradient",icon:Zs,label:"Gradient",description:"Create color gradients"},{id:"color-palette",icon:xs,label:"Palette",description:"Color palette"},{id:"color-history",icon:ci,label:"History",description:"Color history"},{id:"color-swatches",icon:yr,label:"Swatches",description:"Color swatches"},{id:"tool-undo",icon:kw,label:"Undo",description:"Undo last action"},{id:"tool-redo",icon:ww,label:"Redo",description:"Redo last action"},{id:"tool-copy",icon:An,label:"Copy",description:"Copy selection"},{id:"tool-paste",icon:An,label:"Paste",description:"Paste clipboard"},{id:"tool-clear",icon:lc,label:"Clear",description:"Clear canvas"},{id:"tool-select",icon:ms,label:"Select",description:"Select objects"},{id:"tool-crop",icon:yr,label:"Crop",description:"Crop canvas"},{id:"settings-brush",icon:ia,label:"Brush Settings",description:"Configure brush"},{id:"settings-canvas",icon:ia,label:"Canvas Settings",description:"Configure canvas"}]};function PA({onOpenFeature:r,activeFeatures:e,onToggleRhymeHighlight:t,onToggleDrawing:s,isRhymeHighlightActive:n=!1,isDrawingActive:i=!1,isStickerMode:l=!1,onEnterStickerMode:d,onExitStickerMode:u,isBarVisible:h=!0,onToggleBarVisibility:p}){const[m,g]=b.useState(null),[y,v]=b.useState(null),[w,j]=b.useState(!1),[C,N]=b.useState("#FF0000"),[k,T]=b.useState(5),[E,D]=b.useState(1),[M,P]=b.useState(1),[R,F]=b.useState("gradient-red-yellow"),[I,U]=b.useState({x:320,y:80}),[L,X]=b.useState(!1),[de,B]=b.useState({x:0,y:0}),V=me=>{me==="stickers"&&!l?(d?.(),g(me)):m===me?(me==="stickers"&&l&&u?.(),g(null)):g(me)},O=async me=>{if(v(me.id),me.id==="rhyme-highlight"&&t)t();else if(me.id==="minting")r("minting");else if(l)try{const _e=await tn(()=>Promise.resolve().then(()=>ai),void 0),Ce=_e.ProStickerModule||_e.default||_e;console.log("[CategoryToolbar] Module imported:",Ce),console.log("[CategoryToolbar] selectTool function available:",typeof Ce.selectTool);let Ee=me.id;if(Ee={"brush-pencil":"pencil","brush-marker":"marker","brush-texture":"texture","brush-smudge":"smudge","brush-airbrush":"airbrush","brush-watercolor":"watercolor","brush-oil":"oil","brush-charcoal":"crayon","brush-crayon":"crayon","shape-rect":"rectangle","shape-circle":"circle","shape-triangle":"triangle","shape-polygon":"polygon","shape-line":"line","shape-arrow":"arrow","effect-blur":"blur","effect-sharpen":"sharpen","effect-glow":"glow","effect-shadow":"shadow","effect-noise":"noise","tool-undo":"undo","tool-redo":"redo","tool-copy":"copy","tool-paste":"paste","tool-clear":"clear","tool-select":"select","tool-crop":"crop","color-picker":"colorpicker","color-fill":"fill","transform-move":"move","transform-rotate":"rotate","transform-scale":"scale","transform-flip":"flip"}[Ee]||Ee,console.log("[CategoryToolbar] Original tool ID:",me.id,"Mapped to:",Ee),typeof Ce.selectTool=="function"){if(Ee==="colorpicker"){$s(Ce);return}Ce.selectTool(Ee),v(me.id),F(Ee),yt(`Applied: ${me.label}`)}else Ce.toolActions&&typeof Ce.toolActions[Ee]=="function"?(Ce.toolActions[Ee](),v(me.id),F(Ee),yt(`Applied: ${me.label}`)):(console.warn("[CategoryToolbar] no tool handler for",Ee),Z(me));typeof Ce.debugStatus=="function"&&Ce.debugStatus()}catch(_e){console.error("Tool action failed:",_e),yt(`Error: ${me.label}`)}else Z(me)},Z=async me=>{try{if(document.querySelector(".pad-container")){const Ce=await tn(()=>Promise.resolve().then(()=>ai),void 0),Ee=Ce.ProStickerModule||Ce.default||Ce;if(typeof Ee.selectTool=="function"){let We=me.id;We.startsWith("brush-")&&(We=We.replace("brush-","")),We.startsWith("shape-")&&(We=We.replace("shape-","")),We.startsWith("layer-")&&(We=We.replace("layer-",""),We==="add"&&(We="addLayer"),We==="visibility"&&(We="toggleVisibility"),We==="opacity"&&(We="setOpacity")),We.startsWith("transform-")&&(We=We.replace("transform-",""),We==="rotate-cw"&&(We="rotateCW"),We==="rotate-ccw"&&(We="rotateCCW"),We==="flip-x"&&(We="flipX"),We==="flip-y"&&(We="flipY")),We.startsWith("effect-")&&(We=We.replace("effect-","")),Ee.selectTool(We),v(me.id),F(We),yt(`Applied: ${me.label}`);return}}}catch{console.warn("ProStickerModule not available, using fallback behavior")}if(me.id.startsWith("brush-")){const _e=me.id.replace("brush-","");console.log(`Switched to ${_e} brush`),s&&s(),window.currentBrushType=_e,j(!0),q(_e)}else if(me.id.startsWith("shape-")){const _e=me.id.replace("shape-","");console.log(`Drawing ${_e} shape`),s&&s(),window.currentShapeType=_e,j(!0),we(_e)}else if(me.id.startsWith("layer-")){const _e=me.id.replace("layer-","");console.log(`Layer action: ${_e}`),j(!0),_e==="add"?xe():_e==="duplicate"?se():_e==="merge"?K():_e==="flatten"?fe():_e==="visibility"&&ie()}else if(me.id.startsWith("transform-")){const _e=me.id.replace("transform-","");console.log(`Transform mode: ${_e}`),window.currentTransformMode=_e,j(!0),Te(_e)}else if(me.id.startsWith("effect-")){const _e=me.id.replace("effect-","");console.log(`Applying ${_e} effect`),j(!0),_e==="blur"?pe():_e==="sharpen"?ue():_e==="glow"?re():_e==="shadow"?J():_e==="gradient"?ge():_e==="noise"&&oe()}else if(me.id.startsWith("color-")){const _e=me.id.replace("color-","");console.log(`Color action: ${_e}`),j(!0),_e==="picker"?console.log("Color picker selected"):_e==="fill"?ve():_e==="gradient"?Re():_e==="palette"?De():_e==="history"?Je():_e==="swatches"&&He()}else if(me.id.startsWith("tool-")){const _e=me.id.replace("tool-","");console.log(`Tool action: ${_e}`),_e==="undo"?window.undoDrawing&&(window.undoDrawing(),yt("Undid last action")):_e==="redo"?window.redoDrawing&&(window.redoDrawing(),yt("Redid last action")):_e==="clear"?window.clearDrawing&&(window.clearDrawing(),yt("Cleared canvas")):_e==="copy"?he():_e==="paste"?Ge():_e==="select"?st():_e==="crop"&&lt()}else if(me.id.startsWith("settings-")){const _e=me.id.replace("settings-","");console.log(`Opening ${_e} settings`),j(!0)}else console.log(`Tool clicked: ${me.label}`),yt(`Tool: ${me.label}`)},Q=me=>{X(!0),B({x:me.clientX-I.x,y:me.clientY-I.y})},W=me=>{L&&U({x:me.clientX-de.x,y:me.clientY-de.y})},ae=()=>{X(!1)},q=me=>{const _e=document.querySelector("canvas");if(_e){const Ce=_e.getContext("2d");if(Ce){switch(Ce.strokeStyle=C,Ce.lineWidth=k,Ce.globalAlpha=E,me){case"pencil":Ce.lineCap="round",Ce.lineJoin="round";break;case"marker":Ce.lineCap="square",Ce.lineJoin="miter";break;case"airbrush":Ce.lineCap="round",Ce.lineJoin="round";break;default:Ce.lineCap="round",Ce.lineJoin="round"}window.brushSettings={color:C,size:k,opacity:E,type:me}}}},ce=()=>{if(y&&y.startsWith("brush-")){const me=y.replace("brush-","");q(me)}},we=me=>{window.drawingMode="shape",window.currentShape=me},xe=()=>{console.log("Creating new drawing layer")},se=()=>{console.log("Duplicating current layer")},K=()=>{console.log("Merging all layers")},fe=()=>{console.log("Flattening all layers")},ie=()=>{console.log("Toggling layer visibility")},Te=me=>{window.transformMode=me},pe=()=>{const me=document.querySelector("canvas");me&&(me.style.filter="blur(2px)",setTimeout(()=>me.style.filter="",1e3))},ue=()=>{const me=document.querySelector("canvas");me&&(me.style.filter="contrast(1.5) brightness(1.1)",setTimeout(()=>me.style.filter="",1e3))},re=()=>{const me=document.querySelector("canvas");me&&(me.style.filter="drop-shadow(0 0 10px rgba(255, 255, 255, 0.5))",setTimeout(()=>me.style.filter="",1e3))},J=()=>{const me=document.querySelector("canvas");me&&(me.style.filter="drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5))",setTimeout(()=>me.style.filter="",1e3))},ge=()=>{const me=document.querySelector("canvas");me&&(me.style.filter="hue-rotate(90deg) saturate(1.5)",setTimeout(()=>me.style.filter="",1e3))},oe=()=>{const me=document.querySelector("canvas");me&&(me.style.filter="contrast(1.2) brightness(0.9)",setTimeout(()=>me.style.filter="",1e3))},ve=()=>{console.log("Filling selection with current color")},Re=()=>{console.log("Creating color gradient")},De=()=>{console.log("Opening color palette")},Je=()=>{console.log("Showing color history")},He=()=>{console.log("Opening color swatches")},he=()=>{console.log("Copying selection to clipboard")},Ge=()=>{console.log("Pasting from clipboard")},st=()=>{window.selectionMode=!0},lt=()=>{window.cropMode=!0},yt=me=>{const _e=document.createElement("div");if(_e.textContent=me,_e.style.cssText=`
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      z-index: 9999;
      pointer-events: none;
      animation: fadeInOut 2s ease-in-out;
    `,!document.querySelector("#tool-feedback-styles")){const Ce=document.createElement("style");Ce.id="tool-feedback-styles",Ce.textContent=`
        @keyframes fadeInOut {
          0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
          20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
          80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
          100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }
      `,document.head.appendChild(Ce)}document.body.appendChild(_e),setTimeout(()=>{_e.parentNode&&_e.parentNode.removeChild(_e)},2e3)},kr=me=>{if(me.startsWith("gradient-")){const Ce={"gradient-red-yellow":{start:"#FF6B35",end:"#FFD700"},"gradient-green-blue":{start:"#00B4DB",end:"#4ECDC4"},"gradient-pink-cyan":{start:"#FF69B4",end:"#00CED1"}}[me];if(Ce)return o.jsx("div",{className:"gradient-preview",style:{"--gradient-start":Ce.start,"--gradient-end":Ce.end}})}return["sparkle","star","confetti"].includes(me)?o.jsx("div",{className:"particle-preview"}):null},$s=async me=>{try{const _e=document.createElement("input");_e.type="color",_e.value=C,_e.onchange=Ce=>{const Ee=Ce.target.value;N(Ee),typeof me.setColor=="function"&&me.setColor(Ee),yt(`Color set to ${Ee}`)},_e.click()}catch(_e){console.error("Color picker failed:",_e)}},Pt=m?EA[m]:[],hr=()=>{if(!w||!y)return null;const _e=(Ce=>Ce.startsWith("brush-")?"brush":Ce.startsWith("shape-")?"shape":Ce.startsWith("layer-")?"layer":Ce.startsWith("transform-")?"transform":Ce.startsWith("effect-")?"effect":Ce.startsWith("color-")?"color":Ce.startsWith("settings-")?"settings":"default")(y);return o.jsxs("div",{className:"fixed w-64 bg-gray-800/95 backdrop-blur-md border border-gray-600 rounded-lg p-4 z-50 cursor-move",style:{left:`${I.x}px`,top:`${I.y}px`,cursor:L?"grabbing":"grab"},onMouseDown:Q,onMouseMove:W,onMouseUp:ae,onMouseLeave:ae,children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-white font-medium select-none",children:y.replace(/^(brush-|shape-|layer-|transform-|effect-|color-|settings-)/,"").replace(/-/g," ").replace(/\b\w/g,Ce=>Ce.toUpperCase())}),o.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-white cursor-pointer",children:""})]}),_e==="brush"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-white text-sm mb-2 block",children:"Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:C,onChange:async Ce=>{if(N(Ce.target.value),l)try{const Ee=await tn(()=>Promise.resolve().then(()=>ai),void 0),We=Ee&&Ee.ProStickerModule?Ee.ProStickerModule:Ee&&Ee.default?Ee.default:Ee;typeof We.setBrush=="function"&&We.setBrush(Ce.target.value,k,E)}catch(Ee){console.error("Failed to update brush color:",Ee)}else ce()},className:"w-8 h-8 rounded border border-gray-600"}),o.jsx("span",{className:"text-white text-sm",children:C})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-white text-sm mb-2 block",children:["Brush Size: ",k,"px"]}),o.jsx("input",{type:"range",min:"1",max:"50",value:k,onChange:async Ce=>{if(T(Number(Ce.target.value)),l)try{const Ee=await tn(()=>Promise.resolve().then(()=>ai),void 0),We=Ee&&Ee.ProStickerModule?Ee.ProStickerModule:Ee&&Ee.default?Ee.default:Ee;typeof We.setBrushWidth=="function"&&We.setBrushWidth(Number(Ce.target.value))}catch(Ee){console.error("Failed to update brush size:",Ee)}else ce()},className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-white text-sm mb-2 block",children:["Opacity: ",Math.round(E*100),"%"]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:E,onChange:async Ce=>{if(D(Number(Ce.target.value)),l)try{const Ee=await tn(()=>Promise.resolve().then(()=>ai),void 0),We=Ee&&Ee.ProStickerModule?Ee.ProStickerModule:Ee&&Ee.default?Ee.default:Ee;typeof We.setBrushOpacity=="function"&&We.setBrushOpacity(Number(Ce.target.value))}catch(Ee){console.error("Failed to update brush opacity:",Ee)}else ce()},className:"w-full"})]}),o.jsx("div",{className:"pt-2",children:o.jsxs("div",{className:"w-full h-8 rounded border border-gray-600 flex items-center justify-center text-white text-sm",style:{backgroundColor:C,opacity:E},children:["Preview: ",y.replace("brush-","")," brush"]})})]}),_e==="shape"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-white text-sm mb-2 block",children:"Fill Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:C,onChange:Ce=>{N(Ce.target.value),window.shapeSettings={fillColor:Ce.target.value,strokeWidth:k,fillOpacity:E,type:y.replace("shape-","")}},className:"w-8 h-8 rounded border border-gray-600"}),o.jsx("span",{className:"text-white text-sm",children:C})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-white text-sm mb-2 block",children:["Stroke Width: ",k,"px"]}),o.jsx("input",{type:"range",min:"1",max:"20",value:k,onChange:Ce=>{T(Number(Ce.target.value)),window.shapeSettings&&(window.shapeSettings.strokeWidth=Number(Ce.target.value))},className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-white text-sm mb-2 block",children:["Fill Opacity: ",Math.round(E*100),"%"]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:E,onChange:Ce=>{D(Number(Ce.target.value)),window.shapeSettings&&(window.shapeSettings.fillOpacity=Number(Ce.target.value))},className:"w-full"})]}),o.jsx("div",{className:"pt-2",children:o.jsxs("div",{className:"w-full h-8 rounded border border-gray-600 flex items-center justify-center text-white text-sm",style:{backgroundColor:C,opacity:E},children:["Shape: ",y.replace("shape-","")]})})]}),_e==="layer"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"text-white text-sm mb-2 block",children:["Layer Opacity: ",Math.round(M*100),"%"]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:M,onChange:Ce=>P(Number(Ce.target.value)),className:"w-full"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded text-sm",children:"Add New Layer"}),o.jsx("button",{className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded text-sm",children:"Duplicate Layer"}),o.jsx("button",{className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white py-2 px-4 rounded text-sm",children:"Merge Layers"}),o.jsx("button",{className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded text-sm",children:"Flatten All"})]})]}),_e==="effect"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"text-white text-sm mb-2 block",children:["Effect Intensity: ",k,"%"]}),o.jsx("input",{type:"range",min:"1",max:"100",value:k,onChange:Ce=>T(Number(Ce.target.value)),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-white text-sm mb-2 block",children:["Effect Opacity: ",Math.round(E*100),"%"]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:E,onChange:Ce=>D(Number(Ce.target.value)),className:"w-full"})]}),o.jsx("div",{className:"pt-2",children:o.jsxs("div",{className:"w-full h-8 rounded border border-gray-600 flex items-center justify-center text-white text-sm",children:["Effect: ",y.replace("effect-","")]})})]}),_e==="color"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-white text-sm mb-2 block",children:"Primary Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:C,onChange:async Ce=>{if(N(Ce.target.value),l)try{const Ee=await tn(()=>Promise.resolve().then(()=>ai),void 0),We=Ee&&Ee.ProStickerModule?Ee.ProStickerModule:Ee&&Ee.default?Ee.default:Ee;typeof We.setBrush=="function"&&We.setBrush(Ce.target.value,k,E)}catch(Ee){console.error("Failed to update color:",Ee)}else window.currentColor=Ce.target.value,ce()},className:"w-8 h-8 rounded border border-gray-600"}),o.jsx("span",{className:"text-white text-sm",children:C})]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFFFFF","#000000"].map(Ce=>o.jsx("button",{onClick:async()=>{if(N(Ce),l)try{const Ee=await tn(()=>Promise.resolve().then(()=>ai),void 0),We=Ee&&Ee.ProStickerModule?Ee.ProStickerModule:Ee&&Ee.default?Ee.default:Ee;typeof We.setBrush=="function"&&We.setBrush(Ce,k,E)}catch(Ee){console.error("Failed to update color:",Ee)}else window.currentColor=Ce,ce()},className:"w-8 h-8 rounded border border-gray-600 hover:scale-110 transition-transform",style:{backgroundColor:Ce}},Ce))}),o.jsx("div",{className:"pt-2",children:o.jsxs("div",{className:"w-full h-8 rounded border border-gray-600 flex items-center justify-center text-white text-sm",style:{backgroundColor:C},children:["Color: ",y.replace("color-","")]})})]}),_e==="settings"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-white text-sm mb-2 block",children:"Canvas Quality"}),o.jsxs("select",{className:"w-full bg-gray-700 text-white border border-gray-600 rounded px-3 py-2",children:[o.jsx("option",{children:"High (2x)"}),o.jsx("option",{children:"Medium (1.5x)"}),o.jsx("option",{children:"Low (1x)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-white text-sm mb-2 block",children:"Grid Size"}),o.jsx("input",{type:"range",min:"5",max:"50",value:"20",className:"w-full"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center text-white text-sm",children:[o.jsx("input",{type:"checkbox",className:"mr-2"}),"Show Grid"]}),o.jsxs("label",{className:"flex items-center text-white text-sm",children:[o.jsx("input",{type:"checkbox",className:"mr-2"}),"Snap to Grid"]}),o.jsxs("label",{className:"flex items-center text-white text-sm",children:[o.jsx("input",{type:"checkbox",className:"mr-2"}),"Show Rulers"]})]})]})]})};return h?o.jsxs(ws,{children:[hr(),o.jsx("div",{className:"fixed z-30 transition-all duration-300",style:{right:"24px",top:"50%",transform:"translateY(-50%)"},children:o.jsxs("div",{className:`dropsource-toolbar-enhanced flex flex-col transition-all duration-300 ${l?"border-2 border-yellow-400 shadow-lg shadow-yellow-400/20":""}`,style:{gap:"calc(var(--spacing-unit) * 0.75)",width:m?"80px":"64px",padding:"calc(var(--spacing-unit) * 1.5)",maxHeight:"80vh",overflow:"hidden"},children:[o.jsx("div",{className:"flex justify-between items-center mb-2",children:o.jsx("button",{onClick:p,className:"dropsource-toolbar-button p-1",style:{width:"24px",height:"8px",borderRadius:"4px",padding:"0"},children:o.jsx("div",{className:"w-3 h-1 rounded-full bg-current mx-auto"})})}),o.jsx("div",{className:"flex flex-col gap-2 overflow-y-auto dropsource-custom-scrollbar",children:m?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>{m==="stickers"&&l&&u?.(),g(null)},className:"dropsource-toolbar-button mb-2",style:{width:"48px",height:"32px",padding:"0",borderRadius:"8px",fontSize:"var(--text-xs)"},children:""}),Pt.map(me=>{const _e=me.icon,Ce=me.isToggle?me.id==="rhyme-highlight"?n:me.id==="drawing-tools"?i:!1:e.has(me.id),Ee=y===me.id,We=me.id==="minting",Uo=We?{width:"48px",height:"48px",padding:"0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%)",border:"2px solid #FFD700",boxShadow:"0 0 20px rgba(255, 215, 0, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2)",animation:"golden-pulse 2s ease-in-out infinite"}:{width:"48px",height:"48px",padding:"0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:Ee?"#4A5568":"transparent",border:Ee?"2px solid #718096":"2px solid transparent"};return o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("button",{onClick:()=>O(me),className:`dropsource-toolbar-button ${Ce?"active dropsource-pulse-border":""} ${Ee?"tool-active":""}`,style:Uo,children:o.jsxs("div",{className:"flex items-center justify-center w-full h-full",children:[kr(me.id),o.jsx(_e,{className:`w-5 h-5 ${We?"text-white":"dropsource-icon-outlined"}`})]})})}),o.jsx(wt,{side:"left",className:"dropsource-card",children:o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",style:{fontSize:"var(--text-sm)"},children:me.label}),o.jsx("p",{className:"text-xs opacity-75",children:me.description}),Ee&&o.jsx("p",{className:"text-xs text-green-400 mt-1",children:" Active"})]})})]},me.id)})]}):o.jsxs(o.Fragment,{children:[MA.map(me=>{const _e=me.icon,Ce=me.id==="stickers"&&l;return o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("button",{onClick:()=>V(me.id),className:`dropsource-toolbar-button ${Ce?"active":""}`,style:{width:"48px",height:"48px",padding:"0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(_e,{className:"w-5 h-5 dropsource-icon-outlined"})})}),o.jsx(wt,{side:"left",className:"dropsource-card",children:o.jsx("div",{children:o.jsx("p",{className:"font-medium",style:{fontSize:"var(--text-sm)"},children:me.label})})})]},me.id)}),o.jsx("div",{className:"w-full h-px bg-gray-600 my-2 opacity-30"}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("button",{onClick:()=>r("ai"),className:`dropsource-toolbar-button ${e.has("ai")?"active":""}`,style:{width:"48px",height:"48px",padding:"0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(mg,{className:"w-5 h-5 dropsource-icon-outlined"})})}),o.jsx(wt,{side:"left",className:"dropsource-card",children:o.jsx("div",{children:o.jsx("p",{className:"font-medium",style:{fontSize:"var(--text-sm)"},children:"AI Assist"})})})]}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("button",{onClick:()=>r("buddy"),className:`dropsource-toolbar-button ${e.has("buddy")?"active":""}`,style:{width:"48px",height:"48px",padding:"0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ss,{className:"w-5 h-5 dropsource-icon-outlined"})})}),o.jsx(wt,{side:"left",className:"dropsource-card",children:o.jsx("div",{children:o.jsx("p",{className:"font-medium",style:{fontSize:"var(--text-sm)"},children:"Collaborate"})})})]}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("button",{onClick:()=>r("minting"),className:`dropsource-toolbar-button ${e.has("minting")?"active":""}`,style:{width:"48px",height:"48px",padding:"0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(dh,{className:"w-5 h-5 dropsource-icon-outlined"})})}),o.jsx(wt,{side:"left",className:"dropsource-card",children:o.jsx("div",{children:o.jsx("p",{className:"font-medium",style:{fontSize:"var(--text-sm)"},children:"Mint Sticker"})})})]}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("button",{onClick:()=>r("projects"),className:`dropsource-toolbar-button ${e.has("projects")?"active":""}`,style:{width:"48px",height:"48px",padding:"0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx($0,{className:"w-5 h-5 dropsource-icon-outlined"})})}),o.jsx(wt,{side:"left",className:"dropsource-card",children:o.jsx("div",{children:o.jsx("p",{className:"font-medium",style:{fontSize:"var(--text-sm)"},children:"Projects"})})})]})]})})]})})]}):o.jsx(ws,{children:o.jsx("div",{className:"fixed z-30 cursor-pointer",style:{right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:p,children:o.jsx("div",{className:"w-1 h-24 bg-gradient-to-b from-transparent via-blue-400 to-transparent opacity-60 hover:opacity-100 transition-opacity rounded-l"})})})}const Q0=b.createContext({});function ex(r){const e=b.useRef(null);return e.current===null&&(e.current=r()),e.current}const tx=typeof window<"u",dk=tx?b.useLayoutEffect:b.useEffect,qh=b.createContext(null);function rx(r,e){r.indexOf(e)===-1&&r.push(e)}function sx(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const Wn=(r,e,t)=>t>e?e:t<r?r:t;let nx=()=>{};const Hn={},uk=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function hk(r){return typeof r=="object"&&r!==null}const fk=r=>/^0[^.\s]+$/u.test(r);function ox(r){let e;return()=>(e===void 0&&(e=r()),e)}const Ss=r=>r,DA=(r,e)=>t=>e(r(t)),Pc=(...r)=>r.reduce(DA),uc=(r,e,t)=>{const s=e-r;return s===0?1:(t-r)/s};class ix{constructor(){this.subscriptions=[]}add(e){return rx(this.subscriptions,e),()=>sx(this.subscriptions,e)}notify(e,t,s){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](e,t,s);else for(let i=0;i<n;i++){const l=this.subscriptions[i];l&&l(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hn=r=>r*1e3,fn=r=>r/1e3;function pk(r,e){return e?r*(1e3/e):0}const mk=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,AA=1e-7,RA=12;function OA(r,e,t,s,n){let i,l,d=0;do l=e+(t-e)/2,i=mk(l,s,n)-r,i>0?t=l:e=l;while(Math.abs(i)>AA&&++d<RA);return l}function Dc(r,e,t,s){if(r===e&&t===s)return Ss;const n=i=>OA(i,0,1,r,t);return i=>i===0||i===1?i:mk(n(i),e,s)}const gk=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,xk=r=>e=>1-r(1-e),yk=Dc(.33,1.53,.69,.99),ax=xk(yk),vk=gk(ax),bk=r=>(r*=2)<1?.5*ax(r):.5*(2-Math.pow(2,-10*(r-1))),lx=r=>1-Math.sin(Math.acos(r)),wk=xk(lx),Sk=gk(lx),FA=Dc(.42,0,1,1),LA=Dc(0,0,.58,1),Ck=Dc(.42,0,.58,1),zA=r=>Array.isArray(r)&&typeof r[0]!="number",kk=r=>Array.isArray(r)&&typeof r[0]=="number",IA={linear:Ss,easeIn:FA,easeInOut:Ck,easeOut:LA,circIn:lx,circInOut:Sk,circOut:wk,backIn:ax,backInOut:vk,backOut:yk,anticipate:bk},BA=r=>typeof r=="string",zw=r=>{if(kk(r)){nx(r.length===4);const[e,t,s,n]=r;return Dc(e,t,s,n)}else if(BA(r))return IA[r];return r},qd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function VA(r,e){let t=new Set,s=new Set,n=!1,i=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function u(p){l.has(p)&&(h.schedule(p),r()),p(d)}const h={schedule:(p,m=!1,g=!1)=>{const v=g&&n?t:s;return m&&l.add(p),v.has(p)||v.add(p),p},cancel:p=>{s.delete(p),l.delete(p)},process:p=>{if(d=p,n){i=!0;return}n=!0,[t,s]=[s,t],t.forEach(u),t.clear(),n=!1,i&&(i=!1,h.process(p))}};return h}const WA=40;function jk(r,e){let t=!1,s=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>t=!0,l=qd.reduce((k,T)=>(k[T]=VA(i),k),{}),{setup:d,read:u,resolveKeyframes:h,preUpdate:p,update:m,preRender:g,render:y,postRender:v}=l,w=()=>{const k=Hn.useManualTiming?n.timestamp:performance.now();t=!1,Hn.useManualTiming||(n.delta=s?1e3/60:Math.max(Math.min(k-n.timestamp,WA),1)),n.timestamp=k,n.isProcessing=!0,d.process(n),u.process(n),h.process(n),p.process(n),m.process(n),g.process(n),y.process(n),v.process(n),n.isProcessing=!1,t&&e&&(s=!1,r(w))},j=()=>{t=!0,s=!0,n.isProcessing||r(w)};return{schedule:qd.reduce((k,T)=>{const E=l[T];return k[T]=(D,M=!1,P=!1)=>(t||j(),E.schedule(D,M,P)),k},{}),cancel:k=>{for(let T=0;T<qd.length;T++)l[qd[T]].cancel(k)},state:n,steps:l}}const{schedule:St,cancel:Ao,state:cr,steps:pm}=jk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ss,!0);let Uu;function HA(){Uu=void 0}const Wr={now:()=>(Uu===void 0&&Wr.set(cr.isProcessing||Hn.useManualTiming?cr.timestamp:performance.now()),Uu),set:r=>{Uu=r,queueMicrotask(HA)}},Nk=r=>e=>typeof e=="string"&&e.startsWith(r),cx=Nk("--"),UA=Nk("var(--"),dx=r=>UA(r)?$A.test(r.split("/*")[0].trim()):!1,$A=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,La={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},hc={...La,transform:r=>Wn(0,1,r)},Zd={...La,default:1},Yl=r=>Math.round(r*1e5)/1e5,ux=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function GA(r){return r==null}const YA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,hx=(r,e)=>t=>!!(typeof t=="string"&&YA.test(t)&&t.startsWith(r)||e&&!GA(t)&&Object.prototype.hasOwnProperty.call(t,e)),Tk=(r,e,t)=>s=>{if(typeof s!="string")return s;const[n,i,l,d]=s.match(ux);return{[r]:parseFloat(n),[e]:parseFloat(i),[t]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},XA=r=>Wn(0,255,r),mm={...La,transform:r=>Math.round(XA(r))},hi={test:hx("rgb","red"),parse:Tk("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:s=1})=>"rgba("+mm.transform(r)+", "+mm.transform(e)+", "+mm.transform(t)+", "+Yl(hc.transform(s))+")"};function KA(r){let e="",t="",s="",n="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),s=r.substring(5,7),n=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),s=r.substring(3,4),n=r.substring(4,5),e+=e,t+=t,s+=s,n+=n),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:n?parseInt(n,16)/255:1}}const _g={test:hx("#"),parse:KA,transform:hi.transform},Ac=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),ko=Ac("deg"),pn=Ac("%"),Xe=Ac("px"),qA=Ac("vh"),ZA=Ac("vw"),Iw={...pn,parse:r=>pn.parse(r)/100,transform:r=>pn.transform(r*100)},la={test:hx("hsl","hue"),parse:Tk("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(r)+", "+pn.transform(Yl(e))+", "+pn.transform(Yl(t))+", "+Yl(hc.transform(s))+")"},Yt={test:r=>hi.test(r)||_g.test(r)||la.test(r),parse:r=>hi.test(r)?hi.parse(r):la.test(r)?la.parse(r):_g.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?hi.transform(r):la.transform(r),getAnimatableNone:r=>{const e=Yt.parse(r);return e.alpha=0,Yt.transform(e)}},JA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function QA(r){return isNaN(r)&&typeof r=="string"&&(r.match(ux)?.length||0)+(r.match(JA)?.length||0)>0}const _k="number",Mk="color",eR="var",tR="var(",Bw="${}",rR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fc(r){const e=r.toString(),t=[],s={color:[],number:[],var:[]},n=[];let i=0;const d=e.replace(rR,u=>(Yt.test(u)?(s.color.push(i),n.push(Mk),t.push(Yt.parse(u))):u.startsWith(tR)?(s.var.push(i),n.push(eR),t.push(u)):(s.number.push(i),n.push(_k),t.push(parseFloat(u))),++i,Bw)).split(Bw);return{values:t,split:d,indexes:s,types:n}}function Ek(r){return fc(r).values}function Pk(r){const{split:e,types:t}=fc(r),s=e.length;return n=>{let i="";for(let l=0;l<s;l++)if(i+=e[l],n[l]!==void 0){const d=t[l];d===_k?i+=Yl(n[l]):d===Mk?i+=Yt.transform(n[l]):i+=n[l]}return i}}const sR=r=>typeof r=="number"?0:Yt.test(r)?Yt.getAnimatableNone(r):r;function nR(r){const e=Ek(r);return Pk(r)(e.map(sR))}const Ro={test:QA,parse:Ek,createTransformer:Pk,getAnimatableNone:nR};function gm(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function oR({hue:r,saturation:e,lightness:t,alpha:s}){r/=360,e/=100,t/=100;let n=0,i=0,l=0;if(!e)n=i=l=t;else{const d=t<.5?t*(1+e):t+e-t*e,u=2*t-d;n=gm(u,d,r+1/3),i=gm(u,d,r),l=gm(u,d,r-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:s}}function xh(r,e){return t=>t>0?e:r}const Mt=(r,e,t)=>r+(e-r)*t,xm=(r,e,t)=>{const s=r*r,n=t*(e*e-s)+s;return n<0?0:Math.sqrt(n)},iR=[_g,hi,la],aR=r=>iR.find(e=>e.test(r));function Vw(r){const e=aR(r);if(!e)return!1;let t=e.parse(r);return e===la&&(t=oR(t)),t}const Ww=(r,e)=>{const t=Vw(r),s=Vw(e);if(!t||!s)return xh(r,e);const n={...t};return i=>(n.red=xm(t.red,s.red,i),n.green=xm(t.green,s.green,i),n.blue=xm(t.blue,s.blue,i),n.alpha=Mt(t.alpha,s.alpha,i),hi.transform(n))},Mg=new Set(["none","hidden"]);function lR(r,e){return Mg.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function cR(r,e){return t=>Mt(r,e,t)}function fx(r){return typeof r=="number"?cR:typeof r=="string"?dx(r)?xh:Yt.test(r)?Ww:hR:Array.isArray(r)?Dk:typeof r=="object"?Yt.test(r)?Ww:dR:xh}function Dk(r,e){const t=[...r],s=t.length,n=r.map((i,l)=>fx(i)(i,e[l]));return i=>{for(let l=0;l<s;l++)t[l]=n[l](i);return t}}function dR(r,e){const t={...r,...e},s={};for(const n in t)r[n]!==void 0&&e[n]!==void 0&&(s[n]=fx(r[n])(r[n],e[n]));return n=>{for(const i in s)t[i]=s[i](n);return t}}function uR(r,e){const t=[],s={color:0,var:0,number:0};for(let n=0;n<e.values.length;n++){const i=e.types[n],l=r.indexes[i][s[i]],d=r.values[l]??0;t[n]=d,s[i]++}return t}const hR=(r,e)=>{const t=Ro.createTransformer(e),s=fc(r),n=fc(e);return s.indexes.var.length===n.indexes.var.length&&s.indexes.color.length===n.indexes.color.length&&s.indexes.number.length>=n.indexes.number.length?Mg.has(r)&&!n.values.length||Mg.has(e)&&!s.values.length?lR(r,e):Pc(Dk(uR(s,n),n.values),t):xh(r,e)};function Ak(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?Mt(r,e,t):fx(r)(r,e)}const fR=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>St.update(e,t),stop:()=>Ao(e),now:()=>cr.isProcessing?cr.timestamp:Wr.now()}},Rk=(r,e,t=10)=>{let s="";const n=Math.max(Math.round(e/t),2);for(let i=0;i<n;i++)s+=Math.round(r(i/(n-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},yh=2e4;function px(r){let e=0;const t=50;let s=r.next(e);for(;!s.done&&e<yh;)e+=t,s=r.next(e);return e>=yh?1/0:e}function pR(r,e=100,t){const s=t({...r,keyframes:[0,e]}),n=Math.min(px(s),yh);return{type:"keyframes",ease:i=>s.next(n*i).value/e,duration:fn(n)}}const mR=5;function Ok(r,e,t){const s=Math.max(e-mR,0);return pk(t-r(s),e-s)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ym=.001;function gR({duration:r=At.duration,bounce:e=At.bounce,velocity:t=At.velocity,mass:s=At.mass}){let n,i,l=1-e;l=Wn(At.minDamping,At.maxDamping,l),r=Wn(At.minDuration,At.maxDuration,fn(r)),l<1?(n=h=>{const p=h*l,m=p*r,g=p-t,y=Eg(h,l),v=Math.exp(-m);return ym-g/y*v},i=h=>{const m=h*l*r,g=m*t+t,y=Math.pow(l,2)*Math.pow(h,2)*r,v=Math.exp(-m),w=Eg(Math.pow(h,2),l);return(-n(h)+ym>0?-1:1)*((g-y)*v)/w}):(n=h=>{const p=Math.exp(-h*r),m=(h-t)*r+1;return-ym+p*m},i=h=>{const p=Math.exp(-h*r),m=(t-h)*(r*r);return p*m});const d=5/r,u=yR(n,i,d);if(r=hn(r),isNaN(u))return{stiffness:At.stiffness,damping:At.damping,duration:r};{const h=Math.pow(u,2)*s;return{stiffness:h,damping:l*2*Math.sqrt(s*h),duration:r}}}const xR=12;function yR(r,e,t){let s=t;for(let n=1;n<xR;n++)s=s-r(s)/e(s);return s}function Eg(r,e){return r*Math.sqrt(1-e*e)}const vR=["duration","bounce"],bR=["stiffness","damping","mass"];function Hw(r,e){return e.some(t=>r[t]!==void 0)}function wR(r){let e={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...r};if(!Hw(r,bR)&&Hw(r,vR))if(r.visualDuration){const t=r.visualDuration,s=2*Math.PI/(t*1.2),n=s*s,i=2*Wn(.05,1,1-(r.bounce||0))*Math.sqrt(n);e={...e,mass:At.mass,stiffness:n,damping:i}}else{const t=gR(r);e={...e,...t,mass:At.mass},e.isResolvedFromDuration=!0}return e}function vh(r=At.visualDuration,e=At.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:s,restDelta:n}=t;const i=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],d={done:!1,value:i},{stiffness:u,damping:h,mass:p,duration:m,velocity:g,isResolvedFromDuration:y}=wR({...t,velocity:-fn(t.velocity||0)}),v=g||0,w=h/(2*Math.sqrt(u*p)),j=l-i,C=fn(Math.sqrt(u/p)),N=Math.abs(j)<5;s||(s=N?At.restSpeed.granular:At.restSpeed.default),n||(n=N?At.restDelta.granular:At.restDelta.default);let k;if(w<1){const E=Eg(C,w);k=D=>{const M=Math.exp(-w*C*D);return l-M*((v+w*C*j)/E*Math.sin(E*D)+j*Math.cos(E*D))}}else if(w===1)k=E=>l-Math.exp(-C*E)*(j+(v+C*j)*E);else{const E=C*Math.sqrt(w*w-1);k=D=>{const M=Math.exp(-w*C*D),P=Math.min(E*D,300);return l-M*((v+w*C*j)*Math.sinh(P)+E*j*Math.cosh(P))/E}}const T={calculatedDuration:y&&m||null,next:E=>{const D=k(E);if(y)d.done=E>=m;else{let M=E===0?v:0;w<1&&(M=E===0?hn(v):Ok(k,E,D));const P=Math.abs(M)<=s,R=Math.abs(l-D)<=n;d.done=P&&R}return d.value=d.done?l:D,d},toString:()=>{const E=Math.min(px(T),yh),D=Rk(M=>T.next(E*M).value,E,30);return E+"ms "+D},toTransition:()=>{}};return T}vh.applyToOptions=r=>{const e=pR(r,100,vh);return r.ease=e.ease,r.duration=hn(e.duration),r.type="keyframes",r};function Pg({keyframes:r,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:l,min:d,max:u,restDelta:h=.5,restSpeed:p}){const m=r[0],g={done:!1,value:m},y=P=>d!==void 0&&P<d||u!==void 0&&P>u,v=P=>d===void 0?u:u===void 0||Math.abs(d-P)<Math.abs(u-P)?d:u;let w=t*e;const j=m+w,C=l===void 0?j:l(j);C!==j&&(w=C-m);const N=P=>-w*Math.exp(-P/s),k=P=>C+N(P),T=P=>{const R=N(P),F=k(P);g.done=Math.abs(R)<=h,g.value=g.done?C:F};let E,D;const M=P=>{y(g.value)&&(E=P,D=vh({keyframes:[g.value,v(g.value)],velocity:Ok(k,P,g.value),damping:n,stiffness:i,restDelta:h,restSpeed:p}))};return M(0),{calculatedDuration:null,next:P=>{let R=!1;return!D&&E===void 0&&(R=!0,T(P),M(P)),E!==void 0&&P>=E?D.next(P-E):(!R&&T(P),g)}}}function SR(r,e,t){const s=[],n=t||Hn.mix||Ak,i=r.length-1;for(let l=0;l<i;l++){let d=n(r[l],r[l+1]);if(e){const u=Array.isArray(e)?e[l]||Ss:e;d=Pc(u,d)}s.push(d)}return s}function CR(r,e,{clamp:t=!0,ease:s,mixer:n}={}){const i=r.length;if(nx(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const l=r[0]===r[1];r[0]>r[i-1]&&(r=[...r].reverse(),e=[...e].reverse());const d=SR(e,s,n),u=d.length,h=p=>{if(l&&p<r[0])return e[0];let m=0;if(u>1)for(;m<r.length-2&&!(p<r[m+1]);m++);const g=uc(r[m],r[m+1],p);return d[m](g)};return t?p=>h(Wn(r[0],r[i-1],p)):h}function kR(r,e){const t=r[r.length-1];for(let s=1;s<=e;s++){const n=uc(0,e,s);r.push(Mt(t,1,n))}}function jR(r){const e=[0];return kR(e,r.length-1),e}function NR(r,e){return r.map(t=>t*e)}function TR(r,e){return r.map(()=>e||Ck).splice(0,r.length-1)}function Xl({duration:r=300,keyframes:e,times:t,ease:s="easeInOut"}){const n=zA(s)?s.map(zw):zw(s),i={done:!1,value:e[0]},l=NR(t&&t.length===e.length?t:jR(e),r),d=CR(l,e,{ease:Array.isArray(n)?n:TR(e,n)});return{calculatedDuration:r,next:u=>(i.value=d(u),i.done=u>=r,i)}}const _R=r=>r!==null;function mx(r,{repeat:e,repeatType:t="loop"},s,n=1){const i=r.filter(_R),d=n<0||e&&t!=="loop"&&e%2===1?0:i.length-1;return!d||s===void 0?i[d]:s}const MR={decay:Pg,inertia:Pg,tween:Xl,keyframes:Xl,spring:vh};function Fk(r){typeof r.type=="string"&&(r.type=MR[r.type])}class gx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const ER=r=>r/100;class xx extends gx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Wr.now()&&this.tick(Wr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Fk(e);const{type:t=Xl,repeat:s=0,repeatDelay:n=0,repeatType:i,velocity:l=0}=e;let{keyframes:d}=e;const u=t||Xl;u!==Xl&&typeof d[0]!="number"&&(this.mixKeyframes=Pc(ER,Ak(d[0],d[1])),d=[0,100]);const h=u({...e,keyframes:d});i==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...d].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=px(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+n,this.totalDuration=this.resolvedDuration*(s+1)-n,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:n,mixKeyframes:i,mirroredGenerator:l,resolvedDuration:d,calculatedDuration:u}=this;if(this.startTime===null)return s.next(0);const{delay:h=0,keyframes:p,repeat:m,repeatType:g,repeatDelay:y,type:v,onUpdate:w,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const C=this.currentTime-h*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?C<0:C>n;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let k=this.currentTime,T=s;if(m){const P=Math.min(this.currentTime,n)/d;let R=Math.floor(P),F=P%1;!F&&P>=1&&(F=1),F===1&&R--,R=Math.min(R,m+1),!!(R%2)&&(g==="reverse"?(F=1-F,y&&(F-=y/d)):g==="mirror"&&(T=l)),k=Wn(0,1,F)*d}const E=N?{done:!1,value:p[0]}:T.next(k);i&&(E.value=i(E.value));let{done:D}=E;!N&&u!==null&&(D=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return M&&v!==Pg&&(E.value=mx(p,this.options,j,this.speed)),w&&w(E.value),M&&this.finish(),E}then(e,t){return this.finished.then(e,t)}get duration(){return fn(this.calculatedDuration)}get time(){return fn(this.currentTime)}set time(e){e=hn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Wr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=fn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=fR,startTime:t}=this.options;this.driver||(this.driver=e(n=>this.tick(n))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function PR(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const fi=r=>r*180/Math.PI,Dg=r=>{const e=fi(Math.atan2(r[1],r[0]));return Ag(e)},DR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:Dg,rotateZ:Dg,skewX:r=>fi(Math.atan(r[1])),skewY:r=>fi(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},Ag=r=>(r=r%360,r<0&&(r+=360),r),Uw=Dg,$w=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),Gw=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),AR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$w,scaleY:Gw,scale:r=>($w(r)+Gw(r))/2,rotateX:r=>Ag(fi(Math.atan2(r[6],r[5]))),rotateY:r=>Ag(fi(Math.atan2(-r[2],r[0]))),rotateZ:Uw,rotate:Uw,skewX:r=>fi(Math.atan(r[4])),skewY:r=>fi(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function Rg(r){return r.includes("scale")?1:0}function Og(r,e){if(!r||r==="none")return Rg(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,n;if(t)s=AR,n=t;else{const d=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=DR,n=d}if(!n)return Rg(e);const i=s[e],l=n[1].split(",").map(OR);return typeof i=="function"?i(l):l[i]}const RR=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return Og(t,e)};function OR(r){return parseFloat(r.trim())}const za=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ia=new Set(za),Yw=r=>r===La||r===Xe,FR=new Set(["x","y","z"]),LR=za.filter(r=>!FR.has(r));function zR(r){const e=[];return LR.forEach(t=>{const s=r.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const xi={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>Og(e,"x"),y:(r,{transform:e})=>Og(e,"y")};xi.translateX=xi.x;xi.translateY=xi.y;const yi=new Set;let Fg=!1,Lg=!1,zg=!1;function Lk(){if(Lg){const r=Array.from(yi).filter(s=>s.needsMeasurement),e=new Set(r.map(s=>s.element)),t=new Map;e.forEach(s=>{const n=zR(s);n.length&&(t.set(s,n),s.render())}),r.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const n=t.get(s);n&&n.forEach(([i,l])=>{s.getValue(i)?.set(l)})}),r.forEach(s=>s.measureEndState()),r.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Lg=!1,Fg=!1,yi.forEach(r=>r.complete(zg)),yi.clear()}function zk(){yi.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(Lg=!0)})}function IR(){zg=!0,zk(),Lk(),zg=!1}class yx{constructor(e,t,s,n,i,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=n,this.element=i,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(yi.add(this),Fg||(Fg=!0,St.read(zk),St.resolveKeyframes(Lk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:n}=this;if(e[0]===null){const i=n?.get(),l=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&t){const d=s.readValue(t,l);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=l),n&&i===void 0&&n.set(e[0])}PR(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),yi.delete(this)}cancel(){this.state==="scheduled"&&(yi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const BR=r=>r.startsWith("--");function VR(r,e,t){BR(e)?r.style.setProperty(e,t):r.style[e]=t}const WR=ox(()=>window.ScrollTimeline!==void 0),HR={};function UR(r,e){const t=ox(r);return()=>HR[e]??t()}const Ik=UR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ul=([r,e,t,s])=>`cubic-bezier(${r}, ${e}, ${t}, ${s})`,Xw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ul([0,.65,.55,1]),circOut:Ul([.55,0,1,.45]),backIn:Ul([.31,.01,.66,-.59]),backOut:Ul([.33,1.53,.69,.99])};function Bk(r,e){if(r)return typeof r=="function"?Ik()?Rk(r,e):"ease-out":kk(r)?Ul(r):Array.isArray(r)?r.map(t=>Bk(t,e)||Xw.easeOut):Xw[r]}function $R(r,e,t,{delay:s=0,duration:n=300,repeat:i=0,repeatType:l="loop",ease:d="easeOut",times:u}={},h=void 0){const p={[e]:t};u&&(p.offset=u);const m=Bk(d,n);Array.isArray(m)&&(p.easing=m);const g={delay:s,duration:n,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"};return h&&(g.pseudoElement=h),r.animate(p,g)}function Vk(r){return typeof r=="function"&&"applyToOptions"in r}function GR({type:r,...e}){return Vk(r)&&Ik()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class YR extends gx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:n,pseudoElement:i,allowFlatten:l=!1,finalKeyframe:d,onComplete:u}=e;this.isPseudoElement=!!i,this.allowFlatten=l,this.options=e,nx(typeof e.type!="string");const h=GR(e);this.animation=$R(t,s,n,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=mx(n,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(p):VR(t,s,p),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return fn(Number(e))}get time(){return fn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=hn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&WR()?(this.animation.timeline=e,Ss):t(this)}}const Wk={anticipate:bk,backInOut:vk,circInOut:Sk};function XR(r){return r in Wk}function KR(r){typeof r.ease=="string"&&XR(r.ease)&&(r.ease=Wk[r.ease])}const Kw=10;class qR extends YR{constructor(e){KR(e),Fk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:n,element:i,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const d=new xx({...l,autoplay:!1}),u=hn(this.finishedTime??this.time);t.setWithVelocity(d.sample(u-Kw).value,d.sample(u).value,Kw),d.stop()}}const qw=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Ro.test(r)||r==="0")&&!r.startsWith("url("));function ZR(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function JR(r,e,t,s){const n=r[0];if(n===null)return!1;if(e==="display"||e==="visibility")return!0;const i=r[r.length-1],l=qw(n,e),d=qw(i,e);return!l||!d?!1:ZR(r)||(t==="spring"||Vk(t))&&s}function Ig(r){r.duration=0,r.type}const QR=new Set(["opacity","clipPath","filter","transform"]),eO=ox(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function tO(r){const{motionValue:e,name:t,repeatDelay:s,repeatType:n,damping:i,type:l}=r;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return eO()&&t&&QR.has(t)&&(t!=="transform"||!h)&&!u&&!s&&n!=="mirror"&&i!==0&&l!=="inertia"}const rO=40;class sO extends gx{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:l="loop",keyframes:d,name:u,motionValue:h,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Wr.now();const g={autoplay:e,delay:t,type:s,repeat:n,repeatDelay:i,repeatType:l,name:u,motionValue:h,element:p,...m},y=p?.KeyframeResolver||yx;this.keyframeResolver=new y(d,(v,w,j)=>this.onKeyframesResolved(v,w,g,!j),u,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,n){this.keyframeResolver=void 0;const{name:i,type:l,velocity:d,delay:u,isHandoff:h,onUpdate:p}=s;this.resolvedAt=Wr.now(),JR(e,i,l,d)||((Hn.instantAnimations||!u)&&p?.(mx(e,s,t)),e[0]=e[e.length-1],Ig(s),s.repeat=0);const g={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>rO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},y=!h&&tO(g)?new qR({...g,element:g.motionValue.owner.current}):new xx(g);y.finished.then(()=>this.notifyFinished()).catch(Ss),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),IR()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const nO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function oO(r){const e=nO.exec(r);if(!e)return[,];const[,t,s,n]=e;return[`--${t??s}`,n]}function Hk(r,e,t=1){const[s,n]=oO(r);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const l=i.trim();return uk(l)?parseFloat(l):l}return dx(n)?Hk(n,e,t+1):n}function vx(r,e){return r?.[e]??r?.default??r}const Uk=new Set(["width","height","top","left","right","bottom",...za]),iO={test:r=>r==="auto",parse:r=>r},$k=r=>e=>e.test(r),Gk=[La,Xe,pn,ko,ZA,qA,iO],Zw=r=>Gk.find($k(r));function aO(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||fk(r):!0}const lO=new Set(["brightness","contrast","saturate","opacity"]);function cO(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[s]=t.match(ux)||[];if(!s)return r;const n=t.replace(s,"");let i=lO.has(e)?1:0;return s!==t&&(i*=100),e+"("+i+n+")"}const dO=/\b([a-z-]*)\(.*?\)/gu,Bg={...Ro,getAnimatableNone:r=>{const e=r.match(dO);return e?e.map(cO).join(" "):r}},Jw={...La,transform:Math.round},uO={rotate:ko,rotateX:ko,rotateY:ko,rotateZ:ko,scale:Zd,scaleX:Zd,scaleY:Zd,scaleZ:Zd,skew:ko,skewX:ko,skewY:ko,distance:Xe,translateX:Xe,translateY:Xe,translateZ:Xe,x:Xe,y:Xe,z:Xe,perspective:Xe,transformPerspective:Xe,opacity:hc,originX:Iw,originY:Iw,originZ:Xe},bx={borderWidth:Xe,borderTopWidth:Xe,borderRightWidth:Xe,borderBottomWidth:Xe,borderLeftWidth:Xe,borderRadius:Xe,radius:Xe,borderTopLeftRadius:Xe,borderTopRightRadius:Xe,borderBottomRightRadius:Xe,borderBottomLeftRadius:Xe,width:Xe,maxWidth:Xe,height:Xe,maxHeight:Xe,top:Xe,right:Xe,bottom:Xe,left:Xe,padding:Xe,paddingTop:Xe,paddingRight:Xe,paddingBottom:Xe,paddingLeft:Xe,margin:Xe,marginTop:Xe,marginRight:Xe,marginBottom:Xe,marginLeft:Xe,backgroundPositionX:Xe,backgroundPositionY:Xe,...uO,zIndex:Jw,fillOpacity:hc,strokeOpacity:hc,numOctaves:Jw},hO={...bx,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:Bg,WebkitFilter:Bg},Yk=r=>hO[r];function Xk(r,e){let t=Yk(r);return t!==Bg&&(t=Ro),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const fO=new Set(["auto","none","0"]);function pO(r,e,t){let s=0,n;for(;s<r.length&&!n;){const i=r[s];typeof i=="string"&&!fO.has(i)&&fc(i).values.length&&(n=r[s]),s++}if(n&&t)for(const i of e)r[i]=Xk(t,n)}class mO extends yx{constructor(e,t,s,n,i){super(e,t,s,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),dx(h))){const p=Hk(h,t.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Uk.has(s)||e.length!==2)return;const[n,i]=e,l=Zw(n),d=Zw(i);if(l!==d)if(Yw(l)&&Yw(d))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else xi[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let n=0;n<e.length;n++)(e[n]===null||aO(e[n]))&&s.push(n);s.length&&pO(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xi[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];n!==void 0&&e.getValue(s,n).jump(n,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const n=e.getValue(t);n&&n.jump(this.measuredOrigin,!1);const i=s.length-1,l=s[i];s[i]=xi[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,u])=>{e.getValue(d).set(u)}),this.resolveNoneKeyframes()}}function gO(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let s=document;const n=t?.[r]??s.querySelectorAll(r);return n?Array.from(n):[]}return Array.from(r)}const Kk=(r,e)=>e&&typeof r=="number"?e.transform(r):r;function qk(r){return hk(r)&&"offsetHeight"in r}const Qw=30,xO=r=>!isNaN(parseFloat(r));class yO{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const n=Wr.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Wr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=xO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ix);const s=this.events[e].add(t);return e==="change"?()=>{s(),St.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Wr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Qw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Qw);return pk(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _a(r,e){return new yO(r,e)}const{schedule:wx}=jk(queueMicrotask,!1),Rs={x:!1,y:!1};function Zk(){return Rs.x||Rs.y}function vO(r){return r==="x"||r==="y"?Rs[r]?null:(Rs[r]=!0,()=>{Rs[r]=!1}):Rs.x||Rs.y?null:(Rs.x=Rs.y=!0,()=>{Rs.x=Rs.y=!1})}function Jk(r,e){const t=gO(r),s=new AbortController,n={passive:!0,...e,signal:s.signal};return[t,n,()=>s.abort()]}function e1(r){return!(r.pointerType==="touch"||Zk())}function bO(r,e,t={}){const[s,n,i]=Jk(r,t),l=d=>{if(!e1(d))return;const{target:u}=d,h=e(u,d);if(typeof h!="function"||!u)return;const p=m=>{e1(m)&&(h(m),u.removeEventListener("pointerleave",p))};u.addEventListener("pointerleave",p,n)};return s.forEach(d=>{d.addEventListener("pointerenter",l,n)}),i}const Qk=(r,e)=>e?r===e?!0:Qk(r,e.parentElement):!1,Sx=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,wO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function SO(r){return wO.has(r.tagName)||r.tabIndex!==-1}const $u=new WeakSet;function t1(r){return e=>{e.key==="Enter"&&r(e)}}function vm(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const CO=(r,e)=>{const t=r.currentTarget;if(!t)return;const s=t1(()=>{if($u.has(t))return;vm(t,"down");const n=t1(()=>{vm(t,"up")}),i=()=>vm(t,"cancel");t.addEventListener("keyup",n,e),t.addEventListener("blur",i,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function r1(r){return Sx(r)&&!Zk()}function kO(r,e,t={}){const[s,n,i]=Jk(r,t),l=d=>{const u=d.currentTarget;if(!r1(d))return;$u.add(u);const h=e(u,d),p=(y,v)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),$u.has(u)&&$u.delete(u),r1(y)&&typeof h=="function"&&h(y,{success:v})},m=y=>{p(y,u===window||u===document||t.useGlobalTarget||Qk(u,y.target))},g=y=>{p(y,!1)};window.addEventListener("pointerup",m,n),window.addEventListener("pointercancel",g,n)};return s.forEach(d=>{(t.useGlobalTarget?window:d).addEventListener("pointerdown",l,n),qk(d)&&(d.addEventListener("focus",h=>CO(h,n)),!SO(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),i}function ej(r){return hk(r)&&"ownerSVGElement"in r}function jO(r){return ej(r)&&r.tagName==="svg"}const vr=r=>!!(r&&r.getVelocity),NO=[...Gk,Yt,Ro],TO=r=>NO.find($k(r)),Cx=b.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function s1(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function _O(...r){return e=>{let t=!1;const s=r.map(n=>{const i=s1(n,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let n=0;n<s.length;n++){const i=s[n];typeof i=="function"?i():s1(r[n],null)}}}}function MO(...r){return b.useCallback(_O(...r),r)}class EO extends b.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,n=qk(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PO({children:r,isPresent:e,anchorX:t,root:s}){const n=b.useId(),i=b.useRef(null),l=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=b.useContext(Cx),u=MO(i,r?.ref);return b.useInsertionEffect(()=>{const{width:h,height:p,top:m,left:g,right:y}=l.current;if(e||!i.current||!h||!p)return;const v=t==="left"?`left: ${g}`:`right: ${y}`;i.current.dataset.motionPopId=n;const w=document.createElement("style");d&&(w.nonce=d);const j=s??document.head;return j.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${p}px !important;
            ${v}px !important;
            top: ${m}px !important;
          }
        `),()=>{j.contains(w)&&j.removeChild(w)}},[e]),o.jsx(EO,{isPresent:e,childRef:i,sizeRef:l,children:b.cloneElement(r,{ref:u})})}const DO=({children:r,initial:e,isPresent:t,onExitComplete:s,custom:n,presenceAffectsLayout:i,mode:l,anchorX:d,root:u})=>{const h=ex(AO),p=b.useId();let m=!0,g=b.useMemo(()=>(m=!1,{id:p,initial:e,isPresent:t,custom:n,onExitComplete:y=>{h.set(y,!0);for(const v of h.values())if(!v)return;s&&s()},register:y=>(h.set(y,!1),()=>h.delete(y))}),[t,h,s]);return i&&m&&(g={...g}),b.useMemo(()=>{h.forEach((y,v)=>h.set(v,!1))},[t]),b.useEffect(()=>{!t&&!h.size&&s&&s()},[t]),l==="popLayout"&&(r=o.jsx(PO,{isPresent:t,anchorX:d,root:u,children:r})),o.jsx(qh.Provider,{value:g,children:r})};function AO(){return new Map}function tj(r=!0){const e=b.useContext(qh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:n}=e,i=b.useId();b.useEffect(()=>{if(r)return n(i)},[r]);const l=b.useCallback(()=>r&&s&&s(i),[i,s,r]);return!t&&s?[!1,l]:[!0]}const Jd=r=>r.key||"";function n1(r){const e=[];return b.Children.forEach(r,t=>{b.isValidElement(t)&&e.push(t)}),e}const Vg=({children:r,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:n=!0,mode:i="sync",propagate:l=!1,anchorX:d="left",root:u})=>{const[h,p]=tj(l),m=b.useMemo(()=>n1(r),[r]),g=l&&!h?[]:m.map(Jd),y=b.useRef(!0),v=b.useRef(m),w=ex(()=>new Map),[j,C]=b.useState(m),[N,k]=b.useState(m);dk(()=>{y.current=!1,v.current=m;for(let D=0;D<N.length;D++){const M=Jd(N[D]);g.includes(M)?w.delete(M):w.get(M)!==!0&&w.set(M,!1)}},[N,g.length,g.join("-")]);const T=[];if(m!==j){let D=[...m];for(let M=0;M<N.length;M++){const P=N[M],R=Jd(P);g.includes(R)||(D.splice(M,0,P),T.push(P))}return i==="wait"&&T.length&&(D=T),k(n1(D)),C(m),null}const{forceRender:E}=b.useContext(Q0);return o.jsx(o.Fragment,{children:N.map(D=>{const M=Jd(D),P=l&&!h?!1:m===N||g.includes(M),R=()=>{if(w.has(M))w.set(M,!0);else return;let F=!0;w.forEach(I=>{I||(F=!1)}),F&&(E?.(),k(v.current),l&&p?.(),s&&s())};return o.jsx(DO,{isPresent:P,initial:!y.current||t?void 0:!1,custom:e,presenceAffectsLayout:n,mode:i,root:u,onExitComplete:P?void 0:R,anchorX:d,children:D},M)})})},rj=b.createContext({strict:!1}),o1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ma={};for(const r in o1)Ma[r]={isEnabled:e=>o1[r].some(t=>!!e[t])};function RO(r){for(const e in r)Ma[e]={...Ma[e],...r[e]}}const OO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bh(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||OO.has(r)}let sj=r=>!bh(r);function FO(r){typeof r=="function"&&(sj=e=>e.startsWith("on")?!bh(e):r(e))}try{FO(require("@emotion/is-prop-valid").default)}catch{}function LO(r,e,t){const s={};for(const n in r)n==="values"&&typeof r.values=="object"||(sj(n)||t===!0&&bh(n)||!e&&!bh(n)||r.draggable&&n.startsWith("onDrag"))&&(s[n]=r[n]);return s}const Zh=b.createContext({});function Jh(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function pc(r){return typeof r=="string"||Array.isArray(r)}const kx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jx=["initial",...kx];function Qh(r){return Jh(r.animate)||jx.some(e=>pc(r[e]))}function nj(r){return!!(Qh(r)||r.variants)}function zO(r,e){if(Qh(r)){const{initial:t,animate:s}=r;return{initial:t===!1||pc(t)?t:void 0,animate:pc(s)?s:void 0}}return r.inherit!==!1?e:{}}function IO(r){const{initial:e,animate:t}=zO(r,b.useContext(Zh));return b.useMemo(()=>({initial:e,animate:t}),[i1(e),i1(t)])}function i1(r){return Array.isArray(r)?r.join(" "):r}const mc={};function BO(r){for(const e in r)mc[e]=r[e],cx(e)&&(mc[e].isCSSVariable=!0)}function oj(r,{layout:e,layoutId:t}){return Ia.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!mc[r]||r==="opacity")}const VO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WO=za.length;function HO(r,e,t){let s="",n=!0;for(let i=0;i<WO;i++){const l=za[i],d=r[l];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(l.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||t){const h=Kk(d,bx[l]);if(!u){n=!1;const p=VO[l]||l;s+=`${p}(${h}) `}t&&(e[l]=h)}}return s=s.trim(),t?s=t(e,n?"":s):n&&(s="none"),s}function Nx(r,e,t){const{style:s,vars:n,transformOrigin:i}=r;let l=!1,d=!1;for(const u in e){const h=e[u];if(Ia.has(u)){l=!0;continue}else if(cx(u)){n[u]=h;continue}else{const p=Kk(h,bx[u]);u.startsWith("origin")?(d=!0,i[u]=p):s[u]=p}}if(e.transform||(l||t?s.transform=HO(e,r.transform,t):s.transform&&(s.transform="none")),d){const{originX:u="50%",originY:h="50%",originZ:p=0}=i;s.transformOrigin=`${u} ${h} ${p}`}}const Tx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ij(r,e,t){for(const s in e)!vr(e[s])&&!oj(s,t)&&(r[s]=e[s])}function UO({transformTemplate:r},e){return b.useMemo(()=>{const t=Tx();return Nx(t,e,r),Object.assign({},t.vars,t.style)},[e])}function $O(r,e){const t=r.style||{},s={};return ij(s,t,r),Object.assign(s,UO(r,e)),s}function GO(r,e){const t={},s=$O(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=s,t}const YO={offset:"stroke-dashoffset",array:"stroke-dasharray"},XO={offset:"strokeDashoffset",array:"strokeDasharray"};function KO(r,e,t=1,s=0,n=!0){r.pathLength=1;const i=n?YO:XO;r[i.offset]=Xe.transform(-s);const l=Xe.transform(e),d=Xe.transform(t);r[i.array]=`${l} ${d}`}function aj(r,{attrX:e,attrY:t,attrScale:s,pathLength:n,pathSpacing:i=1,pathOffset:l=0,...d},u,h,p){if(Nx(r,d,h),u){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:m,style:g}=r;m.transform&&(g.transform=m.transform,delete m.transform),(g.transform||m.transformOrigin)&&(g.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),g.transform&&(g.transformBox=p?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),s!==void 0&&(m.scale=s),n!==void 0&&KO(m,n,i,l,!1)}const lj=()=>({...Tx(),attrs:{}}),cj=r=>typeof r=="string"&&r.toLowerCase()==="svg";function qO(r,e,t,s){const n=b.useMemo(()=>{const i=lj();return aj(i,e,cj(s),r.transformTemplate,r.style),{...i.attrs,style:{...i.style}}},[e]);if(r.style){const i={};ij(i,r.style,r),n.style={...i,...n.style}}return n}const ZO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _x(r){return typeof r!="string"||r.includes("-")?!1:!!(ZO.indexOf(r)>-1||/[A-Z]/u.test(r))}function JO(r,e,t,{latestValues:s},n,i=!1){const d=(_x(r)?qO:GO)(e,s,n,r),u=LO(e,typeof r=="string",i),h=r!==b.Fragment?{...u,...d,ref:t}:{},{children:p}=e,m=b.useMemo(()=>vr(p)?p.get():p,[p]);return b.createElement(r,{...h,children:m})}function a1(r){const e=[{},{}];return r?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function Mx(r,e,t,s){if(typeof e=="function"){const[n,i]=a1(s);e=e(t!==void 0?t:r.custom,n,i)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[n,i]=a1(s);e=e(t!==void 0?t:r.custom,n,i)}return e}function Gu(r){return vr(r)?r.get():r}function QO({scrapeMotionValuesFromProps:r,createRenderState:e},t,s,n){return{latestValues:eF(t,s,n,r),renderState:e()}}function eF(r,e,t,s){const n={},i=s(r,{});for(const g in i)n[g]=Gu(i[g]);let{initial:l,animate:d}=r;const u=Qh(r),h=nj(r);e&&h&&!u&&r.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let p=t?t.initial===!1:!1;p=p||l===!1;const m=p?d:l;if(m&&typeof m!="boolean"&&!Jh(m)){const g=Array.isArray(m)?m:[m];for(let y=0;y<g.length;y++){const v=Mx(r,g[y]);if(v){const{transitionEnd:w,transition:j,...C}=v;for(const N in C){let k=C[N];if(Array.isArray(k)){const T=p?k.length-1:0;k=k[T]}k!==null&&(n[N]=k)}for(const N in w)n[N]=w[N]}}}return n}const dj=r=>(e,t)=>{const s=b.useContext(Zh),n=b.useContext(qh),i=()=>QO(r,e,s,n);return t?i():ex(i)};function Ex(r,e,t){const{style:s}=r,n={};for(const i in s)(vr(s[i])||e.style&&vr(e.style[i])||oj(i,r)||t?.getValue(i)?.liveStyle!==void 0)&&(n[i]=s[i]);return n}const tF=dj({scrapeMotionValuesFromProps:Ex,createRenderState:Tx});function uj(r,e,t){const s=Ex(r,e,t);for(const n in r)if(vr(r[n])||vr(e[n])){const i=za.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[i]=r[n]}return s}const rF=dj({scrapeMotionValuesFromProps:uj,createRenderState:lj}),sF=Symbol.for("motionComponentSymbol");function ca(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function nF(r,e,t){return b.useCallback(s=>{s&&r.onMount&&r.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):ca(t)&&(t.current=s))},[e])}const Px=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),oF="framerAppearId",hj="data-"+Px(oF),fj=b.createContext({});function iF(r,e,t,s,n){const{visualElement:i}=b.useContext(Zh),l=b.useContext(rj),d=b.useContext(qh),u=b.useContext(Cx).reducedMotion,h=b.useRef(null);s=s||l.renderer,!h.current&&s&&(h.current=s(r,{visualState:e,parent:i,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const p=h.current,m=b.useContext(fj);p&&!p.projection&&n&&(p.type==="html"||p.type==="svg")&&aF(h.current,t,n,m);const g=b.useRef(!1);b.useInsertionEffect(()=>{p&&g.current&&p.update(t,d)});const y=t[hj],v=b.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return dk(()=>{p&&(g.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),v.current&&p.animationState&&p.animationState.animateChanges())}),b.useEffect(()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),v.current=!1),p.enteringChildren=void 0)}),p}function aF(r,e,t,s){const{layoutId:n,layout:i,drag:l,dragConstraints:d,layoutScroll:u,layoutRoot:h,layoutCrossfade:p}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:pj(r.parent)),r.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!l||d&&ca(d),visualElement:r,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:p,layoutScroll:u,layoutRoot:h})}function pj(r){if(r)return r.options.allowProjection!==!1?r.projection:pj(r.parent)}function bm(r,{forwardMotionProps:e=!1}={},t,s){t&&RO(t);const n=_x(r)?rF:tF;function i(d,u){let h;const p={...b.useContext(Cx),...d,layoutId:lF(d)},{isStatic:m}=p,g=IO(d),y=n(d,m);if(!m&&tx){cF();const v=dF(p);h=v.MeasureLayout,g.visualElement=iF(r,y,p,s,v.ProjectionNode)}return o.jsxs(Zh.Provider,{value:g,children:[h&&g.visualElement?o.jsx(h,{visualElement:g.visualElement,...p}):null,JO(r,d,nF(y,g.visualElement,u),y,m,e)]})}i.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const l=b.forwardRef(i);return l[sF]=r,l}function lF({layoutId:r}){const e=b.useContext(Q0).id;return e&&r!==void 0?e+"-"+r:r}function cF(r,e){b.useContext(rj).strict}function dF(r){const{drag:e,layout:t}=Ma;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e?.isEnabled(r)||t?.isEnabled(r)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function uF(r,e){if(typeof Proxy>"u")return bm;const t=new Map,s=(i,l)=>bm(i,l,r,e),n=(i,l)=>s(i,l);return new Proxy(n,{get:(i,l)=>l==="create"?s:(t.has(l)||t.set(l,bm(l,void 0,r,e)),t.get(l))})}function mj({top:r,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:r,max:s}}}function hF({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function fF(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),s=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function wm(r){return r===void 0||r===1}function Wg({scale:r,scaleX:e,scaleY:t}){return!wm(r)||!wm(e)||!wm(t)}function di(r){return Wg(r)||gj(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function gj(r){return l1(r.x)||l1(r.y)}function l1(r){return r&&r!=="0%"}function wh(r,e,t){const s=r-t,n=e*s;return t+n}function c1(r,e,t,s,n){return n!==void 0&&(r=wh(r,n,s)),wh(r,t,s)+e}function Hg(r,e=0,t=1,s,n){r.min=c1(r.min,e,t,s,n),r.max=c1(r.max,e,t,s,n)}function xj(r,{x:e,y:t}){Hg(r.x,e.translate,e.scale,e.originPoint),Hg(r.y,t.translate,t.scale,t.originPoint)}const d1=.999999999999,u1=1.0000000000001;function pF(r,e,t,s=!1){const n=t.length;if(!n)return;e.x=e.y=1;let i,l;for(let d=0;d<n;d++){i=t[d],l=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ua(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,xj(r,l)),s&&di(i.latestValues)&&ua(r,i.latestValues))}e.x<u1&&e.x>d1&&(e.x=1),e.y<u1&&e.y>d1&&(e.y=1)}function da(r,e){r.min=r.min+e,r.max=r.max+e}function h1(r,e,t,s,n=.5){const i=Mt(r.min,r.max,n);Hg(r,e,t,i,s)}function ua(r,e){h1(r.x,e.x,e.scaleX,e.scale,e.originX),h1(r.y,e.y,e.scaleY,e.scale,e.originY)}function yj(r,e){return mj(fF(r.getBoundingClientRect(),e))}function mF(r,e,t){const s=yj(r,t),{scroll:n}=e;return n&&(da(s.x,n.offset.x),da(s.y,n.offset.y)),s}const f1=()=>({translate:0,scale:1,origin:0,originPoint:0}),ha=()=>({x:f1(),y:f1()}),p1=()=>({min:0,max:0}),zt=()=>({x:p1(),y:p1()}),Ug={current:null},vj={current:!1};function gF(){if(vj.current=!0,!!tx)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ug.current=r.matches;r.addEventListener("change",e),e()}else Ug.current=!1}const xF=new WeakMap;function yF(r,e,t){for(const s in e){const n=e[s],i=t[s];if(vr(n))r.addValue(s,n);else if(vr(i))r.addValue(s,_a(n,{owner:r}));else if(i!==n)if(r.hasValue(s)){const l=r.getValue(s);l.liveStyle===!0?l.jump(n):l.hasAnimated||l.set(n)}else{const l=r.getStaticValue(s);r.addValue(s,_a(l!==void 0?l:n,{owner:r}))}}for(const s in t)e[s]===void 0&&r.removeValue(s);return e}const m1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vF{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:n,blockInitialAnimation:i,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Wr.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,St.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=d,this.blockInitialAnimation=!!i,this.isControllingVariants=Qh(t),this.isVariantNode=nj(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const g in m){const y=m[g];u[g]!==void 0&&vr(y)&&y.set(u[g])}}mount(e){this.current=e,xF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),vj.current||gF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ug.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ao(this.notifyUpdate),Ao(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Ia.has(e);s&&this.onBindTransform&&this.onBindTransform();const n=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&St.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ma){const t=Ma[e];if(!t)continue;const{isEnabled:s,Feature:n}=t;if(!this.features[e]&&n&&s(this.props)&&(this.features[e]=new n(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<m1.length;s++){const n=m1[s];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,l=e[i];l&&(this.propEventSubscriptions[n]=this.on(n,l))}this.prevMotionValues=yF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=_a(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(uk(s)||fk(s))?s=parseFloat(s):!TO(s)&&Ro.test(t)&&(s=Xk(e,t)),this.setBaseTarget(e,vr(s)?s.get():s)),vr(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const i=Mx(this.props,t,this.presenceContext?.custom);i&&(s=i[e])}if(t&&s!==void 0)return s;const n=this.getBaseTargetFromProps(this.props,e);return n!==void 0&&!vr(n)?n:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new ix),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){wx.render(this.render)}}class bj extends vF{constructor(){super(...arguments),this.KeyframeResolver=mO}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;vr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function wj(r,{style:e,vars:t},s,n){const i=r.style;let l;for(l in e)i[l]=e[l];n?.applyProjectionStyles(i,s);for(l in t)i.setProperty(l,t[l])}function bF(r){return window.getComputedStyle(r)}class wF extends bj{constructor(){super(...arguments),this.type="html",this.renderInstance=wj}readValueFromInstance(e,t){if(Ia.has(t))return this.projection?.isProjecting?Rg(t):RR(e,t);{const s=bF(e),n=(cx(t)?s.getPropertyValue(t):s[t])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:t}){return yj(e,t)}build(e,t,s){Nx(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return Ex(e,t,s)}}const Sj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SF(r,e,t,s){wj(r,e,void 0,s);for(const n in e.attrs)r.setAttribute(Sj.has(n)?n:Px(n),e.attrs[n])}class CF extends bj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ia.has(t)){const s=Yk(t);return s&&s.default||0}return t=Sj.has(t)?t:Px(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return uj(e,t,s)}build(e,t,s){aj(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,n){SF(e,t,s,n)}mount(e){this.isSVGTag=cj(e.tagName),super.mount(e)}}const kF=(r,e)=>_x(r)?new CF(e):new wF(e,{allowProjection:r!==b.Fragment});function xa(r,e,t){const s=r.getProps();return Mx(s,e,t!==void 0?t:s.custom,r)}const $g=r=>Array.isArray(r);function jF(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,_a(t))}function NF(r){return $g(r)?r[r.length-1]||0:r}function TF(r,e){const t=xa(r,e);let{transitionEnd:s={},transition:n={},...i}=t||{};i={...i,...s};for(const l in i){const d=NF(i[l]);jF(r,l,d)}}function _F(r){return!!(vr(r)&&r.add)}function Gg(r,e){const t=r.getValue("willChange");if(_F(t))return t.add(e);if(!t&&Hn.WillChange){const s=new Hn.WillChange("auto");r.addValue("willChange",s),s.add(e)}}function Cj(r){return r.props[hj]}const MF=r=>r!==null;function EF(r,{repeat:e,repeatType:t="loop"},s){const n=r.filter(MF),i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const PF={type:"spring",stiffness:500,damping:25,restSpeed:10},DF=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),AF={type:"keyframes",duration:.8},RF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OF=(r,{keyframes:e})=>e.length>2?AF:Ia.has(r)?r.startsWith("scale")?DF(e[1]):PF:RF;function FF({when:r,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:n,repeat:i,repeatType:l,repeatDelay:d,from:u,elapsed:h,...p}){return!!Object.keys(p).length}const Dx=(r,e,t,s={},n,i)=>l=>{const d=vx(s,r)||{},u=d.delay||s.delay||0;let{elapsed:h=0}=s;h=h-hn(u);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-h,onUpdate:g=>{e.set(g),d.onUpdate&&d.onUpdate(g)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:r,motionValue:e,element:i?void 0:n};FF(d)||Object.assign(p,OF(r,p)),p.duration&&(p.duration=hn(p.duration)),p.repeatDelay&&(p.repeatDelay=hn(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Ig(p),p.delay===0&&(m=!0)),(Hn.instantAnimations||Hn.skipAnimations)&&(m=!0,Ig(p),p.delay=0),p.allowFlatten=!d.type&&!d.ease,m&&!i&&e.get()!==void 0){const g=EF(p.keyframes,d);if(g!==void 0){St.update(()=>{p.onUpdate(g),p.onComplete()});return}}return d.isSync?new xx(p):new sO(p)};function LF({protectedKeys:r,needsAnimating:e},t){const s=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function kj(r,e,{delay:t=0,transitionOverride:s,type:n}={}){let{transition:i=r.getDefaultTransition(),transitionEnd:l,...d}=e;s&&(i=s);const u=[],h=n&&r.animationState&&r.animationState.getState()[n];for(const p in d){const m=r.getValue(p,r.latestValues[p]??null),g=d[p];if(g===void 0||h&&LF(h,p))continue;const y={delay:t,...vx(i||{},p)},v=m.get();if(v!==void 0&&!m.isAnimating&&!Array.isArray(g)&&g===v&&!y.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const C=Cj(r);if(C){const N=window.MotionHandoffAnimation(C,p,St);N!==null&&(y.startTime=N,w=!0)}}Gg(r,p),m.start(Dx(p,m,g,r.shouldReduceMotion&&Uk.has(p)?{type:!1}:y,r,w));const j=m.animation;j&&u.push(j)}return l&&Promise.all(u).then(()=>{St.update(()=>{l&&TF(r,l)})}),u}function jj(r,e,t,s=0,n=1){const i=Array.from(r).sort((h,p)=>h.sortNodePosition(p)).indexOf(e),l=r.size,d=(l-1)*s;return typeof t=="function"?t(i,l):n===1?i*s:d-i*s}function Yg(r,e,t={}){const s=xa(r,e,t.type==="exit"?r.presenceContext?.custom:void 0);let{transition:n=r.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(n=t.transitionOverride);const i=s?()=>Promise.all(kj(r,s,t)):()=>Promise.resolve(),l=r.variantChildren&&r.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=n;return zF(r,e,u,h,p,m,t)}:()=>Promise.resolve(),{when:d}=n;if(d){const[u,h]=d==="beforeChildren"?[i,l]:[l,i];return u().then(()=>h())}else return Promise.all([i(),l(t.delay)])}function zF(r,e,t=0,s=0,n=0,i=1,l){const d=[];for(const u of r.variantChildren)u.notify("AnimationStart",e),d.push(Yg(u,e,{...l,delay:t+(typeof s=="function"?0:s)+jj(r.variantChildren,u,s,n,i)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(d)}function IF(r,e,t={}){r.notify("AnimationStart",e);let s;if(Array.isArray(e)){const n=e.map(i=>Yg(r,i,t));s=Promise.all(n)}else if(typeof e=="string")s=Yg(r,e,t);else{const n=typeof e=="function"?xa(r,e,t.custom):e;s=Promise.all(kj(r,n,t))}return s.then(()=>{r.notify("AnimationComplete",e)})}function Nj(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let s=0;s<t;s++)if(e[s]!==r[s])return!1;return!0}const BF=jx.length;function Tj(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?Tj(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<BF;t++){const s=jx[t],n=r.props[s];(pc(n)||n===!1)&&(e[s]=n)}return e}const VF=[...kx].reverse(),WF=kx.length;function HF(r){return e=>Promise.all(e.map(({animation:t,options:s})=>IF(r,t,s)))}function UF(r){let e=HF(r),t=g1(),s=!0;const n=u=>(h,p)=>{const m=xa(r,p,u==="exit"?r.presenceContext?.custom:void 0);if(m){const{transition:g,transitionEnd:y,...v}=m;h={...h,...v,...y}}return h};function i(u){e=u(r)}function l(u){const{props:h}=r,p=Tj(r.parent)||{},m=[],g=new Set;let y={},v=1/0;for(let j=0;j<WF;j++){const C=VF[j],N=t[C],k=h[C]!==void 0?h[C]:p[C],T=pc(k),E=C===u?N.isActive:null;E===!1&&(v=j);let D=k===p[C]&&k!==h[C]&&T;if(D&&s&&r.manuallyAnimateOnMount&&(D=!1),N.protectedKeys={...y},!N.isActive&&E===null||!k&&!N.prevProp||Jh(k)||typeof k=="boolean")continue;const M=$F(N.prevProp,k);let P=M||C===u&&N.isActive&&!D&&T||j>v&&T,R=!1;const F=Array.isArray(k)?k:[k];let I=F.reduce(n(C),{});E===!1&&(I={});const{prevResolvedValues:U={}}=N,L={...U,...I},X=V=>{P=!0,g.has(V)&&(R=!0,g.delete(V)),N.needsAnimating[V]=!0;const O=r.getValue(V);O&&(O.liveStyle=!1)};for(const V in L){const O=I[V],Z=U[V];if(y.hasOwnProperty(V))continue;let Q=!1;$g(O)&&$g(Z)?Q=!Nj(O,Z):Q=O!==Z,Q?O!=null?X(V):g.add(V):O!==void 0&&g.has(V)?X(V):N.protectedKeys[V]=!0}N.prevProp=k,N.prevResolvedValues=I,N.isActive&&(y={...y,...I}),s&&r.blockInitialAnimation&&(P=!1);const de=D&&M;P&&(!de||R)&&m.push(...F.map(V=>{const O={type:C};if(typeof V=="string"&&s&&!de&&r.manuallyAnimateOnMount&&r.parent){const{parent:Z}=r,Q=xa(Z,V);if(Z.enteringChildren&&Q){const{delayChildren:W}=Q.transition||{};O.delay=jj(Z.enteringChildren,r,W)}}return{animation:V,options:O}}))}if(g.size){const j={};if(typeof h.initial!="boolean"){const C=xa(r,Array.isArray(h.initial)?h.initial[0]:h.initial);C&&C.transition&&(j.transition=C.transition)}g.forEach(C=>{const N=r.getBaseTarget(C),k=r.getValue(C);k&&(k.liveStyle=!0),j[C]=N??null}),m.push({animation:j})}let w=!!m.length;return s&&(h.initial===!1||h.initial===h.animate)&&!r.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(m):Promise.resolve()}function d(u,h){if(t[u].isActive===h)return Promise.resolve();r.variantChildren?.forEach(m=>m.animationState?.setActive(u,h)),t[u].isActive=h;const p=l(u);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:l,setActive:d,setAnimateFunction:i,getState:()=>t,reset:()=>{t=g1(),s=!0}}}function $F(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!Nj(e,r):!1}function ii(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function g1(){return{animate:ii(!0),whileInView:ii(),whileHover:ii(),whileTap:ii(),whileDrag:ii(),whileFocus:ii(),exit:ii()}}class Bo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class GF extends Bo{constructor(e){super(e),e.animationState||(e.animationState=UF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Jh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let YF=0;class XF extends Bo{constructor(){super(...arguments),this.id=YF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const KF={animation:{Feature:GF},exit:{Feature:XF}};function gc(r,e,t,s={passive:!0}){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t)}function Rc(r){return{point:{x:r.pageX,y:r.pageY}}}const qF=r=>e=>Sx(e)&&r(e,Rc(e));function Kl(r,e,t,s){return gc(r,e,qF(t),s)}const _j=1e-4,ZF=1-_j,JF=1+_j,Mj=.01,QF=0-Mj,eL=0+Mj;function Pr(r){return r.max-r.min}function tL(r,e,t){return Math.abs(r-e)<=t}function x1(r,e,t,s=.5){r.origin=s,r.originPoint=Mt(e.min,e.max,r.origin),r.scale=Pr(t)/Pr(e),r.translate=Mt(t.min,t.max,r.origin)-r.originPoint,(r.scale>=ZF&&r.scale<=JF||isNaN(r.scale))&&(r.scale=1),(r.translate>=QF&&r.translate<=eL||isNaN(r.translate))&&(r.translate=0)}function ql(r,e,t,s){x1(r.x,e.x,t.x,s?s.originX:void 0),x1(r.y,e.y,t.y,s?s.originY:void 0)}function y1(r,e,t){r.min=t.min+e.min,r.max=r.min+Pr(e)}function rL(r,e,t){y1(r.x,e.x,t.x),y1(r.y,e.y,t.y)}function v1(r,e,t){r.min=e.min-t.min,r.max=r.min+Pr(e)}function Zl(r,e,t){v1(r.x,e.x,t.x),v1(r.y,e.y,t.y)}function ps(r){return[r("x"),r("y")]}const Ej=({current:r})=>r?r.ownerDocument.defaultView:null,b1=(r,e)=>Math.abs(r-e);function sL(r,e){const t=b1(r.x,e.x),s=b1(r.y,e.y);return Math.sqrt(t**2+s**2)}class Pj{constructor(e,t,{transformPagePoint:s,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Cm(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=sL(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!v)return;const{point:w}=g,{timestamp:j}=cr;this.history.push({...w,timestamp:j});const{onStart:C,onMove:N}=this.handlers;y||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Sm(y,this.transformPagePoint),St.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:v,onSessionEnd:w,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Cm(g.type==="pointercancel"?this.lastMoveEventInfo:Sm(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(g,C),w&&w(g,C)},!Sx(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=n||window;const d=Rc(e),u=Sm(d,this.transformPagePoint),{point:h}=u,{timestamp:p}=cr;this.history=[{...h,timestamp:p}];const{onSessionStart:m}=t;m&&m(e,Cm(u,this.history)),this.removeListeners=Pc(Kl(this.contextWindow,"pointermove",this.handlePointerMove),Kl(this.contextWindow,"pointerup",this.handlePointerUp),Kl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ao(this.updatePoint)}}function Sm(r,e){return e?{point:e(r.point)}:r}function w1(r,e){return{x:r.x-e.x,y:r.y-e.y}}function Cm({point:r},e){return{point:r,delta:w1(r,Dj(e)),offset:w1(r,nL(e)),velocity:oL(e,.1)}}function nL(r){return r[0]}function Dj(r){return r[r.length-1]}function oL(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,s=null;const n=Dj(r);for(;t>=0&&(s=r[t],!(n.timestamp-s.timestamp>hn(e)));)t--;if(!s)return{x:0,y:0};const i=fn(n.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const l={x:(n.x-s.x)/i,y:(n.y-s.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function iL(r,{min:e,max:t},s){return e!==void 0&&r<e?r=s?Mt(e,r,s.min):Math.max(r,e):t!==void 0&&r>t&&(r=s?Mt(t,r,s.max):Math.min(r,t)),r}function S1(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function aL(r,{top:e,left:t,bottom:s,right:n}){return{x:S1(r.x,t,n),y:S1(r.y,e,s)}}function C1(r,e){let t=e.min-r.min,s=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,s]=[s,t]),{min:t,max:s}}function lL(r,e){return{x:C1(r.x,e.x),y:C1(r.y,e.y)}}function cL(r,e){let t=.5;const s=Pr(r),n=Pr(e);return n>s?t=uc(e.min,e.max-s,r.min):s>n&&(t=uc(r.min,r.max-n,e.min)),Wn(0,1,t)}function dL(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const Xg=.35;function uL(r=Xg){return r===!1?r=0:r===!0&&(r=Xg),{x:k1(r,"left","right"),y:k1(r,"top","bottom")}}function k1(r,e,t){return{min:j1(r,e),max:j1(r,t)}}function j1(r,e){return typeof r=="number"?r:r[e]||0}const hL=new WeakMap;class fL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Rc(m).point)},l=(m,g)=>{const{drag:y,dragPropagation:v,onDragStart:w}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vO(y),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ps(C=>{let N=this.getAxisMotionValue(C).get()||0;if(pn.test(N)){const{projection:k}=this.visualElement;if(k&&k.layout){const T=k.layout.layoutBox[C];T&&(N=Pr(T)*(parseFloat(N)/100))}}this.originPoint[C]=N}),w&&St.postRender(()=>w(m,g)),Gg(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},d=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:w,onDrag:j}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:C}=g;if(v&&this.currentDirection===null){this.currentDirection=pL(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),j&&j(m,g)},u=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g,this.stop(m,g),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>ps(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Pj(e,{onSessionStart:i,onStart:l,onMove:d,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:s,contextWindow:Ej(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,n=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!s)return;const{velocity:l}=n;this.startAnimation(l);const{onDragEnd:d}=this.getProps();d&&St.postRender(()=>d(s,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:n}=this.getProps();if(!s||!Qd(e,n,this.currentDirection))return;const i=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=iL(l,this.constraints[e],this.elastic[e])),i.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;e&&ca(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=aL(s.layoutBox,e):this.constraints=!1,this.elastic=uL(t),n!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ps(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=dL(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ca(e))return!1;const s=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=mF(s,n.root,this.visualElement.getTransformPagePoint());let l=lL(n.layout.layoutBox,i);if(t){const d=t(hF(l));this.hasMutatedConstraints=!!d,d&&(l=mj(d))}return l}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:n,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},h=ps(p=>{if(!Qd(p,t,this.currentDirection))return;let m=u&&u[p]||{};l&&(m={min:0,max:0});const g=n?200:1e6,y=n?40:1e7,v={type:"inertia",velocity:s?e[p]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(p,v)});return Promise.all(h).then(d)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Gg(this.visualElement,e),s.start(Dx(e,s,0,t,this.visualElement,!1))}stopAnimation(){ps(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ps(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),n=s[t];return n||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ps(t=>{const{drag:s}=this.getProps();if(!Qd(t,s,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(t);if(n&&n.layout){const{min:l,max:d}=n.layout.layoutBox[t];i.set(e[t]-Mt(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!ca(t)||!s||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};ps(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const u=d.get();n[l]=cL({min:u,max:u},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ps(l=>{if(!Qd(l,e,null))return;const d=this.getAxisMotionValue(l),{min:u,max:h}=this.constraints[l];d.set(Mt(u,h,n[l]))})}addListeners(){if(!this.visualElement.current)return;hL.set(this.visualElement,this);const e=this.visualElement.current,t=Kl(e,"pointerdown",u=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();ca(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",s);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),St.read(s);const l=gc(window,"resize",()=>this.scalePositionWithinConstraints()),d=n.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ps(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=u[p].translate,m.set(m.get()+u[p].translate))}),this.visualElement.render())}));return()=>{l(),t(),i(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:l=Xg,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:n,dragConstraints:i,dragElastic:l,dragMomentum:d}}}function Qd(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function pL(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class mL extends Bo{constructor(e){super(e),this.removeGroupControls=Ss,this.removeListeners=Ss,this.controls=new fL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ss}unmount(){this.removeGroupControls(),this.removeListeners()}}const N1=r=>(e,t)=>{r&&St.postRender(()=>r(e,t))};class gL extends Bo{constructor(){super(...arguments),this.removePointerDownListener=Ss}onPointerDown(e){this.session=new Pj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ej(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:n}=this.node.getProps();return{onSessionStart:N1(e),onStart:N1(t),onMove:s,onEnd:(i,l)=>{delete this.session,n&&St.postRender(()=>n(i,l))}}}mount(){this.removePointerDownListener=Kl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Yu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function T1(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const Al={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(Xe.test(r))r=parseFloat(r);else return r;const t=T1(r,e.target.x),s=T1(r,e.target.y);return`${t}% ${s}%`}},xL={correct:(r,{treeScale:e,projectionDelta:t})=>{const s=r,n=Ro.parse(r);if(n.length>5)return s;const i=Ro.createTransformer(r),l=typeof n[0]!="number"?1:0,d=t.x.scale*e.x,u=t.y.scale*e.y;n[0+l]/=d,n[1+l]/=u;const h=Mt(d,u,.5);return typeof n[2+l]=="number"&&(n[2+l]/=h),typeof n[3+l]=="number"&&(n[3+l]/=h),i(n)}};let km=!1;class yL extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:n}=this.props,{projection:i}=e;BO(vL),i&&(t.group&&t.group.add(i),s&&s.register&&n&&s.register(i),km&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Yu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:n,isPresent:i}=this.props,{projection:l}=s;return l&&(l.isPresent=i,km=!0,n||e.layoutDependency!==t||t===void 0||e.isPresent!==i?l.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?l.promote():l.relegate()||St.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:n}=e;km=!0,n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),s&&s.deregister&&s.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Aj(r){const[e,t]=tj(),s=b.useContext(Q0);return o.jsx(yL,{...r,layoutGroup:s,switchLayoutGroup:b.useContext(fj),isPresent:e,safeToRemove:t})}const vL={borderRadius:{...Al,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Al,borderTopRightRadius:Al,borderBottomLeftRadius:Al,borderBottomRightRadius:Al,boxShadow:xL};function bL(r,e,t){const s=vr(r)?r:_a(r);return s.start(Dx("",s,e,t)),s.animation}const wL=(r,e)=>r.depth-e.depth;class SL{constructor(){this.children=[],this.isDirty=!1}add(e){rx(this.children,e),this.isDirty=!0}remove(e){sx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wL),this.isDirty=!1,this.children.forEach(e)}}function CL(r,e){const t=Wr.now(),s=({timestamp:n})=>{const i=n-t;i>=e&&(Ao(s),r(i-e))};return St.setup(s,!0),()=>Ao(s)}const Rj=["TopLeft","TopRight","BottomLeft","BottomRight"],kL=Rj.length,_1=r=>typeof r=="string"?parseFloat(r):r,M1=r=>typeof r=="number"||Xe.test(r);function jL(r,e,t,s,n,i){n?(r.opacity=Mt(0,t.opacity??1,NL(s)),r.opacityExit=Mt(e.opacity??1,0,TL(s))):i&&(r.opacity=Mt(e.opacity??1,t.opacity??1,s));for(let l=0;l<kL;l++){const d=`border${Rj[l]}Radius`;let u=E1(e,d),h=E1(t,d);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||M1(u)===M1(h)?(r[d]=Math.max(Mt(_1(u),_1(h),s),0),(pn.test(h)||pn.test(u))&&(r[d]+="%")):r[d]=h}(e.rotate||t.rotate)&&(r.rotate=Mt(e.rotate||0,t.rotate||0,s))}function E1(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const NL=Oj(0,.5,wk),TL=Oj(.5,.95,Ss);function Oj(r,e,t){return s=>s<r?0:s>e?1:t(uc(r,e,s))}function P1(r,e){r.min=e.min,r.max=e.max}function hs(r,e){P1(r.x,e.x),P1(r.y,e.y)}function D1(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function A1(r,e,t,s,n){return r-=e,r=wh(r,1/t,s),n!==void 0&&(r=wh(r,1/n,s)),r}function _L(r,e=0,t=1,s=.5,n,i=r,l=r){if(pn.test(e)&&(e=parseFloat(e),e=Mt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=Mt(i.min,i.max,s);r===i&&(d-=e),r.min=A1(r.min,e,t,d,n),r.max=A1(r.max,e,t,d,n)}function R1(r,e,[t,s,n],i,l){_L(r,e[t],e[s],e[n],e.scale,i,l)}const ML=["x","scaleX","originX"],EL=["y","scaleY","originY"];function O1(r,e,t,s){R1(r.x,e,ML,t?t.x:void 0,s?s.x:void 0),R1(r.y,e,EL,t?t.y:void 0,s?s.y:void 0)}function F1(r){return r.translate===0&&r.scale===1}function Fj(r){return F1(r.x)&&F1(r.y)}function L1(r,e){return r.min===e.min&&r.max===e.max}function PL(r,e){return L1(r.x,e.x)&&L1(r.y,e.y)}function z1(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function Lj(r,e){return z1(r.x,e.x)&&z1(r.y,e.y)}function I1(r){return Pr(r.x)/Pr(r.y)}function B1(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class DL{constructor(){this.members=[]}add(e){rx(this.members,e),e.scheduleRender()}remove(e){if(sx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(n=>e===n);if(t===0)return!1;let s;for(let n=t;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;n===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AL(r,e,t){let s="";const n=r.x.translate/e.x,i=r.y.translate/e.y,l=t?.z||0;if((n||i||l)&&(s=`translate3d(${n}px, ${i}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:p,rotateX:m,rotateY:g,skewX:y,skewY:v}=t;h&&(s=`perspective(${h}px) ${s}`),p&&(s+=`rotate(${p}deg) `),m&&(s+=`rotateX(${m}deg) `),g&&(s+=`rotateY(${g}deg) `),y&&(s+=`skewX(${y}deg) `),v&&(s+=`skewY(${v}deg) `)}const d=r.x.scale*e.x,u=r.y.scale*e.y;return(d!==1||u!==1)&&(s+=`scale(${d}, ${u})`),s||"none"}const jm=["","X","Y","Z"],RL=1e3;let OL=0;function Nm(r,e,t,s){const{latestValues:n}=e;n[r]&&(t[r]=n[r],e.setStaticValue(r,0),s&&(s[r]=0))}function zj(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=Cj(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:n,layoutId:i}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",St,!(n||i))}const{parent:s}=r;s&&!s.hasCheckedOptimisedAppear&&zj(s)}function Ij({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:n}){return class{constructor(l={},d=e?.()){this.id=OL++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(zL),this.nodes.forEach(WL),this.nodes.forEach(HL),this.nodes.forEach(IL)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new SL)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new ix),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const u=this.eventHandlers.get(l);u&&u.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=ej(l)&&!jO(l),this.instance=l;const{layoutId:d,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||d)&&(this.isLayoutDirty=!0),r){let p,m=0;const g=()=>this.root.updateBlockedByResize=!1;St.read(()=>{m=window.innerWidth}),r(l,()=>{const y=window.innerWidth;y!==m&&(m=y,this.root.updateBlockedByResize=!0,p&&p(),p=CL(g,250),Yu.hasAnimatedSinceResize&&(Yu.hasAnimatedSinceResize=!1,this.nodes.forEach(H1)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&h&&(d||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||h.getDefaultTransition()||XL,{onLayoutAnimationStart:w,onLayoutAnimationComplete:j}=h.getProps(),C=!this.targetLayout||!Lj(this.targetLayout,y),N=!m&&g;if(this.options.layoutRoot||this.resumeFrom||N||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...vx(v,"layout"),onPlay:w,onComplete:j};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(p,N)}else m||H1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ao(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UL),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(V1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(W1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(VL),this.nodes.forEach(FL),this.nodes.forEach(LL)):this.nodes.forEach(W1),this.clearAllSnapshots();const d=Wr.now();cr.delta=Wn(0,1e3/60,d-cr.timestamp),cr.timestamp=d,cr.isProcessing=!0,pm.update.process(cr),pm.preRender.process(cr),pm.render.process(cr),cr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BL),this.sharedNodes.forEach($L)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,St.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){St.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pr(this.snapshot.measuredBox.x)&&!Pr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d&&this.instance){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!n)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!Fj(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;l&&this.instance&&(d||di(this.latestValues)||p)&&(n(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return l&&(u=this.removeTransform(u)),KL(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return zt();const d=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(qL))){const{scroll:h}=this.root;h&&(da(d.x,h.offset.x),da(d.y,h.offset.y))}return d}removeElementScroll(l){const d=zt();if(hs(d,l),this.scroll?.wasRoot)return d;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&hs(d,l),da(d.x,p.offset.x),da(d.y,p.offset.y))}return d}applyTransform(l,d=!1){const u=zt();hs(u,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];!d&&p.options.layoutScroll&&p.scroll&&p!==p.root&&ua(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),di(p.latestValues)&&ua(u,p.latestValues)}return di(this.latestValues)&&ua(u,this.latestValues),u}removeTransform(l){const d=zt();hs(d,l);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!di(h.latestValues))continue;Wg(h.latestValues)&&h.updateSnapshot();const p=zt(),m=h.measurePageBox();hs(p,m),O1(d,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return di(this.latestValues)&&O1(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(l||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=cr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),Zl(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=zt(),this.targetWithTransforms=zt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hs(this.target,this.layout.layoutBox),xj(this.target,this.targetDelta)):hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),Zl(this.relativeTargetOrigin,this.target,g.target),hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Wg(this.parent.latestValues)||gj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),d=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===cr.timestamp&&(u=!1),u)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;hs(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;pF(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=zt());const{target:y}=l;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(D1(this.prevProjectionDelta.x,this.projectionDelta.x),D1(this.prevProjectionDelta.y,this.projectionDelta.y)),ql(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!B1(this.projectionDelta.x,this.prevProjectionDelta.x)||!B1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ha(),this.projectionDelta=ha(),this.projectionDeltaWithTransform=ha()}setAnimationOrigin(l,d=!1){const u=this.snapshot,h=u?u.latestValues:{},p={...this.latestValues},m=ha();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const g=zt(),y=u?u.source:void 0,v=this.layout?this.layout.source:void 0,w=y!==v,j=this.getStack(),C=!j||j.members.length<=1,N=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(YL));this.animationProgress=0;let k;this.mixTargetDelta=T=>{const E=T/1e3;U1(m.x,l.x,E),U1(m.y,l.y,E),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zl(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GL(this.relativeTarget,this.relativeTargetOrigin,g,E),k&&PL(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=zt()),hs(k,this.relativeTarget)),w&&(this.animationValues=p,jL(p,h,this.latestValues,E,N,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ao(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=St.update(()=>{Yu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_a(0)),this.currentAnimation=bL(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(RL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:u,layout:h,latestValues:p}=l;if(!(!d||!u||!h)){if(this!==l&&this.layout&&h&&Bj(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||zt();const m=Pr(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+m;const g=Pr(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+g}hs(d,u),ua(d,p),ql(this.projectionDeltaWithTransform,this.layoutCorrected,d,p)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new DL),this.sharedNodes.get(l).add(d);const h=d.options.initialPromotionConfig;d.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const h={};u.z&&Nm("z",l,h,this.animationValues);for(let p=0;p<jm.length;p++)Nm(`rotate${jm[p]}`,l,h,this.animationValues),Nm(`skew${jm[p]}`,l,h,this.animationValues);l.render();for(const p in h)l.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);l.scheduleRender()}applyProjectionStyles(l,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Gu(d?.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Gu(d?.pointerEvents)||""),this.hasProjected&&!di(this.latestValues)&&(l.transform=u?u({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=AL(this.projectionDeltaWithTransform,this.treeScale,p);u&&(m=u(p,m)),l.transform=m;const{x:g,y}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,h.animationValues?l.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in mc){if(p[v]===void 0)continue;const{correct:w,applyTo:j,isCSSVariable:C}=mc[v],N=m==="none"?p[v]:w(p[v],h);if(j){const k=j.length;for(let T=0;T<k;T++)l[j[T]]=N}else C?this.options.visualElement.renderState.vars[v]=N:l[v]=N}this.options.layoutId&&(l.pointerEvents=h===this?Gu(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(V1),this.root.sharedNodes.clear()}}}function FL(r){r.updateLayout()}function LL(r){const e=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=r.layout,{animationType:n}=r.options,i=e.source!==r.layout.source;n==="size"?ps(p=>{const m=i?e.measuredBox[p]:e.layoutBox[p],g=Pr(m);m.min=t[p].min,m.max=m.min+g}):Bj(n,e.layoutBox,t)&&ps(p=>{const m=i?e.measuredBox[p]:e.layoutBox[p],g=Pr(t[p]);m.max=m.min+g,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[p].max=r.relativeTarget[p].min+g)});const l=ha();ql(l,t,e.layoutBox);const d=ha();i?ql(d,r.applyTransform(s,!0),e.measuredBox):ql(d,t,e.layoutBox);const u=!Fj(l);let h=!1;if(!r.resumeFrom){const p=r.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:g}=p;if(m&&g){const y=zt();Zl(y,e.layoutBox,m.layoutBox);const v=zt();Zl(v,t,g.layoutBox),Lj(y,v)||(h=!0),p.options.layoutRoot&&(r.relativeTarget=v,r.relativeTargetOrigin=y,r.relativeParent=p)}}}r.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:d,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(r.isLead()){const{onExitComplete:t}=r.options;t&&t()}r.options.transition=void 0}function zL(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function IL(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function BL(r){r.clearSnapshot()}function V1(r){r.clearMeasurements()}function W1(r){r.isLayoutDirty=!1}function VL(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function H1(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function WL(r){r.resolveTargetDelta()}function HL(r){r.calcProjection()}function UL(r){r.resetSkewAndRotation()}function $L(r){r.removeLeadSnapshot()}function U1(r,e,t){r.translate=Mt(e.translate,0,t),r.scale=Mt(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function $1(r,e,t,s){r.min=Mt(e.min,t.min,s),r.max=Mt(e.max,t.max,s)}function GL(r,e,t,s){$1(r.x,e.x,t.x,s),$1(r.y,e.y,t.y,s)}function YL(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const XL={duration:.45,ease:[.4,0,.1,1]},G1=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),Y1=G1("applewebkit/")&&!G1("chrome/")?Math.round:Ss;function X1(r){r.min=Y1(r.min),r.max=Y1(r.max)}function KL(r){X1(r.x),X1(r.y)}function Bj(r,e,t){return r==="position"||r==="preserve-aspect"&&!tL(I1(e),I1(t),.2)}function qL(r){return r!==r.root&&r.scroll?.wasRoot}const ZL=Ij({attachResizeListener:(r,e)=>gc(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tm={current:void 0},Vj=Ij({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Tm.current){const r=new ZL({});r.mount(window),r.setOptions({layoutScroll:!0}),Tm.current=r}return Tm.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),JL={pan:{Feature:gL},drag:{Feature:mL,ProjectionNode:Vj,MeasureLayout:Aj}};function K1(r,e,t){const{props:s}=r;r.animationState&&s.whileHover&&r.animationState.setActive("whileHover",t==="Start");const n="onHover"+t,i=s[n];i&&St.postRender(()=>i(e,Rc(e)))}class QL extends Bo{mount(){const{current:e}=this.node;e&&(this.unmount=bO(e,(t,s)=>(K1(this.node,s,"Start"),n=>K1(this.node,n,"End"))))}unmount(){}}class e6 extends Bo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Pc(gc(this.node.current,"focus",()=>this.onFocus()),gc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function q1(r,e,t){const{props:s}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&s.whileTap&&r.animationState.setActive("whileTap",t==="Start");const n="onTap"+(t==="End"?"":t),i=s[n];i&&St.postRender(()=>i(e,Rc(e)))}class t6 extends Bo{mount(){const{current:e}=this.node;e&&(this.unmount=kO(e,(t,s)=>(q1(this.node,s,"Start"),(n,{success:i})=>q1(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kg=new WeakMap,_m=new WeakMap,r6=r=>{const e=Kg.get(r.target);e&&e(r)},s6=r=>{r.forEach(r6)};function n6({root:r,...e}){const t=r||document;_m.has(t)||_m.set(t,{});const s=_m.get(t),n=JSON.stringify(e);return s[n]||(s[n]=new IntersectionObserver(s6,{root:r,...e})),s[n]}function o6(r,e,t){const s=n6(e);return Kg.set(r,t),s.observe(r),()=>{Kg.delete(r),s.unobserve(r)}}const i6={some:0,all:1};class a6 extends Bo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:n="some",once:i}=e,l={root:t?t.current:void 0,rootMargin:s,threshold:typeof n=="number"?n:i6[n]},d=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),g=h?p:m;g&&g(u)};return o6(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(l6(e,t))&&this.startObserver()}unmount(){}}function l6({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const c6={inView:{Feature:a6},tap:{Feature:t6},focus:{Feature:e6},hover:{Feature:QL}},d6={layout:{ProjectionNode:Vj,MeasureLayout:Aj}},u6={...KF,...c6,...JL,...d6},pi=uF(u6,kF),h6=[{id:"1",title:"Summer Vibes",lastModified:new Date("2024-01-15"),bpm:110,key:"G",hasUnreadChanges:!0,genre:"Pop",duration:"3:24"},{id:"2",title:"Midnight Dreams",lastModified:new Date("2024-01-14"),bpm:85,key:"Am",genre:"R&B",duration:"2:58"},{id:"3",title:"Electric Soul",lastModified:new Date("2024-01-13"),bpm:128,key:"Em",hasUnreadChanges:!0,genre:"Electronic",duration:"4:12"},{id:"4",title:"Coffee Shop Acoustic",lastModified:new Date("2024-01-12"),bpm:95,key:"D",genre:"Folk",duration:"2:45"},{id:"5",title:"City Lights",lastModified:new Date("2024-01-11"),bpm:120,key:"F#m",genre:"Hip-Hop",duration:"3:38"}];function f6({isOpen:r,onClose:e,onSelectProject:t}){const[s,n]=b.useState(""),[i,l]=b.useState("all"),d=h6.filter(h=>{const p=h.title.toLowerCase().includes(s.toLowerCase())||h.genre?.toLowerCase().includes(s.toLowerCase());switch(i){case"recent":return p&&h.lastModified>new Date("2024-01-14");case"starred":return p&&h.hasUnreadChanges;default:return p}}),u=h=>{const m=Math.floor((new Date().getTime()-h.getTime())/(1e3*60*60));return m<1?"Just now":m<24?`${m}h ago`:m<48?"Yesterday":h.toLocaleDateString()};return o.jsxs(o.Fragment,{children:[o.jsx(Vg,{children:r&&o.jsx(pi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40",onClick:e})}),o.jsx(Vg,{children:r&&o.jsxs(pi.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed left-0 top-0 h-full w-80 z-50",style:{background:"var(--dropsource-panel)",borderRight:"1px solid var(--dropsource-border)",backdropFilter:"blur(12px)"},children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:"var(--dropsource-border)"},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($0,{className:"w-5 h-5",style:{color:"var(--dropsource-brand)"}}),o.jsx("span",{className:"font-semibold",style:{fontSize:"var(--text-lg)",color:"var(--dropsource-primary)"},children:"Projects"})]}),o.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-gray-700/50 transition-colors",children:o.jsx(Cr,{className:"w-4 h-4",style:{color:"var(--dropsource-secondary)"}})})]}),o.jsxs("div",{className:"p-4 h-full overflow-auto dropsource-custom-scrollbar",children:[o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx(Gr,{placeholder:"Search projects...",value:s,onChange:h=>n(h.target.value),className:"pl-10 dropsource-input",style:{fontSize:"var(--text-sm)"}})]}),o.jsx("div",{className:"flex gap-2",children:["all","recent","starred"].map(h=>o.jsx("button",{onClick:()=>l(h),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${i===h?"bg-blue-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:h==="all"?"All":h==="recent"?"Recent":"Starred"},h))})]}),o.jsxs(Se,{className:"w-full mb-4 dropsource-btn-primary flex items-center gap-2",style:{height:"40px"},children:[o.jsx(VC,{className:"w-4 h-4"}),"New Project"]}),o.jsx("div",{className:"space-y-3",children:d.map(h=>o.jsxs(pi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"dropsource-card p-3 hover:scale-[1.02] transition-all cursor-pointer group",onClick:()=>{t?.(h.id),e()},children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h3",{className:"font-medium text-sm",style:{color:"var(--dropsource-primary)"},children:h.title}),h.hasUnreadChanges&&o.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs",style:{color:"var(--dropsource-tertiary)"},children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(ja,{className:"w-3 h-3"}),u(h.lastModified)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Na,{className:"w-3 h-3"}),h.bpm," BPM  ",h.key]})]})]}),o.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[o.jsx("button",{className:"p-1 rounded hover:bg-gray-600 transition-colors",onClick:p=>{p.stopPropagation()},children:o.jsx(An,{className:"w-3 h-3 text-gray-400"})}),o.jsx("button",{className:"p-1 rounded hover:bg-red-600 transition-colors",onClick:p=>{p.stopPropagation()},children:o.jsx(lc,{className:"w-3 h-3 text-gray-400"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex gap-2",children:[h.genre&&o.jsx(ht,{variant:"secondary",className:"text-xs px-2 py-0.5",style:{backgroundColor:"rgba(99, 179, 255, 0.1)",color:"#63B3FF"},children:h.genre}),h.duration&&o.jsx("span",{className:"text-xs",style:{color:"var(--dropsource-tertiary)"},children:h.duration})]}),h.hasUnreadChanges&&o.jsx(rt,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"})]})]},h.id))}),d.length===0&&o.jsxs("div",{className:"text-center py-8",style:{color:"var(--dropsource-tertiary)"},children:[o.jsx(BC,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm",children:"No projects found"}),o.jsx("p",{className:"text-xs opacity-75",children:"Try adjusting your search or filter"})]})]})]})})]})}var Gt=function(){return Gt=Object.assign||function(r){for(var e,t=1,s=arguments.length;t<s;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Gt.apply(this,arguments)},Z1={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},J1={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},eu={width:"20px",height:"20px",position:"absolute",zIndex:1},p6={top:Gt(Gt({},Z1),{top:"-5px"}),right:Gt(Gt({},J1),{left:void 0,right:"-5px"}),bottom:Gt(Gt({},Z1),{top:void 0,bottom:"-5px"}),left:Gt(Gt({},J1),{left:"-5px"}),topRight:Gt(Gt({},eu),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Gt(Gt({},eu),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Gt(Gt({},eu),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Gt(Gt({},eu),{left:"-10px",top:"-10px",cursor:"nw-resize"})},m6=b.memo(function(r){var e=r.onResizeStart,t=r.direction,s=r.children,n=r.replaceStyles,i=r.className,l=b.useCallback(function(h){e(h,t)},[e,t]),d=b.useCallback(function(h){e(h,t)},[e,t]),u=b.useMemo(function(){return Gt(Gt({position:"absolute",userSelect:"none"},p6[t]),n??{})},[n,t]);return o.jsx("div",{className:i||void 0,style:u,onMouseDown:l,onTouchStart:d,children:s})}),g6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),en=function(){return en=Object.assign||function(r){for(var e,t=1,s=arguments.length;t<s;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},en.apply(this,arguments)},x6={width:"auto",height:"auto"},tu=function(r,e,t){return Math.max(Math.min(r,t),e)},Q1=function(r,e,t){var s=Math.round(r/e);return s*e+t*(s-1)},Ji=function(r,e){return new RegExp(r,"i").test(e)},ru=function(r){return!!(r.touches&&r.touches.length)},y6=function(r){return!!((r.clientX||r.clientX===0)&&(r.clientY||r.clientY===0))},eS=function(r,e,t){t===void 0&&(t=0);var s=e.reduce(function(i,l,d){return Math.abs(l-r)<Math.abs(e[i]-r)?d:i},0),n=Math.abs(e[s]-r);return t===0||n<t?e[s]:r},Mm=function(r){return r=r.toString(),r==="auto"||r.endsWith("px")||r.endsWith("%")||r.endsWith("vh")||r.endsWith("vw")||r.endsWith("vmax")||r.endsWith("vmin")?r:"".concat(r,"px")},su=function(r,e,t,s){if(r&&typeof r=="string"){if(r.endsWith("px"))return Number(r.replace("px",""));if(r.endsWith("%")){var n=Number(r.replace("%",""))/100;return e*n}if(r.endsWith("vw")){var n=Number(r.replace("vw",""))/100;return t*n}if(r.endsWith("vh")){var n=Number(r.replace("vh",""))/100;return s*n}}return r},v6=function(r,e,t,s,n,i,l){return s=su(s,r.width,e,t),n=su(n,r.height,e,t),i=su(i,r.width,e,t),l=su(l,r.height,e,t),{maxWidth:typeof s>"u"?void 0:Number(s),maxHeight:typeof n>"u"?void 0:Number(n),minWidth:typeof i>"u"?void 0:Number(i),minHeight:typeof l>"u"?void 0:Number(l)}},b6=function(r){return Array.isArray(r)?r:[r,r]},w6=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],tS="__resizable_base__",Wj=(function(r){g6(e,r);function e(t){var s,n,i,l,d=r.call(this,t)||this;return d.ratio=1,d.resizable=null,d.parentLeft=0,d.parentTop=0,d.resizableLeft=0,d.resizableRight=0,d.resizableTop=0,d.resizableBottom=0,d.targetLeft=0,d.targetTop=0,d.delta={width:0,height:0},d.appendBase=function(){if(!d.resizable||!d.window)return null;var u=d.parentNode;if(!u)return null;var h=d.window.document.createElement("div");return h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.transform="scale(0, 0)",h.style.left="0",h.style.flex="0 0 100%",h.classList?h.classList.add(tS):h.className+=tS,u.appendChild(h),h},d.removeBase=function(u){var h=d.parentNode;h&&h.removeChild(u)},d.state={isResizing:!1,width:(n=(s=d.propsSize)===null||s===void 0?void 0:s.width)!==null&&n!==void 0?n:"auto",height:(l=(i=d.propsSize)===null||i===void 0?void 0:i.height)!==null&&l!==void 0?l:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},d.onResizeStart=d.onResizeStart.bind(d),d.onMouseMove=d.onMouseMove.bind(d),d.onMouseUp=d.onMouseUp.bind(d),d}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||x6},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,s=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,i=this.resizable.offsetHeight,l=this.resizable.style.position;l!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:n,s=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:i,this.resizable.style.position=l}return{width:t,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,s=this.props.size,n=function(d){var u;if(typeof t.state[d]>"u"||t.state[d]==="auto")return"auto";if(t.propsSize&&t.propsSize[d]&&(!((u=t.propsSize[d])===null||u===void 0)&&u.toString().endsWith("%"))){if(t.state[d].toString().endsWith("%"))return t.state[d].toString();var h=t.getParentSize(),p=Number(t.state[d].toString().replace("px","")),m=p/h[d]*100;return"".concat(m,"%")}return Mm(t.state[d])},i=s&&typeof s.width<"u"&&!this.state.isResizing?Mm(s.width):n("width"),l=s&&typeof s.height<"u"&&!this.state.isResizing?Mm(s.height):n("height");return{width:i,height:l}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var s=!1,n=this.parentNode.style.flexWrap;n!=="wrap"&&(s=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var i={width:t.offsetWidth,height:t.offsetHeight};return s&&(this.parentNode.style.flexWrap=n),this.removeBase(t),i},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,s){var n=this.propsSize&&this.propsSize[s];return this.state[s]==="auto"&&this.state.original[s]===t&&(typeof n>"u"||n==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,s){var n=this.props.boundsByDirection,i=this.state.direction,l=n&&Ji("left",i),d=n&&Ji("top",i),u,h;if(this.props.bounds==="parent"){var p=this.parentNode;p&&(u=l?this.resizableRight-this.parentLeft:p.offsetWidth+(this.parentLeft-this.resizableLeft),h=d?this.resizableBottom-this.parentTop:p.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(u=l?this.resizableRight:this.window.innerWidth-this.resizableLeft,h=d?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(u=l?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),h=d?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return u&&Number.isFinite(u)&&(t=t&&t<u?t:u),h&&Number.isFinite(h)&&(s=s&&s<h?s:h),{maxWidth:t,maxHeight:s}},e.prototype.calculateNewSizeFromDirection=function(t,s){var n=this.props.scale||1,i=b6(this.props.resizeRatio||1),l=i[0],d=i[1],u=this.state,h=u.direction,p=u.original,m=this.props,g=m.lockAspectRatio,y=m.lockAspectRatioExtraHeight,v=m.lockAspectRatioExtraWidth,w=p.width,j=p.height,C=y||0,N=v||0;return Ji("right",h)&&(w=p.width+(t-p.x)*l/n,g&&(j=(w-N)/this.ratio+C)),Ji("left",h)&&(w=p.width-(t-p.x)*l/n,g&&(j=(w-N)/this.ratio+C)),Ji("bottom",h)&&(j=p.height+(s-p.y)*d/n,g&&(w=(j-C)*this.ratio+N)),Ji("top",h)&&(j=p.height-(s-p.y)*d/n,g&&(w=(j-C)*this.ratio+N)),{newWidth:w,newHeight:j}},e.prototype.calculateNewSizeFromAspectRatio=function(t,s,n,i){var l=this.props,d=l.lockAspectRatio,u=l.lockAspectRatioExtraHeight,h=l.lockAspectRatioExtraWidth,p=typeof i.width>"u"?10:i.width,m=typeof n.width>"u"||n.width<0?t:n.width,g=typeof i.height>"u"?10:i.height,y=typeof n.height>"u"||n.height<0?s:n.height,v=u||0,w=h||0;if(d){var j=(g-v)*this.ratio+w,C=(y-v)*this.ratio+w,N=(p-w)/this.ratio+v,k=(m-w)/this.ratio+v,T=Math.max(p,j),E=Math.min(m,C),D=Math.max(g,N),M=Math.min(y,k);t=tu(t,T,E),s=tu(s,D,M)}else t=tu(t,p,m),s=tu(s,g,y);return{newWidth:t,newHeight:s}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var s=this.parentNode;if(s){var n=s.getBoundingClientRect();this.parentLeft=n.left*t,this.parentTop=n.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var i=this.props.bounds.getBoundingClientRect();this.targetLeft=i.left*t,this.targetTop=i.top*t}if(this.resizable){var l=this.resizable.getBoundingClientRect(),d=l.left,u=l.top,h=l.right,p=l.bottom;this.resizableLeft=d*t,this.resizableRight=h*t,this.resizableTop=u*t,this.resizableBottom=p*t}},e.prototype.onResizeStart=function(t,s){if(!(!this.resizable||!this.window)){var n=0,i=0;if(t.nativeEvent&&y6(t.nativeEvent)?(n=t.nativeEvent.clientX,i=t.nativeEvent.clientY):t.nativeEvent&&ru(t.nativeEvent)&&(n=t.nativeEvent.touches[0].clientX,i=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var l=this.props.onResizeStart(t,s,this.resizable);if(l===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var d,u=this.window.getComputedStyle(this.resizable);if(u.flexBasis!=="auto"){var h=this.parentNode;if(h){var p=this.window.getComputedStyle(h).flexDirection;this.flexDir=p.startsWith("row")?"row":"column",d=u.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var m={original:{x:n,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:en(en({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:s,flexBasis:d};this.setState(m)}},e.prototype.onMouseMove=function(t){var s=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&ru(t))try{t.preventDefault(),t.stopPropagation()}catch{}var n=this.props,i=n.maxWidth,l=n.maxHeight,d=n.minWidth,u=n.minHeight,h=ru(t)?t.touches[0].clientX:t.clientX,p=ru(t)?t.touches[0].clientY:t.clientY,m=this.state,g=m.direction,y=m.original,v=m.width,w=m.height,j=this.getParentSize(),C=v6(j,this.window.innerWidth,this.window.innerHeight,i,l,d,u);i=C.maxWidth,l=C.maxHeight,d=C.minWidth,u=C.minHeight;var N=this.calculateNewSizeFromDirection(h,p),k=N.newHeight,T=N.newWidth,E=this.calculateNewMaxFromBoundary(i,l);this.props.snap&&this.props.snap.x&&(T=eS(T,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(k=eS(k,this.props.snap.y,this.props.snapGap));var D=this.calculateNewSizeFromAspectRatio(T,k,{width:E.maxWidth,height:E.maxHeight},{width:d,height:u});if(T=D.newWidth,k=D.newHeight,this.props.grid){var M=Q1(T,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),P=Q1(k,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),R=this.props.snapGap||0,F=R===0||Math.abs(M-T)<=R?M:T,I=R===0||Math.abs(P-k)<=R?P:k;T=F,k=I}var U={width:T-y.width,height:k-y.height};if(this.delta=U,v&&typeof v=="string"){if(v.endsWith("%")){var L=T/j.width*100;T="".concat(L,"%")}else if(v.endsWith("vw")){var X=T/this.window.innerWidth*100;T="".concat(X,"vw")}else if(v.endsWith("vh")){var de=T/this.window.innerHeight*100;T="".concat(de,"vh")}}if(w&&typeof w=="string"){if(w.endsWith("%")){var L=k/j.height*100;k="".concat(L,"%")}else if(w.endsWith("vw")){var X=k/this.window.innerWidth*100;k="".concat(X,"vw")}else if(w.endsWith("vh")){var de=k/this.window.innerHeight*100;k="".concat(de,"vh")}}var B={width:this.createSizeForCssProperty(T,"width"),height:this.createSizeForCssProperty(k,"height")};this.flexDir==="row"?B.flexBasis=B.width:this.flexDir==="column"&&(B.flexBasis=B.height);var V=this.state.width!==B.width,O=this.state.height!==B.height,Z=this.state.flexBasis!==B.flexBasis,Q=V||O||Z;Q&&Lo.flushSync(function(){s.setState(B)}),this.props.onResize&&Q&&this.props.onResize(t,g,this.resizable,U)}},e.prototype.onMouseUp=function(t){var s,n,i=this.state,l=i.isResizing,d=i.direction;i.original,!(!l||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,d,this.resizable,this.delta),this.props.size&&this.setState({width:(s=this.props.size.width)!==null&&s!==void 0?s:"auto",height:(n=this.props.size.height)!==null&&n!==void 0?n:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:en(en({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var s,n;this.setState({width:(s=t.width)!==null&&s!==void 0?s:"auto",height:(n=t.height)!==null&&n!==void 0?n:"auto"})},e.prototype.renderResizer=function(){var t=this,s=this.props,n=s.enable,i=s.handleStyles,l=s.handleClasses,d=s.handleWrapperStyle,u=s.handleWrapperClass,h=s.handleComponent;if(!n)return null;var p=Object.keys(n).map(function(m){return n[m]!==!1?o.jsx(m6,{direction:m,onResizeStart:t.onResizeStart,replaceStyles:i&&i[m],className:l&&l[m],children:h&&h[m]?h[m]:null},m):null});return o.jsx("div",{className:u,style:d,children:p})},e.prototype.render=function(){var t=this,s=Object.keys(this.props).reduce(function(l,d){return w6.indexOf(d)!==-1||(l[d]=t.props[d]),l},{}),n=en(en(en({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var i=this.props.as||"div";return o.jsxs(i,en({style:n,className:this.props.className},s,{ref:function(l){l&&(t.resizable=l)},children:[this.state.isResizing&&o.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e})(b.PureComponent);function ef({title:r,children:e,onClose:t,onMinimize:s,initialPosition:n,width:i=400,height:l=500,onPositionChange:d,onSizeChange:u,zIndex:h=50,onFocus:p}){const[m,g]=b.useState(n),[y,v]=b.useState(!1),[w,j]=b.useState(!1),[C,N]=b.useState({width:i,height:l}),[k,T]=b.useState({x:0,y:0}),[E,D]=b.useState(null),[M,P]=b.useState(!1),[R,F]=b.useState({width:i,height:l}),[I,U]=b.useState(n),[L,X]=b.useState(!1),de=b.useRef(null),B=b.useRef(null),V=20,O=64,Z={top:O+10,left:10},Q=b.useCallback((se,K,fe,ie)=>{let Te=se,pe=K,ue=null;return K<O&&(pe=O,ue="top"),Math.abs(se)<V?(Te=Z.left,ue="left"):Math.abs(se+fe-window.innerWidth)<V&&(Te=window.innerWidth-fe-Z.left,ue="right"),Math.abs(K-O)<V?(pe=Z.top,ue=ue?`${ue}-top`:"top"):Math.abs(K+ie-window.innerHeight)<V&&(pe=window.innerHeight-ie-Z.left,ue=ue?`${ue}-bottom`:"bottom"),Te=Math.max(Z.left,Math.min(Te,window.innerWidth-fe-Z.left)),pe=Math.max(O,Math.min(pe,window.innerHeight-ie-Z.left)),{x:Te,y:pe,indicator:ue}},[O,V]),W=b.useCallback(se=>{const K=se.target;if(console.log("FloatingCard mousedown on:",K.tagName,K.className),K.tagName==="BUTTON"||K.closest("button")){console.log("Prevented drag: button element");return}if(K.tagName==="INPUT"||K.closest("input")){console.log("Prevented drag: input element");return}if(K.tagName==="SELECT"||K.closest("select")){console.log("Prevented drag: select element");return}if(K.tagName==="A"||K.closest("a")){console.log("Prevented drag: link element");return}if(K.closest("[data-no-drag]")){console.log("Prevented drag: data-no-drag area");return}if(K.closest(".auction-content")){console.log("Prevented drag: auction content area");return}if(K.closest(".menu-content")){console.log("Prevented drag: menu content area");return}if(!B.current?.contains(K)){console.log("Prevented drag: not in drag ref area");return}if(!(K===B.current||B.current.contains(K)||K.classList.contains("move-handle")||K.closest(".move-handle"))){console.log("Prevented drag: not a header click");return}console.log("Starting drag for:",r),se.preventDefault(),se.stopPropagation(),v(!0);const ie=de.current?.getBoundingClientRect();ie&&T({x:se.clientX-ie.left,y:se.clientY-ie.top})},[r]),ae=b.useCallback(se=>{if(!y||!de.current)return;se.preventDefault();const K=se.clientX-k.x,fe=se.clientY-k.y,ie=Q(K,fe,C.width,C.height);requestAnimationFrame(()=>{y&&(g({x:ie.x,y:ie.y}),D(ie.indicator))})},[y,k,C,Q]),q=b.useCallback(()=>{v(!1),D(null),d&&d(m)},[m,d]),ce=b.useCallback(()=>{if(M){const se=R,K=I;N(se),g(K),P(!1),u&&u(se),d&&d(K)}else{F(C),U(m);const se={width:window.innerWidth-40,height:window.innerHeight-O-40},K={x:20,y:O+20};N(se),g(K),P(!0),u&&u(se),d&&d(K)}},[M,C,m,R,I,O,u,d]),we=b.useCallback(()=>{X(!0),p&&p()},[p]);b.useCallback(()=>{X(!1)},[]);const xe=b.useCallback((se,K,fe,ie)=>{const Te={width:C.width+ie.width,height:C.height+ie.height};N(Te),u&&u(Te)},[C,u]);return b.useEffect(()=>(y?(document.addEventListener("mousemove",ae),document.addEventListener("mouseup",q),document.body.style.cursor="grabbing",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",q),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",q),document.body.style.cursor="",document.body.style.userSelect=""}),[y,ae,q]),b.useEffect(()=>{const se=()=>{const K=Q(m.x,m.y,C.width,C.height);g({x:K.x,y:K.y})};return window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[m,C,Q]),o.jsxs(o.Fragment,{children:[E&&o.jsx("div",{className:"fixed z-40 dropsource-snap-indicator rounded-lg pointer-events-none",style:{left:m.x,top:m.y,width:C.width,height:C.height}}),o.jsx(Wj,{size:{width:C.width,height:C.height},onResizeStop:xe,onResizeStart:()=>j(!0),onResize:()=>j(!0),minWidth:280,minHeight:180,maxWidth:window.innerWidth-40,maxHeight:window.innerHeight-O-40,enable:{top:!M,right:!M,bottom:!M,left:!M,topRight:!M,bottomRight:!M,bottomLeft:!M,topLeft:!M},className:`fixed select-none ${y?"dragging":""} ${L?"dropsource-panel-focused":""}`,style:{left:m.x,top:m.y,zIndex:L?h+10:h,transition:y||w?"none":"all var(--transition-fast)","--floating-z-index":L?h+10:h},onMouseDown:we,tabIndex:0,"data-floating-menu":"true",children:o.jsxs("div",{ref:de,className:"dropsource-floating-card w-full h-full",style:{borderRadius:"var(--radius-sharp)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.16), 0 2px 8px rgba(0, 0, 0, 0.08)"},children:[o.jsxs("div",{ref:B,className:`flex items-center justify-between border-b select-none move-handle ${y?"dropsource-surface cursor-grabbing":"dropsource-panel cursor-grab"}`,style:{padding:"calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2)",borderBottomColor:"var(--dropsource-border)",borderTopLeftRadius:"var(--radius-sharp)",borderTopRightRadius:"var(--radius-sharp)",transition:"background-color var(--transition-fast)",minHeight:"48px",userSelect:"none"},onMouseDown:W,children:[o.jsxs("div",{className:"flex items-center dropsource-spacing-xs move-handle",children:[o.jsx(uh,{className:"w-4 h-4 dropsource-text-tertiary dropsource-icon-outlined move-handle"}),o.jsx("h3",{className:"dropsource-text-primary select-none move-handle",style:{fontSize:"var(--text-sm)",fontWeight:"500",letterSpacing:"0.02em"},children:r})]}),o.jsxs("div",{className:"flex items-center dropsource-spacing-xs",children:[o.jsx("button",{onClick:s,className:"dropsource-toolbar-button dropsource-focus-visible",style:{width:"28px",height:"28px",padding:"0"},title:"Minimize",children:o.jsx(Hl,{className:"w-3 h-3 dropsource-icon-outlined"})}),o.jsx("button",{onClick:ce,className:"dropsource-toolbar-button dropsource-focus-visible",style:{width:"28px",height:"28px",padding:"0"},title:M?"Restore":"Maximize",children:o.jsx(WD,{className:"w-3 h-3 dropsource-icon-outlined"})}),o.jsx("button",{onClick:t,className:"dropsource-toolbar-button dropsource-focus-visible hover:border-red-500 hover:text-red-400",style:{width:"28px",height:"28px",padding:"0"},title:"Close",children:o.jsx(Cr,{className:"w-3 h-3 dropsource-icon-outlined"})})]})]}),o.jsx("div",{className:"flex-1 overflow-hidden",style:{height:"calc(100% - 48px)"},children:o.jsx("div",{className:"h-full overflow-y-auto dropsource-custom-scrollbar",style:{padding:"calc(var(--spacing-unit) * 2)"},children:e})})]})})]})}function S6({minimizedCards:r,onRestoreCard:e,onCloseCard:t}){return r.length===0?null:o.jsx("div",{className:"fixed z-30",style:{bottom:"calc(var(--spacing-unit) * 3)",left:"50%",transform:"translateX(-50%)"},children:o.jsx("div",{className:"dropsource-minimize-dock dropsource-fade-in",children:r.map(s=>o.jsxs("div",{className:"dropsource-dock-tab",onClick:()=>e(s.type),children:[o.jsx("span",{style:{fontSize:"var(--text-sm)",fontWeight:"500"},children:s.title}),o.jsx("button",{onClick:n=>{n.stopPropagation(),t(s.type)},className:"dropsource-dock-tab-close dropsource-focus-visible",style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Cr,{className:"w-3 h-3"})})]},s.type))})})}function H(r,e,t){return(e=(function(s){var n=(function(i,l){if(typeof i!="object"||!i)return i;var d=i[Symbol.toPrimitive];if(d!==void 0){var u=d.call(i,l);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(i)})(s,"string");return typeof n=="symbol"?n:n+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rS(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),t.push.apply(t,s)}return t}function G(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rS(Object(t),!0).forEach((function(s){H(r,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):rS(Object(t)).forEach((function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))}))}return r}function Ct(r,e){if(r==null)return{};var t,s,n=(function(l,d){if(l==null)return{};var u={};for(var h in l)if({}.hasOwnProperty.call(l,h)){if(d.indexOf(h)>=0)continue;u[h]=l[h]}return u})(r,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(s=0;s<i.length;s++)t=i[s],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function wn(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}class sS{constructor(){H(this,"browserShadowBlurConstant",1),H(this,"DPI",96),H(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),H(this,"perfLimitSizeTotal",2097152),H(this,"maxCacheSideLimit",4096),H(this,"minCacheSideLimit",256),H(this,"disableStyleCopyPaste",!1),H(this,"enableGLFiltering",!0),H(this,"textureSize",4096),H(this,"forceGLPutImageData",!1),H(this,"cachesBoundsOfCurve",!1),H(this,"fontPaths",{}),H(this,"NUM_FRACTION_DIGITS",4)}}const it=new class extends sS{constructor(r){super(),this.configure(r)}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,r)}addFonts(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=G(G({},this.fontPaths),r)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach((r=>{delete this.fontPaths[r]}))}clearFonts(){this.fontPaths={}}restoreDefaults(r){const e=new sS,t=r?.reduce(((s,n)=>(s[n]=e[n],s)),{})||e;this.configure(t)}},Oo=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return console[r]("fabric",...t)};class cn extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class C6 extends cn{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class k6{}class j6 extends k6{testPrecision(e,t){const s="precision ".concat(t,` float;
void main(){}`),n=e.createShader(e.FRAGMENT_SHADER);return!!n&&(e.shaderSource(n,s),e.compileShader(n),!!e.getShaderParameter(n,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find((s=>this.testPrecision(t,s))),t.getExtension("WEBGL_lose_context").loseContext(),Oo("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const N6={};let nS;const gn=()=>nS||(nS={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new j6,dispose(){},copyPasteData:N6}),Ba=()=>gn().document,tf=()=>gn().window,Hj=()=>{var r;return Math.max((r=it.devicePixelRatio)!==null&&r!==void 0?r:tf().devicePixelRatio,1)},Jl=new class{constructor(){H(this,"charWidthsCache",{}),H(this,"boundsOfCurveCache",{})}getFontCache(r){let{fontFamily:e,fontStyle:t,fontWeight:s}=r;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const n=this.charWidthsCache[e],i="".concat(t.toLowerCase(),"_").concat((s+"").toLowerCase());return n[i]||(n[i]={}),n[i]}clearFontCache(r){(r=(r||"").toLowerCase())?this.charWidthsCache[r]&&delete this.charWidthsCache[r]:this.charWidthsCache={}}limitDimsByArea(r){const{perfLimitSizeTotal:e}=it,t=Math.sqrt(e*r);return[Math.floor(t),Math.floor(e/t)]}},qg="6.7.1";function Xu(){}const Oc=Math.PI/2,Sh=2*Math.PI,Ax=Math.PI/180,Dr=Object.freeze([1,0,0,1,0,0]),Rx=16,bo=.4477152502,Qe="center",dt="left",Hr="top",Zg="bottom",Vt="right",Ur="none",Ox=/\r?\n/,Uj="moving",rf="scaling",$j="rotating",Fx="rotate",Gj="skewing",xc="resizing",T6="modifyPoly",_6="modifyPath",Ch="changed",sf="scale",Yr="scaleX",Cs="scaleY",Va="skewX",Wa="skewY",er="fill",$r="stroke",kh="modified",Qi="json",Em="svg",Oe=new class{constructor(){this[Qi]=new Map,this[Em]=new Map}has(r){return this[Qi].has(r)}getClass(r){const e=this[Qi].get(r);if(!e)throw new cn("No class registered for ".concat(r));return e}setClass(r,e){e?this[Qi].set(e,r):(this[Qi].set(r.type,r),this[Qi].set(r.type.toLowerCase(),r))}getSVGClass(r){return this[Em].get(r)}setSVGClass(r,e){this[Em].set(e??r.type.toLowerCase(),r)}},jh=new class extends Array{remove(r){const e=this.indexOf(r);e>-1&&this.splice(e,1)}cancelAll(){const r=this.splice(0);return r.forEach((e=>e.abort())),r}cancelByCanvas(r){if(!r)return[];const e=this.filter((t=>{var s;return t.target===r||typeof t.target=="object"&&((s=t.target)===null||s===void 0?void 0:s.canvas)===r}));return e.forEach((t=>t.abort())),e}cancelByTarget(r){if(!r)return[];const e=this.filter((t=>t.target===r));return e.forEach((t=>t.abort())),e}};class M6{constructor(){H(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach((s=>{let[n,i]=s;this.on(n,i)})),()=>this.off(e);if(t){const s=e;return this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(t),()=>this.off(s,t)}return()=>!1}once(e,t){if(typeof e=="object"){const s=[];return Object.entries(e).forEach((n=>{let[i,l]=n;s.push(this.once(i,l))})),()=>s.forEach((n=>n()))}if(t){const s=this.on(e,(function(){for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];t.call(this,...i),s()}));return s}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const s=this.__eventListeners[e],n=s.indexOf(t);n>-1&&s.splice(n,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const s in this.__eventListeners)this._removeEventListener(s);else typeof e=="object"?Object.entries(e).forEach((s=>{let[n,i]=s;this._removeEventListener(n,i)})):this._removeEventListener(e,t)}fire(e,t){var s;if(!this.__eventListeners)return;const n=(s=this.__eventListeners[e])===null||s===void 0?void 0:s.concat();if(n)for(let i=0;i<n.length;i++)n[i].call(this,t||{})}}const oa=(r,e)=>{const t=r.indexOf(e);return t!==-1&&r.splice(t,1),r},Un=r=>{if(r===0)return 1;switch(Math.abs(r)/Oc){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},$n=r=>{if(r===0)return 0;const e=r/Oc,t=Math.sign(r);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(r)};class ne{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new ne(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new ne(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new ne(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new ne(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new ne(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new ne(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new ne(this.x/e.x,this.y/e.y)}scalarDivide(e){return new ne(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new ne(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,s=this.y-e.y;return Math.sqrt(t*t+s*s)}midPointFrom(e){return this.lerp(e)}min(e){return new ne(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new ne(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,s=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=s}clone(){return new ne(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lx;const s=$n(e),n=Un(e),i=this.subtract(t);return new ne(i.x*n-i.y*s,i.x*s+i.y*n).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new ne(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Lx=new ne(0,0),Ku=r=>!!r&&Array.isArray(r._objects);function Yj(r){class e extends r{constructor(){super(...arguments),H(this,"_objects",[])}_onObjectAdded(s){}_onObjectRemoved(s){}_onStackOrderChanged(s){}add(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];const l=this._objects.push(...n);return n.forEach((d=>this._onObjectAdded(d))),l}insertAt(s){for(var n=arguments.length,i=new Array(n>1?n-1:0),l=1;l<n;l++)i[l-1]=arguments[l];return this._objects.splice(s,0,...i),i.forEach((d=>this._onObjectAdded(d))),this._objects.length}remove(){const s=this._objects,n=[];for(var i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];return l.forEach((u=>{const h=s.indexOf(u);h!==-1&&(s.splice(h,1),n.push(u),this._onObjectRemoved(u))})),n}forEachObject(s){this.getObjects().forEach(((n,i,l)=>s(n,i,l)))}getObjects(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return n.length===0?[...this._objects]:this._objects.filter((l=>l.isType(...n)))}item(s){return this._objects[s]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(s,n){return!!this._objects.includes(s)||!!n&&this._objects.some((i=>i instanceof e&&i.contains(s,!0)))}complexity(){return this._objects.reduce(((s,n)=>s+=n.complexity?n.complexity():0),0)}sendObjectToBack(s){return!(!s||s===this._objects[0])&&(oa(this._objects,s),this._objects.unshift(s),this._onStackOrderChanged(s),!0)}bringObjectToFront(s){return!(!s||s===this._objects[this._objects.length-1])&&(oa(this._objects,s),this._objects.push(s),this._onStackOrderChanged(s),!0)}sendObjectBackwards(s,n){if(!s)return!1;const i=this._objects.indexOf(s);if(i!==0){const l=this.findNewLowerIndex(s,i,n);return oa(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}bringObjectForward(s,n){if(!s)return!1;const i=this._objects.indexOf(s);if(i!==this._objects.length-1){const l=this.findNewUpperIndex(s,i,n);return oa(this._objects,s),this._objects.splice(l,0,s),this._onStackOrderChanged(s),!0}return!1}moveObjectTo(s,n){return s!==this._objects[n]&&(oa(this._objects,s),this._objects.splice(n,0,s),this._onStackOrderChanged(s),!0)}findNewLowerIndex(s,n,i){let l;if(i){l=n;for(let d=n-1;d>=0;--d)if(s.isOverlapping(this._objects[d])){l=d;break}}else l=n-1;return l}findNewUpperIndex(s,n,i){let l;if(i){l=n;for(let d=n+1;d<this._objects.length;++d)if(s.isOverlapping(this._objects[d])){l=d;break}}else l=n+1;return l}collectObjects(s){let{left:n,top:i,width:l,height:d}=s,{includeIntersecting:u=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=[],p=new ne(n,i),m=p.add(new ne(l,d));for(let g=this._objects.length-1;g>=0;g--){const y=this._objects[g];y.selectable&&y.visible&&(u&&y.intersectsWithRect(p,m)||y.isContainedWithinRect(p,m)||u&&y.containsPoint(p)||u&&y.containsPoint(m))&&h.push(y)}return h}}return e}class Xj extends M6{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function qu(r){return tf().requestAnimationFrame(r)}function E6(r){return tf().cancelAnimationFrame(r)}let P6=0;const Fo=()=>P6++,xn=()=>{const r=Ba().createElement("canvas");if(!r||r.getContext===void 0)throw new cn("Failed to create `canvas` element");return r},D6=()=>Ba().createElement("img"),ks=r=>{const e=xn();return e.width=r.width,e.height=r.height,e},Kj=(r,e,t)=>r.toDataURL("image/".concat(e),t),qj=(r,e,t)=>new Promise(((s,n)=>{r.toBlob(s,"image/".concat(e),t)})),Wt=r=>r*Ax,Gn=r=>r/Ax,A6=r=>r.every(((e,t)=>e===Dr[t])),Vr=(r,e,t)=>new ne(r).transform(e,t),Bs=r=>{const e=1/(r[0]*r[3]-r[1]*r[2]),t=[e*r[3],-e*r[1],-e*r[2],e*r[0],0,0],{x:s,y:n}=new ne(r[4],r[5]).transform(t,!0);return t[4]=-s,t[5]=-n,t},dr=(r,e,t)=>[r[0]*e[0]+r[2]*e[1],r[1]*e[0]+r[3]*e[1],r[0]*e[2]+r[2]*e[3],r[1]*e[2]+r[3]*e[3],t?0:r[0]*e[4]+r[2]*e[5]+r[4],t?0:r[1]*e[4]+r[3]*e[5]+r[5]],zx=(r,e)=>r.reduceRight(((t,s)=>s&&t?dr(s,t,e):s||t),void 0)||Dr.concat(),Zj=r=>{let[e,t]=r;return Math.atan2(t,e)},Nh=r=>{const e=Zj(r),t=Math.pow(r[0],2)+Math.pow(r[1],2),s=Math.sqrt(t),n=(r[0]*r[3]-r[2]*r[1])/s,i=Math.atan2(r[0]*r[2]+r[1]*r[3],t);return{angle:Gn(e),scaleX:s,scaleY:n,skewX:Gn(i),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},Fc=function(r){return[1,0,0,1,r,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ha(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=Wt(r),n=Un(s),i=$n(s);return[n,i,-i,n,e?e-(n*e-i*t):0,t?t-(i*e+n*t):0]}const Ix=function(r){return[r,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,0,0]},Jj=r=>Math.tan(Wt(r)),Qj=r=>[1,0,Jj(r),1,0,0],eN=r=>[1,Jj(r),0,1,0,0],nf=r=>{let{scaleX:e=1,scaleY:t=1,flipX:s=!1,flipY:n=!1,skewX:i=0,skewY:l=0}=r,d=Ix(s?-e:e,n?-t:t);return i&&(d=dr(d,Qj(i),!0)),l&&(d=dr(d,eN(l),!0)),d},R6=r=>{const{translateX:e=0,translateY:t=0,angle:s=0}=r;let n=Fc(e,t);s&&(n=dr(n,Ha({angle:s})));const i=nf(r);return A6(i)||(n=dr(n,i)),n},Zu=function(r){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((function(s,n){if(e&&e.aborted)return n(new C6("loadImage"));const i=D6();let l;e&&(l=function(u){i.src="",n(u)},e.addEventListener("abort",l,{once:!0}));const d=function(){i.onload=i.onerror=null,l&&e?.removeEventListener("abort",l),s(i)};r?(i.onload=d,i.onerror=function(){l&&e?.removeEventListener("abort",l),n(new cn("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=r):d()}))},yc=function(r){let{signal:e,reviver:t=Xu}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((s,n)=>{const i=[];e&&e.addEventListener("abort",n,{once:!0}),Promise.all(r.map((l=>Oe.getClass(l.type).fromObject(l,{signal:e}).then((d=>(t(l,d),i.push(d),d)))))).then(s).catch((l=>{i.forEach((d=>{d.dispose&&d.dispose()})),n(l)})).finally((()=>{e&&e.removeEventListener("abort",n)}))}))},of=function(r){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((t,s)=>{const n=[];e&&e.addEventListener("abort",s,{once:!0});const i=Object.values(r).map((d=>d&&d.type&&Oe.has(d.type)?yc([d],{signal:e}).then((u=>{let[h]=u;return n.push(h),h})):d)),l=Object.keys(r);Promise.all(i).then((d=>d.reduce(((u,h,p)=>(u[l[p]]=h,u)),{}))).then(t).catch((d=>{n.forEach((u=>{u.dispose&&u.dispose()})),s(d)})).finally((()=>{e&&e.removeEventListener("abort",s)}))}))},Ua=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce(((e,t)=>(t in r&&(e[t]=r[t]),e)),{})},Bx=(r,e)=>Object.keys(r).reduce(((t,s)=>(e(r[s],s,r)&&(t[s]=r[s]),t)),{}),mt=(r,e)=>parseFloat(Number(r).toFixed(e)),vc=r=>"matrix("+r.map((e=>mt(e,it.NUM_FRACTION_DIGITS))).join(" ")+")",bs=r=>!!r&&r.toLive!==void 0,oS=r=>!!r&&typeof r.toObject=="function",iS=r=>!!r&&r.offsetX!==void 0&&"source"in r,ui=r=>!!r&&"multiSelectionStacking"in r;function tN(r){const e=r&&Is(r);let t=0,s=0;if(!r||!e)return{left:t,top:s};let n=r;const i=e.documentElement,l=e.body||{scrollLeft:0,scrollTop:0};for(;n&&(n.parentNode||n.host)&&(n=n.parentNode||n.host,n===e?(t=l.scrollLeft||i.scrollLeft||0,s=l.scrollTop||i.scrollTop||0):(t+=n.scrollLeft||0,s+=n.scrollTop||0),n.nodeType!==1||n.style.position!=="fixed"););return{left:t,top:s}}const Is=r=>r.ownerDocument||null,rN=r=>{var e;return((e=r.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},sN=function(r,e,t){let{width:s,height:n}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=s,r.height=n,i>1&&(r.setAttribute("width",(s*i).toString()),r.setAttribute("height",(n*i).toString()),e.scale(i,i))},Jg=(r,e)=>{let{width:t,height:s}=e;t&&(r.style.width=typeof t=="number"?"".concat(t,"px"):t),s&&(r.style.height=typeof s=="number"?"".concat(s,"px"):s)};function aS(r){return r.onselectstart!==void 0&&(r.onselectstart=()=>!1),r.style.userSelect=Ur,r}class nN{constructor(e){H(this,"_originalCanvasStyle",void 0),H(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(s=e)&&s.getContext!==void 0?e:e&&Ba().getElementById(e)||xn();var s;if(t.hasAttribute("data-fabric"))throw new cn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:s}=e;const{el:n}=this.lower;n.classList.remove("lower-canvas"),n.removeAttribute("data-fabric"),n.setAttribute("width","".concat(t)),n.setAttribute("height","".concat(s)),n.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:s,ctx:n}=this.lower;sN(s,n,e,t)}setCSSDimensions(e){Jg(this.lower.el,e)}calcOffset(){return(function(e){var t;const s=e&&Is(e),n={left:0,top:0};if(!s)return n;const i=((t=rN(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};n.left+=parseInt(i.borderLeftWidth,10)||0,n.top+=parseInt(i.borderTopWidth,10)||0,n.left+=parseInt(i.paddingLeft,10)||0,n.top+=parseInt(i.paddingTop,10)||0;let l={left:0,top:0};const d=s.documentElement;e.getBoundingClientRect!==void 0&&(l=e.getBoundingClientRect());const u=tN(e);return{left:l.left+u.left-(d.clientLeft||0)+n.left,top:l.top+u.top-(d.clientTop||0)+n.top}})(this.lower.el)}dispose(){gn().dispose(this.lower.el),delete this.lower}}const O6={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Dr]};class Lc extends Yj(Xj){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Lc.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new nN(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];const i=super.insertAt(e,...s);return s.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Oo("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Hj():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:s=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const n=G({width:this.width,height:this.height},e);this.elements.setDimensions(n,this.getRetinaScaling()),this.hasLostContext=!0,this.width=n.width,this.height=n.height}s||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const s=e,n=[...this.viewportTransform],i=Vr(e,Bs(n));n[0]=t,n[3]=t;const l=Vr(i,n);n[4]+=s.x-l.x,n[5]+=s.y-l.y,this.setViewportTransform(n)}setZoom(e){this.zoomToPoint(new ne(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new ne(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=qu((()=>this.renderAndReset())))}calcViewportBoundaries(){const e=this.width,t=this.height,s=Bs(this.viewportTransform),n=Vr({x:0,y:0},s),i=Vr({x:e,y:t},s),l=n.min(i),d=n.max(i);return this.vptCoords={tl:l,tr:new ne(d.x,l.y),bl:new ne(l.x,d.y),br:d}}cancelRequestedRender(){this.nextRenderHandle&&(E6(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const s=this.viewportTransform,n=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),n&&(n._set("canvas",this),n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,n)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const s=this.viewportTransform;e.save(),e.transform(...s),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let s=0,n=t.length;s<n;++s)t[s]&&t[s].render(e)}_renderBackgroundOrOverlay(e,t){const s=this["".concat(t,"Color")],n=this["".concat(t,"Image")],i=this.viewportTransform,l=this["".concat(t,"Vpt")];if(!s&&!n)return;const d=bs(s);if(s){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=d?s.toLive(e):s,l&&e.transform(...i),d){e.transform(1,0,0,1,s.offsetX||0,s.offsetY||0);const u=s.gradientTransform||s.patternTransform;u&&e.transform(...u)}e.fill(),e.restore()}if(n){e.save();const{skipOffscreen:u}=this;this.skipOffscreen=l,l&&e.transform(...i),n.render(e),this.skipOffscreen=u,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new ne(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new ne(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new ne(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new ne(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new ne(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Vr(this.getCenterPoint(),Bs(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Qe,Qe),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const s=this.clipPath,n=s&&!s.excludeFromExport?this._toObject(s,e,t):null;return G(G(G({version:qg},Ua(this,t)),{},{objects:this._objects.filter((i=>!i.excludeFromExport)).map((i=>this._toObject(i,e,t)))},this.__serializeBgOverlay(e,t)),n?{clipPath:n}:null)}_toObject(e,t,s){let n;this.includeDefaultValues||(n=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](s);return this.includeDefaultValues||(e.includeDefaultValues=!!n),i}__serializeBgOverlay(e,t){const s={},n=this.backgroundImage,i=this.overlayImage,l=this.backgroundColor,d=this.overlayColor;return bs(l)?l.excludeFromExport||(s.background=l.toObject(t)):l&&(s.background=l),bs(d)?d.excludeFromExport||(s.overlay=d.toObject(t)):d&&(s.overlay=d),n&&!n.excludeFromExport&&(s.backgroundImage=this._toObject(n,e,t)),i&&!i.excludeFromExport&&(s.overlayImage=this._toObject(i,e,t)),s}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const s=[];return this._setSVGPreamble(s,e),this._setSVGHeader(s,e),this.clipPath&&s.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(s,"background"),this._setSVGBgOverlayImage(s,"backgroundImage",t),this._setSVGObjects(s,t),this.clipPath&&s.push(`</g>
`),this._setSVGBgOverlayColor(s,"overlay"),this._setSVGBgOverlayImage(s,"overlayImage",t),s.push("</svg>"),s.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const s=t.width||"".concat(this.width),n=t.height||"".concat(this.height),i=it.NUM_FRACTION_DIGITS,l=t.viewBox;let d;if(l)d='viewBox="'.concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height,'" ');else if(this.svgViewportTransformation){const u=this.viewportTransform;d='viewBox="'.concat(mt(-u[4]/u[0],i)," ").concat(mt(-u[5]/u[3],i)," ").concat(mt(this.width/u[0],i)," ").concat(mt(this.height/u[3],i),'" ')}else d='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',n,'" ',d,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",qg,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Fo()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map((e=>{const t=this["".concat(e,"Color")];if(bs(t)){const s=this["".concat(e,"Vpt")],n=this.viewportTransform,i={isType:()=>!1,width:this.width/(s?n[0]:1),height:this.height/(s?n[3]:1)};return t.toSVG(i,{additionalTransform:s?vc(n):""})}})).join("")}createSVGFontFacesMarkup(){const e=[],t={},s=it.fontPaths;this._objects.forEach((function i(l){e.push(l),Ku(l)&&l._objects.forEach(i)})),e.forEach((i=>{if(!(l=i)||typeof l._renderText!="function")return;var l;const{styles:d,fontFamily:u}=i;!t[u]&&s[u]&&(t[u]=!0,d&&Object.values(d).forEach((h=>{Object.values(h).forEach((p=>{let{fontFamily:m=""}=p;!t[m]&&s[m]&&(t[m]=!0)}))})))}));const n=Object.keys(t).map((i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(s[i],`');
		}
`))).join("");return n?`	<style type="text/css"><![CDATA[
`.concat(n,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject((s=>{s.excludeFromExport||this._setSVGObject(e,s,t)}))}_setSVGObject(e,t,s){e.push(t.toSVG(s))}_setSVGBgOverlayImage(e,t,s){const n=this[t];n&&!n.excludeFromExport&&n.toSVG&&e.push(n.toSVG(s))}_setSVGBgOverlayColor(e,t){const s=this["".concat(t,"Color")];if(s)if(bs(s)){const n=s.repeat||"",i=this.width,l=this.height,d=this["".concat(t,"Vpt")]?vc(Bs(this.viewportTransform)):"";e.push('<rect transform="'.concat(d," translate(").concat(i/2,",").concat(l/2,')" x="').concat(s.offsetX-i/2,'" y="').concat(s.offsetY-l/2,'" width="').concat(n!=="repeat-y"&&n!=="no-repeat"||!iS(s)?i:s.source.width,'" height="').concat(n!=="repeat-x"&&n!=="no-repeat"||!iS(s)?l:s.source.height,'" fill="url(#SVGID_').concat(s.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',s,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:s}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new cn("`json` is undefined"));const n=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:l,background:d,overlayImage:u,overlay:h,clipPath:p}=n,m=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([yc(i,{reviver:t,signal:s}),of({backgroundImage:l,backgroundColor:d,overlayImage:u,overlayColor:h,clipPath:p},{signal:s})]).then((g=>{let[y,v]=g;return this.clear(),this.add(...y),this.set(n),this.set(v),this.renderOnAddRemove=m,this}))}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=ks(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:n=1,enableRetinaScaling:i=!1}=e,l=n*(i?this.getRetinaScaling():1);return Kj(this.toCanvasElement(l,e),t,s)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:s=1,multiplier:n=1,enableRetinaScaling:i=!1}=e,l=n*(i?this.getRetinaScaling():1);return qj(this.toCanvasElement(l,e),t,s)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:s,left:n,top:i,filter:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=(t||this.width)*e,u=(s||this.height)*e,h=this.getZoom(),p=this.width,m=this.height,g=this.skipControlsDrawing,y=h*e,v=this.viewportTransform,w=[y,0,0,y,(v[4]-(n||0))*e,(v[5]-(i||0))*e],j=this.enableRetinaScaling,C=ks({width:d,height:u}),N=l?this._objects.filter((k=>l(k))):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=w,this.width=d,this.height=u,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),N),this.viewportTransform=v,this.width=p,this.height=m,this.calcViewportBoundaries(),this.enableRetinaScaling=j,this.skipControlsDrawing=g,C}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),jh.cancelByCanvas(this),this.disposed=!0,new Promise(((e,t)=>{const s=()=>{this.destroy(),e(!0)};s.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=s:s()}))}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject((e=>e.dispose())),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}H(Lc,"ownDefaults",O6);const F6=["touchstart","touchmove","touchend"],L6=r=>{const e=tN(r.target),t=(function(s){const n=s.changedTouches;return n&&n[0]?n[0]:s})(r);return new ne(t.clientX+e.left,t.clientY+e.top)},Qg=r=>F6.includes(r.type)||r.pointerType==="touch",lS=r=>{r.preventDefault(),r.stopPropagation()},Ln=r=>{let e=0,t=0,s=0,n=0;for(let i=0,l=r.length;i<l;i++){const{x:d,y:u}=r[i];(d>s||!i)&&(s=d),(d<e||!i)&&(e=d),(u>n||!i)&&(n=u),(u<t||!i)&&(t=u)}return{left:e,top:t,width:s-e,height:n-t}},z6=["translateX","translateY","scaleX","scaleY"],I6=(r,e)=>Th(r,dr(e,r.calcOwnMatrix())),Th=(r,e)=>{const t=Nh(e),{translateX:s,translateY:n,scaleX:i,scaleY:l}=t,d=Ct(t,z6),u=new ne(s,n);r.flipX=!1,r.flipY=!1,Object.assign(r,d),r.set({scaleX:i,scaleY:l}),r.setPositionByOrigin(u,Qe,Qe)},B6=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},oN=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),Vx=(r,e,t)=>{const s=r/2,n=e/2,i=[new ne(-s,-n),new ne(s,-n),new ne(-s,n),new ne(s,n)].map((d=>d.transform(t))),l=Ln(i);return new ne(l.width,l.height)},af=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dr;return dr(Bs(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Dr),r)},ya=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Dr,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Dr;return r.transform(af(e,t))},V6=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Dr,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Dr;return r.transform(af(e,t),!0)},W6=(r,e,t)=>{const s=af(e,t);return Th(r,dr(s,r.calcOwnMatrix())),s},iN=(r,e)=>{var t;const{transform:{target:s}}=e;(t=s.canvas)===null||t===void 0||t.fire("object:".concat(r),G(G({},e),{},{target:s})),s.fire(r,e)},H6={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Xt=r=>typeof r=="string"?H6[r]:r-.5,_h="not-allowed";function aN(r){return Xt(r.originX)===Xt(Qe)&&Xt(r.originY)===Xt(Qe)}function cS(r){return .5-Xt(r)}const Ws=(r,e)=>r[e],lN=(r,e,t,s)=>({e:r,transform:e,pointer:new ne(t,s)});function cN(r,e){const t=r.getTotalAngle()+Gn(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function Wx(r,e,t,s,n){var i;let{target:l,corner:d}=r;const u=l.controls[d],h=((i=l.canvas)===null||i===void 0?void 0:i.getZoom())||1,p=l.padding/h,m=(function(g,y,v,w){const j=g.getRelativeCenterPoint(),C=v!==void 0&&w!==void 0?g.translateToGivenOrigin(j,Qe,Qe,v,w):new ne(g.left,g.top);return(g.angle?y.rotate(-Wt(g.angle),j):y).subtract(C)})(l,new ne(s,n),e,t);return m.x>=p&&(m.x-=p),m.x<=-p&&(m.x+=p),m.y>=p&&(m.y-=p),m.y<=p&&(m.y+=p),m.x-=u.offsetX,m.y-=u.offsetY,m}const U6=(r,e,t,s)=>{const{target:n,offsetX:i,offsetY:l}=e,d=t-i,u=s-l,h=!Ws(n,"lockMovementX")&&n.left!==d,p=!Ws(n,"lockMovementY")&&n.top!==u;return h&&n.set(dt,d),p&&n.set(Hr,u),(h||p)&&iN(Uj,lN(r,e,t,s)),h||p},dS={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Pm=(r,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r),uS=(r,e,t,s)=>{r/=255,e/=255,t/=255;const n=Math.max(r,e,t),i=Math.min(r,e,t);let l,d;const u=(n+i)/2;if(n===i)l=d=0;else{const h=n-i;switch(d=u>.5?h/(2-n-i):h/(n+i),n){case r:l=(e-t)/h+(e<t?6:0);break;case e:l=(t-r)/h+2;break;case t:l=(r-e)/h+4}l/=6}return[Math.round(360*l),Math.round(100*d),Math.round(100*u),s]},hS=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},nu=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),fS=r=>{let[e,t,s,n=1]=r;const i=Math.round(.3*e+.59*t+.11*s);return[i,i,i,n]};class ct{constructor(e){if(H(this,"isUnrecognised",!1),e)if(e instanceof ct)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,s,n,i=1]=e;this.setSource([t,s,n,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in dS&&(e=dS[e]),e==="transparent"?[255,255,255,0]:ct.sourceFromHex(e)||ct.sourceFromRgb(e)||ct.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,s]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(s,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,s]=uS(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(s,"%)")}toHsla(){const[e,t,s,n]=uS(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(s,"%,").concat(n,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,s,n]=this.getSource();return"".concat(nu(e)).concat(nu(t)).concat(nu(s)).concat(nu(Math.round(255*n)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(fS(this.getSource())),this}toBlackWhite(e){const[t,,,s]=fS(this.getSource()),n=t<(e||127)?0:255;return this.setSource([n,n,n,s]),this}overlayWith(e){e instanceof ct||(e=new ct(e));const t=this.getSource(),s=e.getSource(),[n,i,l]=t.map(((d,u)=>Math.round(.5*d+.5*s[u])));return this.setSource([n,i,l,t[3]]),this}static fromRgb(e){return ct.fromRgba(e)}static fromRgba(e){return new ct(ct.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[s,n,i]=t.slice(1,4).map((l=>{const d=parseFloat(l);return l.endsWith("%")?Math.round(2.55*d):d}));return[s,n,i,hS(t[4])]}}static fromHsl(e){return ct.fromHsla(e)}static fromHsla(e){return new ct(ct.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const s=(ct.parseAngletoDegrees(t[1])%360+360)%360/360,n=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let l,d,u;if(n===0)l=d=u=i;else{const h=i<=.5?i*(n+1):i+n-i*n,p=2*i-h;l=Pm(p,h,s+1/3),d=Pm(p,h,s),u=Pm(p,h,s-1/3)}return[Math.round(255*l),Math.round(255*d),Math.round(255*u),hS(t[4])]}static fromHex(e){return new ct(ct.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let s;s=t.length<=4?t.split("").map((u=>u+u)):t.match(/.{2}/g);const[n,i,l,d=255]=s.map((u=>parseInt(u,16)));return[n,i,l,d/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),s=parseFloat(t);return t.includes("rad")?Gn(s):t.includes("turn")?360*s:s}}const va=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rx;const t=/\D{0,2}$/.exec(r),s=parseFloat(r),n=it.DPI;switch(t?.[0]){case"mm":return s*n/25.4;case"cm":return s*n/2.54;case"in":return s*n;case"pt":return s*n/72;case"pc":return s*n/72*12;case"em":return s*e;default:return s}},$6=r=>{const[e,t]=r.trim().split(" "),[s,n]=(i=e)&&i!==Ur?[i.slice(1,4),i.slice(5,8)]:i===Ur?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:s,alignY:n}},bc=function(r,e){let t,s,n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new ct(e),l=i.getAlpha();t=i.toRgb(),l!==1&&(s=l.toString())}else t="none";return n?"".concat(r,": ").concat(t,"; ").concat(s?"".concat(r,"-opacity: ").concat(s,"; "):""):"".concat(r,'="').concat(t,'" ').concat(s?"".concat(r,'-opacity="').concat(s,'" '):"")};class dN{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",s=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):Ur,i=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",d=this.strokeLineJoin?this.strokeLineJoin:"miter",u=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=this.opacity!==void 0?this.opacity:"1",p=this.visible?"":" visibility: hidden;",m=e?"":this.getSvgFilter(),g=bc(er,this.fill);return[bc($r,this.stroke),"stroke-width: ",s,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",d,"; ","stroke-miterlimit: ",u,"; ",g,"fill-rule: ",t,"; ","opacity: ",h,";",m,p].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'.concat(vc(s));return"".concat(n).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=n,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:s,withShadow:n,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=t?"":'style="'.concat(this.getSvgStyles(),'" '),d=n?'style="'.concat(this.getSvgFilter(),'" '):"",u=this.clipPath,h=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=u&&u.absolutePositioned,m=this.stroke,g=this.fill,y=this.shadow,v=[],w=e.indexOf("COMMON_PARTS");let j;u&&(u.clipPathId="CLIPPATH_".concat(Fo()),j='<clipPath id="'.concat(u.clipPathId,`" >
`).concat(u.toClipPathSVG(s),`</clipPath>
`)),p&&v.push("<g ",d,this.getSvgCommons(),` >
`),v.push("<g ",this.getSvgTransform(!1),p?"":d+this.getSvgCommons(),` >
`);const C=[l,h,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[w]=C,bs(g)&&v.push(g.toSVG(this)),bs(m)&&v.push(m.toSVG(this)),y&&v.push(y.toSVG(this)),u&&v.push(j),v.push(e.join("")),v.push(`</g>
`),p&&v.push(`</g>
`),s?s(v.join("")):v.join("")}addPaintOrder(){return this.paintFirst!==er?' paint-order="'.concat(this.paintFirst,'" '):""}}function lf(r){return new RegExp("^("+r.join("|")+")\\b","i")}const Ci="textDecorationThickness",uN=["fontSize","fontWeight","fontFamily","fontStyle"],hN=["underline","overline","linethrough"],fN=[...uN,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],pN=[...fN,...hN,"textBackgroundColor","direction",Ci],G6=[...uN,...hN,$r,"strokeWidth",er,"deltaY","textBackgroundColor",Ci],Y6={_reNewline:Ox,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:dt,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:dt,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Ci]:66.667},nn="justify",Mh="justify-left",Ql="justify-right",ec="justify-center";var pS,mS,gS;const Vs=String.raw(pS||(pS=wn(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),Dm=String.raw(mS||(mS=wn(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),X6=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Vs+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Vs+"))?\\s+(.*)"),K6={cx:dt,x:dt,r:"radius",cy:Hr,y:Hr,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Ci},Am="font-size",Rm="clip-path";lf(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);lf(["symbol","image","marker","pattern","view","svg"]);const xS=lf(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(gS||(gS=wn(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),Vs,Dm,Vs,Dm,Vs,Dm,Vs));const q6=new ne(1,0),mN=new ne,gN=(r,e)=>r.rotate(e),e0=(r,e)=>new ne(e).subtract(r),t0=r=>r.distanceFrom(mN),r0=(r,e)=>Math.atan2(tc(r,e),J6(r,e)),Z6=r=>r0(q6,r),Hx=r=>r.eq(mN)?r:r.scalarDivide(t0(r)),xN=function(r){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Hx(new ne(-r.y,r.x).scalarMultiply(e?1:-1))},tc=(r,e)=>r.x*e.y-r.y*e.x,J6=(r,e)=>r.x*e.x+r.y*e.y,yS=(r,e,t)=>{if(r.eq(e)||r.eq(t))return!0;const s=tc(e,t),n=tc(e,r),i=tc(t,r);return s>=0?n>=0&&i<=0:!(n<=0&&i>=0)},vS="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",bS=new RegExp("(?:\\s|^)"+vS+vS+"("+Vs+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class br{constructor(e){const t=typeof e=="string"?br.parseShadow(e):e;Object.assign(this,br.ownDefaults,t),this.id=Fo()}static parseShadow(e){const t=e.trim(),[,s=0,n=0,i=0]=(bS.exec(t)||[]).map((l=>parseFloat(l)||0));return{color:(t.replace(bS,"")||"rgb(0,0,0)").trim(),offsetX:s,offsetY:n,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=gN(new ne(this.offsetX,this.offsetY),Wt(-e.angle)),s=new ct(this.color);let n=40,i=40;return e.width&&e.height&&(n=100*mt((Math.abs(t.x)+this.blur)/e.width,it.NUM_FRACTION_DIGITS)+20,i=100*mt((Math.abs(t.y)+this.blur)/e.height,it.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(n,'%" width="').concat(100+2*n,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(mt(this.blur?this.blur/2:0,it.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(mt(t.x,it.NUM_FRACTION_DIGITS),'" dy="').concat(mt(t.y,it.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(s.toRgb(),'" flood-opacity="').concat(s.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=br.ownDefaults;return this.includeDefaultValues?e:Bx(e,((s,n)=>s!==t[n]))}static async fromObject(e){return new this(e)}}H(br,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),H(br,"type","shadow"),Oe.setClass(br,"shadow");const Ea=(r,e,t)=>Math.max(r,Math.min(e,t)),Q6=[Hr,dt,Yr,Cs,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Va,Wa],Yn=[er,$r,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],ez={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:dt,originY:Hr,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:er,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},tz=(r,e,t,s)=>-t*Math.cos(r/s*Oc)+t+e,rz=()=>!1;class Ux{constructor(e){let{startValue:t,byValue:s,duration:n=500,delay:i=0,easing:l=tz,onStart:d=Xu,onChange:u=Xu,onComplete:h=Xu,abort:p=rz,target:m}=e;H(this,"_state","pending"),H(this,"durationProgress",0),H(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=n,this.delay=i,this.easing=l,this._onStart=d,this._onChange=u,this._onComplete=h,this._abort=p,this.target=m,this.startValue=t,this.byValue=s,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout((()=>qu(e)),this.delay):qu(e)}tick(e){const t=(e||+new Date)-this.startTime,s=Math.min(t,this.duration);this.durationProgress=s/this.duration;const{value:n,valueProgress:i}=this.calculate(s);this.value=Object.freeze(n),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),qu(this.tick)))}register(){jh.push(this)}unregister(){jh.remove(this)}abort(){this._state="aborted",this.unregister()}}const sz=["startValue","endValue"];class nz extends Ux{constructor(e){let{startValue:t=0,endValue:s=100}=e;super(G(G({},Ct(e,sz)),{},{startValue:t,byValue:s-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const oz=["startValue","endValue"];class iz extends Ux{constructor(e){let{startValue:t=[0],endValue:s=[100]}=e;super(G(G({},Ct(e,oz)),{},{startValue:t,byValue:s.map(((n,i)=>n-t[i]))}))}calculate(e){const t=this.startValue.map(((s,n)=>this.easing(e,s,this.byValue[n],this.duration,n)));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const az=["startValue","endValue","easing","onChange","onComplete","abort"],lz=(r,e,t,s)=>e+t*(1-Math.cos(r/s*Oc)),Om=r=>r&&((e,t,s)=>r(new ct(e).toRgba(),t,s));class cz extends Ux{constructor(e){let{startValue:t,endValue:s,easing:n=lz,onChange:i,onComplete:l,abort:d}=e,u=Ct(e,az);const h=new ct(t).getSource(),p=new ct(s).getSource();super(G(G({},u),{},{startValue:h,byValue:p.map(((m,g)=>m-h[g])),easing:n,onChange:Om(i),onComplete:Om(l),abort:Om(d)}))}calculate(e){const[t,s,n,i]=this.startValue.map(((d,u)=>this.easing(e,d,this.byValue[u],this.duration,u))),l=[...[t,s,n].map(Math.round),Ea(0,i,1)];return{value:l,valueProgress:l.map(((d,u)=>this.byValue[u]!==0?Math.abs((d-this.startValue[u])/this.byValue[u]):0)).find((d=>d!==0))||0}}}function yN(r){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(r)?new iz(r):new nz(r);return e.start(),e}function dz(r){const e=new cz(r);return e.start(),e}class Tt{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some((t=>t.eq(e)))}append(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.points=this.points.concat(t.filter((n=>!this.includes(n)))),this}static isPointContained(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(s))return e.eq(t);if(t.x===s.x)return e.x===t.x&&(n||e.y>=Math.min(t.y,s.y)&&e.y<=Math.max(t.y,s.y));if(t.y===s.y)return e.y===t.y&&(n||e.x>=Math.min(t.x,s.x)&&e.x<=Math.max(t.x,s.x));{const i=e0(t,s),l=e0(t,e).divide(i);return n?Math.abs(l.x)===Math.abs(l.y):l.x===l.y&&l.x>=0&&l.x<=1}}static isPointInPolygon(e,t){const s=new ne(e).setX(Math.min(e.x-1,...t.map((i=>i.x))));let n=0;for(let i=0;i<t.length;i++){const l=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,s);if(l.includes(e))return!0;n+=+(l.status==="Intersection")}return n%2==1}static intersectLineLine(e,t,s,n){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],l=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const d=t.x-e.x,u=t.y-e.y,h=n.x-s.x,p=n.y-s.y,m=e.x-s.x,g=e.y-s.y,y=h*g-p*m,v=d*g-u*m,w=p*d-h*u;if(w!==0){const j=y/w,C=v/w;return(i||0<=j&&j<=1)&&(l||0<=C&&C<=1)?new Tt("Intersection").append(new ne(e.x+j*d,e.y+j*u)):new Tt}if(y===0||v===0){const j=i||l||Tt.isPointContained(e,s,n)||Tt.isPointContained(t,s,n)||Tt.isPointContained(s,e,t)||Tt.isPointContained(n,e,t);return new Tt(j?"Coincident":void 0)}return new Tt("Parallel")}static intersectSegmentLine(e,t,s,n){return Tt.intersectLineLine(e,t,s,n,!1,!0)}static intersectSegmentSegment(e,t,s,n){return Tt.intersectLineLine(e,t,s,n,!1,!1)}static intersectLinePolygon(e,t,s){let n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new Tt,l=s.length;for(let d,u,h,p=0;p<l;p++){if(d=s[p],u=s[(p+1)%l],h=Tt.intersectLineLine(e,t,d,u,n,!1),h.status==="Coincident")return h;i.append(...h.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,s){return Tt.intersectLinePolygon(e,t,s,!1)}static intersectPolygonPolygon(e,t){const s=new Tt,n=e.length,i=[];for(let l=0;l<n;l++){const d=e[l],u=e[(l+1)%n],h=Tt.intersectSegmentPolygon(d,u,t);h.status==="Coincident"?(i.push(h),s.append(d,u)):s.append(...h.points)}return i.length>0&&i.length===e.length?new Tt("Coincident"):(s.points.length>0&&(s.status="Intersection"),s)}static intersectPolygonRectangle(e,t,s){const n=t.min(s),i=t.max(s),l=new ne(i.x,n.y),d=new ne(n.x,i.y);return Tt.intersectPolygonPolygon(e,[n,l,i,d])}}class uz extends Xj{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Vr(e,this.group.calcTransformMatrix()):e}setXY(e,t,s){this.group&&(e=Vr(e,Bs(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,s)}getRelativeXY(){return new ne(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,s)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:s,bl:n}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,s,n];if(this.group){const l=this.group.calcTransformMatrix();return i.map((d=>Vr(d,l)))}return i}intersectsWithRect(e,t){return Tt.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Tt.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every((t=>e.containsPoint(t)))}isContainedWithinRect(e,t){const{left:s,top:n,width:i,height:l}=this.getBoundingRect();return s>=e.x&&s+i<=t.x&&n>=e.y&&n+l<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Tt.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some((s=>s.x<=t.x&&s.x>=e.x&&s.y<=t.y&&s.y>=e.y))||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every((s=>(s.x>=t.x||s.x<=e.x)&&(s.y>=t.y||s.y<=e.y)))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Ln(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Yr,e),this._set(Cs,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Gn(Zj(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||Dr.concat()}calcACoords(){const e=Ha({angle:this.angle}),{x:t,y:s}=this.getRelativeCenterPoint(),n=Fc(t,s),i=dr(n,e),l=this._getTransformedDimensions(),d=l.x/2,u=l.y/2;return{tl:Vr({x:-d,y:-u},i),tr:Vr({x:d,y:-u},i),bl:Vr({x:-d,y:u},i),br:Vr({x:d,y:u},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Xt(this.originX),Xt(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const s=this.transformMatrixKey(e),n=this.matrixCache;return n&&n.key.every(((i,l)=>i===s[l]))?n.value:(this.group&&(t=dr(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:s,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const s=this.getRelativeCenterPoint(),n={angle:this.angle,translateX:s.x,translateY:s.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=R6(n);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new ne(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=G({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),s=t.strokeWidth;let n=s,i=0;this.strokeUniform&&(n=0,i=s);const l=t.width+n,d=t.height+n;let u;return u=t.skewX===0&&t.skewY===0?new ne(l*t.scaleX,d*t.scaleY):Vx(l,d,nf(t)),u.scalarAdd(i)}translateToGivenOrigin(e,t,s,n,i){let l=e.x,d=e.y;const u=Xt(n)-Xt(t),h=Xt(i)-Xt(s);if(u||h){const p=this._getTransformedDimensions();l+=u*p.x,d+=h*p.y}return new ne(l,d)}translateToCenterPoint(e,t,s){if(t===Qe&&s===Qe)return e;const n=this.translateToGivenOrigin(e,t,s,Qe,Qe);return this.angle?n.rotate(Wt(this.angle),e):n}translateToOriginPoint(e,t,s){const n=this.translateToGivenOrigin(e,Qe,Qe,t,s);return this.angle?n.rotate(Wt(this.angle),e):n}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Vr(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new ne(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,s){const n=this.translateToCenterPoint(e,t,s),i=this.translateToOriginPoint(n,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),dt,Hr)}}const hz=["type"],fz=["extraParam"];let Dn=class Ju extends uz{static getDefaults(){return Ju.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Oo("warn","Setting type has no effect",e)}constructor(e){super(),H(this,"_cacheContext",null),Object.assign(this,Ju.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=xn(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,s=e.height,n=it.maxCacheSideLimit,i=it.minCacheSideLimit;if(t<=n&&s<=n&&t*s<=it.perfLimitSizeTotal)return t<i&&(e.width=i),s<i&&(e.height=i),e;const l=t/s,[d,u]=Jl.limitDimsByArea(l),h=Ea(i,d,n),p=Ea(i,u,n);return t>h&&(e.zoomX/=t/h,e.width=h,e.capped=!0),s>p&&(e.zoomY/=s/p,e.height=p,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),s=t.x*e.x/this.scaleX,n=t.y*e.y/this.scaleY;return{width:Math.ceil(s+2),height:Math.ceil(n+2),zoomX:e.x,zoomY:e.y,x:s,y:n}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:s,height:n,zoomX:i,zoomY:l,x:d,y:u}=this._limitCacheSize(this._getCacheCanvasDimensions()),h=s!==e.width||n!==e.height,p=this.zoomX!==i||this.zoomY!==l;if(!e||!t)return!1;if(h||p){s!==e.width||n!==e.height?(e.width=s,e.height=n):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const m=d/2,g=u/2;return this.cacheTranslationX=Math.round(e.width/2-m)+m,this.cacheTranslationY=Math.round(e.height/2-g)+g,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(i,l),this.zoomX=i,this.zoomY=l,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,s=this.calcTransformMatrix(!t);e.transform(s[0],s[1],s[2],s[3],s[4],s[5])}getObjectScaling(){if(!this.group)return new ne(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Nh(this.calcTransformMatrix());return new ne(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),s=this.getCanvasRetinaScaling();return e.scalarMultiply(t*s)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Yr&&e!==Cs||(t=this._constrainScale(t)),e===Yr&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof br||(t=new br(t));const s=this[e]!==t;return this[e]=t,s&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||s&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:s,cacheTranslationX:n,cacheTranslationY:i}=this,{width:l,height:d}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:s,cacheTranslationX:n,cacheTranslationY:i,width:l,height:d,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===$r&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,s){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0),e.restore()}drawObject(e,t,s){const n=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,s),this.fill=n,this.stroke=i}createClipPathLayer(e,t){const s=ks(t),n=s.getContext("2d");if(n.translate(t.cacheTranslationX,t.cacheTranslationY),n.scale(t.zoomX,t.zoomY),e._cacheCanvas=s,t.parentClipPaths.forEach((i=>{i.transform(n)})),t.parentClipPaths.push(e),e.absolutePositioned){const i=Bs(this.calcTransformMatrix());n.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(n),e.drawObject(n,!0,t),s}_drawClipPath(e,t,s){if(!t)return;t._transformDone=!0;const n=this.createClipPathLayer(t,s);this.drawClipPathOnCache(e,t,n)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,s=this._cacheContext;return!(!t||!s||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&s&&!e&&(s.save(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),s.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const s=t.stroke;s&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,bs(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?this._applyPatternForTransformedGradient(e,s):(e.strokeStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:s}=t;s&&(bs(s)?(e.fillStyle=s.toLive(e),this._applyPatternGradientTransform(e,s)):e.fillStyle=s)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,s=this.canvas,n=this.getCanvasRetinaScaling(),[i,,,l]=s?.viewportTransform||Dr,d=i*n,u=l*n,h=t.nonScaling?new ne(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*it.browserShadowBlurConstant*(d+u)*(h.x+h.y)/4,e.shadowOffsetX=t.offsetX*d*h.x,e.shadowOffsetY=t.offsetY*u*h.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!bs(t))return{offsetX:0,offsetY:0};const s=t.gradientTransform||t.patternTransform,n=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,n,i):e.transform(1,0,0,1,n,i),s&&e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),{offsetX:n,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===$r?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var s;const n=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),l=n.x/this.scaleX/i,d=n.y/this.scaleY/i,u=ks({width:Math.ceil(l),height:Math.ceil(d)}),h=u.getContext("2d");h&&(h.beginPath(),h.moveTo(0,0),h.lineTo(l,0),h.lineTo(l,d),h.lineTo(0,d),h.closePath(),h.translate(l/2,d/2),h.scale(n.zoomX/this.scaleX/i,n.zoomY/this.scaleY/i),this._applyPatternGradientTransform(h,t),h.fillStyle=t.toLive(e),h.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/n.zoomX,i*this.scaleY/n.zoomY),e.strokeStyle=(s=h.createPattern(u,"no-repeat"))!==null&&s!==void 0?s:"")}_findCenterFromElement(){return new ne(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Oe.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=oN(this),s=this.group,n=this.shadow,i=Math.abs,l=e.enableRetinaScaling?Hj():1,d=(e.multiplier||1)*l,u=e.canvasProvider||(N=>new Lc(N,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&B6(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&W6(this,this.getViewportTransform()),this.setCoords();const h=xn(),p=this.getBoundingRect(),m=this.shadow,g=new ne;if(m){const N=m.blur,k=m.nonScaling?new ne(1,1):this.getObjectScaling();g.x=2*Math.round(i(m.offsetX)+N)*i(k.x),g.y=2*Math.round(i(m.offsetY)+N)*i(k.y)}const y=p.width+g.x,v=p.height+g.y;h.width=Math.ceil(y),h.height=Math.ceil(v);const w=u(h);e.format==="jpeg"&&(w.backgroundColor="#fff"),this.setPositionByOrigin(new ne(w.width/2,w.height/2),Qe,Qe);const j=this.canvas;w._objects=[this],this.set("canvas",w),this.setCoords();const C=w.toCanvasElement(d||1,e);return this.set("canvas",j),this.shadow=n,s&&(this.group=s),this.set(t),this.setCoords(),w._objects=[],w.destroy(),C}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Kj(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return qj(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:s,originY:n}=this;if(t){const{x:i,y:l}=this.getRelativeCenterPoint();this.originX=Qe,this.originY=Qe,this.left=i,this.top=l}if(this.set("angle",e),t){const{x:i,y:l}=this.translateToOriginPoint(this.getRelativeCenterPoint(),s,n);this.left=i,this.top=l,this.originX=s,this.originY=n}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){jh.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&gn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce(((s,n)=>{let[i,l]=n;return s[i]=this._animate(i,l,t),s}),{})}_animate(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=e.split("."),i=this.constructor.colorProperties.includes(n[n.length-1]),{abort:l,startValue:d,onChange:u,onComplete:h}=s,p=G(G({},s),{},{target:this,startValue:d??n.reduce(((m,g)=>m[g]),this),endValue:t,abort:l?.bind(this),onChange:(m,g,y)=>{n.reduce(((v,w,j)=>(j===n.length-1&&(v[w]=m),v[w])),this),u&&u(m,g,y)},onComplete:(m,g,y)=>{this.setCoords(),h&&h(m,g,y)}});return i?dz(p):yN(p)}isDescendantOf(e){const{parent:t,group:s}=this;return t===e||s===e||!!t&&t.isDescendantOf(e)||!!s&&s!==t&&s.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),s=e.getAncestors();if(t.length===0&&s.length>0&&this===s[s.length-1])return{fork:[],otherFork:[e,...s.slice(0,s.length-1)],common:[this]};for(let n,i=0;i<t.length;i++){if(n=t[i],n===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let l=0;l<s.length;l++){if(this===s[l])return{fork:[],otherFork:[e,...s.slice(0,l)],common:[this,...t]};if(n===s[l])return{fork:[this,...t.slice(0,i)],otherFork:[e,...s.slice(0,l)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...s],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const s=t.common[0]||this.canvas;if(!s)return;const n=t.fork.pop(),i=t.otherFork.pop(),l=s._objects.indexOf(n),d=s._objects.indexOf(i);return l>-1&&l>d}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Ju.customProperties,this.constructor.customProperties||[]);let t;const s=it.NUM_FRACTION_DIGITS,{clipPath:n,fill:i,stroke:l,shadow:d,strokeDashArray:u,left:h,top:p,originX:m,originY:g,width:y,height:v,strokeWidth:w,strokeLineCap:j,strokeDashOffset:C,strokeLineJoin:N,strokeUniform:k,strokeMiterLimit:T,scaleX:E,scaleY:D,angle:M,flipX:P,flipY:R,opacity:F,visible:I,backgroundColor:U,fillRule:L,paintFirst:X,globalCompositeOperation:de,skewX:B,skewY:V}=this;n&&!n.excludeFromExport&&(t=n.toObject(e.concat("inverted","absolutePositioned")));const O=Q=>mt(Q,s),Z=G(G({},Ua(this,e)),{},{type:this.constructor.type,version:qg,originX:m,originY:g,left:O(h),top:O(p),width:O(y),height:O(v),fill:oS(i)?i.toObject():i,stroke:oS(l)?l.toObject():l,strokeWidth:O(w),strokeDashArray:u&&u.concat(),strokeLineCap:j,strokeDashOffset:C,strokeLineJoin:N,strokeUniform:k,strokeMiterLimit:O(T),scaleX:O(E),scaleY:O(D),angle:O(M),flipX:P,flipY:R,opacity:O(F),shadow:d&&d.toObject(),visible:I,backgroundColor:U,fillRule:L,paintFirst:X,globalCompositeOperation:de,skewX:O(B),skewY:O(V)},t?{clipPath:t}:null);return this.includeDefaultValues?Z:this._removeDefaultValues(Z)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),s=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return Bx(e,((n,i)=>{if(i===dt||i===Hr||i==="type")return!0;const l=s[i];return n!==l&&!(Array.isArray(n)&&Array.isArray(l)&&n.length===0&&l.length===0)}))}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Ct(e,hz),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:n}=s,i=Ct(s,fz);return of(t,i).then((l=>n?(delete l[n],new this(t[n],l)):new this(l)))}static fromObject(e,t){return this._fromObject(e,t)}};H(Dn,"stateProperties",Q6),H(Dn,"cacheProperties",Yn),H(Dn,"ownDefaults",ez),H(Dn,"type","FabricObject"),H(Dn,"colorProperties",[er,$r,"backgroundColor"]),H(Dn,"customProperties",[]),Oe.setClass(Dn),Oe.setClass(Dn,"object");const $a=(r,e,t)=>(s,n,i,l)=>{const d=e(s,n,i,l);return d&&iN(r,G(G({},lN(s,n,i,l)),t)),d};function Ga(r){return(e,t,s,n)=>{const{target:i,originX:l,originY:d}=t,u=i.getRelativeCenterPoint(),h=i.translateToOriginPoint(u,l,d),p=r(e,t,s,n);return i.setPositionByOrigin(h,t.originX,t.originY),p}}const wS=$a(xc,Ga(((r,e,t,s)=>{const n=Wx(e,e.originX,e.originY,t,s);if(Xt(e.originX)===Xt(Qe)||Xt(e.originX)===Xt(Vt)&&n.x<0||Xt(e.originX)===Xt(dt)&&n.x>0){const{target:i}=e,l=i.strokeWidth/(i.strokeUniform?i.scaleX:1),d=aN(e)?2:1,u=i.width,h=Math.abs(n.x*d/i.scaleX)-l;return i.set("width",Math.max(h,1)),u!==i.width}return!1})));function pz(r,e,t,s,n){s=s||{};const i=this.sizeX||s.cornerSize||n.cornerSize,l=this.sizeY||s.cornerSize||n.cornerSize,d=s.transparentCorners!==void 0?s.transparentCorners:n.transparentCorners,u=d?$r:er,h=!d&&(s.cornerStrokeColor||n.cornerStrokeColor);let p,m=e,g=t;r.save(),r.fillStyle=s.cornerColor||n.cornerColor||"",r.strokeStyle=s.cornerStrokeColor||n.cornerStrokeColor||"",i>l?(p=i,r.scale(1,l/i),g=t*i/l):l>i?(p=l,r.scale(i/l,1),m=e*l/i):p=i,r.beginPath(),r.arc(m,g,p/2,0,Sh,!1),r[u](),h&&r.stroke(),r.restore()}function mz(r,e,t,s,n){s=s||{};const i=this.sizeX||s.cornerSize||n.cornerSize,l=this.sizeY||s.cornerSize||n.cornerSize,d=s.transparentCorners!==void 0?s.transparentCorners:n.transparentCorners,u=d?$r:er,h=!d&&(s.cornerStrokeColor||n.cornerStrokeColor),p=i/2,m=l/2;r.save(),r.fillStyle=s.cornerColor||n.cornerColor||"",r.strokeStyle=s.cornerStrokeColor||n.cornerStrokeColor||"",r.translate(e,t);const g=n.getTotalAngle();r.rotate(Wt(g)),r["".concat(u,"Rect")](-p,-m,i,l),h&&r.strokeRect(-p,-m,i,l),r.restore()}class Os{constructor(e){H(this,"visible",!0),H(this,"actionName",sf),H(this,"angle",0),H(this,"x",0),H(this,"y",0),H(this,"offsetX",0),H(this,"offsetY",0),H(this,"sizeX",0),H(this,"sizeY",0),H(this,"touchSizeX",0),H(this,"touchSizeY",0),H(this,"cursorStyle","crosshair"),H(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,s,n){var i;let{tl:l,tr:d,br:u,bl:h}=n;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&Tt.isPointInPolygon(s,[l,d,u,h])}getActionHandler(e,t,s){return this.actionHandler}getMouseDownHandler(e,t,s){return this.mouseDownHandler}getMouseUpHandler(e,t,s){return this.mouseUpHandler}cursorStyleHandler(e,t,s){return t.cursorStyle}getActionName(e,t,s){return t.actionName}getVisibility(e,t){var s,n;return(s=(n=e._controlsVisibility)===null||n===void 0?void 0:n[t])!==null&&s!==void 0?s:this.visible}setVisibility(e,t,s){this.visible=e}positionHandler(e,t,s,n){return new ne(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,s,n,i,l){const d=zx([Fc(s,n),Ha({angle:e}),Ix((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new ne(-.5,-.5).transform(d),tr:new ne(.5,-.5).transform(d),br:new ne(.5,.5).transform(d),bl:new ne(-.5,.5).transform(d)}}render(e,t,s,n,i){((n=n||{}).cornerStyle||i.cornerStyle)==="circle"?pz.call(this,e,t,s,n,i):mz.call(this,e,t,s,n,i)}}const gz=(r,e,t)=>t.lockRotation?_h:e.cursorStyle,xz=$a($j,Ga(((r,e,t,s)=>{let{target:n,ex:i,ey:l,theta:d,originX:u,originY:h}=e;const p=n.translateToOriginPoint(n.getRelativeCenterPoint(),u,h);if(Ws(n,"lockRotation"))return!1;const m=Math.atan2(l-p.y,i-p.x),g=Math.atan2(s-p.y,t-p.x);let y=Gn(g-m+d);if(n.snapAngle&&n.snapAngle>0){const w=n.snapAngle,j=n.snapThreshold||w,C=Math.ceil(y/w)*w,N=Math.floor(y/w)*w;Math.abs(y-N)<j?y=N:Math.abs(y-C)<j&&(y=C)}y<0&&(y=360+y),y%=360;const v=n.angle!==y;return n.angle=y,v})));function vN(r,e){const t=e.canvas,s=r[t.uniScaleKey];return t.uniformScaling&&!s||!t.uniformScaling&&s}function bN(r,e,t){const s=Ws(r,"lockScalingX"),n=Ws(r,"lockScalingY");if(s&&n||!e&&(s||n)&&t||s&&e==="x"||n&&e==="y")return!0;const{width:i,height:l,strokeWidth:d}=r;return i===0&&d===0&&e!=="y"||l===0&&d===0&&e!=="x"}const yz=["e","se","s","sw","w","nw","n","ne","e"],$l=(r,e,t)=>{const s=vN(r,t);if(bN(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",s))return _h;const n=cN(t,e);return"".concat(yz[n],"-resize")};function $x(r,e,t,s){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,l=n.by,d=vN(r,i);let u,h,p,m,g,y;if(bN(i,l,d))return!1;if(e.gestureScale)h=e.scaleX*e.gestureScale,p=e.scaleY*e.gestureScale;else{if(u=Wx(e,e.originX,e.originY,t,s),g=l!=="y"?Math.sign(u.x||e.signX||1):1,y=l!=="x"?Math.sign(u.y||e.signY||1):1,e.signX||(e.signX=g),e.signY||(e.signY=y),Ws(i,"lockScalingFlip")&&(e.signX!==g||e.signY!==y))return!1;if(m=i._getTransformedDimensions(),d&&!l){const j=Math.abs(u.x)+Math.abs(u.y),{original:C}=e,N=j/(Math.abs(m.x*C.scaleX/i.scaleX)+Math.abs(m.y*C.scaleY/i.scaleY));h=C.scaleX*N,p=C.scaleY*N}else h=Math.abs(u.x*i.scaleX/m.x),p=Math.abs(u.y*i.scaleY/m.y);aN(e)&&(h*=2,p*=2),e.signX!==g&&l!=="y"&&(e.originX=cS(e.originX),h*=-1,e.signX=g),e.signY!==y&&l!=="x"&&(e.originY=cS(e.originY),p*=-1,e.signY=y)}const v=i.scaleX,w=i.scaleY;return l?(l==="x"&&i.set(Yr,h),l==="y"&&i.set(Cs,p)):(!Ws(i,"lockScalingX")&&i.set(Yr,h),!Ws(i,"lockScalingY")&&i.set(Cs,p)),v!==i.scaleX||w!==i.scaleY}const ou=$a(rf,Ga(((r,e,t,s)=>$x(r,e,t,s)))),vz=$a(rf,Ga(((r,e,t,s)=>$x(r,e,t,s,{by:"x"})))),bz=$a(rf,Ga(((r,e,t,s)=>$x(r,e,t,s,{by:"y"})))),wz=["target","ex","ey","skewingSide"],Fm={x:{counterAxis:"y",scale:Yr,skew:Va,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Cs,skew:Wa,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Sz=["ns","nesw","ew","nwse"],Cz=(r,e,t)=>{if(e.x!==0&&Ws(t,"lockSkewingY")||e.y!==0&&Ws(t,"lockSkewingX"))return _h;const s=cN(t,e)%4;return"".concat(Sz[s],"-resize")};function wN(r,e,t,s,n){const{target:i}=t,{counterAxis:l,origin:d,lockSkewing:u,skew:h,flip:p}=Fm[r];if(Ws(i,u))return!1;const{origin:m,flip:g}=Fm[l],y=Xt(t[m])*(i[g]?-1:1),v=-Math.sign(y)*(i[p]?-1:1),w=.5*-((i[h]===0&&Wx(t,Qe,Qe,s,n)[r]>0||i[h]>0?1:-1)*v)+.5;return $a(Gj,Ga(((C,N,k,T)=>(function(E,D,M){let{target:P,ex:R,ey:F,skewingSide:I}=D,U=Ct(D,wz);const{skew:L}=Fm[E],X=M.subtract(new ne(R,F)).divide(new ne(P.scaleX,P.scaleY))[E],de=P[L],B=U[L],V=Math.tan(Wt(B)),O=E==="y"?P._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:P._getTransformedDimensions({scaleX:1,scaleY:1}).y,Z=2*X*I/Math.max(O,1)+V,Q=Gn(Math.atan(Z));P.set(L,Q);const W=de!==P[L];if(W&&E==="y"){const{skewX:ae,scaleX:q}=P,ce=P._getTransformedDimensions({skewY:de}),we=P._getTransformedDimensions(),xe=ae!==0?ce.x/we.x:1;xe!==1&&P.set(Yr,xe*q)}return W})(r,N,new ne(k,T)))))(e,G(G({},t),{},{[d]:w,skewingSide:v}),s,n)}const kz=(r,e,t,s)=>wN("x",r,e,t,s),jz=(r,e,t,s)=>wN("y",r,e,t,s);function cf(r,e){return r[e.canvas.altActionKey]}const iu=(r,e,t)=>{const s=cf(r,t);return e.x===0?s?Va:Cs:e.y===0?s?Wa:Yr:""},fa=(r,e,t)=>cf(r,t)?Cz(0,e,t):$l(r,e,t),SS=(r,e,t,s)=>cf(r,e.target)?jz(r,e,t,s):vz(r,e,t,s),CS=(r,e,t,s)=>cf(r,e.target)?kz(r,e,t,s):bz(r,e,t,s),SN=()=>({ml:new Os({x:-.5,y:0,cursorStyleHandler:fa,actionHandler:SS,getActionName:iu}),mr:new Os({x:.5,y:0,cursorStyleHandler:fa,actionHandler:SS,getActionName:iu}),mb:new Os({x:0,y:.5,cursorStyleHandler:fa,actionHandler:CS,getActionName:iu}),mt:new Os({x:0,y:-.5,cursorStyleHandler:fa,actionHandler:CS,getActionName:iu}),tl:new Os({x:-.5,y:-.5,cursorStyleHandler:$l,actionHandler:ou}),tr:new Os({x:.5,y:-.5,cursorStyleHandler:$l,actionHandler:ou}),bl:new Os({x:-.5,y:.5,cursorStyleHandler:$l,actionHandler:ou}),br:new Os({x:.5,y:.5,cursorStyleHandler:$l,actionHandler:ou}),mtr:new Os({x:0,y:-.5,actionHandler:xz,cursorStyleHandler:gz,offsetY:-40,withConnection:!0,actionName:Fx})}),Nz=()=>({mr:new Os({x:.5,y:0,actionHandler:wS,cursorStyleHandler:fa,actionName:xc}),ml:new Os({x:-.5,y:0,actionHandler:wS,cursorStyleHandler:fa,actionName:xc})}),Tz=()=>G(G({},SN()),Nz());class wc extends Dn{static getDefaults(){return G(G({},super.getDefaults()),wc.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),wc.ownDefaults),this.setOptions(e)}static createControls(){return{controls:SN()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,s=t.target,n=t.action;if(this===s&&n&&n.startsWith(sf))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const s=Object.entries(this.oCoords);for(let n=s.length-1;n>=0;n--){const[i,l]=s[n],d=this.controls[i];if(d.shouldActivate(i,this,e,t?l.touchCorner:l.corner))return this.__corner=i,{key:i,control:d,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),s=Fc(t.x,t.y),n=Ha({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=dr(s,n),l=dr(e,i),d=dr(l,[1/e[0],0,0,1/e[3],0,0]),u=this.group?Nh(this.calcTransformMatrix()):void 0;u&&(u.scaleX=Math.abs(u.scaleX),u.scaleY=Math.abs(u.scaleY));const h=this._calculateCurrentDimensions(u),p={};return this.forEachControl(((m,g)=>{const y=m.positionHandler(h,d,this,m);p[g]=Object.assign(y,this._calcCornerCoords(m,y))})),p}_calcCornerCoords(e,t){const s=this.getTotalAngle();return{corner:e.calcCornerCoords(s,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(s,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),s=this._calculateCurrentDimensions(),n=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/n[0],1/n[3]),e.rotate(Wt(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-s.x/2,-s.y/2,s.x,s.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=G({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},s);e.save(),e.strokeStyle=n.borderColor,this._setLineDash(e,n.borderDashArray),this.strokeBorders(e,t),n.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:s,hasControls:n}=this,i=G({hasBorders:s,hasControls:n},t),l=this.getViewportTransform(),d=i.hasBorders,u=i.hasControls,h=dr(l,this.calcTransformMatrix()),p=Nh(h);e.save(),e.translate(p.translateX,p.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(p.angle-=180),e.rotate(Wt(this.group?p.angle:this.angle)),d&&this.drawBorders(e,p,t),u&&this.drawControls(e,t),e.restore()}drawBorders(e,t,s){let n;if(s&&s.forActiveSelection||this.group){const i=Vx(this.width,this.height,nf(t)),l=this.isStrokeAccountedForInDimensions()?Lx:(this.strokeUniform?new ne().scalarAdd(this.canvas?this.canvas.getZoom():1):new ne(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);n=i.add(l).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else n=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,n,s)}drawControlsConnectingLines(e,t){let s=!1;e.beginPath(),this.forEachControl(((n,i)=>{n.withConnection&&n.getVisibility(this,i)&&(s=!0,e.moveTo(n.x*t.x,n.y*t.y),e.lineTo(n.x*t.x+n.offsetX,n.y*t.y+n.offsetY))})),s&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const s=this.getCanvasRetinaScaling(),{cornerStrokeColor:n,cornerDashArray:i,cornerColor:l}=this,d=G({cornerStrokeColor:n,cornerDashArray:i,cornerColor:l},t);e.setTransform(s,0,0,s,0,0),e.strokeStyle=e.fillStyle=d.cornerColor,this.transparentCorners||(e.strokeStyle=d.cornerStrokeColor),this._setLineDash(e,d.cornerDashArray),this.forEachControl(((u,h)=>{if(u.getVisibility(this,h)){const p=this.oCoords[h];u.render(e,p.x,p.y,d,this)}})),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach((t=>{let[s,n]=t;return this.setControlVisible(s,n)}))}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const s=this.canvas.viewportTransform;t.save(),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this.transform(t);const n=this.width+4,i=this.height+4;return t.clearRect(-n/2,-i/2,n,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function CN(r,e){return e.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((s=>{s!=="constructor"&&Object.defineProperty(r.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s)||Object.create(null))}))})),r}H(wc,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class wr extends wc{}CN(wr,[dN]),Oe.setClass(wr),Oe.setClass(wr,"object");const _z=(r,e,t,s)=>{const n=2*(s=Math.round(s))+1,{data:i}=r.getImageData(e-s,t-s,n,n);for(let l=3;l<i.length;l+=4)if(i[l]>0)return!1;return!0};class kN{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new ne(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new ne(1/this.options.scaleX,1/this.options.scaleY):new ne(1,1)}createSideVector(e,t){const s=e0(e,t);return this.options.strokeUniform?s.multiply(this.scale):s}projectOrthogonally(e,t,s){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,s)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new ne(e);return t.y+=t.x*Math.tan(Wt(this.options.skewY)),t.x+=t.y*Math.tan(Wt(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const Mz=new ne;class ba extends kN{static getOrthogonalRotationFactor(e,t){const s=t?r0(e,t):Z6(e);return Math.abs(s)<Oc?-1:1}constructor(e,t,s,n){super(n),H(this,"AB",void 0),H(this,"AC",void 0),H(this,"alpha",void 0),H(this,"bisector",void 0),this.A=new ne(e),this.B=new ne(t),this.C=new ne(s),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=r0(this.AB,this.AC),this.bisector=Hx(gN(this.AB.eq(Mz)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(e,t),i=xN(n),l=ba.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,s*l)}projectBevel(){const e=[];return(this.alpha%Sh==0?[this.B]:[this.B,this.C]).forEach((t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))})),e}projectMiter(){const e=[],t=Math.abs(this.alpha),s=1/Math.sin(t/2),n=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*s),i=this.options.strokeUniform?t0(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return t0(n)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(n))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const s=[],n=new ne(ba.getOrthogonalRotationFactor(this.bisector),ba.getOrthogonalRotationFactor(new ne(this.bisector.y,this.bisector.x)));return[new ne(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n),new ne(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n)].forEach((i=>{yS(i,e,t)&&s.push(this.A.add(i))})),s}projectRoundWithSkew(e,t){const s=[],{skewX:n,skewY:i,scaleX:l,scaleY:d,strokeUniform:u}=this.options,h=new ne(Math.tan(Wt(n)),Math.tan(Wt(i))),p=this.strokeProjectionMagnitude,m=u?p/d/Math.sqrt(1/d**2+1/l**2*h.y**2):p/Math.sqrt(1+h.y**2),g=new ne(Math.sqrt(Math.max(p**2-m**2,0)),m),y=u?p/Math.sqrt(1+h.x**2*(1/d)**2/(1/l+1/l*h.x*h.y)**2):p/Math.sqrt(1+h.x**2/(1+h.x*h.y)**2),v=new ne(y,Math.sqrt(Math.max(p**2-y**2,0)));return[v,v.scalarMultiply(-1),g,g.scalarMultiply(-1)].map((w=>this.applySkew(u?w.multiply(this.strokeUniformScalar):w))).forEach((w=>{yS(w,e,t)&&s.push(this.applySkew(this.A).add(w))})),s}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Sh==0,s=this.applySkew(this.A),n=e[t?0:2].subtract(s),i=e[t?1:0].subtract(s),l=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),d=tc(n,l)>0,u=d?n:i,h=d?i:n;return this.isSkewed()?e.push(...this.projectRoundWithSkew(u,h)):e.push(...this.projectRoundNoSkew(u,h)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map((e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector})))}}class kS extends kN{constructor(e,t,s){super(s),this.A=new ne(e),this.T=new ne(t)}calcOrthogonalProjection(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(e,t);return this.scaleUnitVector(xN(n),s)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new ne(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new ba(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new ne(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),s=this.scaleUnitVector(Hx(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),n=this.A.add(s);e.push(n.add(t),n.subtract(t))}return e.map((t=>this.applySkew(t)))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map((e=>({originPoint:this.A,projectedPoint:e})))}}const Ez=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const s=[];if(r.length===0)return s;const n=r.reduce(((i,l)=>(i[i.length-1].eq(l)||i.push(new ne(l)),i)),[new ne(r[0])]);if(n.length===1)t=!0;else if(!t){const i=n[0],l=((d,u)=>{for(let h=d.length-1;h>=0;h--)if(u(d[h],h,d))return h;return-1})(n,(d=>!d.eq(i)));n.splice(l+1)}return n.forEach(((i,l,d)=>{let u,h;l===0?(h=d[1],u=t?i:d[d.length-1]):l===d.length-1?(u=d[l-1],h=t?i:d[0]):(u=d[l-1],h=d[l+1]),t&&d.length===1?s.push(...new kS(i,i,e).project()):!t||l!==0&&l!==d.length-1?s.push(...new ba(i,u,h,e).project()):s.push(...new kS(i,l===0?h:u,e).project())})),s},Gx=r=>{const e={};return Object.keys(r).forEach((t=>{e[t]={},Object.keys(r[t]).forEach((s=>{e[t][s]=G({},r[t][s])}))})),e},Pz=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Rl;const Yx=r=>{if(Rl||Rl||(Rl="Intl"in tf()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Rl){const e=Rl.segment(r);return Array.from(e).map((t=>{let{segment:s}=t;return s}))}return Dz(r)},Dz=r=>{const e=[];for(let t,s=0;s<r.length;s++)(t=Az(r,s))!==!1&&e.push(t);return e},Az=(r,e)=>{const t=r.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return r.charAt(e);if(55296<=t&&t<=56319){if(r.length<=e+1)throw"High surrogate without following low surrogate";const n=r.charCodeAt(e+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return r.charAt(e)+r.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const s=r.charCodeAt(e-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1},Xx=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return r.fill!==e.fill||r.stroke!==e.stroke||r.strokeWidth!==e.strokeWidth||r.fontSize!==e.fontSize||r.fontFamily!==e.fontFamily||r.fontWeight!==e.fontWeight||r.fontStyle!==e.fontStyle||r.textDecorationThickness!==e.textDecorationThickness||r.textBackgroundColor!==e.textBackgroundColor||r.deltaY!==e.deltaY||t&&(r.overline!==e.overline||r.underline!==e.underline||r.linethrough!==e.linethrough)},Rz=(r,e)=>{const t=e.split(`
`),s=[];let n=-1,i={};r=Gx(r);for(let l=0;l<t.length;l++){const d=Yx(t[l]);if(r[l])for(let u=0;u<d.length;u++){n++;const h=r[l][u];h&&Object.keys(h).length>0&&(Xx(i,h,!0)?s.push({start:n,end:n+1,style:h}):s[s.length-1].end++),i=h||{}}else n+=d.length,i={}}return s},Oz=(r,e)=>{if(!Array.isArray(r))return Gx(r);const t=e.split(Ox),s={};let n=-1,i=0;for(let l=0;l<t.length;l++){const d=Yx(t[l]);for(let u=0;u<d.length;u++)n++,r[i]&&r[i].start<=n&&n<r[i].end&&(s[l]=s[l]||{},s[l][u]=G({},r[i].style),n===r[i].end-1&&i++)}return s},Vo=["display","transform",er,"fill-opacity","fill-rule","opacity",$r,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function jS(r,e){const t=r.nodeName,s=r.getAttribute("class"),n=r.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let l;if(l=new RegExp("^"+t,"i"),e=e.replace(l,""),n&&e.length&&(l=new RegExp("#"+n+i,"i"),e=e.replace(l,"")),s&&e.length){const d=s.split(" ");for(let u=d.length;u--;)l=new RegExp("\\."+d[u]+i,"i"),e=e.replace(l,"")}return e.length===0}function Fz(r,e){let t=!0;const s=jS(r,e.pop());return s&&e.length&&(t=(function(n,i){let l,d=!0;for(;n.parentElement&&n.parentElement.nodeType===1&&i.length;)d&&(l=i.pop()),d=jS(n=n.parentElement,l);return i.length===0})(r,e)),s&&t&&e.length===0}const Lz=r=>{var e;return(e=K6[r])!==null&&e!==void 0?e:r},zz=new RegExp("(".concat(Vs,")"),"gi"),Iz=r=>r.replace(zz," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var NS,TS,_S,MS,ES,PS,DS;const _r="(".concat(Vs,")"),Bz=String.raw(NS||(NS=wn(["(skewX)(",")"],["(skewX)\\(","\\)"])),_r),Vz=String.raw(TS||(TS=wn(["(skewY)(",")"],["(skewY)\\(","\\)"])),_r),Wz=String.raw(_S||(_S=wn(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),_r,_r,_r),Hz=String.raw(MS||(MS=wn(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),_r,_r),Uz=String.raw(ES||(ES=wn(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),_r,_r),$z=String.raw(PS||(PS=wn(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),_r,_r,_r,_r,_r,_r),Kx="(?:".concat($z,"|").concat(Uz,"|").concat(Wz,"|").concat(Hz,"|").concat(Bz,"|").concat(Vz,")"),Gz="(?:".concat(Kx,"*)"),Yz=String.raw(DS||(DS=wn(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),Gz),Xz=new RegExp(Yz),Kz=new RegExp(Kx),qz=new RegExp(Kx,"g");function s0(r){const e=[];if(!(r=Iz(r).replace(/\s*([()])\s*/gi,"$1"))||r&&!Xz.test(r))return[...Dr];for(const t of r.matchAll(qz)){const s=Kz.exec(t[0]);if(!s)continue;let n=Dr;const i=s.filter((v=>!!v)),[,l,...d]=i,[u,h,p,m,g,y]=d.map((v=>parseFloat(v)));switch(l){case"translate":n=Fc(u,h);break;case Fx:n=Ha({angle:u},{x:h,y:p});break;case sf:n=Ix(u,h);break;case Va:n=Qj(u);break;case Wa:n=eN(u);break;case"matrix":n=[u,h,p,m,g,y]}e.push(n)}return zx(e)}function Zz(r,e,t,s){const n=Array.isArray(e);let i,l=e;if(r!==er&&r!==$r||e!==Ur){if(r==="strokeUniform")return e==="non-scaling-stroke";if(r==="strokeDashArray")l=e===Ur?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")l=t&&t.transformMatrix?dr(t.transformMatrix,s0(e)):s0(e);else if(r==="visible")l=e!==Ur&&e!=="hidden",t&&t.visible===!1&&(l=!1);else if(r==="opacity")l=parseFloat(e),t&&t.opacity!==void 0&&(l*=t.opacity);else if(r==="textAnchor")l=e==="start"?dt:e==="end"?Vt:Qe;else if(r==="charSpacing"||r===Ci)i=va(e,s)/s*1e3;else if(r==="paintFirst"){const d=e.indexOf(er),u=e.indexOf($r);l=er,(d>-1&&u>-1&&u<d||d===-1&&u>-1)&&(l=$r)}else{if(r==="href"||r==="xlink:href"||r==="font"||r==="id")return e;if(r==="imageSmoothing")return e==="optimizeQuality";i=n?e.map(va):va(e,s)}}else l="";return!n&&isNaN(i)?l:i}function Jz(r,e){const t=r.match(X6);if(!t)return;const s=t[1],n=t[3],i=t[4],l=t[5],d=t[6];s&&(e.fontStyle=s),n&&(e.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),i&&(e.fontSize=va(i)),d&&(e.fontFamily=d),l&&(e.lineHeight=l==="normal"?1:l)}function Qz(r,e){r.replace(/;\s*$/,"").split(";").forEach((t=>{if(!t)return;const[s,n]=t.split(":");e[s.trim().toLowerCase()]=n.trim()}))}function eI(r){const e={},t=r.getAttribute("style");return t&&(typeof t=="string"?Qz(t,e):(function(s,n){Object.entries(s).forEach((i=>{let[l,d]=i;d!==void 0&&(n[l.toLowerCase()]=d)}))})(t,e)),e}const tI={stroke:"strokeOpacity",fill:"fillOpacity"};function Xn(r,e,t){if(!r)return{};let s,n={},i=Rx;r.parentNode&&xS.test(r.parentNode.nodeName)&&(n=Xn(r.parentElement,e,t),n.fontSize&&(s=i=va(n.fontSize)));const l=G(G(G({},e.reduce(((h,p)=>{const m=r.getAttribute(p);return m&&(h[p]=m),h}),{})),(function(h){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m={};for(const g in p)Fz(h,g.split(" "))&&(m=G(G({},m),p[g]));return m})(r,t)),eI(r));l[Rm]&&r.setAttribute(Rm,l[Rm]),l[Am]&&(s=va(l[Am],i),l[Am]="".concat(s));const d={};for(const h in l){const p=Lz(h),m=Zz(p,l[h],n,s);d[p]=m}d&&d.font&&Jz(d.font,d);const u=G(G({},n),d);return xS.test(r.nodeName)?u:(function(h){const p=wr.getDefaults();return Object.entries(tI).forEach((m=>{let[g,y]=m;if(h[y]===void 0||h[g]==="")return;if(h[g]===void 0){if(!p[g])return;h[g]=p[g]}if(h[g].indexOf("url(")===0)return;const v=new ct(h[g]);h[g]=v.setAlpha(mt(v.getAlpha()*h[y],2)).toRgba()})),h})(u)}const rI=["left","top","width","height","visible"],jN=["rx","ry"];class vs extends wr{static getDefaults(){return G(G({},super.getDefaults()),vs.ownDefaults)}constructor(e){super(),Object.assign(this,vs.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:s}=this,n=-t/2,i=-s/2,l=this.rx?Math.min(this.rx,t/2):0,d=this.ry?Math.min(this.ry,s/2):0,u=l!==0||d!==0;e.beginPath(),e.moveTo(n+l,i),e.lineTo(n+t-l,i),u&&e.bezierCurveTo(n+t-bo*l,i,n+t,i+bo*d,n+t,i+d),e.lineTo(n+t,i+s-d),u&&e.bezierCurveTo(n+t,i+s-bo*d,n+t-bo*l,i+s,n+t-l,i+s),e.lineTo(n+l,i+s),u&&e.bezierCurveTo(n+bo*l,i+s,n,i+s-bo*d,n,i+s-d),e.lineTo(n,i+d),u&&e.bezierCurveTo(n,i+bo*d,n+bo*l,i,n+l,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...jN,...e])}_toSVG(){const{width:e,height:t,rx:s,ry:n}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(s,'" ry="').concat(n,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,s){const n=Xn(e,this.ATTRIBUTE_NAMES,s),{left:i=0,top:l=0,width:d=0,height:u=0,visible:h=!0}=n,p=Ct(n,rI);return new this(G(G(G({},t),p),{},{left:i,top:l,width:d,height:u,visible:!!(h&&d&&u)}))}}H(vs,"type","Rect"),H(vs,"cacheProperties",[...Yn,...jN]),H(vs,"ownDefaults",{rx:0,ry:0}),H(vs,"ATTRIBUTE_NAMES",[...Vo,"x","y","rx","ry","width","height"]),Oe.setClass(vs),Oe.setSVGClass(vs);const On="initialization",Eh="added",qx="removed",Ph="imperative",NN=(r,e)=>{const{strokeUniform:t,strokeWidth:s,width:n,height:i,group:l}=e,d=l&&l!==r?af(l.calcTransformMatrix(),r.calcTransformMatrix()):null,u=d?e.getRelativeCenterPoint().transform(d):e.getRelativeCenterPoint(),h=!e.isStrokeAccountedForInDimensions(),p=t&&h?V6(new ne(s,s),void 0,r.calcTransformMatrix()):Lx,m=!t&&h?s:0,g=Vx(n+m,i+m,zx([d,e.calcOwnMatrix()],!0)).add(p).scalarDivide(2);return[u.subtract(g),u.add(g)]};class df{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:s,strategy:n}=e;return t===On||t===Ph||!!s&&n!==s}shouldLayoutClipPath(e){let{type:t,target:{clipPath:s}}=e;return t!==On&&s&&!s.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:s,target:n}=t;if(s===Ph&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:l,width:d,height:u}=Ln(e.map((m=>NN(n,m))).reduce(((m,g)=>m.concat(g)),[])),h=new ne(d,u),p=new ne(i,l).add(h.scalarDivide(2));if(s===On){const m=this.getInitialSize(t,{size:h,center:p});return{center:p,relativeCorrection:new ne(0,0),size:m}}return{center:p.transform(n.calcOwnMatrix()),size:h}}}H(df,"type","strategy");class n0 extends df{shouldPerformLayout(e){return!0}}H(n0,"type","fit-content"),Oe.setClass(n0);const sI=["strategy"],nI=["target","strategy","bubbles","prevStrategy"],TN="layoutManager";class Sc{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n0;H(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=G(G({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const s=this.getLayoutResult(t);s&&this.commitLayout(t,s),this.onAfterLayout(t,s),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:s}=t;return[kh,Uj,xc,$j,rf,Gj,Ch,T6,_6].map((n=>e.on(n,(i=>this.performLayout(n===kh?{type:"object_modified",trigger:n,e:i,target:s}:{type:"object_modifying",trigger:n,e:i,target:s})))))}subscribe(e,t){this.unsubscribe(e,t);const s=this.attachHandlers(e,t);this._subscriptions.set(e,s)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach((s=>s())),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach((t=>this.unsubscribe(t,e)))}subscribeTargets(e){e.targets.forEach((t=>this.subscribe(t,e)))}onBeforeLayout(e){const{target:t,type:s}=e,{canvas:n}=t;if(s===On||s===Eh?this.subscribeTargets(e):s===qx&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),n&&n.fire("object:layout:before",{target:t,context:e}),s===Ph&&e.deep){const i=Ct(e,sI);t.forEachObject((l=>l.layoutManager&&l.layoutManager.performLayout(G(G({},i),{},{bubbles:!1,target:l}))))}}getLayoutResult(e){const{target:t,strategy:s,type:n}=e,i=s.calcLayoutResult(e,t.getObjects());if(!i)return;const l=n===On?new ne:t.getRelativeCenterPoint(),{center:d,correction:u=new ne,relativeCorrection:h=new ne}=i,p=l.subtract(d).add(u).transform(n===On?Dr:Bs(t.calcOwnMatrix()),!0).add(h);return{result:i,prevCenter:l,nextCenter:d,offset:p}}commitLayout(e,t){const{target:s}=e,{result:{size:n},nextCenter:i}=t;var l,d;s.set({width:n.x,height:n.y}),this.layoutObjects(e,t),e.type===On?s.set({left:(l=e.x)!==null&&l!==void 0?l:i.x+n.x*Xt(s.originX),top:(d=e.y)!==null&&d!==void 0?d:i.y+n.y*Xt(s.originY)}):(s.setPositionByOrigin(i,Qe,Qe),s.setCoords(),s.set("dirty",!0))}layoutObjects(e,t){const{target:s}=e;s.forEachObject((n=>{n.group===s&&this.layoutObject(e,t,n)})),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,s.clipPath)}layoutObject(e,t,s){let{offset:n}=t;s.set({left:s.left+n.x,top:s.top+n.y})}onAfterLayout(e,t){const{target:s,strategy:n,bubbles:i,prevStrategy:l}=e,d=Ct(e,nI),{canvas:u}=s;s.fire("layout:after",{context:e,result:t}),u&&u.fire("object:layout:after",{context:e,result:t,target:s});const h=s.parent;i&&h!=null&&h.layoutManager&&((d.path||(d.path=[])).push(s),h.layoutManager.performLayout(G(G({},d),{},{target:h}))),s.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach((t=>t.forEach((s=>s())))),e.clear()}toObject(){return{type:TN,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Oe.setClass(Sc,TN);const oI=["type","objects","layoutManager"];class iI extends Sc{performLayout(){}}class Eo extends Yj(wr){static getDefaults(){return G(G({},super.getDefaults()),Eo.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),H(this,"_activeObjects",[]),H(this,"__objectSelectionTracker",void 0),H(this,"__objectSelectionDisposer",void 0),Object.assign(this,Eo.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var s;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject((n=>{this.enterGroup(n,!1)})),this.layoutManager=(s=t.layoutManager)!==null&&s!==void 0?s:new Sc,this.layoutManager.performLayout({type:On,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Oo("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Oo("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter(((t,s,n)=>this.canEnterGroup(t)&&n.indexOf(t)===s))}add(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const n=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...n);return this._onAfterObjectsChange(Eh,n),i}insertAt(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(s),l=super.insertAt(e,...i);return this._onAfterObjectsChange(Eh,i),l}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(qx,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const s=this[e];return super._set(e,t),e==="canvas"&&s!==t&&(this._objects||[]).forEach((n=>{n._set(e,t)})),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:s}=t;const n=this._activeObjects;if(e)n.push(s),this._set("dirty",!0);else if(n.length>0){const i=n.indexOf(s);i>-1&&(n.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Th(e,dr(Bs(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const s=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();s&&(s===e||e.isDescendantOf(s))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Th(e,dr(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const s=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;s>-1&&this._activeObjects.splice(s,1)}shouldCache(){const e=wr.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,s){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var n;const l=this._objects[i];(n=this.canvas)!==null&&n!==void 0&&n.preserveObjectStacking&&l.group!==this?(e.save(),e.transform(...Bs(this.calcTransformMatrix())),l.render(e),e.restore()):l.group===this&&l.render(e)}this._drawClipPath(e,this.clipPath,s)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject((e=>e.setCoords()))}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(G({target:this,type:Ph},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const s=this.includeDefaultValues;return this._objects.filter((function(n){return!n.excludeFromExport})).map((function(n){const i=n.includeDefaultValues;n.includeDefaultValues=s;const l=n[e||"toObject"](t);return n.includeDefaultValues=i,l}))}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return G(G(G({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject((e=>{this._watchObject(!1,e),e.dispose()})),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=vs.prototype._toSVG.call(this),s=t.indexOf("COMMON_PARTS");t[s]='for="group" ';const n=t.join("");return e?e(n):n}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],s=this._createSVGBgRect(e);s&&t.push("		",s);for(let n=0;n<this._objects.length;n++)t.push("		",this._objects[n].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],s=this._createSVGBgRect(e);s&&t.push("	",s);for(let n=0;n<this._objects.length;n++)t.push("	",this._objects[n].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:s,objects:n=[],layoutManager:i}=e,l=Ct(e,oI);return Promise.all([yc(n,t),of(l,t)]).then((d=>{let[u,h]=d;const p=new this(u,G(G(G({},l),h),{},{layoutManager:new iI}));if(i){const m=Oe.getClass(i.type),g=Oe.getClass(i.strategy);p.layoutManager=new m(new g)}else p.layoutManager=new Sc;return p.layoutManager.subscribeTargets({type:On,target:p,targets:p.getObjects()}),p.setCoords(),p}))}}H(Eo,"type","Group"),H(Eo,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Oe.setClass(Eo);const aI=(r,e)=>Math.min(e.width/r.width,e.height/r.height),lI=(r,e)=>Math.max(e.width/r.width,e.height/r.height),o0="\\s*,?\\s*",Ol="".concat(o0,"(").concat(Vs,")"),cI="".concat(Ol).concat(Ol).concat(Ol).concat(o0,"([01])").concat(o0,"([01])").concat(Ol).concat(Ol),dI={m:"l",M:"L"},uI=(r,e,t,s,n,i,l,d,u,h,p)=>{const m=Un(r),g=$n(r),y=Un(e),v=$n(e),w=t*n*y-s*i*v+l,j=s*n*y+t*i*v+d;return["C",h+u*(-t*n*g-s*i*m),p+u*(-s*n*g+t*i*m),w+u*(t*n*v+s*i*y),j+u*(s*n*v-t*i*y),w,j]},AS=(r,e,t,s)=>{const n=Math.atan2(e,r),i=Math.atan2(s,t);return i>=n?i-n:2*Math.PI-(n-i)};function RS(r,e,t,s,n,i,l,d){let u;if(it.cachesBoundsOfCurve&&(u=[...arguments].join(),Jl.boundsOfCurveCache[u]))return Jl.boundsOfCurveCache[u];const h=Math.sqrt,p=Math.abs,m=[],g=[[0,0],[0,0]];let y=6*r-12*t+6*n,v=-3*r+9*t-9*n+3*l,w=3*t-3*r;for(let T=0;T<2;++T){if(T>0&&(y=6*e-12*s+6*i,v=-3*e+9*s-9*i+3*d,w=3*s-3*e),p(v)<1e-12){if(p(y)<1e-12)continue;const R=-w/y;0<R&&R<1&&m.push(R);continue}const E=y*y-4*w*v;if(E<0)continue;const D=h(E),M=(-y+D)/(2*v);0<M&&M<1&&m.push(M);const P=(-y-D)/(2*v);0<P&&P<1&&m.push(P)}let j=m.length;const C=j,N=_N(r,e,t,s,n,i,l,d);for(;j--;){const{x:T,y:E}=N(m[j]);g[0][j]=T,g[1][j]=E}g[0][C]=r,g[1][C]=e,g[0][C+1]=l,g[1][C+1]=d;const k=[new ne(Math.min(...g[0]),Math.min(...g[1])),new ne(Math.max(...g[0]),Math.max(...g[1]))];return it.cachesBoundsOfCurve&&(Jl.boundsOfCurveCache[u]=k),k}const hI=(r,e,t)=>{let[s,n,i,l,d,u,h,p]=t;const m=((g,y,v,w,j,C,N)=>{if(v===0||w===0)return[];let k=0,T=0,E=0;const D=Math.PI,M=N*Ax,P=$n(M),R=Un(M),F=.5*(-R*g-P*y),I=.5*(-R*y+P*g),U=v**2,L=w**2,X=I**2,de=F**2,B=U*L-U*X-L*de;let V=Math.abs(v),O=Math.abs(w);if(B<0){const ie=Math.sqrt(1-B/(U*L));V*=ie,O*=ie}else E=(j===C?-1:1)*Math.sqrt(B/(U*X+L*de));const Z=E*V*I/O,Q=-E*O*F/V,W=R*Z-P*Q+.5*g,ae=P*Z+R*Q+.5*y;let q=AS(1,0,(F-Z)/V,(I-Q)/O),ce=AS((F-Z)/V,(I-Q)/O,(-F-Z)/V,(-I-Q)/O);C===0&&ce>0?ce-=2*D:C===1&&ce<0&&(ce+=2*D);const we=Math.ceil(Math.abs(ce/D*2)),xe=[],se=ce/we,K=8/3*Math.sin(se/4)*Math.sin(se/4)/Math.sin(se/2);let fe=q+se;for(let ie=0;ie<we;ie++)xe[ie]=uI(q,fe,R,P,V,O,W,ae,K,k,T),k=xe[ie][5],T=xe[ie][6],q=fe,fe+=se;return xe})(h-r,p-e,n,i,d,u,l);for(let g=0,y=m.length;g<y;g++)m[g][1]+=r,m[g][2]+=e,m[g][3]+=r,m[g][4]+=e,m[g][5]+=r,m[g][6]+=e;return m},fI=r=>{let e=0,t=0,s=0,n=0;const i=[];let l,d=0,u=0;for(const h of r){const p=[...h];let m;switch(p[0]){case"l":p[1]+=e,p[2]+=t;case"L":e=p[1],t=p[2],m=["L",e,t];break;case"h":p[1]+=e;case"H":e=p[1],m=["L",e,t];break;case"v":p[1]+=t;case"V":t=p[1],m=["L",e,t];break;case"m":p[1]+=e,p[2]+=t;case"M":e=p[1],t=p[2],s=p[1],n=p[2],m=["M",e,t];break;case"c":p[1]+=e,p[2]+=t,p[3]+=e,p[4]+=t,p[5]+=e,p[6]+=t;case"C":d=p[3],u=p[4],e=p[5],t=p[6],m=["C",p[1],p[2],d,u,e,t];break;case"s":p[1]+=e,p[2]+=t,p[3]+=e,p[4]+=t;case"S":l==="C"?(d=2*e-d,u=2*t-u):(d=e,u=t),e=p[3],t=p[4],m=["C",d,u,p[1],p[2],e,t],d=m[3],u=m[4];break;case"q":p[1]+=e,p[2]+=t,p[3]+=e,p[4]+=t;case"Q":d=p[1],u=p[2],e=p[3],t=p[4],m=["Q",d,u,e,t];break;case"t":p[1]+=e,p[2]+=t;case"T":l==="Q"?(d=2*e-d,u=2*t-u):(d=e,u=t),e=p[1],t=p[2],m=["Q",d,u,e,t];break;case"a":p[6]+=e,p[7]+=t;case"A":hI(e,t,p).forEach((g=>i.push(g))),e=p[6],t=p[7];break;case"z":case"Z":e=s,t=n,m=["Z"]}m?(i.push(m),l=m[0]):l=""}return i},Dh=(r,e,t,s)=>Math.sqrt((t-r)**2+(s-e)**2),_N=(r,e,t,s,n,i,l,d)=>u=>{const h=u**3,p=(y=>3*y**2*(1-y))(u),m=(y=>3*y*(1-y)**2)(u),g=(y=>(1-y)**3)(u);return new ne(l*h+n*p+t*m+r*g,d*h+i*p+s*m+e*g)},MN=r=>r**2,EN=r=>2*r*(1-r),PN=r=>(1-r)**2,pI=(r,e,t,s,n,i,l,d)=>u=>{const h=MN(u),p=EN(u),m=PN(u),g=3*(m*(t-r)+p*(n-t)+h*(l-n)),y=3*(m*(s-e)+p*(i-s)+h*(d-i));return Math.atan2(y,g)},mI=(r,e,t,s,n,i)=>l=>{const d=MN(l),u=EN(l),h=PN(l);return new ne(n*d+t*u+r*h,i*d+s*u+e*h)},gI=(r,e,t,s,n,i)=>l=>{const d=1-l,u=2*(d*(t-r)+l*(n-t)),h=2*(d*(s-e)+l*(i-s));return Math.atan2(h,u)},OS=(r,e,t)=>{let s=new ne(e,t),n=0;for(let i=1;i<=100;i+=1){const l=r(i/100);n+=Dh(s.x,s.y,l.x,l.y),s=l}return n},xI=(r,e)=>{let t,s=0,n=0,i={x:r.x,y:r.y},l=G({},i),d=.01,u=0;const h=r.iterator,p=r.angleFinder;for(;n<e&&d>1e-4;)l=h(s),u=s,t=Dh(i.x,i.y,l.x,l.y),t+n>e?(s-=d,d/=2):(i=l,s+=d,n+=t);return G(G({},l),{},{angle:p(u)})},DN=r=>{let e,t,s=0,n=0,i=0,l=0,d=0;const u=[];for(const h of r){const p={x:n,y:i,command:h[0],length:0};switch(h[0]){case"M":t=p,t.x=l=n=h[1],t.y=d=i=h[2];break;case"L":t=p,t.length=Dh(n,i,h[1],h[2]),n=h[1],i=h[2];break;case"C":e=_N(n,i,h[1],h[2],h[3],h[4],h[5],h[6]),t=p,t.iterator=e,t.angleFinder=pI(n,i,h[1],h[2],h[3],h[4],h[5],h[6]),t.length=OS(e,n,i),n=h[5],i=h[6];break;case"Q":e=mI(n,i,h[1],h[2],h[3],h[4]),t=p,t.iterator=e,t.angleFinder=gI(n,i,h[1],h[2],h[3],h[4]),t.length=OS(e,n,i),n=h[3],i=h[4];break;case"Z":t=p,t.destX=l,t.destY=d,t.length=Dh(n,i,l,d),n=l,i=d}s+=t.length,u.push(t)}return u.push({length:s,x:n,y:i}),u},yI=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:DN(r),s=0;for(;e-t[s].length>0&&s<t.length-2;)e-=t[s].length,s++;const n=t[s],i=e/n.length,l=r[s];switch(n.command){case"M":return{x:n.x,y:n.y,angle:0};case"Z":return G(G({},new ne(n.x,n.y).lerp(new ne(n.destX,n.destY),i)),{},{angle:Math.atan2(n.destY-n.y,n.destX-n.x)});case"L":return G(G({},new ne(n.x,n.y).lerp(new ne(l[1],l[2]),i)),{},{angle:Math.atan2(l[2]-n.y,l[1]-n.x)});case"C":case"Q":return xI(n,e)}},vI=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),FS=new RegExp(cI,"g"),bI=new RegExp(Vs,"gi"),wI={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},SI=r=>{var e;const t=[],s=(e=r.match(vI))!==null&&e!==void 0?e:[];for(const n of s){const i=n[0];if(i==="z"||i==="Z"){t.push([i]);continue}const l=wI[i.toLowerCase()];let d=[];if(i==="a"||i==="A"){FS.lastIndex=0;for(let u=null;u=FS.exec(n);)d.push(...u.slice(1))}else d=n.match(bI)||[];for(let u=0;u<d.length;u+=l){const h=new Array(l),p=dI[i];h[0]=u>0&&p?p:i;for(let m=0;m<l;m++)h[m+1]=parseFloat(d[u+m]);t.push(h)}}return t},CI=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new ne(r[0]),s=new ne(r[1]),n=1,i=0;const l=[],d=r.length,u=d>2;let h;for(u&&(n=r[2].x<s.x?-1:r[2].x===s.x?0:1,i=r[2].y<s.y?-1:r[2].y===s.y?0:1),l.push(["M",t.x-n*e,t.y-i*e]),h=1;h<d;h++){if(!t.eq(s)){const p=t.midPointFrom(s);l.push(["Q",t.x,t.y,p.x,p.y])}t=r[h],h+1<r.length&&(s=r[h+1])}return u&&(n=t.x>r[h-2].x?1:t.x===r[h-2].x?0:-1,i=t.y>r[h-2].y?1:t.y===r[h-2].y?0:-1),l.push(["L",t.x+n*e,t.y+i*e]),l},AN=(r,e)=>r.map((t=>t.map(((s,n)=>n===0||e===void 0?s:mt(s,e))).join(" "))).join(" ");function i0(r,e){const t=r.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach((s=>{let[n,i]=s;return t.setProperty(n,i)})))}const au=(r,e)=>Math.floor(Math.random()*(e-r+1))+r;class kI extends nN{constructor(e){let{allowTouchScrolling:t=!1,containerClass:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),H(this,"upper",void 0),H(this,"container",void 0);const{el:n}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(n,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const l=this.createContainerElement();l.classList.add(s),n.parentNode&&n.parentNode.replaceChild(l,n),l.append(n,i),this.container=l}createUpperCanvas(){const{el:e}=this.lower,t=xn();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Ba().createElement("div");return e.setAttribute("data-fabric","wrapper"),i0(e,{position:"relative"}),aS(e),e}applyCanvasStyle(e,t){const{styles:s,allowTouchScrolling:n}=t;i0(e,G(G({},s),{},{"touch-action":n?"manipulation":Ur})),aS(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:s,ctx:n}=this.upper;sN(s,n,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Jg(this.upper.el,e),Jg(this.container,e)}cleanupDOM(e){const t=this.container,{el:s}=this.lower,{el:n}=this.upper;super.cleanupDOM(e),t.removeChild(n),t.removeChild(s),t.parentNode&&t.parentNode.replaceChild(s,t)}dispose(){super.dispose(),gn().dispose(this.upper.el),delete this.upper,delete this.container}}class uf extends Lc{constructor(){super(...arguments),H(this,"targets",[]),H(this,"_hoveredTargets",[]),H(this,"_objectsToRender",void 0),H(this,"_currentTransform",null),H(this,"_groupSelector",null),H(this,"contextTopDirty",!1)}static getDefaults(){return G(G({},super.getDefaults()),uf.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new kI(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter((t=>!t.group&&t!==e)).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),s=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=s,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,s){const n=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+n,-s+n),i.transform(...this.viewportTransform);const l=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=l,i.restore();const d=Math.round(n*this.getRetinaScaling());return _z(i,d,d,d)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find((s=>!!s&&e[s]===!0)):e[t])}_shouldClearSelection(e,t){const s=this.getActiveObjects(),n=this._activeObject;return!!(!t||t&&n&&s.length>1&&s.indexOf(t)===-1&&n!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&n&&n!==t)}_shouldCenterTransform(e,t,s){if(!e)return;let n;return t===sf||t===Yr||t===Cs||t===xc?n=this.centeredScaling||e.centeredScaling:t===Fx&&(n=this.centeredRotation||e.centeredRotation),n?!s:s}_getOriginFromCorner(e,t){const s={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?s.x=Vt:["mr","tr","br"].includes(t)&&(s.x=dt),["tl","mt","tr"].includes(t)?s.y=Zg:["bl","mb","br"].includes(t)&&(s.y=Hr)),s}_setupCurrentTransform(e,t,s){var n;const i=t.group?ya(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:l="",control:d}=t.getActiveControl()||{},u=s&&d?(n=d.getActionHandler(e,t,d))===null||n===void 0?void 0:n.bind(d):U6,h=((y,v,w,j)=>{if(!v||!y)return"drag";const C=j.controls[v];return C.getActionName(w,C,j)})(s,l,e,t),p=e[this.centeredKey],m=this._shouldCenterTransform(t,h,p)?{x:Qe,y:Qe}:this._getOriginFromCorner(t,l),g={target:t,action:h,actionHandler:u,actionPerformed:!1,corner:l,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:m.x,originY:m.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:Wt(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:p,original:G(G({},oN(t)),{},{originX:m.x,originY:m.y})};this._currentTransform=g,this.fire("before:transform",{e,transform:g})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:s,deltaX:n,deltaY:i}=this._groupSelector,l=new ne(t,s).transform(this.viewportTransform),d=new ne(t+n,s+i).transform(this.viewportTransform),u=this.selectionLineWidth/2;let h=Math.min(l.x,d.x),p=Math.min(l.y,d.y),m=Math.max(l.x,d.x),g=Math.max(l.y,d.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(h,p,m-h,g-p)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,h+=u,p+=u,m-=u,g-=u,wr.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(h,p,m-h,g-p))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),s=this._activeObject,n=this.getActiveObjects();if(this.targets=[],s&&n.length>=1){if(s.findControl(t,Qg(e))||n.length>1&&this.searchPossibleTargets([s],t))return s;if(s===this.searchPossibleTargets([s],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const l=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&l&&l!==s?(this.targets=i,s):l}return s}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let s=e.getCoords();const n=this.getZoom(),i=e.padding/n;if(i){const[l,d,u,h]=s,p=Math.atan2(d.y-l.y,d.x-l.x),m=Un(p)*i,g=$n(p)*i,y=m+g,v=m-g;s=[new ne(l.x-v,l.y-y),new ne(d.x+y,d.y-v),new ne(u.x+v,u.y+y),new ne(h.x-y,h.y+v)]}return Tt.isPointInPolygon(t,s)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,ya(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let s=e.length;for(;s--;){const n=e[s];if(this._checkTarget(n,t)){if(Ku(n)&&n.subTargetCheck){const i=this._searchPossibleTargets(n._objects,t);i&&this.targets.push(i)}return n}}}searchPossibleTargets(e,t){const s=this._searchPossibleTargets(e,t);if(s&&Ku(s)&&s.interactive&&this.targets[0]){const n=this.targets;for(let i=n.length-1;i>0;i--){const l=n[i];if(!Ku(l)||!l.interactive)return l}return n[0]}return s}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const s=this.upperCanvasEl,n=s.getBoundingClientRect();let i=L6(e),l=n.width||0,d=n.height||0;l&&d||(Hr in n&&Zg in n&&(d=Math.abs(n.top-n.bottom)),Vt in n&&dt in n&&(l=Math.abs(n.right-n.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=ya(i,void 0,this.viewportTransform));const u=this.getRetinaScaling();u!==1&&(i.x/=u,i.y/=u);const h=l===0||d===0?new ne(1,1):new ne(s.width/l,s.height/d);return i.multiply(h)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=xn(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return ui(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let s=!1,n=!1;const i=this.getActiveObjects(),l=[],d=[];e.forEach((u=>{i.includes(u)||(s=!0,u.fire("deselected",{e:t,target:u}),d.push(u))})),i.forEach((u=>{e.includes(u)||(s=!0,u.fire("selected",{e:t,target:u}),l.push(u))})),e.length>0&&i.length>0?(n=!0,s&&this.fire("selection:updated",{e:t,selected:l,deselected:d})):i.length>0?(n=!0,this.fire("selection:created",{e:t,selected:l})):e.length>0&&(n=!0,this.fire("selection:cleared",{e:t,deselected:d})),n&&(this._objectsToRender=void 0)}setActiveObject(e,t){const s=this.getActiveObjects(),n=this._setActiveObject(e,t);return this._fireSelectionEvents(s,t),n}_setActiveObject(e,t){const s=this._activeObject;return s!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,ui(e)&&s!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const s=this._activeObject;return!!s&&!s.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===s&&this.endCurrentTransform(e),ui(s)&&s===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),s=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[s]});const n=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),n}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,s=t.target,n={e,target:s,transform:t,action:t.action};s._scaling&&(s._scaling=!1),s.setCoords(),t.actionPerformed&&(this.fire("object:modified",n),s.fire(kh,n))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;ui(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,s){const n=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,s);return e.set(n),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&ui(t)&&this._activeObject===t){const s=Ua(e,["angle","flipX","flipY",dt,Yr,Cs,Va,Wa,Hr]);return I6(e,t.calcOwnMatrix()),s}return{}}_setSVGObject(e,t,s){const n=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,s),t.set(n)}}H(uf,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class jI{constructor(e){H(this,"targets",[]),H(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:n}=e.getActiveObject()||{};n&&n.focus()},s=e.upperCanvasEl;s.addEventListener("click",t),this.__disposer=()=>s.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach((e=>{e.isEditing&&e.exitEditing()}))}add(e){this.targets.push(e)}remove(e){this.unregister(e),oa(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const NI=["target","oldTarget","fireCanvas","e"],Qr={passive:!1},ea=(r,e)=>{const t=r.getViewportPoint(e),s=r.getScenePoint(e);return{viewportPoint:t,scenePoint:s,pointer:t,absolutePointer:s}},wo=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return r.addEventListener(...t)},fs=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return r.removeEventListener(...t)},TI={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class a0 extends uf{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),H(this,"_isClick",void 0),H(this,"textEditingManager",new jI(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach((t=>{this[t]=this[t].bind(this)})),this.addOrRemove(wo,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const s=this.upperCanvasEl,n=this._getEventPrefix();e(rN(s),"resize",this._onResize),e(s,n+"down",this._onMouseDown),e(s,"".concat(n,"move"),this._onMouseMove,Qr),e(s,"".concat(n,"out"),this._onMouseOut),e(s,"".concat(n,"enter"),this._onMouseEnter),e(s,"wheel",this._onMouseWheel),e(s,"contextmenu",this._onContextMenu),e(s,"click",this._onClick),e(s,"dblclick",this._onClick),e(s,"dragstart",this._onDragStart),e(s,"dragend",this._onDragEnd),e(s,"dragover",this._onDragOver),e(s,"dragenter",this._onDragEnter),e(s,"dragleave",this._onDragLeave),e(s,"drop",this._onDrop),this.enablePointerEvents||e(s,"touchstart",this._onTouchStart,Qr)}removeListeners(){this.addOrRemove(fs,"remove");const e=this._getEventPrefix(),t=Is(this.upperCanvasEl);fs(t,"".concat(e,"up"),this._onMouseUp),fs(t,"touchend",this._onTouchEnd,Qr),fs(t,"".concat(e,"move"),this._onMouseMove,Qr),fs(t,"touchmove",this._onMouseMove,Qr),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,s=G({e},ea(this,e));this.fire("mouse:out",G(G({},s),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",G({},s)),this._hoveredTargets.forEach((n=>{this.fire("mouse:out",G(G({},s),{},{target:n})),n&&n.fire("mouseout",G({},s))})),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",G({e},ea(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const s={e,target:t};return this.fire("dragstart",s),t.fire("dragstart",s),void wo(this.upperCanvasEl,"drag",this._onDragProgress)}lS(e)}_renderDragEffects(e,t,s){let n=!1;const i=this._dropTarget;i&&i!==t&&i!==s&&(i.clearContextTop(),n=!0),t?.clearContextTop(),s!==t&&s?.clearContextTop();const l=this.contextTop;l.save(),l.transform(...this.viewportTransform),t&&(l.save(),t.transform(l),t.renderDragSourceEffect(e),l.restore(),n=!0),s&&(l.save(),s.transform(l),s.renderDropTargetEffect(e),l.restore(),n=!0),l.restore(),n&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Ur,s=t?this._activeObject:void 0,n={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:s};fs(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",n),this._dragSource&&this._dragSource.fire("dragend",n),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:s,targets:n}=this.findDragTargets(e),i=this._dragSource,l={e,target:s,subTargets:n,dragSource:i,canDrop:!1,dropTarget:void 0};let d;this.fire(t,l),this._fireEnterLeaveEvents(s,l),s&&(s.canDrop(e)&&(d=s),s.fire(t,l));for(let u=0;u<n.length;u++){const h=n[u];h.canDrop(e)&&(d=h),h.fire(t,l)}this._renderDragEffects(e,i,d),this._dropTarget=d}_onDragEnter(e){const{target:t,targets:s}=this.findDragTargets(e),n={e,target:t,subTargets:s,dragSource:this._dragSource};this.fire("dragenter",n),this._fireEnterLeaveEvents(t,n)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:s}=this.findDragTargets(e),n=this._basicEventHandler("drop:before",G({e,target:t,subTargets:s,dragSource:this._dragSource},ea(this,e)));n.didDrop=!1,n.dropTarget=void 0,this._basicEventHandler("drop",n),this.fire("drop:after",n)}_onContextMenu(e){const t=this.findTarget(e),s=this.targets||[],n=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:s});return this.stopContextMenu&&lS(e),this._basicEventHandler("contextmenu",n),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const s=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||s&&this._target===s)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const n=this.upperCanvasEl,i=this._getEventPrefix(),l=Is(n);wo(l,"touchend",this._onTouchEnd,Qr),t&&wo(l,"touchmove",this._onMouseMove,Qr),fs(n,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();fs(t,"".concat(s,"move"),this._onMouseMove,Qr);const n=Is(t);wo(n,"".concat(s,"up"),this._onMouseUp),wo(n,"".concat(s,"move"),this._onMouseMove,Qr)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),s=Is(this.upperCanvasEl);fs(s,"touchend",this._onTouchEnd,Qr),fs(s,"touchmove",this._onMouseMove,Qr),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((()=>{wo(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0}),400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,s=this._getEventPrefix();if(this._isMainEvent(e)){const n=Is(this.upperCanvasEl);fs(n,"".concat(s,"up"),this._onMouseUp),fs(n,"".concat(s,"move"),this._onMouseMove,Qr),wo(t,"".concat(s,"move"),this._onMouseMove,Qr)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const s=this._currentTransform,n=this._isClick,i=this._target,{button:l}=e;if(l)return(this.fireMiddleClick&&l===1||this.fireRightClick&&l===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let d,u,h=!1;if(s&&(this._finalizeCurrentTransform(e),h=s.actionPerformed),!n){const p=i===this._activeObject;this.handleSelection(e),h||(h=this._shouldRender(i)||!p&&i===this._activeObject)}if(i){const p=i.findControl(this.getViewportPoint(e),Qg(e)),{key:m,control:g}=p||{};if(u=m,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),h=!0;else if(g){const y=g.getMouseUpHandler(e,i,g);y&&(d=this.getScenePoint(e),y.call(g,e,s,d.x,d.y))}i.isMoving=!1}if(s&&(s.target!==i||s.corner!==u)){const p=s.target&&s.target.controls[s.corner],m=p&&p.getMouseUpHandler(e,s.target,p);d=d||this.getScenePoint(e),m&&m.call(p,e,s,d.x,d.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),h?this.requestRenderAll():n||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:s,subTargets:n=[]}=t;this.fire(e,t),s&&s.fire(e,t);for(let i=0;i<n.length;i++)n[i]!==s&&n[i].fire(e,t);return t}_handleEvent(e,t,s){const n=this._target,i=this.targets||[],l=G(G(G({e,target:n,subTargets:i},ea(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?s:{});this.fire("mouse:".concat(t),l),n&&n.fire("mouse".concat(t),l);for(let d=0;d<i.length;d++)i[d]!==n&&i[d].fire("mouse".concat(t),l)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,s=!!t&&t===this._activeObject;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down",{alreadySelected:s}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(t),l=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,l=!0,i=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const d=this.getScenePoint(e);this._groupSelector={x:d.x,y:d.y,deltaY:0,deltaX:0}}if(s=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const d=t.findControl(this.getViewportPoint(e),Qg(e));if(t===this._activeObject&&(d||!l)){this._setupCurrentTransform(e,t,s);const u=d?d.control:void 0,h=this.getScenePoint(e),p=u&&u.getMouseDownHandler(e,t,u);p&&p.call(u,e,this._currentTransform,h.x,h.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:s}),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=ya(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const s=this.getScenePoint(e);t.deltaX=s.x-t.x,t.deltaY=s.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const s=this.findTarget(e);this._setCursorFromEvent(e,s),this._fireOverOutEvents(e,s)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const s=this._hoveredTarget,n=this._hoveredTargets,i=this.targets,l=Math.max(n.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:s,fireCanvas:!0});for(let d=0;d<l;d++)this.fireSyntheticInOutEvents("mouse",{e,target:i[d],oldTarget:n[d]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const s=this._draggedoverTarget,n=this._hoveredTargets,i=this.targets,l=Math.max(n.length,i.length);this.fireSyntheticInOutEvents("drag",G(G({},t),{},{target:e,oldTarget:s,fireCanvas:!0}));for(let d=0;d<l;d++)this.fireSyntheticInOutEvents("drag",G(G({},t),{},{target:i[d],oldTarget:n[d]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:s,oldTarget:n,fireCanvas:i,e:l}=t,d=Ct(t,NI);const{targetIn:u,targetOut:h,canvasIn:p,canvasOut:m}=TI[e],g=n!==s;if(n&&g){const y=G(G({},d),{},{e:l,target:n,nextTarget:s},ea(this,l));i&&this.fire(m,y),n.fire(h,y)}if(s&&g){const y=G(G({},d),{},{e:l,target:s,previousTarget:n},ea(this,l));i&&this.fire(p,y),s.fire(u,y)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),s=this._currentTransform,n=s.target,i=n.group?ya(t,void 0,n.group.calcTransformMatrix()):t;s.shiftKey=e.shiftKey,s.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,s,i),s.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,s){const{action:n,actionHandler:i,target:l}=t,d=!!i&&i(e,t,s.x,s.y);d&&l.setCoords(),n==="drag"&&d&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||d}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let s=t.hoverCursor||this.hoverCursor;const n=ui(this._activeObject)?this._activeObject:null,i=(!n||t.group!==n)&&t.findControl(this.getViewportPoint(e));if(i){const l=i.control;this.setCursor(l.cursorStyleHandler(e,l,t))}else t.subTargetCheck&&this.targets.concat().reverse().map((l=>{s=l.hoverCursor||s})),this.setCursor(s)}handleMultiSelection(e,t){const s=this._activeObject,n=ui(s);if(s&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(s!==t||n)&&(n||!t.isDescendantOf(s)&&!s.isDescendantOf(t))&&!t.onSelect({e})&&!s.getActiveControl()){if(n){const i=s.getObjects();if(t===s){const l=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,l)||this.searchPossibleTargets(this._objects,l))||!t.selectable)return!1}t.group===s?(s.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],s.size()===1&&this._setActiveObject(s.item(0),e)):(s.multiSelectAdd(t),this._hoveredTarget=s,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{s.isEditing&&s.exitEditing();const i=new(Oe.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(s,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([s],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:s,deltaX:n,deltaY:i}=this._groupSelector,l=new ne(t,s),d=l.add(new ne(n,i)),u=l.min(d),h=l.max(d).subtract(u),p=this.collectObjects({left:u.x,top:u.y,width:h.x,height:h.y},{includeIntersecting:!this.selectionFullyContained}),m=l.eq(d)?p[0]?[p[0]]:[]:p.length>1?p.filter((g=>!g.onSelect({e}))).reverse():p;if(m.length===1)this.setActiveObject(m[0],e);else if(m.length>1){const g=Oe.getClass("ActiveSelection");this.setActiveObject(new g(m,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const RN={x1:0,y1:0,x2:0,y2:0},_I=G(G({},RN),{},{r1:0,r2:0}),pa=(r,e)=>isNaN(r)&&typeof e=="number"?e:r,MI=/^(\d+\.\d+)%|(\d+)%$/;function ON(r){return r&&MI.test(r)}function FN(r,e){const t=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(ON(r)?100:1):NaN;return Ea(0,pa(t,e),1)}const EI=/\s*;\s*/,PI=/\s*:\s*/;function DI(r,e){let t,s;const n=r.getAttribute("style");if(n){const l=n.split(EI);l[l.length-1]===""&&l.pop();for(let d=l.length;d--;){const[u,h]=l[d].split(PI).map((p=>p.trim()));u==="stop-color"?t=h:u==="stop-opacity"&&(s=h)}}const i=new ct(t||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:FN(r.getAttribute("offset"),0),color:i.toRgb(),opacity:pa(parseFloat(s||r.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function AI(r,e){const t=[],s=r.getElementsByTagName("stop"),n=FN(e,1);for(let i=s.length;i--;)t.push(DI(s[i],n));return t}function LN(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function zN(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function As(r,e){return r.getAttribute(e)}function RI(r,e){return(function(t,s){let n,{width:i,height:l,gradientUnits:d}=s;return Object.keys(t).reduce(((u,h)=>{const p=t[h];return p==="Infinity"?n=1:p==="-Infinity"?n=0:(n=typeof p=="string"?parseFloat(p):p,typeof p=="string"&&ON(p)&&(n*=.01,d==="pixels"&&(h!=="x1"&&h!=="x2"&&h!=="r2"||(n*=i),h!=="y1"&&h!=="y2"||(n*=l)))),u[h]=n,u}),{})})(LN(r)==="linear"?(function(t){return{x1:As(t,"x1")||0,y1:As(t,"y1")||0,x2:As(t,"x2")||"100%",y2:As(t,"y2")||0}})(r):(function(t){return{x1:As(t,"fx")||As(t,"cx")||"50%",y1:As(t,"fy")||As(t,"cy")||"50%",r1:0,x2:As(t,"cx")||"50%",y2:As(t,"cy")||"50%",r2:As(t,"r")||"50%"}})(r),G(G({},e),{},{gradientUnits:zN(r)}))}class lu{constructor(e){const{type:t="linear",gradientUnits:s="pixels",coords:n={},colorStops:i=[],offsetX:l=0,offsetY:d=0,gradientTransform:u,id:h}=e||{};Object.assign(this,{type:t,gradientUnits:s,coords:G(G({},t==="radial"?_I:RN),n),colorStops:i,offsetX:l,offsetY:d,gradientTransform:u,id:h?"".concat(h,"_").concat(Fo()):Fo()})}addColorStop(e){for(const t in e){const s=new ct(e[t]);this.colorStops.push({offset:parseFloat(t),color:s.toRgb(),opacity:s.getAlpha()})}return this}toObject(e){return G(G({},Ua(this,e)),{},{type:this.type,coords:G({},this.coords),colorStops:this.colorStops.map((t=>G({},t))),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[],n=this.gradientTransform?this.gradientTransform.concat():Dr.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",l=this.colorStops.map((m=>G({},m))).sort(((m,g)=>m.offset-g.offset));let d=-this.offsetX,u=-this.offsetY;var h;i==="objectBoundingBox"?(d/=e.width,u/=e.height):(d+=e.width/2,u+=e.height/2),(h=e)&&typeof h._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(d-=e.pathOffset.x,u-=e.pathOffset.y),n[4]-=d,n[5]-=u;const p=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(vc(n),'"'),""].join(" ");if(this.type==="linear"){const{x1:m,y1:g,x2:y,y2:v}=this.coords;s.push("<linearGradient ",p,' x1="',m,'" y1="',g,'" x2="',y,'" y2="',v,`">
`)}else if(this.type==="radial"){const{x1:m,y1:g,x2:y,y2:v,r1:w,r2:j}=this.coords,C=w>j;s.push("<radialGradient ",p,' cx="',C?m:y,'" cy="',C?g:v,'" r="',C?w:j,'" fx="',C?y:m,'" fy="',C?v:g,`">
`),C&&(l.reverse(),l.forEach((k=>{k.offset=1-k.offset})));const N=Math.min(w,j);if(N>0){const k=N/Math.max(w,j);l.forEach((T=>{T.offset+=k*(1-T.offset)}))}}return l.forEach((m=>{let{color:g,offset:y,opacity:v}=m;s.push("<stop ",'offset="',100*y+"%",'" style="stop-color:',g,v!==void 0?";stop-opacity: "+v:";",`"/>
`)})),s.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),s.join("")}toLive(e){const{x1:t,y1:s,x2:n,y2:i,r1:l,r2:d}=this.coords,u=this.type==="linear"?e.createLinearGradient(t,s,n,i):e.createRadialGradient(t,s,l,n,i,d);return this.colorStops.forEach((h=>{let{color:p,opacity:m,offset:g}=h;u.addColorStop(g,m!==void 0?new ct(p).setAlpha(m).toRgba():p)})),u}static async fromObject(e){const{colorStops:t,gradientTransform:s}=e;return new this(G(G({},e),{},{colorStops:t?t.map((n=>G({},n))):void 0,gradientTransform:s?[...s]:void 0}))}static fromElement(e,t,s){const n=zN(e),i=t._findCenterFromElement();return new this(G({id:e.getAttribute("id")||void 0,type:LN(e),coords:RI(e,{width:s.viewBoxWidth||s.width,height:s.viewBoxHeight||s.height}),colorStops:AI(e,s.opacity),gradientUnits:n,gradientTransform:s0(e.getAttribute("gradientTransform")||"")},n==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}H(lu,"type","Gradient"),Oe.setClass(lu,"gradient"),Oe.setClass(lu,"linear"),Oe.setClass(lu,"radial");const OI=["type","source","patternTransform"];class Qu{get type(){return"pattern"}set type(e){Oo("warn","Setting type has no effect",e)}constructor(e){H(this,"repeat","repeat"),H(this,"offsetX",0),H(this,"offsetY",0),H(this,"crossOrigin",""),this.id=Fo(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:s}=this;return G(G({},Ua(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:s,offsetX:mt(this.offsetX,it.NUM_FRACTION_DIGITS),offsetY:mt(this.offsetY,it.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:s}=e;const{source:n,repeat:i,id:l}=this,d=pa(this.offsetX/t,0),u=pa(this.offsetY/s,0),h=i==="repeat-y"||i==="no-repeat"?1+Math.abs(d||0):pa(n.width/t,0),p=i==="repeat-x"||i==="no-repeat"?1+Math.abs(u||0):pa(n.height/s,0);return['<pattern id="SVGID_'.concat(l,'" x="').concat(d,'" y="').concat(u,'" width="').concat(h,'" height="').concat(p,'">'),'<image x="0" y="0" width="'.concat(n.width,'" height="').concat(n.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:s,source:n,patternTransform:i}=e,l=Ct(e,OI);const d=await Zu(n,G(G({},t),{},{crossOrigin:l.crossOrigin}));return new this(G(G({},l),{},{patternTransform:i&&i.slice(0),source:d}))}}H(Qu,"type","Pattern"),Oe.setClass(Qu),Oe.setClass(Qu,"pattern");class IN{constructor(e){H(this,"color","rgb(0, 0, 0)"),H(this,"width",1),H(this,"shadow",null),H(this,"strokeLineCap","round"),H(this,"strokeLineJoin","round"),H(this,"strokeMiterLimit",10),H(this,"strokeDashArray",null),H(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new ct(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,t=this.shadow,s=e.contextTop,n=e.getZoom()*e.getRetinaScaling();s.shadowColor=t.color,s.shadowBlur=t.blur*n,s.shadowOffsetX=t.offsetX*n,s.shadowOffsetY=t.offsetY*n}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}const FI=["path","left","top"],LI=["d"];class No extends wr{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:s,left:n,top:i}=t,l=Ct(t,FI);super(),Object.assign(this,No.ownDefaults),this.setOptions(l),this._setPath(e||[],!0),typeof n=="number"&&this.set(dt,n),typeof i=="number"&&this.set(Hr,i)}_setPath(e,t){this.path=fI(Array.isArray(e)?e:SI(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new ne(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,s=-this.pathOffset.y;e.beginPath();for(const n of this.path)switch(n[0]){case"L":e.lineTo(n[1]+t,n[2]+s);break;case"M":e.moveTo(n[1]+t,n[2]+s);break;case"C":e.bezierCurveTo(n[1]+t,n[2]+s,n[3]+t,n[4]+s,n[5]+t,n[6]+s);break;case"Q":e.quadraticCurveTo(n[1]+t,n[2]+s,n[3]+t,n[4]+s);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G(G({},super.toObject(e)),{},{path:this.path.map((t=>t.slice()))})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=AN(this.path,it.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=it.NUM_FRACTION_DIGITS;return" translate(".concat(mt(-this.pathOffset.x,e),", ").concat(mt(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:s,pathOffset:n}=this._calcDimensions();this.set({width:t,height:s,pathOffset:n}),e&&this.setPositionByOrigin(n,Qe,Qe)}_calcBoundsFromPath(){const e=[];let t=0,s=0,n=0,i=0;for(const l of this.path)switch(l[0]){case"L":n=l[1],i=l[2],e.push({x:t,y:s},{x:n,y:i});break;case"M":n=l[1],i=l[2],t=n,s=i;break;case"C":e.push(...RS(n,i,l[1],l[2],l[3],l[4],l[5],l[6])),n=l[5],i=l[6];break;case"Q":e.push(...RS(n,i,l[1],l[2],l[1],l[2],l[3],l[4])),n=l[3],i=l[4];break;case"Z":n=t,i=s}return Ln(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return G(G({},e),{},{pathOffset:new ne(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,s){const n=Xn(e,this.ATTRIBUTE_NAMES,s),{d:i}=n;return new this(i,G(G(G({},Ct(n,LI)),t),{},{left:void 0,top:void 0}))}}H(No,"type","Path"),H(No,"cacheProperties",[...Yn,"path","fillRule"]),H(No,"ATTRIBUTE_NAMES",[...Vo,"d"]),Oe.setClass(No),Oe.setSVGClass(No);class rn extends IN{constructor(e){super(e),H(this,"decimate",.4),H(this,"drawStraightLine",!1),H(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,s){const n=t.midPointFrom(s);return e.quadraticCurveTo(t.x,t.y,n.x,n.y),n}onMouseDown(e,t){let{e:s}=t;this.canvas._isMainEvent(s)&&(this.drawStraightLine=!!this.straightLineKey&&s[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:s}=t;if(this.canvas._isMainEvent(s)&&(this.drawStraightLine=!!this.straightLineKey&&s[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const n=this._points,i=n.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=rn.drawSegment(l,n[i-2],n[i-1]),l.stroke(),l.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t=this._points[0],s=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&t.x===s.x&&t.y===s.y){const n=this.width/1e3;t.x-=n,s.x+=n}e.moveTo(t.x,t.y);for(let n=1;n<this._points.length;n++)rn.drawSegment(e,t,s),t=this._points[n],s=this._points[n+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const t=this.width/1e3;return CI(e,t)}createPath(e){const t=new No(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new br(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let s,n=e[0];const i=this.canvas.getZoom(),l=Math.pow(t/i,2),d=e.length-1,u=[n];for(let h=1;h<d-1;h++)s=Math.pow(n.x-e[h].x,2)+Math.pow(n.y-e[h].y,2),s>=l&&(n=e[h],u.push(n));return u.push(e[d]),u}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if((function(s){return AN(s)==="M 0 0 Q 0 0 0 0 L 0 0"})(e))return void this.canvas.requestRenderAll();const t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}const zI=["left","top","radius"],BN=["radius","startAngle","endAngle","counterClockwise"];class Rn extends wr{static getDefaults(){return G(G({},super.getDefaults()),Rn.ownDefaults)}constructor(e){super(),Object.assign(this,Rn.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Wt(this.startAngle),Wt(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Yr)}getRadiusY(){return this.get("radius")*this.get(Cs)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...BN,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,s=Wt(this.startAngle),n=Wt(this.endAngle),i=Un(s)*t,l=$n(s)*t,d=Un(n)*t,u=$n(n)*t,h=e>180?1:0,p=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(l," A ").concat(t," ").concat(t," 0 ").concat(h," ").concat(p," ").concat(d," ").concat(u,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,s){const n=Xn(e,this.ATTRIBUTE_NAMES,s),{left:i=0,top:l=0,radius:d=0}=n;return new this(G(G({},Ct(n,zI)),{},{radius:d,left:i-d,top:l-d}))}static fromObject(e){return super._fromObject(e)}}H(Rn,"type","Circle"),H(Rn,"cacheProperties",[...Yn,...BN]),H(Rn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),H(Rn,"ATTRIBUTE_NAMES",["cx","cy","r",...Vo]),Oe.setClass(Rn),Oe.setSVGClass(Rn);class II extends IN{constructor(e){super(e),H(this,"width",10),H(this,"density",20),H(this,"dotWidth",1),H(this,"dotWidthVariance",1),H(this,"randomOpacity",!1),H(this,"optimizeOverlapping",!0),this.sprayChunks=[],this.sprayChunk=[]}onMouseDown(e){this.sprayChunks=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.renderChunck(this.sprayChunk)}onMouseMove(e){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.renderChunck(this.sprayChunk))}onMouseUp(){const e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const t=[];for(let n=0;n<this.sprayChunks.length;n++){const i=this.sprayChunks[n];for(let l=0;l<i.length;l++){const d=i[l],u=new vs({width:d.width,height:d.width,left:d.x+1,top:d.y+1,originX:Qe,originY:Qe,fill:this.color});t.push(u)}}const s=new Eo(this.optimizeOverlapping?(function(n){const i={},l=[];for(let d,u=0;u<n.length;u++)d="".concat(n[u].left).concat(n[u].top),i[d]||(i[d]=!0,l.push(n[u]));return l})(t):t,{objectCaching:!0,subTargetCheck:!1,interactive:!1});this.shadow&&s.set("shadow",new br(this.shadow)),this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()}renderChunck(e){const t=this.canvas.contextTop;t.fillStyle=this.color,this._saveAndTransform(t);for(let s=0;s<e.length;s++){const n=e[s];t.globalAlpha=n.opacity,t.fillRect(n.x,n.y,n.width,n.width)}t.restore()}_render(){const e=this.canvas.contextTop;e.fillStyle=this.color,this._saveAndTransform(e);for(let t=0;t<this.sprayChunks.length;t++)this.renderChunck(this.sprayChunks[t]);e.restore()}addSprayChunk(e){this.sprayChunk=[];const t=this.width/2;for(let s=0;s<this.density;s++)this.sprayChunk.push({x:au(e.x-t,e.x+t),y:au(e.y-t,e.y+t),width:this.dotWidthVariance?au(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,opacity:this.randomOpacity?au(0,100)/100:1});this.sprayChunks.push(this.sprayChunk)}}class BI extends rn{constructor(e){super(e)}getPatternSrc(){const e=xn(),t=e.getContext("2d");return e.width=e.height=25,t&&(t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill()),e}getPattern(e){return e.createPattern(this.source||this.getPatternSrc(),"repeat")}_setBrushStyles(e){super._setBrushStyles(e);const t=this.getPattern(e);t&&(e.strokeStyle=t)}createPath(e){const t=super.createPath(e),s=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new Qu({source:this.source||this.getPatternSrc(),offsetX:-s.x,offsetY:-s.y}),t}}const VI=["x1","y1","x2","y2"],WI=["x1","y1","x2","y2"],l0=["x1","x2","y1","y2"];class To extends wr{constructor(){let[e,t,s,n]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,To.ownDefaults),this.setOptions(i),this.x1=e,this.x2=s,this.y1=t,this.y2=n,this._setWidthHeight();const{left:l,top:d}=i;typeof l=="number"&&this.set(dt,l),typeof d=="number"&&this.set(Hr,d)}_setWidthHeight(){const{x1:e,y1:t,x2:s,y2:n}=this;this.width=Math.abs(s-e),this.height=Math.abs(n-t);const{left:i,top:l,width:d,height:u}=Ln([{x:e,y:t},{x:s,y:n}]),h=new ne(i+d/2,l+u/2);this.setPositionByOrigin(h,Qe,Qe)}_set(e,t){return super._set(e,t),l0.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const s=e.strokeStyle;var n;bs(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(n=this.stroke)!==null&&n!==void 0?n:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=s}_findCenterFromElement(){return new ne((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G(G({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:s,y2:n,width:i,height:l}=this,d=e<=t?-1:1,u=s<=n?-1:1;return{x1:d*i/2,x2:d*-i/2,y1:u*l/2,y2:u*-l/2}}_toSVG(){const{x1:e,x2:t,y1:s,y2:n}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(s,'" x2="').concat(t,'" y2="').concat(n,`" />
`)]}static async fromElement(e,t,s){const n=Xn(e,this.ATTRIBUTE_NAMES,s),{x1:i=0,y1:l=0,x2:d=0,y2:u=0}=n;return new this([i,l,d,u],Ct(n,VI))}static fromObject(e){let{x1:t,y1:s,x2:n,y2:i}=e,l=Ct(e,WI);return this._fromObject(G(G({},l),{},{points:[t,s,n,i]}),{extraParam:"points"})}}H(To,"type","Line"),H(To,"cacheProperties",[...Yn,...l0]),H(To,"ATTRIBUTE_NAMES",Vo.concat(l0)),Oe.setClass(To),Oe.setSVGClass(To);class _o extends wr{static getDefaults(){return G(G({},super.getDefaults()),_o.ownDefaults)}constructor(e){super(),Object.assign(this,_o.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,s),e.lineTo(0,-s),e.lineTo(t,s),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}H(_o,"type","Triangle"),H(_o,"ownDefaults",{width:100,height:100}),Oe.setClass(_o),Oe.setSVGClass(_o);const VN=["rx","ry"];class sn extends wr{static getDefaults(){return G(G({},super.getDefaults()),sn.ownDefaults)}constructor(e){super(),Object.assign(this,sn.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Yr)}getRy(){return this.get("ry")*this.get(Cs)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...VN,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Sh,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,s){const n=Xn(e,this.ATTRIBUTE_NAMES,s);return n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,new this(n)}}function HI(r){if(!r)return[];const e=r.replace(/,/g," ").trim().split(/\s+/),t=[];for(let s=0;s<e.length;s+=2)t.push({x:parseFloat(e[s]),y:parseFloat(e[s+1])});return t}H(sn,"type","Ellipse"),H(sn,"cacheProperties",[...Yn,...VN]),H(sn,"ownDefaults",{rx:0,ry:0}),H(sn,"ATTRIBUTE_NAMES",[...Vo,"cx","cy","rx","ry"]),Oe.setClass(sn),Oe.setSVGClass(sn);const UI=["left","top"],WN={exactBoundingBox:!1};class Ls extends wr{static getDefaults(){return G(G({},super.getDefaults()),Ls.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),H(this,"strokeDiff",void 0),Object.assign(this,Ls.ownDefaults),this.setOptions(t),this.points=e;const{left:s,top:n}=t;this.initialized=!0,this.setBoundingBox(!0),typeof s=="number"&&this.set(dt,s),typeof n=="number"&&this.set(Hr,n)}isOpen(){return!0}_projectStrokeOnPoints(e){return Ez(this.points,e,this.isOpen())}_calcDimensions(e){e=G({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map((h=>h.projectedPoint)):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new ne,strokeOffset:new ne,strokeDiff:new ne};const s=Ln(t),n=nf(G(G({},e),{},{scaleX:1,scaleY:1})),i=Ln(this.points.map((h=>Vr(h,n,!0)))),l=new ne(this.scaleX,this.scaleY);let d=s.left+s.width/2,u=s.top+s.height/2;return this.exactBoundingBox&&(d-=u*Math.tan(Wt(this.skewX)),u-=d*Math.tan(Wt(this.skewY))),G(G({},s),{},{pathOffset:new ne(d,u),strokeOffset:new ne(i.left,i.top).subtract(new ne(s.left,s.top)).multiply(l),strokeDiff:new ne(s.width,s.height).subtract(new ne(i.width,i.height)).multiply(l)})}_findCenterFromElement(){const e=Ln(this.points);return new ne(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:s,width:n,height:i,pathOffset:l,strokeOffset:d,strokeDiff:u}=this._calcDimensions();this.set({width:n,height:i,pathOffset:l,strokeOffset:d,strokeDiff:u}),e&&this.setPositionByOrigin(new ne(t+n/2,s+i/2),Qe,Qe)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new ne(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let l;if(Object.keys(e).some((d=>this.strokeUniform||this.constructor.layoutProperties.includes(d)))){var t,s;const{width:d,height:u}=this._calcDimensions(e);l=new ne((t=e.width)!==null&&t!==void 0?t:d,(s=e.height)!==null&&s!==void 0?s:u)}else{var n,i;l=new ne((n=e.width)!==null&&n!==void 0?n:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return l.multiply(new ne(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const s=this.initialized&&this[e]!==t,n=super._set(e,t);return this.exactBoundingBox&&s&&((e===Yr||e===Cs)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),n}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G(G({},super.toObject(e)),{},{points:this.points.map((t=>{let{x:s,y:n}=t;return{x:s,y:n}}))})}_toSVG(){const e=[],t=this.pathOffset.x,s=this.pathOffset.y,n=it.NUM_FRACTION_DIGITS;for(let i=0,l=this.points.length;i<l;i++)e.push(mt(this.points[i].x-t,n),",",mt(this.points[i].y-s,n)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,s=this.pathOffset.x,n=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-s,this.points[0].y-n);for(let i=0;i<t;i++){const l=this.points[i];e.lineTo(l.x-s,l.y-n)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,s){return new this(HI(e.getAttribute("points")),G(G({},Ct(Xn(e,this.ATTRIBUTE_NAMES,s),UI)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}H(Ls,"ownDefaults",WN),H(Ls,"type","Polyline"),H(Ls,"layoutProperties",[Va,Wa,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),H(Ls,"cacheProperties",[...Yn,"points"]),H(Ls,"ATTRIBUTE_NAMES",[...Vo]),Oe.setClass(Ls),Oe.setSVGClass(Ls);class cu extends Ls{isOpen(){return!1}}H(cu,"ownDefaults",WN),H(cu,"type","Polygon"),Oe.setClass(cu),Oe.setSVGClass(cu);class HN extends wr{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const s in t)for(const n in t[s])for(const i in t[s][n])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const s=t===void 0?this.styles:{0:this.styles[t]};for(const n in s)for(const i in s[n])if(s[n][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let s,n,i=0,l=!0,d=0;for(const u in t){s=0;for(const h in t[u]){const p=t[u][h]||{};i++,p[e]!==void 0?(n?p[e]!==n&&(l=!1):n=p[e],p[e]===this[e]&&delete p[e]):l=!1,Object.keys(p).length!==0?s++:delete t[u][h]}s===0&&delete t[u]}for(let u=0;u<this._textLines.length;u++)d+=this._textLines[u].length;l&&i===d&&(this[e]=n,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let s,n,i;for(n in t){for(i in s=t[n],s)delete s[i][e],Object.keys(s[i]).length===0&&delete s[i];Object.keys(s).length===0&&delete t[n]}}_extendStyles(e,t){const{lineIndex:s,charIndex:n}=this.get2DCursorLocation(e);this._getLineStyle(s)||this._setLineStyle(s);const i=Bx(G(G({},this._getStyleDeclaration(s,n)),t),(l=>l!==void 0));this._setStyleDeclaration(s,n,i)}getSelectionStyles(e,t,s){const n=[];for(let i=e;i<(t||e);i++)n.push(this.getStyleAtPosition(i,s));return n}getStyleAtPosition(e,t){const{lineIndex:s,charIndex:n}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(s,n):this._getStyleDeclaration(s,n)}setSelectionStyles(e,t,s){for(let n=t;n<(s||t);n++)this._extendStyles(n,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var s;const n=this.styles&&this.styles[e];return n&&(s=n[t])!==null&&s!==void 0?s:{}}getCompleteStyleDeclaration(e,t){return G(G({},Ua(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,s){this.styles[e][t]=s}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}H(HN,"_styleProperties",G6);const $I=/  +/g,GI=/"/g;function Lm(r,e,t,s,n){return"		".concat((function(i,l){let{left:d,top:u,width:h,height:p}=l,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:it.NUM_FRACTION_DIGITS;const g=bc(er,i,!1),[y,v,w,j]=[d,u,h,p].map((C=>mt(C,m)));return"<rect ".concat(g,' x="').concat(y,'" y="').concat(v,'" width="').concat(w,'" height="').concat(j,'"></rect>')})(r,{left:e,top:t,width:s,height:n}),`
`)}const YI=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let zm;class Tr extends HN{static getDefaults(){return G(G({},super.getDefaults()),Tr.ownDefaults)}constructor(e,t){super(),H(this,"__charBounds",[]),Object.assign(this,Tr.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=DN(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(nn)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,s,n,i,l,d;for(let u=0,h=this._textLines.length;u<h;u++)if((this.textAlign===nn||u!==h-1&&!this.isEndOfWrapping(u))&&(n=0,i=this._textLines[u],t=this.getLineWidth(u),t<this.width&&(d=this.textLines[u].match(this._reSpacesAndTabs)))){s=d.length,e=(this.width-t)/s;for(let p=0;p<=i.length;p++)l=this.__charBounds[u][p],this._reSpaceAndTab.test(i[p])?(l.width+=e,l.kernedWidth+=e,l.left+=n,n+=e):l.left+=n}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const s=t?this._unwrappedTextLines:this._textLines;let n;for(n=0;n<s.length;n++){if(e<=s[n].length)return{lineIndex:n,charIndex:e};e-=s[n].length+this.missingNewlineOffset(n,t)}return{lineIndex:n-1,charIndex:s[n-1].length<e?s[n-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===$r?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,s){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Qe:e.textBaseline="middle";break;case"ascender":e.textBaseline=Hr;break;case"descender":e.textBaseline=Zg}e.font=this._getFontDeclaration(t,s)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,s=this._textLines.length;t<s;t++){const n=this.getLineWidth(t);n>e&&(e=n)}return e}_renderTextLine(e,t,s,n,i,l){this._renderChars(e,t,s,n,i,l)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,s=this._getLeftOffset();let n=this._getTopOffset();for(let i=0,l=this._textLines.length;i<l;i++){const d=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){n+=d;continue}const u=this._textLines[i].length,h=this._getLineLeftOffset(i);let p,m,g=0,y=0,v=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let w=0;w<u;w++){const j=this.__charBounds[i][w];m=this.getValueOfPropertyAt(i,w,"textBackgroundColor"),this.path?(e.save(),e.translate(j.renderLeft,j.renderTop),e.rotate(j.angle),e.fillStyle=m,m&&e.fillRect(-j.width/2,-d/this.lineHeight*(1-this._fontSizeFraction),j.width,d/this.lineHeight),e.restore()):m!==v?(p=s+h+y,this.direction==="rtl"&&(p=this.width-p-g),e.fillStyle=v,v&&e.fillRect(p,n,g,d/this.lineHeight),y=j.left,g=j.width,v=m):g+=j.kernedWidth}m&&!this.path&&(p=s+h+y,this.direction==="rtl"&&(p=this.width-p-g),e.fillStyle=m,e.fillRect(p,n,g,d/this.lineHeight)),n+=d}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,s,n){const i=Jl.getFontCache(t),l=this._getFontDeclaration(t),d=s+e,u=s&&l===this._getFontDeclaration(n),h=t.fontSize/this.CACHE_FONT_SIZE;let p,m,g,y;if(s&&i[s]!==void 0&&(g=i[s]),i[e]!==void 0&&(y=p=i[e]),u&&i[d]!==void 0&&(m=i[d],y=m-g),p===void 0||g===void 0||m===void 0){const v=(function(){return zm||(zm=ks({width:0,height:0}).getContext("2d")),zm})();this._setTextStyles(v,t,!0),p===void 0&&(y=p=v.measureText(e).width,i[e]=p),g===void 0&&u&&s&&(g=v.measureText(s).width,i[s]=g),u&&m===void 0&&(m=v.measureText(d).width,i[d]=m,y=m-g)}return{width:p*h,kernedWidth:y*h}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,s,n=0;const i=this.pathSide===Vt,l=this.path,d=this._textLines[e],u=d.length,h=new Array(u);this.__charBounds[e]=h;for(let p=0;p<u;p++){const m=d[p];s=this._getGraphemeBox(m,e,p,t),h[p]=s,n+=s.kernedWidth,t=m}if(h[u]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},l&&l.segmentsInfo){let p=0;const m=l.segmentsInfo[l.segmentsInfo.length-1].length;switch(this.textAlign){case dt:p=i?m-n:0;break;case Qe:p=(m-n)/2;break;case Vt:p=i?0:m-n}p+=this.pathStartOffset*(i?-1:1);for(let g=i?u-1:0;i?g>=0:g<u;i?g--:g++)s=h[g],p>m?p%=m:p<0&&(p+=m),this._setGraphemeOnPath(p,s),p+=s.kernedWidth}return{width:n,numOfSpaces:0}}_setGraphemeOnPath(e,t){const s=e+t.kernedWidth/2,n=this.path,i=yI(n.path,s,n.segmentsInfo);t.renderLeft=i.x-n.pathOffset.x,t.renderTop=i.y-n.pathOffset.y,t.angle=i.angle+(this.pathSide===Vt?Math.PI:0)}_getGraphemeBox(e,t,s,n,i){const l=this.getCompleteStyleDeclaration(t,s),d=n?this.getCompleteStyleDeclaration(t,s-1):{},u=this._measureChar(e,l,n,d);let h,p=u.kernedWidth,m=u.width;this.charSpacing!==0&&(h=this._getWidthOfCharSpacing(),m+=h,p+=h);const g={width:m,left:0,height:l.fontSize,kernedWidth:p,deltaY:l.deltaY};if(s>0&&!i){const y=this.__charBounds[t][s-1];g.left=y.left+y.width+u.kernedWidth-u.width}return g}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let s=1,n=this._textLines[e].length;s<n;s++)t=Math.max(this.getHeightOfChar(e,s),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let s=0,n=this._textLines.length;s<n;s++)e=this.getHeightOfLine(s),t+=s===n-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let s=0;const n=this._getLeftOffset(),i=this._getTopOffset();for(let l=0,d=this._textLines.length;l<d;l++){const u=this.getHeightOfLine(l),h=u/this.lineHeight,p=this._getLineLeftOffset(l);this._renderTextLine(t,e,this._textLines[l],n+p,i+s+h,l),s+=u}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(er))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,s,n,i,l){const d=this.getHeightOfLine(l),u=this.textAlign.includes(nn),h=this.path,p=!u&&this.charSpacing===0&&this.isEmptyStyles(l)&&!h,m=this.direction==="ltr",g=this.direction==="ltr"?1:-1,y=t.direction;let v,w,j,C,N,k="",T=0;if(t.save(),y!==this.direction&&(t.canvas.setAttribute("dir",m?"ltr":"rtl"),t.direction=m?"ltr":"rtl",t.textAlign=m?dt:Vt),i-=d*this._fontSizeFraction/this.lineHeight,p)return this._renderChar(e,t,l,0,s.join(""),n,i),void t.restore();for(let E=0,D=s.length-1;E<=D;E++)C=E===D||this.charSpacing||h,k+=s[E],j=this.__charBounds[l][E],T===0?(n+=g*(j.kernedWidth-j.width),T+=j.width):T+=j.kernedWidth,u&&!C&&this._reSpaceAndTab.test(s[E])&&(C=!0),C||(v=v||this.getCompleteStyleDeclaration(l,E),w=this.getCompleteStyleDeclaration(l,E+1),C=Xx(v,w,!1)),C&&(h?(t.save(),t.translate(j.renderLeft,j.renderTop),t.rotate(j.angle),this._renderChar(e,t,l,E,k,-T/2,0),t.restore()):(N=n,this._renderChar(e,t,l,E,k,N,i)),k="",v=w,n+=g*T,T=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,s=this.height+this.strokeWidth,n=ks({width:t,height:s}),i=n.getContext("2d");return n.width=t,n.height=s,i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(t,s),i.lineTo(0,s),i.closePath(),i.translate(t/2,s/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(n,"no-repeat")}handleFiller(e,t,s){let n,i;return bs(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(n=-this.width/2,i=-this.height/2,e.translate(n,i),e[t]=this._applyPatternGradientTransformText(s),{offsetX:n,offsetY:i}):(e[t]=s.toLive(e),this._applyPatternGradientTransform(e,s)):(e[t]=s,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:s,strokeWidth:n}=t;return e.lineWidth=n,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",s)}_setFillStyles(e,t){let{fill:s}=t;return this.handleFiller(e,"fillStyle",s)}_renderChar(e,t,s,n,i,l,d){const u=this._getStyleDeclaration(s,n),h=this.getCompleteStyleDeclaration(s,n),p=e==="fillText"&&h.fill,m=e==="strokeText"&&h.stroke&&h.strokeWidth;if(m||p){if(t.save(),t.font=this._getFontDeclaration(h),u.textBackgroundColor&&this._removeShadow(t),u.deltaY&&(d+=u.deltaY),p){const g=this._setFillStyles(t,h);t.fillText(i,l-g.offsetX,d-g.offsetY)}if(m){const g=this._setStrokeStyles(t,h);t.strokeText(i,l-g.offsetX,d-g.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,s){const n=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),l=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),d={fontSize:i*s.size,deltaY:l+i*s.baseline};this.setSelectionStyles(d,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),s=this.width-t,n=this.textAlign,i=this.direction,l=this.isEndOfWrapping(e);let d=0;return n===nn||n===ec&&!l||n===Ql&&!l||n===Mh&&!l?0:(n===Qe&&(d=s/2),n===Vt&&(d=s),n===ec&&(d=s/2),n===Ql&&(d=s),i==="rtl"&&(n===Vt||n===nn||n===Ql?d=0:n===dt||n===Mh?d=-s:n!==Qe&&n!==ec||(d=-s/2)),d)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,s){var n;return(n=this._getStyleDeclaration(e,t)[s])!==null&&n!==void 0?n:this[s]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let s=this._getTopOffset();const n=this._getLeftOffset(),i=this.path,l=this._getWidthOfCharSpacing(),d=t==="linethrough"?.5:t==="overline"?1:0,u=this.offsets[t];for(let h=0,p=this._textLines.length;h<p;h++){const m=this.getHeightOfLine(h);if(!this[t]&&!this.styleHas(t,h)){s+=m;continue}const g=this._textLines[h],y=m/this.lineHeight,v=this._getLineLeftOffset(h);let w=0,j=0,C=this.getValueOfPropertyAt(h,0,t),N=this.getValueOfPropertyAt(h,0,er),k=this.getValueOfPropertyAt(h,0,Ci),T=C,E=N,D=k;const M=s+y*(1-this._fontSizeFraction);let P=this.getHeightOfChar(h,0),R=this.getValueOfPropertyAt(h,0,"deltaY");for(let U=0,L=g.length;U<L;U++){const X=this.__charBounds[h][U];T=this.getValueOfPropertyAt(h,U,t),E=this.getValueOfPropertyAt(h,U,er),D=this.getValueOfPropertyAt(h,U,Ci);const de=this.getHeightOfChar(h,U),B=this.getValueOfPropertyAt(h,U,"deltaY");if(i&&T&&E){const V=this.fontSize*D/1e3;e.save(),e.fillStyle=N,e.translate(X.renderLeft,X.renderTop),e.rotate(X.angle),e.fillRect(-X.kernedWidth/2,u*de+B-d*V,X.kernedWidth,V),e.restore()}else if((T!==C||E!==N||de!==P||D!==k||B!==R)&&j>0){const V=this.fontSize*k/1e3;let O=n+v+w;this.direction==="rtl"&&(O=this.width-O-j),C&&N&&k&&(e.fillStyle=N,e.fillRect(O,M+u*P+R-d*V,j,V)),w=X.left,j=X.width,C=T,k=D,N=E,P=de,R=B}else j+=X.kernedWidth}let F=n+v+w;this.direction==="rtl"&&(F=this.width-F-j),e.fillStyle=E;const I=this.fontSize*D/1e3;T&&E&&D&&e.fillRect(F,M+u*P+R-d*I,j-l,I),s+=m}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:s=this.fontWeight,fontSize:n=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const l=e.includes("'")||e.includes('"')||e.includes(",")||Tr.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,s,"".concat(i?this.CACHE_FONT_SIZE:n,"px"),l].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Yx(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),s=new Array(t.length),n=[`
`];let i=[];for(let l=0;l<t.length;l++)s[l]=this.graphemeSplit(t[l]),i=i.concat(s[l],n);return i.pop(),{_unwrappedLines:s,lines:t,graphemeText:i,graphemeLines:s}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G(G({},super.toObject([...pN,...e])),{},{styles:Rz(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:s}=this.constructor;super.set(e,t);let n=!1,i=!1;if(typeof e=="object")for(const l in e)l==="path"&&this.setPathInfo(),n=n||s.includes(l),i=i||l==="path";else n=s.includes(e),i=e==="path";return i&&this.setPathInfo(),n&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,s){const n=Xn(e,Tr.ATTRIBUTE_NAMES,s),i=G(G({},t),n),{textAnchor:l=dt,textDecoration:d="",dx:u=0,dy:h=0,top:p=0,left:m=0,fontSize:g=Rx,strokeWidth:y=1}=i,v=Ct(i,YI),w=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),G({left:m+u,top:p+h,underline:d.includes("underline"),overline:d.includes("overline"),linethrough:d.includes("line-through"),strokeWidth:0,fontSize:g},v)),j=w.getScaledHeight()/w.height,C=((w.height+w.strokeWidth)*w.lineHeight-w.height)*j,N=w.getScaledHeight()+C;let k=0;return l===Qe&&(k=w.getScaledWidth()/2),l===Vt&&(k=w.getScaledWidth()),w.set({left:w.left-k,top:w.top-(N-w.fontSize*(.07+w._fontSizeFraction))/w.lineHeight,strokeWidth:y}),w}static fromObject(e){return this._fromObject(G(G({},e),{},{styles:Oz(e.styles||{},e.text)}),{extraParam:"text"})}}H(Tr,"textLayoutProperties",fN),H(Tr,"cacheProperties",[...Yn,...pN]),H(Tr,"ownDefaults",Y6),H(Tr,"type","Text"),H(Tr,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),H(Tr,"ATTRIBUTE_NAMES",Vo.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),CN(Tr,[class extends dN{_toSVG(){const r=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(r){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:r,withShadow:!0,additionalTransform:vc(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(r){let{textBgRects:e,textSpans:t}=r;const s=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(GI,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",s?'text-decoration="'.concat(s,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(r,e){const t=[],s=[];let n,i=r;this.backgroundColor&&s.push(...Lm(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let l=0,d=this._textLines.length;l<d;l++)n=this._getLineLeftOffset(l),this.direction==="rtl"&&(n+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",l))&&this._setSVGTextLineBg(s,l,e+n,i),this._setSVGTextLineText(t,l,e+n,i),i+=this.getHeightOfLine(l);return{textSpans:t,textBgRects:s}}_createTextCharSpan(r,e,t,s,n){const i=it.NUM_FRACTION_DIGITS,l=this.getSvgSpanStyles(e,r!==r.trim()||!!r.match($I)),d=l?'style="'.concat(l,'"'):"",u=e.deltaY,h=u?' dy="'.concat(mt(u,i),'" '):"",{angle:p,renderLeft:m,renderTop:g,width:y}=n;let v="";if(m!==void 0){const w=y/2;p&&(v=' rotate="'.concat(mt(Gn(p),i),'"'));const j=Ha({angle:Gn(p)});j[4]=m,j[5]=g;const C=new ne(-w,0).transform(j);t=C.x,s=C.y}return'<tspan x="'.concat(mt(t,i),'" y="').concat(mt(s,i),'" ').concat(h).concat(v).concat(d,">").concat(Pz(r),"</tspan>")}_setSVGTextLineText(r,e,t,s){const n=this.getHeightOfLine(e),i=this.textAlign.includes(nn),l=this._textLines[e];let d,u,h,p,m,g="",y=0;s+=n*(1-this._fontSizeFraction)/this.lineHeight;for(let v=0,w=l.length-1;v<=w;v++)m=v===w||this.charSpacing||this.path,g+=l[v],h=this.__charBounds[e][v],y===0?(t+=h.kernedWidth-h.width,y+=h.width):y+=h.kernedWidth,i&&!m&&this._reSpaceAndTab.test(l[v])&&(m=!0),m||(d=d||this.getCompleteStyleDeclaration(e,v),u=this.getCompleteStyleDeclaration(e,v+1),m=Xx(d,u,!0)),m&&(p=this._getStyleDeclaration(e,v),r.push(this._createTextCharSpan(g,p,t,s,h)),g="",d=u,this.direction==="rtl"?t-=y:t+=y,y=0)}_setSVGTextLineBg(r,e,t,s){const n=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let l,d=0,u=0,h=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let p=0;p<n.length;p++){const{left:m,width:g,kernedWidth:y}=this.__charBounds[e][p];l=this.getValueOfPropertyAt(e,p,"textBackgroundColor"),l!==h?(h&&r.push(...Lm(h,t+u,s,d,i)),u=m,d=g,h=l):d+=y}l&&r.push(...Lm(h,t+u,s,d,i))}_getSVGLineTopOffset(r){let e,t=0;for(e=0;e<r;e++)t+=this.getHeightOfLine(e);const s=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*s/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(r){return"".concat(super.getSvgStyles(r)," text-decoration-thickness: ").concat(mt(this.textDecorationThickness*this.getObjectScaling().y/10,it.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(r,e){const{fontFamily:t,strokeWidth:s,stroke:n,fill:i,fontSize:l,fontStyle:d,fontWeight:u,deltaY:h,textDecorationThickness:p,linethrough:m,overline:g,underline:y}=r,v=this.getSvgTextDecoration({underline:y??this.underline,overline:g??this.overline,linethrough:m??this.linethrough}),w=p||this.textDecorationThickness;return[n?bc($r,n):"",s?"stroke-width: ".concat(s,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",l?"font-size: ".concat(l,"px; "):"",d?"font-style: ".concat(d,"; "):"",u?"font-weight: ".concat(u,"; "):"",v?"text-decoration: ".concat(v,"; text-decoration-thickness: ").concat(mt(w*this.getObjectScaling().y/10,it.NUM_FRACTION_DIGITS),"%; "):"",i?bc(er,i):"",h?"baseline-shift: ".concat(-h,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(r){return["overline","underline","line-through"].filter((e=>r[e.replace("-","")])).join(" ")}}]),Oe.setClass(Tr),Oe.setSVGClass(Tr);class XI{constructor(e){H(this,"target",void 0),H(this,"__mouseDownInPlace",!1),H(this,"__dragStartFired",!1),H(this,"__isDraggingOver",!1),H(this,"__dragStartSelection",void 0),H(this,"__dragImageDisposer",void 0),H(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach((s=>s())),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,s=t.getSelectionStartFromPointer(e);return t.isEditing&&s>=t.selectionStart&&s<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var s;let{selectionStart:n,selectionEnd:i}=t;const l=this.target,d=l.canvas,u=new ne(l.flipX?-1:1,l.flipY?-1:1),h=l._getCursorBoundaries(n),p=new ne(h.left+h.leftOffset,h.top+h.topOffset).multiply(u).transform(l.calcTransformMatrix()),m=d.getScenePoint(e).subtract(p),g=l.getCanvasRetinaScaling(),y=l.getBoundingRect(),v=p.subtract(new ne(y.left,y.top)),w=d.viewportTransform,j=v.add(m).transform(w,!0),C=l.backgroundColor,N=Gx(l.styles);l.backgroundColor="";const k={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};l.setSelectionStyles(k,0,n),l.setSelectionStyles(k,i,l.text.length),l.dirty=!0;const T=l.toCanvasElement({enableRetinaScaling:d.enableRetinaScaling,viewportTransform:!0});l.backgroundColor=C,l.styles=N,l.dirty=!0,i0(T,{position:"fixed",left:"".concat(-T.width,"px"),border:Ur,width:"".concat(T.width/g,"px"),height:"".concat(T.height/g,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{T.remove()},Is(e.target||this.target.hiddenTextarea).body.appendChild(T),(s=e.dataTransfer)===null||s===void 0||s.setDragImage(T,j.x,j.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,s=this.isActive();if(s&&e.dataTransfer){const n=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(n.selectionStart,n.selectionEnd).join(""),l=G({text:t.text,value:i},n);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(n.selectionStart,n.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,l)}return t.abortCursorAnimation(),s}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),s=this.__dragStartSelection;return t<s.selectionStart||t>s.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const s=this.targetCanDrop(t);!this.__isDraggingOver&&s&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,s=this.targetCanDrop(t);!this.__isDraggingOver&&s?this.__isDraggingOver=!0:this.__isDraggingOver&&!s&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:s}=e,n=s.defaultPrevented;this.__isDraggingOver=!1,s.preventDefault();let i=(t=s.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!n){const l=this.target,d=l.canvas;let u=l.getSelectionStartFromPointer(s);const{styles:h}=s.dataTransfer.types.includes("application/fabric")?JSON.parse(s.dataTransfer.getData("application/fabric")):{},p=i[Math.max(0,i.length-1)],m=0;if(this.__dragStartSelection){const g=this.__dragStartSelection.selectionStart,y=this.__dragStartSelection.selectionEnd;u>g&&u<=y?u=g:u>y&&(u-=y-g),l.removeChars(g,y),delete this.__dragStartSelection}l._reNewline.test(p)&&(l._reNewline.test(l._text[u])||u===l._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=l,l.insertChars(i,h,u),d.setActiveObject(l),l.enterEditing(s),l.selectionStart=Math.min(u+m,l._text.length),l.selectionEnd=Math.min(l.selectionStart+i.length,l._text.length),l.hiddenTextarea.value=l.text,l._updateTextarea(),l.hiddenTextarea.focus(),l.fire(Ch,{index:u+m,action:"drop"}),d.fire("text:changed",{target:l}),d.contextTopDirty=!0,d.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var s;const n=this.target,i=this.target.canvas,{selectionStart:l,selectionEnd:d}=this.__dragStartSelection,u=((s=t.dataTransfer)===null||s===void 0?void 0:s.dropEffect)||Ur;u===Ur?(n.selectionStart=l,n.selectionEnd=d,n._updateTextarea(),n.hiddenTextarea.focus()):(n.clearContextTop(),u==="move"&&(n.removeChars(l,d),n.selectionStart=n.selectionEnd=l,n.hiddenTextarea&&(n.hiddenTextarea.value=n.text),n._updateTextarea(),n.fire(Ch,{index:l,action:"dragend"}),i.fire("text:changed",{target:n}),i.requestRenderAll()),n.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const LS=/[ \n\.,;!\?\-]/;class KI extends Tr{constructor(){super(...arguments),H(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:s,delay:n,onComplete:i}=e;return yN({startValue:this._currentCursorOpacity,endValue:t,duration:s,delay:n,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:l=>{this._currentCursorOpacity=l,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach((t=>{t&&!t.isDone()&&(e=!0,t.abort())})),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some((e=>!e||e.isDone()))&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,s=e-1;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s--;for(;/\S/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findWordBoundaryRight(e){let t=0,s=e;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)t++,s++;for(;/\S/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}findLineBoundaryLeft(e){let t=0,s=e-1;for(;!/\n/.test(this._text[s])&&s>-1;)t++,s--;return e-t}findLineBoundaryRight(e){let t=0,s=e;for(;!/\n/.test(this._text[s])&&s<this._text.length;)t++,s++;return e+t}searchWordBoundary(e,t){const s=this._text;let n=e>0&&this._reSpace.test(s[e])&&(t===-1||!Ox.test(s[e-1]))?e-1:e,i=s[n];for(;n>0&&n<s.length&&!LS.test(i);)n+=t,i=s[n];return t===-1&&LS.test(i)&&n++,n}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.searchWordBoundary(e,-1),n=Math.max(s,this.searchWordBoundary(e,1));this.selectionStart=s,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const s=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);this.selectionStart=s,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Is(t).activeElement!==t&&t.focus();const s=this.getSelectionStartFromPointer(e),n=this.selectionStart,i=this.selectionEnd;(s===this.__selectionStartOnMouseDown&&n!==i||n!==s&&i!==s)&&(s>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=s):(this.selectionStart=s,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,s){const n=s.slice(0,e),i=this.graphemeSplit(n).length;if(e===t)return{selectionStart:i,selectionEnd:i};const l=s.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(l).length}}fromGraphemeToStringSelection(e,t,s){const n=s.slice(0,e).join("").length;return e===t?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+s.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),s=this.get2DCursorLocation(e),n=s.lineIndex,i=s.charIndex,l=this.getValueOfPropertyAt(n,i,"fontSize")*this.lineHeight,d=t.leftOffset,u=this.getCanvasRetinaScaling(),h=this.canvas.upperCanvasEl,p=h.width/u,m=h.height/u,g=p-l,y=m-l,v=new ne(t.left+d,t.top+t.topOffset+l).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new ne(h.clientWidth/p,h.clientHeight/m));return v.x<0&&(v.x=0),v.x>g&&(v.x=g),v.y<0&&(v.y=0),v.y>y&&(v.y=y),v.x+=this.canvas._offset.left,v.y+=this.canvas._offset.top,{left:"".concat(v.x,"px"),top:"".concat(v.y,"px"),fontSize:"".concat(l,"px"),charHeight:l}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(kh),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:s,charIndex:n}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:l}=this.get2DCursorLocation(t,!0);if(s!==i){if(this.styles[s])for(let d=n;d<this._unwrappedTextLines[s].length;d++)delete this.styles[s][d];if(this.styles[i])for(let d=l;d<this._unwrappedTextLines[i].length;d++){const u=this.styles[i][d];u&&(this.styles[s]||(this.styles[s]={}),this.styles[s][n+d-l]=u)}for(let d=s+1;d<=i;d++)delete this.styles[d];this.shiftLineStyles(i,s-i)}else if(this.styles[s]){const d=this.styles[s],u=l-n;for(let h=n;h<l;h++)delete d[h];for(const h in this.styles[s]){const p=parseInt(h,10);p>=l&&(d[p-u]=d[h],delete d[h])}}}shiftLineStyles(e,t){const s=Object.assign({},this.styles);for(const n in this.styles){const i=parseInt(n,10);i>e&&(this.styles[i+t]=s[i],s[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,s,n){const i={},l=this._unwrappedTextLines[e].length,d=l===t;let u=!1;s||(s=1),this.shiftLineStyles(e,s);const h=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const m in this.styles[e]){const g=parseInt(m,10);g>=t&&(u=!0,i[g-t]=this.styles[e][m],d&&t===0||delete this.styles[e][m])}let p=!1;for(u&&!d&&(this.styles[e+s]=i,p=!0),(p||l>t)&&s--;s>0;)n&&n[s-1]?this.styles[e+s]={0:G({},n[s-1])}:h?this.styles[e+s]={0:G({},h)}:delete this.styles[e+s],s--;this._forceClearCache=!0}insertCharStyleObject(e,t,s,n){this.styles||(this.styles={});const i=this.styles[e],l=i?G({},i):{};s||(s=1);for(const u in l){const h=parseInt(u,10);h>=t&&(i[h+s]=l[h],l[h-s]||delete i[h])}if(this._forceClearCache=!0,n){for(;s--;)Object.keys(n[s]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+s]=G({},n[s]));return}if(!i)return;const d=i[t?t-1:1];for(;d&&s--;)this.styles[e][t+s]=G({},d)}insertNewStyleBlock(e,t,s){const n=this.get2DCursorLocation(t,!0),i=[0];let l,d=0;for(let u=0;u<e.length;u++)e[u]===`
`?(d++,i[d]=0):i[d]++;for(i[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,i[0],s),s=s&&s.slice(i[0]+1)),d&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+i[0],d),l=1;l<d;l++)i[l]>0?this.insertCharStyleObject(n.lineIndex+l,0,i[l],s):s&&this.styles[n.lineIndex+l]&&s[0]&&(this.styles[n.lineIndex+l][0]=s[0]),s=s&&s.slice(i[l]+1);i[l]>0&&this.insertCharStyleObject(n.lineIndex+l,0,i[l],s)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s;n>s&&this.removeStyleFromTo(s,n);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,s,t),this._text=[...this._text.slice(0,s),...i,...this._text.slice(n)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,s){s<=e?(t===e?this._selectionDirection=dt:this._selectionDirection===Vt&&(this._selectionDirection=dt,this.selectionEnd=e),this.selectionStart=s):s>e&&s<t?this._selectionDirection===Vt?this.selectionEnd=s:this.selectionStart=s:(t===e?this._selectionDirection=Vt:this._selectionDirection===dt&&(this._selectionDirection=Vt,this.selectionStart=t),this.selectionEnd=s)}}class qI extends KI{initHiddenTextarea(){const e=this.canvas&&Is(this.canvas.getElement())||Ba(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map((l=>{let[d,u]=l;return t.setAttribute(d,u)}));const{top:s,left:n,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(s,"; left: ").concat(n,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map((l=>{let[d,u]=l;return t.addEventListener(d,this[u].bind(this))})),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:s,selectionStart:n,selectionEnd:i}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const l=()=>{this.updateFromTextArea(),this.fire(Ch),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void l();const d=this._splitTextIntoLines(s).graphemeText,u=this._text.length,h=d.length,p=this.selectionStart,m=this.selectionEnd,g=p!==m;let y,v,w,j,C=h-u;const N=this.fromStringToGraphemeSelection(n,i,s),k=p>N.selectionStart;g?(v=this._text.slice(p,m),C+=m-p):h<u&&(v=k?this._text.slice(m+C,m):this._text.slice(p,p-C));const T=d.slice(N.selectionEnd-C,N.selectionEnd);if(v&&v.length&&(T.length&&(y=this.getSelectionStyles(p,p+1,!1),y=T.map((()=>y[0]))),g?(w=p,j=m):k?(w=m-v.length,j=m):(w=m,j=m+v.length),this.removeStyleFromTo(w,j)),T.length){const{copyPasteData:E}=gn();t&&T.join("")===E.copiedText&&!it.disableStyleCopyPaste&&(y=E.copiedTextStyle),this.insertNewStyleBlock(T,p,y)}l()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:s,selectionEnd:n}=t;this.compositionStart=s,this.compositionEnd=n,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=gn();e.copiedText=this.getSelectedText(),it.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let s,n=this._getLineLeftOffset(e);return t>0&&(s=this.__charBounds[e][t-1],n+=s.left+s.width),n}getDownCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(s),i=n.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-s;const l=n.charIndex,d=this._getWidthBeforeCursor(i,l),u=this._getIndexOnLine(i+1,d);return this._textLines[i].slice(l).length+u+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const s=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(s),i=n.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-s;const l=n.charIndex,d=this._getWidthBeforeCursor(i,l),u=this._getIndexOnLine(i-1,d),h=this._textLines[i].slice(0,l),p=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+u-h.length+(1-p)}_getIndexOnLine(e,t){const s=this._textLines[e];let n,i,l=this._getLineLeftOffset(e),d=0;for(let u=0,h=s.length;u<h;u++)if(n=this.__charBounds[e][u].width,l+=n,l>t){i=!0;const p=l-n,m=l,g=Math.abs(p-t);d=Math.abs(m-t)<g?u:u-1;break}return i||(d=s.length-1),d}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const s=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Vt);if(t.shiftKey?this.moveCursorWithShift(s):this.moveCursorWithoutShift(s),s!==0){const n=this.text.length;this.selectionStart=Ea(0,this.selectionStart,n),this.selectionEnd=Ea(0,this.selectionEnd,n),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===dt?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,s){let n;if(e.altKey)n=this["findWordBoundary".concat(s)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=s==="Left"?-1:1,!0;n=this["findLineBoundary".concat(s)](this[t])}return n!==void 0&&this[t]!==n&&(this[t]=n,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=dt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Vt&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=dt,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const s="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[s](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===dt&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Vt,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Vt,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const zS=r=>!!r.button;class ZI extends qI{constructor(){super(...arguments),H(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new XI(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:s}=e;this.canvas&&this.editable&&!zS(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),s&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=s||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:s}=e;const n=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||s&&s.actionPerformed||zS(t)||n||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),s=this.selectionStart,n=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(s,n,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Bs(this.calcTransformMatrix())).add(new ne(-this._getLeftOffset(),-this._getTopOffset()));let s=0,n=0,i=0;for(let h=0;h<this._textLines.length&&s<=t.y;h++)s+=this.getHeightOfLine(h),i=h,h>0&&(n+=this._textLines[h-1].length+this.missingNewlineOffset(h-1));let l=Math.abs(this._getLineLeftOffset(i));const d=this._textLines[i].length,u=this.__charBounds[i];for(let h=0;h<d;h++){const p=l+u[h].kernedWidth;if(t.x<=p){Math.abs(t.x-p)<=Math.abs(t.x-l)&&n++;break}l=p,n++}return Math.min(this.flipX?d-n:n,this._text.length)}}const du="moveCursorUp",uu="moveCursorDown",hu="moveCursorLeft",fu="moveCursorRight",pu="exitEditing",IS=(r,e)=>{const t=e.getRetinaScaling();r.setTransform(t,0,0,t,0,0);const s=e.viewportTransform;r.transform(s[0],s[1],s[2],s[3],s[4],s[5])},JI=G({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:pu,27:pu,33:du,34:uu,35:fu,36:hu,37:hu,38:du,39:fu,40:uu},keysMapRtl:{9:pu,27:pu,33:du,34:uu,35:hu,36:fu,37:fu,38:du,39:hu,40:uu},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Fn extends ZI{static getDefaults(){return G(G({},super.getDefaults()),Fn.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,G(G({},Fn.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof a0&&this.canvas.textEditingManager.remove(this),t instanceof a0&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,s=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,s)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,s)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const s=super.toCanvasElement(e);return this.isEditing=t,s}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),s=this.findAncestorsWithClipPath(),n=s.length>0;let i,l=e;if(n){i=ks(e.canvas),l=i.getContext("2d"),IS(l,this.canvas);const d=this.calcTransformMatrix();l.transform(d[0],d[1],d[2],d[3],d[4],d[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(l,t):this.renderCursor(l,t),n)for(const d of s){const u=d.clipPath,h=ks(e.canvas),p=h.getContext("2d");if(IS(p,this.canvas),!u.absolutePositioned){const m=d.calcTransformMatrix();p.transform(m[0],m[1],m[2],m[3],m[4],m[5])}u.transform(p),u.drawObject(p,!0,{}),this.drawClipPathOnCache(l,u,h)}n&&(e.setTransform(1,0,0,1,0,0),e.drawImage(i,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const s=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:s,top:n,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,s=0;const{charIndex:n,lineIndex:i}=this.get2DCursorLocation(e);for(let h=0;h<i;h++)t+=this.getHeightOfLine(h);const l=this._getLineLeftOffset(i),d=this.__charBounds[i][n];d&&(s=d.left),this.charSpacing!==0&&n===this._textLines[i].length&&(s-=this._getWidthOfCharSpacing());const u={top:t,left:l+(s>0?s:0)};return this.direction==="rtl"&&(this.textAlign===Vt||this.textAlign===nn||this.textAlign===Ql?u.left*=-1:this.textAlign===dt||this.textAlign===Mh?u.left=l-(s>0?s:0):this.textAlign!==Qe&&this.textAlign!==ec||(u.left=l-(s>0?s:0))),u}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const s=this.get2DCursorLocation(e),n=s.lineIndex,i=s.charIndex>0?s.charIndex-1:0,l=this.getValueOfPropertyAt(n,i,"fontSize"),d=this.getObjectScaling().x*this.canvas.getZoom(),u=this.cursorWidth/d,h=this.getValueOfPropertyAt(n,i,"deltaY"),p=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-l*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(n,i,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-u/2,top:p+t.top+h,width:u,height:l}}_renderCursor(e,t,s){const{color:n,opacity:i,left:l,top:d,width:u,height:h}=this.getCursorRenderingData(s,t);e.fillStyle=n,e.globalAlpha=i,e.fillRect(l,d,u,h)}renderSelection(e,t){const s={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,s,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,s){const n=t.selectionStart,i=t.selectionEnd,l=this.textAlign.includes(nn),d=this.get2DCursorLocation(n),u=this.get2DCursorLocation(i),h=d.lineIndex,p=u.lineIndex,m=d.charIndex<0?0:d.charIndex,g=u.charIndex<0?0:u.charIndex;for(let y=h;y<=p;y++){const v=this._getLineLeftOffset(y)||0;let w=this.getHeightOfLine(y),j=0,C=0,N=0;if(y===h&&(C=this.__charBounds[h][m].left),y>=h&&y<p)N=l&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===p)if(g===0)N=this.__charBounds[p][g].left;else{const M=this._getWidthOfCharSpacing();N=this.__charBounds[p][g-1].left+this.__charBounds[p][g-1].width-M}j=w,(this.lineHeight<1||y===p&&this.lineHeight>1)&&(w/=this.lineHeight);let k=s.left+v+C,T=w,E=0;const D=N-C;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",T=1,E=w):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Vt||this.textAlign===nn||this.textAlign===Ql?k=this.width-k-D:this.textAlign===dt||this.textAlign===Mh?k=s.left+v-N:this.textAlign!==Qe&&this.textAlign!==ec||(k=s.left+v-N)),e.fillRect(k,s.top+s.topOffset+E,D,T),s.topOffset+=j}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,er)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}H(Fn,"ownDefaults",JI),H(Fn,"type","IText"),Oe.setClass(Fn),Oe.setClass(Fn,"i-text");class mi extends Fn{static getDefaults(){return G(G({},super.getDefaults()),mi.ownDefaults)}constructor(e,t){super(e,G(G({},mi.ownDefaults),t))}static createControls(){return{controls:Tz()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(nn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,s=0,n=0;const i={};for(let l=0;l<e.graphemeLines.length;l++)e.graphemeText[n]===`
`&&l>0?(s=0,n++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[n])&&l>0&&(s++,n++),i[l]={line:t,offset:s},n+=e.graphemeLines[l].length,s+=e.graphemeLines[l].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[t];s&&(t=s.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,s=0,n=e+1,i=!1;const l=this._styleMap[e],d=this._styleMap[e+1];l&&(e=l.line,s=l.offset),d&&(n=d.line,i=n===e,t=d.offset);const u=e===void 0?this.styles:{line:this.styles[e]};for(const h in u)for(const p in u[h]){const m=parseInt(p,10);if(m>=s&&(!i||m<t))for(const g in u[h][p])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[e];if(!s)return{};e=s.line,t=s.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,s){const n=this._styleMap[e];super._setStyleDeclaration(n.line,n.offset+t,s)}_deleteStyleDeclaration(e,t){const s=this._styleMap[e];super._deleteStyleDeclaration(s.line,s.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const s=this.getGraphemeDataForRender(e),n=[];for(let i=0;i<s.wordsData.length;i++)n.push(...this._wrapLine(i,t,s));return this.isWrapping=!1,n}getGraphemeDataForRender(e){const t=this.splitByGrapheme,s=t?"":" ";let n=0;return{wordsData:e.map(((i,l)=>{let d=0;const u=t?this.graphemeSplit(i):this.wordSplit(i);return u.length===0?[{word:[],width:0}]:u.map((h=>{const p=t?[h]:this.graphemeSplit(h),m=this._measureWord(p,l,d);return n=Math.max(m,n),d+=p.length+s.length,{word:p,width:m}}))})),largestWordWidth:n}}_measureWord(e,t){let s,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let l=0,d=e.length;l<d;l++)i+=this._getGraphemeBox(e[l],t,l+n,s,!0).kernedWidth,s=e[l];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,s){let{largestWordWidth:n,wordsData:i}=s,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const d=this._getWidthOfCharSpacing(),u=this.splitByGrapheme,h=[],p=u?"":" ";let m=0,g=[],y=0,v=0,w=!0;t-=l;const j=Math.max(t,n,this.dynamicMinWidth),C=i[e];let N;for(y=0,N=0;N<C.length;N++){const{word:k,width:T}=C[N];y+=k.length,m+=v+T-d,m>j&&!w?(h.push(g),g=[],m=T,w=!0):m+=d,w||u||g.push(p),g=g.concat(k),v=u?0:this._measureWord([p],e,y),y++,w=!1}return N&&h.push(g),n+l>this.dynamicMinWidth&&(this.dynamicMinWidth=n-d+l),h}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),s=this._wrapText(t.lines,this.width),n=new Array(s.length);for(let i=0;i<s.length;i++)n[i]=s[i].join("");return t.lines=n,t.graphemeLines=s,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const s=parseInt(t,10);if(this._textLines[s]){const n=this._styleMap[t].line;e.set("".concat(n),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}H(mi,"type","Textbox"),H(mi,"textLayoutProperties",[...Fn.textLayoutProperties,"width"]),H(mi,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Oe.setClass(mi);class BS extends df{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:s}=e,{clipPath:n,group:i}=s;if(!n||!this.shouldPerformLayout(e))return;const{width:l,height:d}=Ln(NN(s,n)),u=new ne(l,d);if(n.absolutePositioned)return{center:ya(n.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:u};{const h=n.getRelativeCenterPoint().transform(s.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:p=new ne,correction:m=new ne}=this.calcBoundingBox(t,e)||{};return{center:p.add(h),correction:m.subtract(h),size:u}}return{center:s.getRelativeCenterPoint().add(h),size:u}}}}H(BS,"type","clip-path"),Oe.setClass(BS);class VS extends df{getInitialSize(e,t){let{target:s}=e,{size:n}=t;return new ne(s.width||n.x,s.height||n.y)}}H(VS,"type","fixed"),Oe.setClass(VS);class QI extends Sc{subscribeTargets(e){const t=e.target;e.targets.reduce(((s,n)=>(n.parent&&s.add(n.parent),s)),new Set).forEach((s=>{s.layoutManager.subscribeTargets({target:s,targets:[t]})}))}unsubscribeTargets(e){const t=e.target,s=t.getObjects();e.targets.reduce(((n,i)=>(i.parent&&n.add(i.parent),n)),new Set).forEach((n=>{!s.some((i=>i.parent===n))&&n.layoutManager.unsubscribeTargets({target:n,targets:[t]})}))}}class gi extends Eo{static getDefaults(){return G(G({},super.getDefaults()),gi.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,gi.ownDefaults),this.setOptions(t);const{left:s,top:n,layoutManager:i}=t;this.groupInit(e,{left:s,top:n,layoutManager:i??new QI})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach((n=>{const i=this._objects.findIndex((d=>d.isInFrontOf(n))),l=i===-1?this.size():i;this.insertAt(l,n)}))}canEnterGroup(e){return this.getObjects().some((t=>t.isDescendantOf(e)||e.isDescendantOf(t)))?(Oo("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const s=new Set;t.forEach((n=>{const{parent:i}=n;i&&s.add(i)})),e===qx?s.forEach((n=>{n._onAfterObjectsChange(Eh,t)})):s.forEach((n=>{n._set("dirty",!0)}))}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,s){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const n=G(G({hasControls:!1},s),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,n);super._renderControls(e,t),e.restore()}}H(gi,"type","ActiveSelection"),H(gi,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Oe.setClass(gi),Oe.setClass(gi,"activeSelection");class eB{constructor(){H(this,"resources",{})}applyFilters(e,t,s,n,i){const l=i.getContext("2d");if(!l)return;l.drawImage(t,0,0,s,n);const d={sourceWidth:s,sourceHeight:n,imageData:l.getImageData(0,0,s,n),originalEl:t,originalImageData:l.getImageData(0,0,s,n),canvasEl:i,ctx:l,filterBackend:this};e.forEach((h=>{h.applyTo(d)}));const{imageData:u}=d;return u.width===s&&u.height===n||(i.width=u.width,i.height=u.height),l.putImageData(u,0,0),d}}class UN{constructor(){let{tileSize:e=it.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};H(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),H(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const s=ks({width:e,height:t}),n=s.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});n&&(n.clearColor(0,0,0,0),this.canvas=s,this.gl=n)}applyFilters(e,t,s,n,i,l){const d=this.gl,u=i.getContext("2d");if(!d||!u)return;let h;l&&(h=this.getCachedTexture(l,t));const p={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:s,sourceHeight:n,destinationWidth:s,destinationHeight:n,context:d,sourceTexture:this.createTexture(d,s,n,h?void 0:t),targetTexture:this.createTexture(d,s,n),originalTexture:h||this.createTexture(d,s,n,h?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},m=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,m),e.forEach((g=>{g&&g.applyTo(p)})),(function(g){const y=g.targetCanvas,v=y.width,w=y.height,j=g.destinationWidth,C=g.destinationHeight;v===j&&w===C||(y.width=j,y.height=C)})(p),this.copyGLTo2D(d,p),d.bindTexture(d.TEXTURE_2D,null),d.deleteTexture(p.sourceTexture),d.deleteTexture(p.targetTexture),d.deleteFramebuffer(m),u.setTransform(1,0,0,1,0,0),p}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,s,n,i){const{NEAREST:l,TEXTURE_2D:d,RGBA:u,UNSIGNED_BYTE:h,CLAMP_TO_EDGE:p,TEXTURE_MAG_FILTER:m,TEXTURE_MIN_FILTER:g,TEXTURE_WRAP_S:y,TEXTURE_WRAP_T:v}=e,w=e.createTexture();return e.bindTexture(d,w),e.texParameteri(d,m,i||l),e.texParameteri(d,g,i||l),e.texParameteri(d,y,p),e.texParameteri(d,v,p),n?e.texImage2D(d,0,u,u,h,n):e.texImage2D(d,0,u,t,s,0,u,h,null),w}getCachedTexture(e,t,s){const{textureCache:n}=this;if(n[e])return n[e];{const i=this.createTexture(this.gl,t.width,t.height,t,s);return i&&(n[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const s=e.canvas,n=t.targetCanvas,i=n.getContext("2d");if(!i)return;i.translate(0,n.height),i.scale(1,-1);const l=s.height-n.height;i.drawImage(s,0,l,n.width,n.height,0,0,n.width,n.height)}copyGLTo2DPutImageData(e,t){const s=t.targetCanvas.getContext("2d"),n=t.destinationWidth,i=t.destinationHeight,l=n*i*4;if(!s)return;const d=new Uint8Array(this.imageBuffer,0,l),u=new Uint8ClampedArray(this.imageBuffer,0,l);e.readPixels(0,0,n,i,e.RGBA,e.UNSIGNED_BYTE,d);const h=new ImageData(u,n,i);s.putImageData(h,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const s=e.getExtension("WEBGL_debug_renderer_info");if(s){const n=e.getParameter(s.UNMASKED_RENDERER_WEBGL),i=e.getParameter(s.UNMASKED_VENDOR_WEBGL);n&&(t.renderer=n.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let Im;function tB(){const{WebGLProbe:r}=gn();return r.queryWebGL(xn()),it.enableGLFiltering&&r.isSupported(it.textureSize)?new UN({tileSize:it.textureSize}):new eB}function Bm(){return!Im&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Im=tB()),Im}const rB=["filters","resizeFilter","src","crossOrigin","type"],$N=["cropX","cropY"];class ys extends wr{static getDefaults(){return G(G({},super.getDefaults()),ys.ownDefaults)}constructor(e,t){super(),H(this,"_lastScaleX",1),H(this,"_lastScaleY",1),H(this,"_filterScalingX",1),H(this,"_filterScalingY",1),this.filters=[],Object.assign(this,ys.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Fo()),this.setElement(typeof e=="string"?(this.canvas&&Is(this.canvas.getElement())||Ba()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(s),(t=e.classList)===null||t===void 0||t.add(ys.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Bm(!1);t instanceof UN&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((e=>{const t=this[e];t&&gn().dispose(t),this[e]=void 0}))}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,s=this.height/2;e.beginPath(),e.moveTo(-t,-s),e.lineTo(t,-s),e.lineTo(t,s),e.lineTo(-t,s),e.lineTo(-t,-s),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach((s=>{s&&t.push(s.toObject())})),G(G({},super.toObject([...$N,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,s=-this.width/2,n=-this.height/2;let i=[],l=[],d="",u="";if(!t)return[];if(this.hasCrop()){const h=Fo();i.push('<clipPath id="imageCrop_'+h+`">
`,'	<rect x="'+s+'" y="'+n+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),d=' clip-path="url(#imageCrop_'+h+')" '}if(this.imageSmoothing||(u=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(s-this.cropX,'" y="').concat(n-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(u).concat(d,`></image>
`)),this.stroke||this.strokeDashArray){const h=this.fill;this.fill=null,l=['	<rect x="'.concat(s,'" y="').concat(n,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=h}return i=this.paintFirst!==er?i.concat(l,e):i.concat(e,l),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Zu(e,{crossOrigin:t,signal:s}).then((n=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(n)}))}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,s=this.getTotalObjectScaling(),n=s.x,i=s.y,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||n>t&&i>t)return this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=i);const d=ks(l),{width:u,height:h}=l;this._element=d,this._lastScaleX=e.scaleX=n,this._lastScaleY=e.scaleY=i,Bm().applyFilters([e],l,u,h,this._element),this._filterScalingX=d.width/this._originalElement.width,this._filterScalingY=d.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter((i=>i&&!i.isNeutralState())),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,s=t.naturalWidth||t.width,n=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=ks({width:s,height:n});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,s,n),this._lastScaleX=1,this._lastScaleY=1);Bm().applyFilters(e,this._originalElement,s,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const s=this._filterScalingX,n=this._filterScalingY,i=this.width,l=this.height,d=Math.max(this.cropX,0),u=Math.max(this.cropY,0),h=t.naturalWidth||t.width,p=t.naturalHeight||t.height,m=d*s,g=u*n,y=Math.min(i*s,h-m),v=Math.min(l*n,p-g),w=-i/2,j=-l/2,C=Math.min(i,h/s-d),N=Math.min(l,p/n-u);t&&e.drawImage(t,m,g,y,v,w,j,C,N)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=this.getOriginalSize();this.width=e||s.width,this.height=t||s.height}parsePreserveAspectRatioAttribute(){const e=$6(this.preserveAspectRatio||""),t=this.width,s=this.height,n={width:t,height:s};let i,l=this._element.width,d=this._element.height,u=1,h=1,p=0,m=0,g=0,y=0;return!e||e.alignX===Ur&&e.alignY===Ur?(u=t/l,h=s/d):(e.meetOrSlice==="meet"&&(u=h=aI(this._element,n),i=(t-l*u)/2,e.alignX==="Min"&&(p=-i),e.alignX==="Max"&&(p=i),i=(s-d*h)/2,e.alignY==="Min"&&(m=-i),e.alignY==="Max"&&(m=i)),e.meetOrSlice==="slice"&&(u=h=lI(this._element,n),i=l-t/u,e.alignX==="Mid"&&(g=i/2),e.alignX==="Max"&&(g=i),i=d-s/h,e.alignY==="Mid"&&(y=i/2),e.alignY==="Max"&&(y=i),l=t/u,d=s/h)),{width:l,height:d,scaleX:u,scaleY:h,offsetLeft:p,offsetTop:m,cropX:g,cropY:y}}static fromObject(e,t){let{filters:s,resizeFilter:n,src:i,crossOrigin:l,type:d}=e,u=Ct(e,rB);return Promise.all([Zu(i,G(G({},t),{},{crossOrigin:l})),s&&yc(s,t),n&&yc([n],t),of(u,t)]).then((h=>{let[p,m=[],[g]=[],y={}]=h;return new this(p,G(G({},u),{},{src:i,filters:m,resizeFilter:g},y))}))}static fromURL(e){let{crossOrigin:t=null,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Zu(e,{crossOrigin:t,signal:s}).then((i=>new this(i,n)))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;const n=Xn(e,this.ATTRIBUTE_NAMES,s);return this.fromURL(n["xlink:href"]||n.href,t,n).catch((i=>(Oo("log","Unable to parse Image",i),null)))}}H(ys,"type","Image"),H(ys,"cacheProperties",[...Yn,...$N]),H(ys,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),H(ys,"CSS_CANVAS","canvas-img"),H(ys,"ATTRIBUTE_NAMES",[...Vo,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),Oe.setClass(ys),Oe.setSVGClass(ys);lf(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const hf=r=>r.webgl!==void 0,Zx="precision highp float",sB=`
    `.concat(Zx,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),nB=["type"],oB=["type"],iB=new RegExp(Zx,"g");class tr{get type(){return this.constructor.type}constructor(){let e=Ct(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nB);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return sB}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:n="highp"}}=gn();n!=="highp"&&(t=t.replace(iB,Zx.replace("highp",n)));const i=e.createShader(e.VERTEX_SHADER),l=e.createShader(e.FRAGMENT_SHADER),d=e.createProgram();if(!i||!l||!d)throw new cn("Vertex, fragment shader or program creation error");if(e.shaderSource(i,s),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new cn("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(l,t),e.compileShader(l),!e.getShaderParameter(l,e.COMPILE_STATUS))throw new cn("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(l)));if(e.attachShader(d,i),e.attachShader(d,l),e.linkProgram(d),!e.getProgramParameter(d,e.LINK_STATUS))throw new cn('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(d)));const u=this.getUniformLocations(e,d)||{};return u.uStepW=e.getUniformLocation(d,"uStepW"),u.uStepH=e.getUniformLocation(d,"uStepH"),{program:d,attributeLocations:this.getAttributeLocations(e,d),uniformLocations:u}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const s=this.constructor.uniformLocations,n={};for(let i=0;i<s.length;i++)n[s[i]]=e.getUniformLocation(t,s[i]);return n}sendAttributeData(e,t,s){const n=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const s=e.destinationWidth,n=e.destinationHeight;e.sourceWidth===s&&e.sourceHeight===n||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,s,n)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){hf(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,s=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(s.program),this.sendAttributeData(t,s.attributeLocations,e.aPosition),t.uniform1f(s.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(s.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,s.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,s){e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:s}=e,n=ks({width:t,height:s});e.helpLayer=n}}toObject(){const e=Object.keys(this.constructor.defaults||{});return G({type:this.type},e.reduce(((t,s)=>(t[s]=this[s],t)),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Ct(e,oB))}}H(tr,"type","BaseFilter"),H(tr,"uniformLocations",[]);const aB={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class mu extends tr{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(aB[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const s=new ct(this.color).getSource(),n=this.alpha,i=s[0]*n,l=s[1]*n,d=s[2]*n,u=1-n;for(let h=0;h<t.length;h+=4){const p=t[h],m=t[h+1],g=t[h+2];let y,v,w;switch(this.mode){case"multiply":y=p*i/255,v=m*l/255,w=g*d/255;break;case"screen":y=255-(255-p)*(255-i)/255,v=255-(255-m)*(255-l)/255,w=255-(255-g)*(255-d)/255;break;case"add":y=p+i,v=m+l,w=g+d;break;case"difference":y=Math.abs(p-i),v=Math.abs(m-l),w=Math.abs(g-d);break;case"subtract":y=p-i,v=m-l,w=g-d;break;case"darken":y=Math.min(p,i),v=Math.min(m,l),w=Math.min(g,d);break;case"lighten":y=Math.max(p,i),v=Math.max(m,l),w=Math.max(g,d);break;case"overlay":y=i<128?2*p*i/255:255-2*(255-p)*(255-i)/255,v=l<128?2*m*l/255:255-2*(255-m)*(255-l)/255,w=d<128?2*g*d/255:255-2*(255-g)*(255-d)/255;break;case"exclusion":y=i+p-2*i*p/255,v=l+m-2*l*m/255,w=d+g-2*d*g/255;break;case"tint":y=i+p*u,v=l+m*u,w=d+g*u}t[h]=y,t[h+1]=v,t[h+2]=w}}sendUniformData(e,t){const s=new ct(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,e.uniform4fv(t.uColor,s)}}H(mu,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),H(mu,"type","BlendColor"),H(mu,"uniformLocations",["uColor"]),Oe.setClass(mu);const lB={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},cB=["type","image"];class gu extends tr{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return lB[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,s=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,s,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:s}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/s,1]}applyTo2d(e){let{imageData:{data:t,width:s,height:n},filterBackend:{resources:i}}=e;const l=this.image;i.blendImage||(i.blendImage=xn());const d=i.blendImage,u=d.getContext("2d");d.width!==s||d.height!==n?(d.width=s,d.height=n):u.clearRect(0,0,s,n),u.setTransform(l.scaleX,0,0,l.scaleY,l.left,l.top),u.drawImage(l.getElement(),0,0,s,n);const h=u.getImageData(0,0,s,n).data;for(let p=0;p<t.length;p+=4){const m=t[p],g=t[p+1],y=t[p+2],v=t[p+3],w=h[p],j=h[p+1],C=h[p+2],N=h[p+3];switch(this.mode){case"multiply":t[p]=m*w/255,t[p+1]=g*j/255,t[p+2]=y*C/255,t[p+3]=v*N/255;break;case"mask":t[p+3]=N}}}sendUniformData(e,t){const s=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,s)}toObject(){return G(G({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:s,image:n}=e,i=Ct(e,cB);return ys.fromObject(n,t).then((l=>new this(G(G({},i),{},{image:l}))))}}H(gu,"type","BlendImage"),H(gu,"defaults",{mode:"multiply",alpha:1}),H(gu,"uniformLocations",["uTransformMatrix","uImage"]),Oe.setClass(gu);class xu extends tr{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){hf(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:s,height:n}}=e;this.aspectRatio=s/n,this.horizontal=!0;let i=this.getBlurValue()*s;const l=new Uint8ClampedArray(t),d=15,u=4*s;for(let h=0;h<t.length;h+=4){let p=0,m=0,g=0,y=0,v=0;const w=h-h%u,j=w+u;for(let C=-14;C<d;C++){const N=C/d,k=4*Math.floor(i*N),T=1-Math.abs(N);let E=h+k;E<w?E=w:E>j&&(E=j);const D=t[E+3]*T;p+=t[E]*D,m+=t[E+1]*D,g+=t[E+2]*D,y+=D,v+=T}l[h]=p/y,l[h+1]=m/y,l[h+2]=g/y,l[h+3]=y/v}this.horizontal=!1,i=this.getBlurValue()*n;for(let h=0;h<l.length;h+=4){let p=0,m=0,g=0,y=0,v=0;const w=h%u,j=l.length-u+w;for(let C=-14;C<d;C++){const N=C/d,k=Math.floor(i*N)*u,T=1-Math.abs(N);let E=h+k;E<w?E=w:E>j&&(E=j);const D=l[E+3]*T;p+=l[E]*D,m+=l[E+1]*D,g+=l[E+2]*D,y+=D,v+=T}t[h]=p/y,t[h+1]=m/y,t[h+2]=g/y,t[h+3]=y/v}}sendUniformData(e,t){const s=this.chooseRightDelta();e.uniform2fv(t.uDelta,s)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:s}=this;return t?s>1&&(e=1/s):s<1&&(e=s),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}H(xu,"type","Blur"),H(xu,"defaults",{blur:0}),H(xu,"uniformLocations",["uDelta"]),Oe.setClass(xu);class yu extends tr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.round(255*this.brightness);for(let n=0;n<t.length;n+=4)t[n]+=s,t[n+1]+=s,t[n+2]+=s}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}H(yu,"type","Brightness"),H(yu,"defaults",{brightness:0}),H(yu,"uniformLocations",["uBrightness"]),Oe.setClass(yu);const GN={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class ma extends tr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,s=this.matrix,n=this.colorsOnly;for(let i=0;i<t.length;i+=4){const l=t[i],d=t[i+1],u=t[i+2];if(t[i]=l*s[0]+d*s[1]+u*s[2]+255*s[4],t[i+1]=l*s[5]+d*s[6]+u*s[7]+255*s[9],t[i+2]=l*s[10]+d*s[11]+u*s[12]+255*s[14],!n){const h=t[i+3];t[i]+=h*s[3],t[i+1]+=h*s[8],t[i+2]+=h*s[13],t[i+3]=l*s[15]+d*s[16]+u*s[17]+h*s[18]+255*s[19]}}}sendUniformData(e,t){const s=this.matrix,n=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],i=[s[4],s[9],s[14],s[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,n),e.uniform4fv(t.uConstants,i)}toObject(){return G(G({},super.toObject()),{},{matrix:[...this.matrix]})}}function Ti(r,e){var t;const s=(H(t=class extends ma{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",r),H(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Oe.setClass(s,r),s}H(ma,"type","ColorMatrix"),H(ma,"defaults",GN),H(ma,"uniformLocations",["uColorMatrix","uConstants"]),Oe.setClass(ma);Ti("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Ti("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Ti("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Ti("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Ti("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Ti("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Ti("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class WS extends tr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){hf(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach((t=>{t.applyTo(e)}))}toObject(){return{type:this.type,subFilters:this.subFilters.map((e=>e.toObject()))}}isNeutralState(){return!this.subFilters.some((e=>!e.isNeutralState()))}static fromObject(e,t){return Promise.all((e.subFilters||[]).map((s=>Oe.getClass(s.type).fromObject(s,t)))).then((s=>new this({subFilters:s})))}}H(WS,"type","Composed"),Oe.setClass(WS);class vu extends tr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const s=Math.floor(255*this.contrast),n=259*(s+255)/(255*(259-s));for(let i=0;i<t.length;i+=4)t[i]=n*(t[i]-128)+128,t[i+1]=n*(t[i+1]-128)+128,t[i+2]=n*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}H(vu,"type","Contrast"),H(vu,"defaults",{contrast:0}),H(vu,"uniformLocations",["uContrast"]),Oe.setClass(vu);const dB={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class bu extends tr{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return dB[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,s=t.data,n=this.matrix,i=Math.round(Math.sqrt(n.length)),l=Math.floor(i/2),d=t.width,u=t.height,h=e.ctx.createImageData(d,u),p=h.data,m=this.opaque?1:0;let g,y,v,w,j,C,N,k,T,E,D,M,P;for(D=0;D<u;D++)for(E=0;E<d;E++){for(j=4*(D*d+E),g=0,y=0,v=0,w=0,P=0;P<i;P++)for(M=0;M<i;M++)N=D+P-l,C=E+M-l,N<0||N>=u||C<0||C>=d||(k=4*(N*d+C),T=n[P*i+M],g+=s[k]*T,y+=s[k+1]*T,v+=s[k+2]*T,m||(w+=s[k+3]*T));p[j]=g,p[j+1]=y,p[j+2]=v,p[j+3]=m?s[j+3]:w}e.imageData=h}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return G(G({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}H(bu,"type","Convolute"),H(bu,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),H(bu,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Oe.setClass(bu);const YN="Gamma";class wu extends tr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.gamma,n=1/s[0],i=1/s[1],l=1/s[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const d=this.rgbValues;for(let u=0;u<256;u++)d.r[u]=255*Math.pow(u/255,n),d.g[u]=255*Math.pow(u/255,i),d.b[u]=255*Math.pow(u/255,l);for(let u=0;u<t.length;u+=4)t[u]=d.r[t[u]],t[u+1]=d.g[t[u+1]],t[u+2]=d.b[t[u+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:YN,gamma:this.gamma.concat()}}}H(wu,"type",YN),H(wu,"defaults",{gamma:[1,1,1]}),H(wu,"uniformLocations",["uGamma"]),Oe.setClass(wu);const uB={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Su extends tr{applyTo2d(e){let{imageData:{data:t}}=e;for(let s,n=0;n<t.length;n+=4){const i=t[n],l=t[n+1],d=t[n+2];switch(this.mode){case"average":s=(i+l+d)/3;break;case"lightness":s=(Math.min(i,l,d)+Math.max(i,l,d))/2;break;case"luminosity":s=.21*i+.72*l+.07*d}t[n+2]=t[n+1]=t[n]=s}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return uB[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}H(Su,"type","Grayscale"),H(Su,"defaults",{mode:"average"}),H(Su,"uniformLocations",["uMode"]),Oe.setClass(Su);const hB=G(G({},GN),{},{rotation:0});class Vm extends ma{calculateMatrix(){const e=this.rotation*Math.PI,t=Un(e),s=$n(e),n=1/3,i=Math.sqrt(n)*s,l=1-t;this.matrix=[t+l/3,n*l-i,n*l+i,0,0,n*l+i,t+n*l,n*l-i,0,0,n*l-i,n*l+i,t+n*l,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}H(Vm,"type","HueRotation"),H(Vm,"defaults",hB),Oe.setClass(Vm);class Cu extends tr{applyTo2d(e){let{imageData:{data:t}}=e;for(let s=0;s<t.length;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2],this.alpha&&(t[s+3]=255-t[s+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}H(Cu,"type","Invert"),H(Cu,"defaults",{alpha:!1,invert:!0}),H(Cu,"uniformLocations",["uInvert","uAlpha"]),Oe.setClass(Cu);class ku extends tr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=this.noise;for(let n=0;n<t.length;n+=4){const i=(.5-Math.random())*s;t[n]+=i,t[n+1]+=i,t[n+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}H(ku,"type","Noise"),H(ku,"defaults",{noise:0}),H(ku,"uniformLocations",["uNoise","uSeed"]),Oe.setClass(ku);class ju extends tr{applyTo2d(e){let{imageData:{data:t,width:s,height:n}}=e;for(let i=0;i<n;i+=this.blocksize)for(let l=0;l<s;l+=this.blocksize){const d=4*i*s+4*l,u=t[d],h=t[d+1],p=t[d+2],m=t[d+3];for(let g=i;g<Math.min(i+this.blocksize,n);g++)for(let y=l;y<Math.min(l+this.blocksize,s);y++){const v=4*g*s+4*y;t[v]=u,t[v+1]=h,t[v+2]=p,t[v+3]=m}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}H(ju,"type","Pixelate"),H(ju,"defaults",{blocksize:4}),H(ju,"uniformLocations",["uBlocksize"]),Oe.setClass(ju);class Nu extends tr{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=255*this.distance,n=new ct(this.color).getSource(),i=[n[0]-s,n[1]-s,n[2]-s],l=[n[0]+s,n[1]+s,n[2]+s];for(let d=0;d<t.length;d+=4){const u=t[d],h=t[d+1],p=t[d+2];u>i[0]&&h>i[1]&&p>i[2]&&u<l[0]&&h<l[1]&&p<l[2]&&(t[d+3]=0)}}sendUniformData(e,t){const s=new ct(this.color).getSource(),n=this.distance,i=[0+s[0]/255-n,0+s[1]/255-n,0+s[2]/255-n,1],l=[s[0]/255+n,s[1]/255+n,s[2]/255+n,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,l)}}H(Nu,"type","RemoveColor"),H(Nu,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),H(Nu,"uniformLocations",["uLow","uHigh"]),Oe.setClass(Nu);class Tu extends tr{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,s=this.getFilterWindow(),n=new Array(s);for(let i=1;i<=s;i++)n[i-1]=e(i*t);return n}generateShader(e){const t=new Array(e);for(let s=1;s<=e;s++)t[s-1]="".concat(s,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map(((s,n)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(s,") * uTaps[").concat(n,"] + texture2D(uTexture, vTexCoord - ").concat(s,") * uTaps[").concat(n,`];
              sum += 2.0 * uTaps[`).concat(n,`];
            `))).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){hf(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const s=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(s)/s}}applyTo2d(e){const t=e.imageData,s=this.scaleX,n=this.scaleY;this.rcpScaleX=1/s,this.rcpScaleY=1/n;const i=t.width,l=t.height,d=Math.round(i*s),u=Math.round(l*n);let h;h=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,l,d,u):this.resizeType==="hermite"?this.hermiteFastResize(e,i,l,d,u):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,l,d,u):this.resizeType==="lanczos"?this.lanczosResize(e,i,l,d,u):new ImageData(d,u),e.imageData=h}sliceByTwo(e,t,s,n,i){const l=e.imageData,d=.5;let u=!1,h=!1,p=t*d,m=s*d;const g=e.filterBackend.resources;let y=0,v=0;const w=t;let j=0;g.sliceByTwo||(g.sliceByTwo=xn());const C=g.sliceByTwo;(C.width<1.5*t||C.height<s)&&(C.width=1.5*t,C.height=s);const N=C.getContext("2d");for(N.clearRect(0,0,1.5*t,s),N.putImageData(l,0,0),n=Math.floor(n),i=Math.floor(i);!u||!h;)t=p,s=m,n<Math.floor(p*d)?p=Math.floor(p*d):(p=n,u=!0),i<Math.floor(m*d)?m=Math.floor(m*d):(m=i,h=!0),N.drawImage(C,y,v,t,s,w,j,p,m),y=w,v=j,j+=m;return N.getImageData(y,v,n,i)}lanczosResize(e,t,s,n,i){const l=e.imageData.data,d=e.ctx.createImageData(n,i),u=d.data,h=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,m=this.rcpScaleY,g=2/this.rcpScaleX,y=2/this.rcpScaleY,v=Math.ceil(p*this.lanczosLobes/2),w=Math.ceil(m*this.lanczosLobes/2),j={},C={x:0,y:0},N={x:0,y:0};return(function k(T){let E,D,M,P,R,F,I,U,L,X,de;for(C.x=(T+.5)*p,N.x=Math.floor(C.x),E=0;E<i;E++){for(C.y=(E+.5)*m,N.y=Math.floor(C.y),R=0,F=0,I=0,U=0,L=0,D=N.x-v;D<=N.x+v;D++)if(!(D<0||D>=t)){X=Math.floor(1e3*Math.abs(D-C.x)),j[X]||(j[X]={});for(let B=N.y-w;B<=N.y+w;B++)B<0||B>=s||(de=Math.floor(1e3*Math.abs(B-C.y)),j[X][de]||(j[X][de]=h(Math.sqrt(Math.pow(X*g,2)+Math.pow(de*y,2))/1e3)),M=j[X][de],M>0&&(P=4*(B*t+D),R+=M,F+=M*l[P],I+=M*l[P+1],U+=M*l[P+2],L+=M*l[P+3]))}P=4*(E*n+T),u[P]=F/R,u[P+1]=I/R,u[P+2]=U/R,u[P+3]=L/R}return++T<n?k(T):d})(0)}bilinearFiltering(e,t,s,n,i){let l,d,u,h,p,m,g,y,v,w,j,C,N,k=0;const T=this.rcpScaleX,E=this.rcpScaleY,D=4*(t-1),M=e.imageData.data,P=e.ctx.createImageData(n,i),R=P.data;for(g=0;g<i;g++)for(y=0;y<n;y++)for(p=Math.floor(T*y),m=Math.floor(E*g),v=T*y-p,w=E*g-m,N=4*(m*t+p),j=0;j<4;j++)l=M[N+j],d=M[N+4+j],u=M[N+D+j],h=M[N+D+4+j],C=l*(1-v)*(1-w)+d*v*(1-w)+u*w*(1-v)+h*v*w,R[k++]=C;return P}hermiteFastResize(e,t,s,n,i){const l=this.rcpScaleX,d=this.rcpScaleY,u=Math.ceil(l/2),h=Math.ceil(d/2),p=e.imageData.data,m=e.ctx.createImageData(n,i),g=m.data;for(let y=0;y<i;y++)for(let v=0;v<n;v++){const w=4*(v+y*n);let j=0,C=0,N=0,k=0,T=0,E=0,D=0;const M=(y+.5)*d;for(let P=Math.floor(y*d);P<(y+1)*d;P++){const R=Math.abs(M-(P+.5))/h,F=(v+.5)*l,I=R*R;for(let U=Math.floor(v*l);U<(v+1)*l;U++){let L=Math.abs(F-(U+.5))/u;const X=Math.sqrt(I+L*L);X>1&&X<-1||(j=2*X*X*X-3*X*X+1,j>0&&(L=4*(U+P*t),D+=j*p[L+3],N+=j,p[L+3]<255&&(j=j*p[L+3]/250),k+=j*p[L],T+=j*p[L+1],E+=j*p[L+2],C+=j))}}g[w]=k/C,g[w+1]=T/C,g[w+2]=E/C,g[w+3]=D/N}return m}}H(Tu,"type","Resize"),H(Tu,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),H(Tu,"uniformLocations",["uDelta","uTaps"]),Oe.setClass(Tu);class _u extends tr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.saturation;for(let n=0;n<t.length;n+=4){const i=t[n],l=t[n+1],d=t[n+2],u=Math.max(i,l,d);t[n]+=u!==i?(u-i)*s:0,t[n+1]+=u!==l?(u-l)*s:0,t[n+2]+=u!==d?(u-d)*s:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}H(_u,"type","Saturation"),H(_u,"defaults",{saturation:0}),H(_u,"uniformLocations",["uSaturation"]),Oe.setClass(_u);class Mu extends tr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const s=-this.vibrance;for(let n=0;n<t.length;n+=4){const i=t[n],l=t[n+1],d=t[n+2],u=Math.max(i,l,d),h=(i+l+d)/3,p=2*Math.abs(u-h)/255*s;t[n]+=u!==i?(u-i)*p:0,t[n+1]+=u!==l?(u-l)*p:0,t[n+2]+=u!==d?(u-d)*p:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}H(Mu,"type","Vibrance"),H(Mu,"defaults",{vibrance:0}),H(Mu,"uniformLocations",["uVibrance"]),Oe.setClass(Mu);let Pe=null;const wa=[],Ah=[],Ht={color:"#000000",width:4,opacity:1,lastColors:[],_currentTool:""};let HS=null,eh=[];function Jx(r){try{if(!r)throw new Error("initStickerModeSafe: no container");if(r.querySelectorAll("#stickerCanvas").forEach((i,l)=>{l>0&&i.remove()}),window.fabricCanvas){Pe=window.fabricCanvas;const i=Pe.getElement();i&&i.parentElement!==r&&r.appendChild(i),console.log("[ProStickerModule] reused window.fabricCanvas")}else{const i=document.querySelector("#stickerCanvas")||document.createElement("canvas");i.id="stickerCanvas",i.width=r.clientWidth||1200,i.height=r.clientHeight||800,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.zIndex="10",i.style.pointerEvents="auto",i.style.cursor="crosshair",i.parentElement||r.appendChild(i),console.log("[ProStickerModule] Canvas element setup:",{element:i,parentElement:i.parentElement,pointerEvents:i.style.pointerEvents,zIndex:i.style.zIndex,position:i.style.position}),Pe=new a0(i,{preserveObjectStacking:!0,isDrawingMode:!1,selection:!0,backgroundColor:"transparent",width:r.clientWidth||1200,height:r.clientHeight||800}),window.fabricCanvas=Pe,window.ProStickerModule=window.ProStickerModule||{},window.ProStickerModule._currentTool="",window.ProStickerModule._canvas=Pe,console.log("[ProStickerModule] Canvas initialized successfully",{width:Pe.getWidth(),height:Pe.getHeight(),element:Pe.getElement(),isDrawingMode:Pe.isDrawingMode})}Pe.off(),Pe.on("path:created",on),Pe.on("object:modified",on),Pe.on("object:added",on),Pe.on("object:removed",on),Pe.on("mouse:down",i=>{console.log("[ProStickerModule] mouse:down",i.pointer)}),Pe.on("mouse:move",i=>{Pe.isDrawingMode&&console.log("[ProStickerModule] mouse:move (drawing)",i.pointer)}),Pe.on("mouse:up",i=>{console.log("[ProStickerModule] mouse:up",i.pointer)}),console.log("[ProStickerModule] Fabric.js canvas ready:",{width:Pe.getWidth(),height:Pe.getHeight(),isDrawingMode:Pe.isDrawingMode,selection:Pe.selection,freeDrawingBrush:!!Pe.freeDrawingBrush});const s=Pe.getElement().getBoundingClientRect(),n=document.elementsFromPoint(s.left+s.width/2,s.top+s.height/2);return console.log("[ProStickerModule] Elements at canvas center:",n.map(i=>({tagName:i.tagName,id:i.id,className:i.className,zIndex:window.getComputedStyle(i).zIndex}))),Pe.clear(),on(),Pe}catch(e){return console.error("[ProStickerModule] initStickerModeSafe error",e),null}}function on(){if(Pe)try{const r=JSON.stringify(Pe.toJSON(["selectable","lockMovementX"]));wa.push(r),wa.length>50&&wa.shift(),Ah.length=0}catch(r){console.warn("[ProStickerModule] saveCanvasStateSafely failed",r)}}function ff(){if(!(!Pe||wa.length===0))try{const r=wa.pop();Ah.push(JSON.stringify(Pe.toJSON())),Pe.loadFromJSON(r,()=>{Pe.renderAll()})}catch(r){console.error("[ProStickerModule] undo failed",r)}}function pf(){if(!(!Pe||Ah.length===0))try{const r=Ah.pop();wa.push(JSON.stringify(Pe.toJSON())),Pe.loadFromJSON(r,()=>{Pe.renderAll()})}catch(r){console.error("[ProStickerModule] redo failed",r)}}function gs(r,e={}){const t=window.ProStickerModule?._canvas||window.fabricCanvas;if(!t)return console.warn("[ProStickerModule] applyBrushType: no canvas");const s=(r||"pencil").toLowerCase(),n=Object.assign({color:Ht.color,width:Ht.width,opacity:Ht.opacity,density:30},e),i=(d,u)=>{try{d.__proStickerDebug=u}catch{}};let l=null;switch(s){case"marker":l=new rn(t),l.width=n.width||8,l.color=n.color,l.opacity=n.opacity??1,i(l,"marker");break;case"airbrush":case"spray":l=new II(t),l.width=n.width||14,l.color=n.color,l.density=n.density||30,l.opacity=n.opacity??.9,i(l,"airbrush");break;case"texture":l=new BI(t);const d=document.createElement("canvas");d.width=d.height=40;const u=d.getContext("2d");u&&(u.fillStyle=n.color||"#000",u.fillRect(0,0,40,40),u.fillStyle="rgba(255,255,255,0.06)",u.fillRect(8,8,24,24)),l.source=d,l.width=n.width||8,i(l,"texture");break;case"crayon":case"charcoal":l=new rn(t),l.width=n.width||6,l.color=n.color,l.opacity=.75,l.shadow=new br({color:"rgba(0,0,0,0.12)",blur:2,offsetX:1,offsetY:1}),i(l,"crayon");break;case"oil":l=new rn(t),l.width=n.width||10,l.color=n.color,l.opacity=.95,l.shadow=new br({color:n.color,blur:6,offsetX:0,offsetY:0}),i(l,"oil");break;case"watercolor":l=new rn(t),l.width=n.width||10,l.color=n.color,l.opacity=.45,l.shadow=new br({color:n.color,blur:12,offsetX:0,offsetY:0}),i(l,"watercolor");break;case"eraser":l=new rn(t),l.width=n.width||20;try{l.globalCompositeOperation="destination-out"}catch{}i(l,"eraser");break;case"pencil":default:l=new rn(t),l.width=n.width||4,l.color=n.color||"#000000",l.opacity=n.opacity??1,i(l,"pencil");break}try{t.isDrawingMode=!1,t.freeDrawingBrush=l,l&&(typeof l.width<"u"&&(l.width=l.width),typeof l.color<"u"&&(l.color=l.color),typeof l.opacity<"u"&&(l.opacity=l.opacity)),t.isDrawingMode=!0,t.requestRenderAll(),Ht._currentTool=s,window.ProStickerModule=window.ProStickerModule||{},window.ProStickerModule._currentTool=s,XN(n.color),console.log("[ProStickerModule] applyBrushType ->",s,"color:",l.color,"width:",l.width,"ctor:",l.constructor?.name),console.log("[ProStickerModule] Canvas state after brush apply:",{isDrawingMode:t.isDrawingMode,canvasWidth:t.getWidth(),canvasHeight:t.getHeight(),brushSet:!!t.freeDrawingBrush,brushDebug:t.freeDrawingBrush?.__proStickerDebug}),mf()}catch(d){console.error("[ProStickerModule] applyBrushType error",d)}}function XN(r){r&&(Ht.lastColors=[r,...Ht.lastColors.filter(e=>e!==r)].slice(0,5))}function Qx(){return Ht.lastColors.slice()}function ey(r){Ht.color=r,XN(r);const e=window.ProStickerModule?._canvas||window.fabricCanvas;if(e&&e.isDrawingMode&&e.freeDrawingBrush)try{e.freeDrawingBrush.color=r}catch{}}function ty(r){Ht.width=r;const e=window.ProStickerModule?._canvas||window.fabricCanvas;if(e&&e.freeDrawingBrush)try{e.freeDrawingBrush.width=r}catch{}}function ry(r){Ht.opacity=r;const e=window.ProStickerModule?._canvas||window.fabricCanvas;if(e&&e.freeDrawingBrush)try{e.freeDrawingBrush.opacity=r}catch{}}function sy(r,e={}){if(!(window.ProStickerModule?._canvas||window.fabricCanvas)){console.warn("[ProStickerModule] selectTool: no canvas");return}if(HS===r){console.log("[ProStickerModule] Tool already selected:",r);return}try{switch(console.log("[ProStickerModule] selectTool called with:",r,e),HS=r,(r||"").toString()){case"pencil":case"brush-pencil":gs("pencil",e);break;case"marker":case"brush-marker":gs("marker",e);break;case"airbrush":case"brush-airbrush":case"spray":gs("airbrush",e);break;case"texture":case"brush-texture":gs("texture",e);break;case"crayon":case"brush-crayon":case"charcoal":gs("crayon",e);break;case"oil":case"brush-oil":gs("oil",e);break;case"watercolor":case"brush-watercolor":gs("watercolor",e);break;case"eraser":case"tool-eraser":gs("eraser",e);break;case"rectangle":case"shape-rect":Fl("rectangle");break;case"circle":case"shape-circle":Fl("circle");break;case"triangle":case"shape-triangle":Fl("triangle");break;case"polygon":case"shape-polygon":Fl("polygon");break;case"arrow":case"shape-arrow":Fl("arrow");break;case"layer-add":fB();break;case"layer-duplicate":pB();break;case"layer-merge":mB();break;case"layer-flatten":gB();break;case"layer-visibility":case"layer-opacity":xB();break;case"move":case"tool-select":case"transform-move":US();break;case"rotate":case"transform-rotate":yB(15);break;case"scale":case"transform-scale":vB(1.1);break;case"flip":case"transform-flip":bB();break;case"transform-skew":wB(.1);break;case"blur":case"effect-blur":SB(2);break;case"sharpen":case"effect-sharpen":CB();break;case"glow":case"effect-glow":kB();break;case"shadow":case"effect-shadow":jB();break;case"noise":NB();break;case"fill":case"color-fill":EB(e.color||Ht.color);break;case"copy":case"tool-copy":TB();break;case"paste":case"tool-paste":_B();break;case"undo":case"tool-undo":ff();break;case"redo":case"tool-redo":pf();break;case"clear":case"tool-clear":MB();break;case"color-gradient":console.log("[ProStickerModule] color-gradient requested (placeholder)");break;case"color-swatches":console.log("[ProStickerModule] color-swatches requested (placeholder)");break;case"color-history":console.log("[ProStickerModule] color-history requested (placeholder)");break;case"color-palette":console.log("[ProStickerModule] color-palette requested (placeholder)");break;case"smudge":console.log("[ProStickerModule] smudge requested (placeholder)");break;case"crop":console.log("[ProStickerModule] crop requested (placeholder)");break;case"effect-gradient":console.log("[ProStickerModule] effect-gradient requested (placeholder)");break;case"select":US();break;default:console.warn("[ProStickerModule] selectTool unknown:",r)}}catch(s){console.error("[ProStickerModule] selectTool error",s)}}function Fl(r){if(!Pe)return;console.log("[ProStickerModule] started shape interactive:",r);let e=null,t=0,s=0;Pe.isDrawingMode=!1,Pe.selection=!1;const n=d=>{const u=d.e;t=u.offsetX,s=u.offsetY,r==="rectangle"?e=new vs({left:t,top:s,width:1,height:1,fill:"rgba(0,0,0,0)",stroke:Ht.color||"#000",strokeWidth:2}):r==="circle"?e=new sn({left:t,top:s,rx:1,ry:1,fill:"rgba(0,0,0,0)",stroke:Ht.color||"#000",strokeWidth:2}):r==="triangle"?e=new _o({left:t,top:s,width:1,height:1,fill:"rgba(0,0,0,0)",stroke:Ht.color||"#000",strokeWidth:2}):(r==="arrow"||r==="polygon")&&(e=new To([t,s,t+1,s+1],{stroke:Ht.color||"#000",strokeWidth:3})),e&&Pe.add(e)},i=d=>{if(!e)return;const u=d.e,h=Math.abs(u.offsetX-t),p=Math.abs(u.offsetY-s);e.set&&(r==="rectangle"||r==="triangle"?e.set({left:Math.min(u.offsetX,t),top:Math.min(u.offsetY,s),width:h,height:p}):r==="circle"?e.set({left:Math.min(u.offsetX,t),top:Math.min(u.offsetY,s),rx:h/2,ry:p/2}):(r==="arrow"||r==="polygon")&&e.set({x2:u.offsetX,y2:u.offsetY}),Pe.renderAll())},l=()=>{Pe.off("mouse:down",n),Pe.off("mouse:move",i),Pe.off("mouse:up",l),e&&(e.setCoords(),on()),Pe.selection=!0};Pe.on("mouse:down",n),Pe.on("mouse:move",i),Pe.on("mouse:up",l)}function fB(){console.log("[ProStickerModule] added layer 1")}function pB(){console.log("[ProStickerModule] duplicate layer")}function mB(){console.log("[ProStickerModule] merge layer")}function gB(){console.log("[ProStickerModule] flatten layers")}function xB(){console.log("[ProStickerModule] toggle layer visibility")}function US(){Pe&&(Pe.isDrawingMode=!1,Pe.selection=!0,Pe.forEachObject(r=>r.selectable=!0),console.log("[ProStickerModule] Move/select mode enabled"))}function yB(r=15){const e=Pe?.getActiveObject();if(!e)return console.log("[ProStickerModule] rotateActive: no active");e.rotate((e.angle||0)+r),Pe.renderAll(),on()}function vB(r=1.1){const e=Pe?.getActiveObject();if(!e)return console.log("[ProStickerModule] scaleActive: no active");e.scale((e.scaleX||1)*r),e.setCoords(),Pe.renderAll()}function bB(){const r=Pe?.getActiveObject();if(!r)return console.log("[ProStickerModule] flipActive: no active");r.set("flipX",!r.get("flipX")),Pe.renderAll()}function wB(r=.1){const e=Pe?.getActiveObject();if(!e)return console.log("[ProStickerModule] applySkewToActive: no active object");e.set("skewX",e.skewX?e.skewX+r:r),Pe.renderAll()}function SB(r=2){const e=Pe?.getActiveObject();if(!e)return console.log("[ProStickerModule] applyBlurToActive: no active");e.set("opacity",e.opacity*.95),Pe.renderAll()}function CB(){console.log("[ProStickerModule] applySharpenToActive (placeholder)")}function kB(){const r=Pe?.getActiveObject();r&&(r.set("shadow",new br({color:Ht.color||"#fff",blur:12,offsetX:0,offsetY:0})),Pe.renderAll())}function jB(){const r=Pe?.getActiveObject();r&&(r.set("shadow",new br({color:"rgba(0,0,0,0.35)",blur:6,offsetX:4,offsetY:4})),Pe.renderAll())}function NB(){console.log("[ProStickerModule] applyNoiseToActive (placeholder)")}function TB(){if(!Pe)return;const r=Pe.getActiveObject();if(!r)return console.log("[ProStickerModule] copy: no active object");r.clone(e=>{eh=[e],console.log("[ProStickerModule] copied to clipboard")})}function _B(){if(Pe){if(!eh||eh.length===0)return console.log("[ProStickerModule] paste: clipboard empty");eh.forEach(r=>{r.clone(e=>{e.set({left:(e.left||0)+20,top:(e.top||0)+20}),Pe.add(e),Pe.renderAll(),on()})})}}function MB(){Pe&&(Pe.clear(),on(),console.log("[ProStickerModule] canvas cleared"))}function EB(r){Pe&&(Pe.backgroundColor=r,Pe.renderAll(),on(),console.log("[ProStickerModule] canvas filled with",r))}let $S=null,Wm=null;function mf(){$S||($S=window.setInterval(()=>{const r=window.ProStickerModule?._canvas||window.fabricCanvas;if(!r||!r.isDrawingMode)return;const e=r.freeDrawingBrush?.constructor?.name;e!==Wm&&(Wm=e,console.log(`[ProStickerModule] freeDrawingBrush applied: ${Wm}`),Ht._currentTool&&e!==Ht._currentTool&&(console.warn("[ProStickerModule] freeDrawingBrush was overwritten. Reapplying currentTool:",Ht._currentTool),gs(Ht._currentTool)))},100))}const KN={initStickerModeSafe:Jx,selectTool:sy,applyBrushType:gs,setColor:ey,setBrushWidth:ty,setBrushOpacity:ry,undo:ff,redo:pf,getLastColors:Qx,_startBrushWatcher:mf},PB={initStickerModeSafe:Jx,selectTool:sy,applyBrushType:gs,setColor:ey,setBrushWidth:ty,setBrushOpacity:ry,undo:ff,redo:pf,getLastColors:Qx,_startBrushWatcher:mf},ai=Object.freeze(Object.defineProperty({__proto__:null,ProStickerModule:KN,_brushState:Ht,get _canvas(){return Pe},_startBrushWatcher:mf,applyBrushType:gs,default:PB,getLastColors:Qx,initStickerModeSafe:Jx,redo:pf,selectTool:sy,setBrushOpacity:ry,setBrushWidth:ty,setColor:ey,undo:ff},Symbol.toStringTag,{value:"Module"}));var ny="Progress",oy=100,[DB]=yn(ny),[AB,RB]=DB(ny),qN=b.forwardRef((r,e)=>{const{__scopeProgress:t,value:s=null,max:n,getValueLabel:i=OB,...l}=r;(n||n===0)&&!GS(n)&&console.error(FB(`${n}`,"Progress"));const d=GS(n)?n:oy;s!==null&&!YS(s,d)&&console.error(LB(`${s}`,"Progress"));const u=YS(s,d)?s:null,h=Rh(u)?i(u,d):void 0;return o.jsx(AB,{scope:t,value:u,max:d,children:o.jsx(Ze.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":Rh(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":QN(u,d),"data-value":u??void 0,"data-max":d,...l,ref:e})})});qN.displayName=ny;var ZN="ProgressIndicator",JN=b.forwardRef((r,e)=>{const{__scopeProgress:t,...s}=r,n=RB(ZN,t);return o.jsx(Ze.div,{"data-state":QN(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:e})});JN.displayName=ZN;function OB(r,e){return`${Math.round(r/e*100)}%`}function QN(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function Rh(r){return typeof r=="number"}function GS(r){return Rh(r)&&!isNaN(r)&&r>0}function YS(r,e){return Rh(r)&&!isNaN(r)&&r<=e&&r>=0}function FB(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${oy}\`.`}function LB(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${oy} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var zB=qN,IB=JN;function eT({className:r,value:e,...t}){return o.jsx(zB,{"data-slot":"progress",className:Et("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...t,children:o.jsx(IB,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function BB(){const[r,e]=b.useState(!1),[t,s]=b.useState([{id:"1",name:"Verse Melody Idea",duration:45,isPlaying:!1,progress:0},{id:"2",name:"Chorus Hook",duration:30,isPlaying:!1,progress:0}]),n=()=>{e(!r)},i=d=>{s(u=>u.map(h=>h.id===d?{...h,isPlaying:!h.isPlaying}:{...h,isPlaying:!1}))},l=d=>{s(u=>u.filter(h=>h.id!==d))};return o.jsxs("div",{className:"pt-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs(Se,{onClick:n,className:`${r?"bg-red-600 hover:bg-red-700 dropsource-glow-red":"dropsource-gradient hover:dropsource-glow-blue"} transition-all duration-200`,children:[r?o.jsx(yr,{className:"w-4 h-4 mr-2"}):o.jsx(gg,{className:"w-4 h-4 mr-2"}),r?"Stop Recording":"Record"]}),o.jsxs(Se,{variant:"outline",className:"dropsource-border-glow hover:dropsource-glow-blue",children:[o.jsx(bg,{className:"w-4 h-4 mr-2"}),"Upload Audio"]}),r&&o.jsxs("div",{className:"flex items-center gap-2 dropsource-text-secondary",children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Recording..."]})]}),o.jsxs("div",{className:"space-y-3",children:[t.map(d=>o.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700 hover:border-cyan-500/50 transition-colors group",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"dropsource-text-primary font-medium",children:d.name}),o.jsxs("p",{className:"dropsource-text-secondary text-sm",children:[d.duration,"s"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>i(d.id),className:"dropsource-text-secondary hover:dropsource-glow-cyan",children:d.isPlaying?o.jsx(Yh,{className:"w-4 h-4"}):o.jsx(_c,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>l(d.id),className:"text-red-400 hover:dropsource-glow-red opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(lc,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(eT,{value:d.progress,className:"w-full h-2 bg-gray-800"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity dropsource-glow-cyan"})]})]},d.id)),t.length===0&&o.jsxs("div",{className:"text-center py-8 dropsource-text-secondary",children:[o.jsx(gg,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No audio clips yet. Record or upload your first audio note!"})]})]})]})}const Hm={love:["above","dove","shove","glove","thereof","enough","tough","rough"],heart:["apart","start","chart","dart","smart","art","impart","restart"],time:["rhyme","climb","prime","sublime","mime","chime","slime","crime"],dream:["beam","cream","stream","scheme","extreme","esteem","team","supreme"],light:["night","bright","flight","sight","tight","height","might","delight"],fire:["desire","inspire","entire","require","acquire","admire","wire","higher"],day:["play","stay","way","say","delay","array","display","away"],life:["strife","knife","wife","rife","midlife","afterlife","wildlife","fife"],pain:["rain","chain","main","strain","again","domain","sustain","remain"],song:["long","strong","belong","along","wrong","throng","prolong","gong"],flow:["go","show","blow","know","throw","slow","bestow","below"],beat:["street","seat","meet","heat","tweet","repeat","defeat","retreat"],high:["fly","sky","sigh","try","dry","apply","rely","goodbye"],low:["show","glow","go","know","throw","flow","below","bestow"],night:["light","bright","flight","sight","tight","height","might","delight"],dark:["spark","mark","stark","park","shark","remark","embark","lark"],star:["far","car","bar","guitar","avatar","radar","seminar","bizarre"],moon:["soon","tune","noon","balloon","cartoon","monsoon","maroon","spoon"],sky:["high","fly","sigh","try","dry","apply","rely","goodbye"],rise:["eyes","size","wise","surprise","prize","guise","despise","supplies"],fall:["all","call","small","tall","stall","recall","install","hall"],sound:["ground","around","profound","found","bound","astound","resound","surround"],word:["heard","absurd","preferred","blurred","conferred","inferred","stirred","occurred"],line:["shine","sign","divine","combine","resign","confine","align","design"],bar:["far","car","star","guitar","avatar","radar","seminar","bizarre"],verse:["worse","curse","rehearse","disperse","universe","converse","reverse","perverse"],rap:["cap","slap","map","trap","snap","wrap","clap","gap"],mic:["like","strike","bike","spike","hike","psych","pike","dislike"],stage:["page","age","cage","engage","rage","wage","outrage","sage"],crowd:["loud","proud","shroud","cloud","allowed","endowed","avowed","bowed"],voice:["choice","rejoice","noise","poise","boys","toys","employs","destroys"],flowing:["showing","knowing","glowing","throwing","growing","bestowing","overflowing","undergoing"],moving:["proving","soothing","grooving","improving","removing","approving","disproving","reproving"],running:["stunning","gunning","cunning","sunning","dunning","punning","bunning","shunning"],living:["giving","forgiving","reliving","misgiving","thanksgiving","driving","surviving","striving"],loving:["shoving","gloving","above in","coving","doving","roving","proving","moving"],crying:["flying","dying","buying","relying","complying","defying","implying","replying"],dying:["crying","flying","buying","relying","applying","complying","supplying","defying"],trying:["crying","flying","buying","relying","applying","complying","supplying","defying"],flying:["crying","dying","buying","relying","applying","complying","supplying","defying"],going:["showing","knowing","glowing","throwing","growing","bestowing","overflowing","undergoing"],knowing:["showing","going","glowing","throwing","growing","bestowing","overflowing","undergoing"],seeing:["being","fleeing","agreeing","freeing","treeing","kneeing","guaranteeing","foreseeing"],being:["seeing","fleeing","agreeing","freeing","treeing","kneeing","guaranteeing","foreseeing"],feeling:["dealing","healing","reeling","stealing","appealing","concealing","revealing","wheeling"],healing:["feeling","dealing","reeling","stealing","appealing","concealing","revealing","wheeling"],breaking:["taking","making","faking","shaking","quaking","mistaking","forsaking","undertaking"],making:["taking","breaking","faking","shaking","quaking","mistaking","forsaking","undertaking"],taking:["breaking","making","faking","shaking","quaking","mistaking","forsaking","undertaking"],lost:["cost","frost","tossed","exhaust","embossed","crossed","accost","mossed"],found:["ground","around","sound","bound","astound","resound","surround","profound"],home:["roam","foam","dome","chrome","gnome","loam","comb","tome"],alone:["stone","tone","phone","known","drone","shown","grown","bone"],together:["forever","endeavor","whenever","wherever","clever","lever","sever","however"],forever:["together","endeavor","whenever","wherever","clever","lever","sever","however"],never:["ever","clever","endeavor","whenever","wherever","sever","however","whoever"],always:["days","ways","praise","raise","phase","maze","blaze","gaze"],sometimes:["rhymes","climbs","times","mimes","dimes","crimes","sublimes","grimes"],sus:["bus","plus","fuss","cuss","thus","discuss","trust","adjust"],drip:["slip","trip","flip","equip","grip","zip","whip","ship"],cap:["slap","trap","snap","map","app","gap","wrap","recap"],"no cap":["recap","strap","snap","map","flap","trap","handclap","overlap"],vibe:["tribe","scribe","imbibe","subscribe","describe","diatribe","bribe","ascribe"],meme:["dream","beam","scheme","supreme","extreme","esteem","team","stream"],simp:["limp","pimp","shrimp","chimp","skimp","gimp","wimp","crimp"],stan:["plan","man","scan","fan","ran","clan","span","ban"],based:["faced","placed","traced","aced","embraced","replaced","chased","wasted"],cringe:["hinge","syringe","binge","tinge","fringe","infringe","whinge","plunge"],ratio:["patio","cameo","studio","portfolio","audio","video","scenario","oreo"],cope:["hope","rope","slope","mope","elope","antelope","telescope","soap"],seethe:["breathe","wreathe","teethe","beneath","bequeath","heath","sheath","grieve"],bussin:["buzzin","cousin","dozen","fussin","discussin","crushin","rushin","hushin"],yeet:["meet","seat","tweet","heat","street","repeat","defeat","retreat"],sheesh:["leash","peach","speech","beach","screech","beseech","breach","reach"],bruh:["duh","huh","uh","shuh","nuh","yuh","wha","gah"],suspect:["inspect","respect","detect","collect","connect","protect","neglect","perfect"],clout:["shout","spout","drought","about","sprout","knockout","burnout","blackout"],grind:["mind","find","kind","behind","signed","aligned","designed","refined"],grindset:["mindset","upset","offset","reset","asset","cassette","sunset","onset"],dub:["club","sub","scrub","hub","grub","tub","rub","stub"],L:["sell","tell","dwell","shell","spell","smell","excel","farewell"],W:["double you","trouble you","bubble crew","stubble too","shuffle through","couple new","subtle blue","snuggle crew"],"glow up":["show up","blow up","throw up","grow up","sew up","flow up","lineup","rollup"],flex:["hex","text","next","complex","vortex","apex","syntax","annex"],ghost:["post","toast","boast","coast","most","host","roast","almost"],cancel:["dismantle","scandal","panel","channel","flannel","mammal","camel","handle"],beta:["theta","meta","cheetah","fajita","pita","margarita","reta","eta"],sigma:["stigma","enigma","dogma","paradigm a","trauma","drama","carma","ligma"],grindr:["finder","reminder","blinder","kinder","recliner","designer","aligner","headliner"],"ok boomer":["consumer","rumor","humor","groomer","schooner","doomer","bloomer","roomer"],doomer:["rumor","tumor","humor","boomer","consumer","groomer","bloomer","loom-er"],zoomer:["rumor","boomer","doomer","humor","bloomer","groomer","assumer","consumer"],glizzy:["busy","dizzy","fizzy","lizzy","whizzy","frizzy","missy","sissy"],thicc:["brick","kick","lick","pick","stick","slick","tick","quick"],drunk:["funk","chunk","punk","skunk","bunk","hunk","sunk","shrunk"],stoned:["zoned","toned","owned","loaned","drone d","groaned","condoned","enthroned"],vape:["cape","grape","tape","escape","reshape","scrape","drape","landscape"],blunt:["stunt","front","hunt","grunt","punt","runt","shunt","brunt"],joint:["point","anoint","appoint","counterpoint","checkpoint","standpoint","disjoint","disappoint"],hash:["bash","crash","flash","stash","trash","splash","slash","cash"],weed:["need","feed","bleed","speed","greed","indeed","proceed","succeed"],dab:["grab","stab","slab","crab","drab","blab","cab","tab"],molly:["jolly","folly","holly","golly","trolley","dolly","poly","collie"],perk:["jerk","work","twerk","lurk","smirk","irk","shirk","quark"],lean:["mean","seen","green","serene","between","routine","machine","teen"],trap:["cap","map","slap","snap","wrap","clap","strap","entrap"],plug:["jug","rug","hug","mug","dug","snug","slug","thug"],dealer:["healer","stealer","feeler","wheeler","squealer","concealer","appealer","revealer"],skrrt:["hurt","flirt","shirt","dirt","alert","convert","insert","dessert"],ops:["cops","drops","flops","hops","mops","pops","shops","stops"],gang:["bang","hang","clang","fang","rang","sang","slang","yang"],squad:["god","odd","mod","prod","abroad","applaud","rod","plod"],crew:["blue","true","clue","through","pursue","askew","renew","review"],fam:["ham","jam","slam","cram","exam","wham","program","diagram"],homie:["roomie","zoomie","gloomy","doomy","boomy","broomy","chromey","tomb-y"],bro:["go","flow","show","snow","throw","grow","foe","below"],sis:["miss","kiss","bliss","dismiss","abyss","swiss","amiss","hiss"],cousin:["dozen","buzzin","fussin","discussin","was in","does in","wasnt","doesnt"],flexin:["textin","next in","complexin","perplexin","annexin","vexin","rexin","hexin"],chad:["mad","sad","glad","rad","dad","fad","ironclad","bad"],virgin:["surgeon","urgent","emergent","resurgent","detergent","insurgent","divergent","convergent"],giga:["stigma","enigma","dogma","drama","llama","magma","gamma","saga"],brain:["train","gain","pain","chain","strain","remain","explain","sustain"],bag:["lag","rag","drag","brag","flag","snag","swag","stag"],bread:["red","said","led","spread","thread","shed","ahead","dead"],cash:["bash","crash","flash","stash","trash","splash","slash","dash"],stack:["pack","track","back","crack","attack","snack","slack","hack"],coin:["join","anoint","appoint","counterpoint","checkpoint","point","groin","loin"],crypto:["tiptoe","zip code","hippo","dip low","clip though","grip though","script though","riptoe"],stonks:["honks","bonks","conks","monks","wonks","drunks","punks","skunks"],hustle:["muscle","tussle","rustle","bustle","jostle","castle","nestle","throttle"],glow:["show","flow","snow","grow","throw","bestow","foreknow","overflow"],ping:["ring","sing","wing","thing","fling","bring","sting","bling"],lag:["drag","snag","tag","flag","nag","sag","gag","rag"],nerf:["surf","turf","smurf","scurf","serf","swerve","curve","reserve"],buff:["tough","rough","scruff","stuff","bluff","huff","puff","enough"],patch:["match","catch","hatch","latch","snatch","dispatch","detach","rematch"],queue:["blue","true","clue","through","askew","pursue","renew","venue"],meta:["beta","theta","cheta","reta","eta","greta","vendetta","beretta"],clique:["unique","antique","critique","mystique","boutique","physique","oblique","technique"],stream:["beam","dream","scheme","esteem","extreme","supreme","team","scream"],post:["most","host","coast","toast","boast","ghost","almost","engrossed"],like:["bike","spike","hike","strike","mike","psych","pike","dislike"],share:["care","dare","flare","glare","rare","stare","pair","repair"],boost:["roost","toast","ghost","most","coast","boast","spruce","juice"],ban:["plan","man","scan","fan","ran","clan","span","van"],report:["port","fort","court","short","snort","resort","escort","support"],queueing:["gluing","chewing","spewing","stewing","viewing","reviewing","subduing","pursuing"],mood:["dude","rude","food","brood","intrude","prelude","include","conclude"],aura:["flora","scora","thora","quora","ignora","explora","tempora","aurora"],vibes:["tribes","scribes","bribes","hives","drives","arrives","survives","revives"],ratioed:["radioed","patio-ed","cameoed","ideoed","overflowed","bestowed","reloaded","uploaded"],unfollow:["hollow","swallow","follow","apollo","yolo","solo","polo","sorrow"]};function VB(r,e){if(r.length!==e.length)return Math.abs(r.length-e.length);let t=0;for(let s=0;s<r.length;s++)r[s]!==e[s]&&t++;return t}function WB(){const[r,e]=b.useState(""),[t,s]=b.useState([]),[n,i]=b.useState([]),[l,d]=b.useState(!1),[u,h]=b.useState([]),[p,m]=b.useState([]),g=Object.keys(Hm).slice(0,8);b.useEffect(()=>{m(g)},[]);const y=T=>{if(!T.trim()){s([]),i([]);return}d(!0),setTimeout(()=>{const E=T.toLowerCase().trim(),D=Ng(E);if(D.length===0){s([]),i([]),d(!1);return}const M=D[0],P=Tg(M.norm);if(!P){s([]),i([]),d(!1);return}const R=Object.keys(Hm).concat(Object.values(Hm).flat()),F=[],I=[];for(const X of R){if(X.toLowerCase()===E)continue;const de=Ng(X.toLowerCase());if(de.length===0)continue;const B=Tg(de[0].norm);B&&(B===P?F.push(X):B.length===P.length&&VB(B,P)===1&&I.push(X))}const U=[...new Set(F)].slice(0,8),L=[...new Set(I)].slice(0,6);s(U),i(L),d(!1)},300)},v=()=>{y(r)},w=T=>{T.key==="Enter"&&v()},j=T=>{h(E=>E.includes(T)?E.filter(D=>D!==T):[...E,T])},C=()=>{if(u.length===0)return;const T=u.join(", ");window.insertIntoLyrics&&window.insertIntoLyrics(T),h([])},N=()=>{h([])},k=(T,E,D)=>o.jsxs("div",{className:"mb-4",children:[o.jsxs("h4",{className:"text-sm dropsource-text-secondary mb-2",children:[E,D&&o.jsxs("span",{className:"text-xs ml-1",children:["(",D,")"]})]}),o.jsx("div",{className:"space-y-2",children:T.map((M,P)=>o.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-all ${u.includes(M)?"bg-cyan-900/30 border-cyan-600 dropsource-glow-cyan":"bg-gray-800/30 border-gray-700 hover:border-gray-600 hover:bg-gray-800/50"}`,onClick:()=>j(M),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"dropsource-text-primary font-medium",children:M}),o.jsxs("div",{className:"flex items-center gap-2",children:[u.includes(M)&&o.jsx(ht,{variant:"outline",className:"text-xs text-cyan-400 border-cyan-400",children:"Selected"}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:R=>{R.stopPropagation(),window.insertIntoLyrics&&window.insertIntoLyrics(M)},className:"p-1 h-6 w-6 dropsource-text-secondary hover:text-cyan-400",children:o.jsx(Si,{className:"w-3 h-3"})})]})]})},`${E}-${P}`))})]});return o.jsxs("div",{className:"space-y-4 h-full overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"space-y-3 flex-shrink-0",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Gr,{value:r,onChange:T=>e(T.target.value),onKeyPress:w,placeholder:"Enter a word to find rhymes...",className:"flex-1 bg-gray-900/50 border-gray-700 dropsource-text-primary placeholder:dropsource-text-secondary"}),o.jsx(Se,{onClick:v,disabled:!r.trim()||l,className:"dropsource-gradient text-white",children:o.jsx(Io,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm dropsource-text-secondary mb-2",children:"Popular words:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:p.map(T=>o.jsx(Se,{variant:"outline",size:"sm",onClick:()=>{e(T),y(T)},className:"text-xs border-gray-600 dropsource-text-secondary hover:text-cyan-400 hover:border-cyan-400",children:T},T))})]})]}),o.jsxs("div",{className:"flex-1 overflow-hidden",children:[r&&o.jsx("div",{className:"mb-3",children:o.jsxs("h3",{className:"font-medium dropsource-text-primary",children:['Rhymes for "',r,'"',(t.length>0||n.length>0)&&o.jsxs(ht,{variant:"outline",className:"ml-2 text-xs",children:[t.length+n.length," found"]})]})}),o.jsx(un,{className:"h-full",children:l?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-400"})}):t.length>0||n.length>0?o.jsxs("div",{children:[t.length>0&&k(t,"Exact Rhymes","same ending sound"),n.length>0&&k(n,"Near Rhymes","similar ending sound")]}):r?o.jsxs("div",{className:"text-center py-8 dropsource-text-secondary",children:[o.jsx(Gh,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsxs("p",{children:['No rhymes found for "',r,'"']}),o.jsx("p",{className:"text-sm mt-1",children:"Try a different word or check the spelling"})]}):o.jsxs("div",{className:"text-center py-8 dropsource-text-secondary",children:[o.jsx(ms,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Enter a word above to find rhymes"}),o.jsx("p",{className:"text-sm mt-1",children:'Try popular words like "love", "heart", or "dream"'})]})})]}),u.length>0&&o.jsxs("div",{className:"flex-shrink-0 pt-3 border-t border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-sm dropsource-text-secondary",children:[u.length," rhyme",u.length!==1?"s":""," selected"]}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:N,className:"text-xs dropsource-text-secondary hover:text-red-400",children:"Clear"})]}),o.jsx("div",{className:"flex gap-2",children:o.jsxs(Se,{onClick:C,className:"flex-1 dropsource-gradient text-white",children:[o.jsx(Si,{className:"w-4 h-4 mr-1"}),"Insert Selected"]})})]})]})}function iy(r){const e=r+"CollectionProvider",[t,s]=yn(e),[n,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=w=>{const{scope:j,children:C}=w,N=Ne.useRef(null),k=Ne.useRef(new Map).current;return o.jsx(n,{scope:j,itemMap:k,collectionRef:N,children:C})};l.displayName=e;const d=r+"CollectionSlot",u=rc(d),h=Ne.forwardRef((w,j)=>{const{scope:C,children:N}=w,k=i(d,C),T=nt(j,k.collectionRef);return o.jsx(u,{ref:T,children:N})});h.displayName=d;const p=r+"CollectionItemSlot",m="data-radix-collection-item",g=rc(p),y=Ne.forwardRef((w,j)=>{const{scope:C,children:N,...k}=w,T=Ne.useRef(null),E=nt(j,T),D=i(p,C);return Ne.useEffect(()=>(D.itemMap.set(T,{ref:T,...k}),()=>void D.itemMap.delete(T))),o.jsx(g,{[m]:"",ref:E,children:N})});y.displayName=p;function v(w){const j=i(r+"CollectionConsumer",w);return Ne.useCallback(()=>{const N=j.collectionRef.current;if(!N)return[];const k=Array.from(N.querySelectorAll(`[${m}]`));return Array.from(j.itemMap.values()).sort((D,M)=>k.indexOf(D.ref.current)-k.indexOf(M.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:l,Slot:h,ItemSlot:y},v,s]}var Um=0;function HB(){b.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??XS()),document.body.insertAdjacentElement("beforeend",r[1]??XS()),Um++,()=>{Um===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Um--}},[])}function XS(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var $m="focusScope.autoFocusOnMount",Gm="focusScope.autoFocusOnUnmount",KS={bubbles:!1,cancelable:!0},UB="FocusScope",tT=b.forwardRef((r,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...l}=r,[d,u]=b.useState(null),h=Mr(n),p=Mr(i),m=b.useRef(null),g=nt(e,w=>u(w)),y=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let w=function(k){if(y.paused||!d)return;const T=k.target;d.contains(T)?m.current=T:jo(m.current,{select:!0})},j=function(k){if(y.paused||!d)return;const T=k.relatedTarget;T!==null&&(d.contains(T)||jo(m.current,{select:!0}))},C=function(k){if(document.activeElement===document.body)for(const E of k)E.removedNodes.length>0&&jo(d)};document.addEventListener("focusin",w),document.addEventListener("focusout",j);const N=new MutationObserver(C);return d&&N.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",j),N.disconnect()}}},[s,d,y.paused]),b.useEffect(()=>{if(d){ZS.add(y);const w=document.activeElement;if(!d.contains(w)){const C=new CustomEvent($m,KS);d.addEventListener($m,h),d.dispatchEvent(C),C.defaultPrevented||($B(qB(rT(d)),{select:!0}),document.activeElement===w&&jo(d))}return()=>{d.removeEventListener($m,h),setTimeout(()=>{const C=new CustomEvent(Gm,KS);d.addEventListener(Gm,p),d.dispatchEvent(C),C.defaultPrevented||jo(w??document.body,{select:!0}),d.removeEventListener(Gm,p),ZS.remove(y)},0)}}},[d,h,p,y]);const v=b.useCallback(w=>{if(!t&&!s||y.paused)return;const j=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,C=document.activeElement;if(j&&C){const N=w.currentTarget,[k,T]=GB(N);k&&T?!w.shiftKey&&C===T?(w.preventDefault(),t&&jo(k,{select:!0})):w.shiftKey&&C===k&&(w.preventDefault(),t&&jo(T,{select:!0})):C===N&&w.preventDefault()}},[t,s,y.paused]);return o.jsx(Ze.div,{tabIndex:-1,...l,ref:g,onKeyDown:v})});tT.displayName=UB;function $B(r,{select:e=!1}={}){const t=document.activeElement;for(const s of r)if(jo(s,{select:e}),document.activeElement!==t)return}function GB(r){const e=rT(r),t=qS(e,r),s=qS(e.reverse(),r);return[t,s]}function rT(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function qS(r,e){for(const t of r)if(!YB(t,{upTo:e}))return t}function YB(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function XB(r){return r instanceof HTMLInputElement&&"select"in r}function jo(r,{select:e=!1}={}){if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&XB(r)&&e&&r.select()}}var ZS=KB();function KB(){let r=[];return{add(e){const t=r[0];e!==t&&t?.pause(),r=JS(r,e),r.unshift(e)},remove(e){r=JS(r,e),r[0]?.resume()}}}function JS(r,e){const t=[...r],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function qB(r){return r.filter(e=>e.tagName!=="A")}function ay(r){const e=b.useRef({value:r,previous:r});return b.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var ZB=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},ta=new WeakMap,Eu=new WeakMap,Pu={},Ym=0,sT=function(r){return r&&(r.host||sT(r.parentNode))},JB=function(r,e){return e.map(function(t){if(r.contains(t))return t;var s=sT(t);return s&&r.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},QB=function(r,e,t,s){var n=JB(e,Array.isArray(r)?r:[r]);Pu[t]||(Pu[t]=new WeakMap);var i=Pu[t],l=[],d=new Set,u=new Set(n),h=function(m){!m||d.has(m)||(d.add(m),h(m.parentNode))};n.forEach(h);var p=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(g){if(d.has(g))p(g);else try{var y=g.getAttribute(s),v=y!==null&&y!=="false",w=(ta.get(g)||0)+1,j=(i.get(g)||0)+1;ta.set(g,w),i.set(g,j),l.push(g),w===1&&v&&Eu.set(g,!0),j===1&&g.setAttribute(t,"true"),v||g.setAttribute(s,"true")}catch(C){console.error("aria-hidden: cannot operate on ",g,C)}})};return p(e),d.clear(),Ym++,function(){l.forEach(function(m){var g=ta.get(m)-1,y=i.get(m)-1;ta.set(m,g),i.set(m,y),g||(Eu.has(m)||m.removeAttribute(s),Eu.delete(m)),y||m.removeAttribute(t)}),Ym--,Ym||(ta=new WeakMap,ta=new WeakMap,Eu=new WeakMap,Pu={})}},e8=function(r,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(r)?r:[r]),n=ZB(r);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),QB(s,n,t,"aria-hidden")):function(){return null}},an=function(){return an=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},an.apply(this,arguments)};function nT(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t}function t8(r,e,t){if(t||arguments.length===2)for(var s=0,n=e.length,i;s<n;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return r.concat(i||Array.prototype.slice.call(e))}var th="right-scroll-bar-position",rh="width-before-scroll-bar",r8="with-scroll-bars-hidden",s8="--removed-body-scroll-bar-size";function Xm(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function n8(r,e){var t=b.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(s){var n=t.value;n!==s&&(t.value=s,t.callback(s,n))}}}})[0];return t.callback=e,t.facade}var o8=typeof window<"u"?b.useLayoutEffect:b.useEffect,QS=new WeakMap;function i8(r,e){var t=n8(null,function(s){return r.forEach(function(n){return Xm(n,s)})});return o8(function(){var s=QS.get(t);if(s){var n=new Set(s),i=new Set(r),l=t.current;n.forEach(function(d){i.has(d)||Xm(d,null)}),i.forEach(function(d){n.has(d)||Xm(d,l)})}QS.set(t,r)},[r]),t}function a8(r){return r}function l8(r,e){e===void 0&&(e=a8);var t=[],s=!1,n={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(i){var l=e(i,s);return t.push(l),function(){t=t.filter(function(d){return d!==l})}},assignSyncMedium:function(i){for(s=!0;t.length;){var l=t;t=[],l.forEach(i)}t={push:function(d){return i(d)},filter:function(){return t}}},assignMedium:function(i){s=!0;var l=[];if(t.length){var d=t;t=[],d.forEach(i),l=t}var u=function(){var p=l;l=[],p.forEach(i)},h=function(){return Promise.resolve().then(u)};h(),t={push:function(p){l.push(p),h()},filter:function(p){return l=l.filter(p),t}}}};return n}function c8(r){r===void 0&&(r={});var e=l8(null);return e.options=an({async:!0,ssr:!1},r),e}var oT=function(r){var e=r.sideCar,t=nT(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,an({},t))};oT.isSideCarExport=!0;function d8(r,e){return r.useMedium(e),oT}var iT=c8(),Km=function(){},gf=b.forwardRef(function(r,e){var t=b.useRef(null),s=b.useState({onScrollCapture:Km,onWheelCapture:Km,onTouchMoveCapture:Km}),n=s[0],i=s[1],l=r.forwardProps,d=r.children,u=r.className,h=r.removeScrollBar,p=r.enabled,m=r.shards,g=r.sideCar,y=r.noRelative,v=r.noIsolation,w=r.inert,j=r.allowPinchZoom,C=r.as,N=C===void 0?"div":C,k=r.gapMode,T=nT(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=g,D=i8([t,e]),M=an(an({},T),n);return b.createElement(b.Fragment,null,p&&b.createElement(E,{sideCar:iT,removeScrollBar:h,shards:m,noRelative:y,noIsolation:v,inert:w,setCallbacks:i,allowPinchZoom:!!j,lockRef:t,gapMode:k}),l?b.cloneElement(b.Children.only(d),an(an({},M),{ref:D})):b.createElement(N,an({},M,{className:u,ref:D}),d))});gf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gf.classNames={fullWidth:rh,zeroRight:th};var u8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function h8(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=u8();return e&&r.setAttribute("nonce",e),r}function f8(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function p8(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var m8=function(){var r=0,e=null;return{add:function(t){r==0&&(e=h8())&&(f8(e,t),p8(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},g8=function(){var r=m8();return function(e,t){b.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&t])}},aT=function(){var r=g8(),e=function(t){var s=t.styles,n=t.dynamic;return r(s,n),null};return e},x8={left:0,top:0,right:0,gap:0},qm=function(r){return parseInt(r||"",10)||0},y8=function(r){var e=window.getComputedStyle(document.body),t=e[r==="padding"?"paddingLeft":"marginLeft"],s=e[r==="padding"?"paddingTop":"marginTop"],n=e[r==="padding"?"paddingRight":"marginRight"];return[qm(t),qm(s),qm(n)]},v8=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return x8;var e=y8(r),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},b8=aT(),Sa="data-scroll-locked",w8=function(r,e,t,s){var n=r.left,i=r.top,l=r.right,d=r.gap;return t===void 0&&(t="margin"),`
  .`.concat(r8,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(d,"px ").concat(s,`;
  }
  body[`).concat(Sa,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(d,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(th,` {
    right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(rh,` {
    margin-right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(th," .").concat(th,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(rh," .").concat(rh,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Sa,`] {
    `).concat(s8,": ").concat(d,`px;
  }
`)},e2=function(){var r=parseInt(document.body.getAttribute(Sa)||"0",10);return isFinite(r)?r:0},S8=function(){b.useEffect(function(){return document.body.setAttribute(Sa,(e2()+1).toString()),function(){var r=e2()-1;r<=0?document.body.removeAttribute(Sa):document.body.setAttribute(Sa,r.toString())}},[])},C8=function(r){var e=r.noRelative,t=r.noImportant,s=r.gapMode,n=s===void 0?"margin":s;S8();var i=b.useMemo(function(){return v8(n)},[n]);return b.createElement(b8,{styles:w8(i,!e,n,t?"":"!important")})},c0=!1;if(typeof window<"u")try{var Du=Object.defineProperty({},"passive",{get:function(){return c0=!0,!0}});window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{c0=!1}var ra=c0?{passive:!1}:!1,k8=function(r){return r.tagName==="TEXTAREA"},lT=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!k8(r)&&t[e]==="visible")},j8=function(r){return lT(r,"overflowY")},N8=function(r){return lT(r,"overflowX")},t2=function(r,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var n=cT(r,s);if(n){var i=dT(r,s),l=i[1],d=i[2];if(l>d)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},T8=function(r){var e=r.scrollTop,t=r.scrollHeight,s=r.clientHeight;return[e,t,s]},_8=function(r){var e=r.scrollLeft,t=r.scrollWidth,s=r.clientWidth;return[e,t,s]},cT=function(r,e){return r==="v"?j8(e):N8(e)},dT=function(r,e){return r==="v"?T8(e):_8(e)},M8=function(r,e){return r==="h"&&e==="rtl"?-1:1},E8=function(r,e,t,s,n){var i=M8(r,window.getComputedStyle(e).direction),l=i*s,d=t.target,u=e.contains(d),h=!1,p=l>0,m=0,g=0;do{if(!d)break;var y=dT(r,d),v=y[0],w=y[1],j=y[2],C=w-j-i*v;(v||C)&&cT(r,d)&&(m+=C,g+=v);var N=d.parentNode;d=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!u&&d!==document.body||u&&(e.contains(d)||e===d));return(p&&Math.abs(m)<1||!p&&Math.abs(g)<1)&&(h=!0),h},Au=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},r2=function(r){return[r.deltaX,r.deltaY]},s2=function(r){return r&&"current"in r?r.current:r},P8=function(r,e){return r[0]===e[0]&&r[1]===e[1]},D8=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},A8=0,sa=[];function R8(r){var e=b.useRef([]),t=b.useRef([0,0]),s=b.useRef(),n=b.useState(A8++)[0],i=b.useState(aT)[0],l=b.useRef(r);b.useEffect(function(){l.current=r},[r]),b.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(n));var w=t8([r.lockRef.current],(r.shards||[]).map(s2),!0).filter(Boolean);return w.forEach(function(j){return j.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),w.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(n))})}}},[r.inert,r.lockRef.current,r.shards]);var d=b.useCallback(function(w,j){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!l.current.allowPinchZoom;var C=Au(w),N=t.current,k="deltaX"in w?w.deltaX:N[0]-C[0],T="deltaY"in w?w.deltaY:N[1]-C[1],E,D=w.target,M=Math.abs(k)>Math.abs(T)?"h":"v";if("touches"in w&&M==="h"&&D.type==="range")return!1;var P=t2(M,D);if(!P)return!0;if(P?E=M:(E=M==="v"?"h":"v",P=t2(M,D)),!P)return!1;if(!s.current&&"changedTouches"in w&&(k||T)&&(s.current=E),!E)return!0;var R=s.current||E;return E8(R,j,w,R==="h"?k:T)},[]),u=b.useCallback(function(w){var j=w;if(!(!sa.length||sa[sa.length-1]!==i)){var C="deltaY"in j?r2(j):Au(j),N=e.current.filter(function(E){return E.name===j.type&&(E.target===j.target||j.target===E.shadowParent)&&P8(E.delta,C)})[0];if(N&&N.should){j.cancelable&&j.preventDefault();return}if(!N){var k=(l.current.shards||[]).map(s2).filter(Boolean).filter(function(E){return E.contains(j.target)}),T=k.length>0?d(j,k[0]):!l.current.noIsolation;T&&j.cancelable&&j.preventDefault()}}},[]),h=b.useCallback(function(w,j,C,N){var k={name:w,delta:j,target:C,should:N,shadowParent:O8(C)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(T){return T!==k})},1)},[]),p=b.useCallback(function(w){t.current=Au(w),s.current=void 0},[]),m=b.useCallback(function(w){h(w.type,r2(w),w.target,d(w,r.lockRef.current))},[]),g=b.useCallback(function(w){h(w.type,Au(w),w.target,d(w,r.lockRef.current))},[]);b.useEffect(function(){return sa.push(i),r.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",u,ra),document.addEventListener("touchmove",u,ra),document.addEventListener("touchstart",p,ra),function(){sa=sa.filter(function(w){return w!==i}),document.removeEventListener("wheel",u,ra),document.removeEventListener("touchmove",u,ra),document.removeEventListener("touchstart",p,ra)}},[]);var y=r.removeScrollBar,v=r.inert;return b.createElement(b.Fragment,null,v?b.createElement(i,{styles:D8(n)}):null,y?b.createElement(C8,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function O8(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const F8=d8(iT,R8);var uT=b.forwardRef(function(r,e){return b.createElement(gf,an({},r,{ref:e,sideCar:F8}))});uT.classNames=gf.classNames;var L8=[" ","Enter","ArrowUp","ArrowDown"],z8=[" ","Enter"],ki="Select",[xf,yf,I8]=iy(ki),[Ya]=yn(ki,[I8,Hh]),vf=Hh(),[B8,Wo]=Ya(ki),[V8,W8]=Ya(ki),hT=r=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:n,onOpenChange:i,value:l,defaultValue:d,onValueChange:u,dir:h,name:p,autoComplete:m,disabled:g,required:y,form:v}=r,w=vf(e),[j,C]=b.useState(null),[N,k]=b.useState(null),[T,E]=b.useState(!1),D=Ec(h),[M,P]=bi({prop:s,defaultProp:n??!1,onChange:i,caller:ki}),[R,F]=bi({prop:l,defaultProp:d,onChange:u,caller:ki}),I=b.useRef(null),U=j?v||!!j.closest("form"):!0,[L,X]=b.useState(new Set),de=Array.from(L).map(B=>B.props.value).join(";");return o.jsx(dC,{...w,children:o.jsxs(B8,{required:y,scope:e,trigger:j,onTriggerChange:C,valueNode:N,onValueNodeChange:k,valueNodeHasChildren:T,onValueNodeHasChildrenChange:E,contentId:Da(),value:R,onValueChange:F,open:M,onOpenChange:P,dir:D,triggerPointerDownPosRef:I,disabled:g,children:[o.jsx(xf.Provider,{scope:e,children:o.jsx(V8,{scope:r.__scopeSelect,onNativeOptionAdd:b.useCallback(B=>{X(V=>new Set(V).add(B))},[]),onNativeOptionRemove:b.useCallback(B=>{X(V=>{const O=new Set(V);return O.delete(B),O})},[]),children:t})}),U?o.jsxs(RT,{"aria-hidden":!0,required:y,tabIndex:-1,name:p,autoComplete:m,value:R,onChange:B=>F(B.target.value),disabled:g,form:v,children:[R===void 0?o.jsx("option",{value:""}):null,Array.from(L)]},de):null]})})};hT.displayName=ki;var fT="SelectTrigger",pT=b.forwardRef((r,e)=>{const{__scopeSelect:t,disabled:s=!1,...n}=r,i=vf(t),l=Wo(fT,t),d=l.disabled||s,u=nt(e,l.onTriggerChange),h=yf(t),p=b.useRef("touch"),[m,g,y]=FT(w=>{const j=h().filter(k=>!k.disabled),C=j.find(k=>k.value===l.value),N=LT(j,w,C);N!==void 0&&l.onValueChange(N.value)}),v=w=>{d||(l.onOpenChange(!0),y()),w&&(l.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return o.jsx(uC,{asChild:!0,...i,children:o.jsx(Ze.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":OT(l.value)?"":void 0,...n,ref:u,onClick:Ye(n.onClick,w=>{w.currentTarget.focus(),p.current!=="mouse"&&v(w)}),onPointerDown:Ye(n.onPointerDown,w=>{p.current=w.pointerType;const j=w.target;j.hasPointerCapture(w.pointerId)&&j.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(v(w),w.preventDefault())}),onKeyDown:Ye(n.onKeyDown,w=>{const j=m.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&g(w.key),!(j&&w.key===" ")&&L8.includes(w.key)&&(v(),w.preventDefault())})})})});pT.displayName=fT;var mT="SelectValue",gT=b.forwardRef((r,e)=>{const{__scopeSelect:t,className:s,style:n,children:i,placeholder:l="",...d}=r,u=Wo(mT,t),{onValueNodeHasChildrenChange:h}=u,p=i!==void 0,m=nt(e,u.onValueNodeChange);return ur(()=>{h(p)},[h,p]),o.jsx(Ze.span,{...d,ref:m,style:{pointerEvents:"none"},children:OT(u.value)?o.jsx(o.Fragment,{children:l}):i})});gT.displayName=mT;var H8="SelectIcon",xT=b.forwardRef((r,e)=>{const{__scopeSelect:t,children:s,...n}=r;return o.jsx(Ze.span,{"aria-hidden":!0,...n,ref:e,children:s||""})});xT.displayName=H8;var U8="SelectPortal",yT=r=>o.jsx(B0,{asChild:!0,...r});yT.displayName=U8;var ji="SelectContent",vT=b.forwardRef((r,e)=>{const t=Wo(ji,r.__scopeSelect),[s,n]=b.useState();if(ur(()=>{n(new DocumentFragment)},[]),!t.open){const i=s;return i?Lo.createPortal(o.jsx(bT,{scope:r.__scopeSelect,children:o.jsx(xf.Slot,{scope:r.__scopeSelect,children:o.jsx("div",{children:r.children})})}),i):null}return o.jsx(wT,{...r,ref:e})});vT.displayName=ji;var Fs=10,[bT,Ho]=Ya(ji),$8="SelectContentImpl",G8=rc("SelectContent.RemoveScroll"),wT=b.forwardRef((r,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:l,side:d,sideOffset:u,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:g,collisionPadding:y,sticky:v,hideWhenDetached:w,avoidCollisions:j,...C}=r,N=Wo(ji,t),[k,T]=b.useState(null),[E,D]=b.useState(null),M=nt(e,se=>T(se)),[P,R]=b.useState(null),[F,I]=b.useState(null),U=yf(t),[L,X]=b.useState(!1),de=b.useRef(!1);b.useEffect(()=>{if(k)return e8(k)},[k]),HB();const B=b.useCallback(se=>{const[K,...fe]=U().map(pe=>pe.ref.current),[ie]=fe.slice(-1),Te=document.activeElement;for(const pe of se)if(pe===Te||(pe?.scrollIntoView({block:"nearest"}),pe===K&&E&&(E.scrollTop=0),pe===ie&&E&&(E.scrollTop=E.scrollHeight),pe?.focus(),document.activeElement!==Te))return},[U,E]),V=b.useCallback(()=>B([P,k]),[B,P,k]);b.useEffect(()=>{L&&V()},[L,V]);const{onOpenChange:O,triggerPointerDownPosRef:Z}=N;b.useEffect(()=>{if(k){let se={x:0,y:0};const K=ie=>{se={x:Math.abs(Math.round(ie.pageX)-(Z.current?.x??0)),y:Math.abs(Math.round(ie.pageY)-(Z.current?.y??0))}},fe=ie=>{se.x<=10&&se.y<=10?ie.preventDefault():k.contains(ie.target)||O(!1),document.removeEventListener("pointermove",K),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",K),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",fe,{capture:!0})}}},[k,O,Z]),b.useEffect(()=>{const se=()=>O(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[O]);const[Q,W]=FT(se=>{const K=U().filter(Te=>!Te.disabled),fe=K.find(Te=>Te.ref.current===document.activeElement),ie=LT(K,se,fe);ie&&setTimeout(()=>ie.ref.current.focus())}),ae=b.useCallback((se,K,fe)=>{const ie=!de.current&&!fe;(N.value!==void 0&&N.value===K||ie)&&(R(se),ie&&(de.current=!0))},[N.value]),q=b.useCallback(()=>k?.focus(),[k]),ce=b.useCallback((se,K,fe)=>{const ie=!de.current&&!fe;(N.value!==void 0&&N.value===K||ie)&&I(se)},[N.value]),we=s==="popper"?d0:ST,xe=we===d0?{side:d,sideOffset:u,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:g,collisionPadding:y,sticky:v,hideWhenDetached:w,avoidCollisions:j}:{};return o.jsx(bT,{scope:t,content:k,viewport:E,onViewportChange:D,itemRefCallback:ae,selectedItem:P,onItemLeave:q,itemTextRefCallback:ce,focusSelectedItem:V,selectedItemText:F,position:s,isPositioned:L,searchRef:Q,children:o.jsx(uT,{as:G8,allowPinchZoom:!0,children:o.jsx(tT,{asChild:!0,trapped:N.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:Ye(n,se=>{N.trigger?.focus({preventScroll:!0}),se.preventDefault()}),children:o.jsx(E0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:o.jsx(we,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:se=>se.preventDefault(),...C,...xe,onPlaced:()=>X(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Ye(C.onKeyDown,se=>{const K=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!K&&se.key.length===1&&W(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let ie=U().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(se.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const Te=se.target,pe=ie.indexOf(Te);ie=ie.slice(pe+1)}setTimeout(()=>B(ie)),se.preventDefault()}})})})})})})});wT.displayName=$8;var Y8="SelectItemAlignedPosition",ST=b.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:s,...n}=r,i=Wo(ji,t),l=Ho(ji,t),[d,u]=b.useState(null),[h,p]=b.useState(null),m=nt(e,M=>p(M)),g=yf(t),y=b.useRef(!1),v=b.useRef(!0),{viewport:w,selectedItem:j,selectedItemText:C,focusSelectedItem:N}=l,k=b.useCallback(()=>{if(i.trigger&&i.valueNode&&d&&h&&w&&j&&C){const M=i.trigger.getBoundingClientRect(),P=h.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),F=C.getBoundingClientRect();if(i.dir!=="rtl"){const Te=F.left-P.left,pe=R.left-Te,ue=M.left-pe,re=M.width+ue,J=Math.max(re,P.width),ge=window.innerWidth-Fs,oe=dc(pe,[Fs,Math.max(Fs,ge-J)]);d.style.minWidth=re+"px",d.style.left=oe+"px"}else{const Te=P.right-F.right,pe=window.innerWidth-R.right-Te,ue=window.innerWidth-M.right-pe,re=M.width+ue,J=Math.max(re,P.width),ge=window.innerWidth-Fs,oe=dc(pe,[Fs,Math.max(Fs,ge-J)]);d.style.minWidth=re+"px",d.style.right=oe+"px"}const I=g(),U=window.innerHeight-Fs*2,L=w.scrollHeight,X=window.getComputedStyle(h),de=parseInt(X.borderTopWidth,10),B=parseInt(X.paddingTop,10),V=parseInt(X.borderBottomWidth,10),O=parseInt(X.paddingBottom,10),Z=de+B+L+O+V,Q=Math.min(j.offsetHeight*5,Z),W=window.getComputedStyle(w),ae=parseInt(W.paddingTop,10),q=parseInt(W.paddingBottom,10),ce=M.top+M.height/2-Fs,we=U-ce,xe=j.offsetHeight/2,se=j.offsetTop+xe,K=de+B+se,fe=Z-K;if(K<=ce){const Te=I.length>0&&j===I[I.length-1].ref.current;d.style.bottom="0px";const pe=h.clientHeight-w.offsetTop-w.offsetHeight,ue=Math.max(we,xe+(Te?q:0)+pe+V),re=K+ue;d.style.height=re+"px"}else{const Te=I.length>0&&j===I[0].ref.current;d.style.top="0px";const ue=Math.max(ce,de+w.offsetTop+(Te?ae:0)+xe)+fe;d.style.height=ue+"px",w.scrollTop=K-ce+w.offsetTop}d.style.margin=`${Fs}px 0`,d.style.minHeight=Q+"px",d.style.maxHeight=U+"px",s?.(),requestAnimationFrame(()=>y.current=!0)}},[g,i.trigger,i.valueNode,d,h,w,j,C,i.dir,s]);ur(()=>k(),[k]);const[T,E]=b.useState();ur(()=>{h&&E(window.getComputedStyle(h).zIndex)},[h]);const D=b.useCallback(M=>{M&&v.current===!0&&(k(),N?.(),v.current=!1)},[k,N]);return o.jsx(K8,{scope:t,contentWrapper:d,shouldExpandOnScrollRef:y,onScrollButtonChange:D,children:o.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:o.jsx(Ze.div,{...n,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});ST.displayName=Y8;var X8="SelectPopperPosition",d0=b.forwardRef((r,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:n=Fs,...i}=r,l=vf(t);return o.jsx(hC,{...l,...i,ref:e,align:s,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});d0.displayName=X8;var[K8,ly]=Ya(ji,{}),u0="SelectViewport",CT=b.forwardRef((r,e)=>{const{__scopeSelect:t,nonce:s,...n}=r,i=Ho(u0,t),l=ly(u0,t),d=nt(e,i.onViewportChange),u=b.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(xf.Slot,{scope:t,children:o.jsx(Ze.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:Ye(n.onScroll,h=>{const p=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:g}=l;if(g?.current&&m){const y=Math.abs(u.current-p.scrollTop);if(y>0){const v=window.innerHeight-Fs*2,w=parseFloat(m.style.minHeight),j=parseFloat(m.style.height),C=Math.max(w,j);if(C<v){const N=C+y,k=Math.min(v,N),T=N-k;m.style.height=k+"px",m.style.bottom==="0px"&&(p.scrollTop=T>0?T:0,m.style.justifyContent="flex-end")}}}u.current=p.scrollTop})})})]})});CT.displayName=u0;var kT="SelectGroup",[q8,Z8]=Ya(kT),J8=b.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=Da();return o.jsx(q8,{scope:t,id:n,children:o.jsx(Ze.div,{role:"group","aria-labelledby":n,...s,ref:e})})});J8.displayName=kT;var jT="SelectLabel",Q8=b.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=Z8(jT,t);return o.jsx(Ze.div,{id:n.id,...s,ref:e})});Q8.displayName=jT;var Oh="SelectItem",[e9,NT]=Ya(Oh),TT=b.forwardRef((r,e)=>{const{__scopeSelect:t,value:s,disabled:n=!1,textValue:i,...l}=r,d=Wo(Oh,t),u=Ho(Oh,t),h=d.value===s,[p,m]=b.useState(i??""),[g,y]=b.useState(!1),v=nt(e,N=>u.itemRefCallback?.(N,s,n)),w=Da(),j=b.useRef("touch"),C=()=>{n||(d.onValueChange(s),d.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(e9,{scope:t,value:s,disabled:n,textId:w,isSelected:h,onItemTextChange:b.useCallback(N=>{m(k=>k||(N?.textContent??"").trim())},[]),children:o.jsx(xf.ItemSlot,{scope:t,value:s,disabled:n,textValue:p,children:o.jsx(Ze.div,{role:"option","aria-labelledby":w,"data-highlighted":g?"":void 0,"aria-selected":h&&g,"data-state":h?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...l,ref:v,onFocus:Ye(l.onFocus,()=>y(!0)),onBlur:Ye(l.onBlur,()=>y(!1)),onClick:Ye(l.onClick,()=>{j.current!=="mouse"&&C()}),onPointerUp:Ye(l.onPointerUp,()=>{j.current==="mouse"&&C()}),onPointerDown:Ye(l.onPointerDown,N=>{j.current=N.pointerType}),onPointerMove:Ye(l.onPointerMove,N=>{j.current=N.pointerType,n?u.onItemLeave?.():j.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ye(l.onPointerLeave,N=>{N.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:Ye(l.onKeyDown,N=>{u.searchRef?.current!==""&&N.key===" "||(z8.includes(N.key)&&C(),N.key===" "&&N.preventDefault())})})})})});TT.displayName=Oh;var Gl="SelectItemText",_T=b.forwardRef((r,e)=>{const{__scopeSelect:t,className:s,style:n,...i}=r,l=Wo(Gl,t),d=Ho(Gl,t),u=NT(Gl,t),h=W8(Gl,t),[p,m]=b.useState(null),g=nt(e,C=>m(C),u.onItemTextChange,C=>d.itemTextRefCallback?.(C,u.value,u.disabled)),y=p?.textContent,v=b.useMemo(()=>o.jsx("option",{value:u.value,disabled:u.disabled,children:y},u.value),[u.disabled,u.value,y]),{onNativeOptionAdd:w,onNativeOptionRemove:j}=h;return ur(()=>(w(v),()=>j(v)),[w,j,v]),o.jsxs(o.Fragment,{children:[o.jsx(Ze.span,{id:u.textId,...i,ref:g}),u.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Lo.createPortal(i.children,l.valueNode):null]})});_T.displayName=Gl;var MT="SelectItemIndicator",ET=b.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r;return NT(MT,t).isSelected?o.jsx(Ze.span,{"aria-hidden":!0,...s,ref:e}):null});ET.displayName=MT;var h0="SelectScrollUpButton",PT=b.forwardRef((r,e)=>{const t=Ho(h0,r.__scopeSelect),s=ly(h0,r.__scopeSelect),[n,i]=b.useState(!1),l=nt(e,s.onScrollButtonChange);return ur(()=>{if(t.viewport&&t.isPositioned){let d=function(){const h=u.scrollTop>0;i(h)};const u=t.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),n?o.jsx(AT,{...r,ref:l,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=t;d&&u&&(d.scrollTop=d.scrollTop-u.offsetHeight)}}):null});PT.displayName=h0;var f0="SelectScrollDownButton",DT=b.forwardRef((r,e)=>{const t=Ho(f0,r.__scopeSelect),s=ly(f0,r.__scopeSelect),[n,i]=b.useState(!1),l=nt(e,s.onScrollButtonChange);return ur(()=>{if(t.viewport&&t.isPositioned){let d=function(){const h=u.scrollHeight-u.clientHeight,p=Math.ceil(u.scrollTop)<h;i(p)};const u=t.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),n?o.jsx(AT,{...r,ref:l,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=t;d&&u&&(d.scrollTop=d.scrollTop+u.offsetHeight)}}):null});DT.displayName=f0;var AT=b.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:s,...n}=r,i=Ho("SelectScrollButton",t),l=b.useRef(null),d=yf(t),u=b.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return b.useEffect(()=>()=>u(),[u]),ur(()=>{d().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),o.jsx(Ze.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:Ye(n.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:Ye(n.onPointerMove,()=>{i.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:Ye(n.onPointerLeave,()=>{u()})})}),t9="SelectSeparator",r9=b.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r;return o.jsx(Ze.div,{"aria-hidden":!0,...s,ref:e})});r9.displayName=t9;var p0="SelectArrow",s9=b.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=vf(t),i=Wo(p0,t),l=Ho(p0,t);return i.open&&l.position==="popper"?o.jsx(fC,{...n,...s,ref:e}):null});s9.displayName=p0;var n9="SelectBubbleInput",RT=b.forwardRef(({__scopeSelect:r,value:e,...t},s)=>{const n=b.useRef(null),i=nt(s,n),l=ay(e);return b.useEffect(()=>{const d=n.current;if(!d)return;const u=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==e&&p){const m=new Event("change",{bubbles:!0});p.call(d,e),d.dispatchEvent(m)}},[l,e]),o.jsx(Ze.select,{...t,style:{...pC,...t.style},ref:i,defaultValue:e})});RT.displayName=n9;function OT(r){return r===""||r===void 0}function FT(r){const e=Mr(r),t=b.useRef(""),s=b.useRef(0),n=b.useCallback(l=>{const d=t.current+l;e(d),(function u(h){t.current=h,window.clearTimeout(s.current),h!==""&&(s.current=window.setTimeout(()=>u(""),1e3))})(d)},[e]),i=b.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,n,i]}function LT(r,e,t){const n=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=t?r.indexOf(t):-1;let l=o9(r,Math.max(i,0));n.length===1&&(l=l.filter(h=>h!==t));const u=l.find(h=>h.textValue.toLowerCase().startsWith(n.toLowerCase()));return u!==t?u:void 0}function o9(r,e){return r.map((t,s)=>r[(e+s)%r.length])}var i9=hT,a9=pT,l9=gT,c9=xT,d9=yT,u9=vT,h9=CT,f9=TT,p9=_T,m9=ET,g9=PT,x9=DT;function m0({...r}){return o.jsx(i9,{"data-slot":"select",...r})}function g0({...r}){return o.jsx(l9,{"data-slot":"select-value",...r})}function x0({className:r,size:e="default",children:t,...s}){return o.jsxs(a9,{"data-slot":"select-trigger","data-size":e,className:Et("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...s,children:[t,o.jsx(c9,{asChild:!0,children:o.jsx(U0,{className:"size-4 opacity-50"})})]})}function y0({className:r,children:e,position:t="popper",...s}){return o.jsx(d9,{children:o.jsxs(u9,{"data-slot":"select-content",className:Et("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...s,children:[o.jsx(y9,{}),o.jsx(h9,{className:Et("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),o.jsx(v9,{})]})})}function Fh({className:r,children:e,...t}){return o.jsxs(f9,{"data-slot":"select-item",className:Et("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),...t,children:[o.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:o.jsx(m9,{children:o.jsx(Y4,{className:"size-4"})})}),o.jsx(p9,{children:e})]})}function y9({className:r,...e}){return o.jsx(g9,{"data-slot":"select-scroll-up-button",className:Et("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx(eD,{className:"size-4"})})}function v9({className:r,...e}){return o.jsx(x9,{"data-slot":"select-scroll-down-button",className:Et("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx(U0,{className:"size-4"})})}function Er({className:r,...e}){return o.jsx("div",{"data-slot":"card",className:Et("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...e})}function b9(){const[r,e]=b.useState("C"),[t,s]=b.useState("major"),[n,i]=b.useState("piano"),l={major:{name:"Major",intervals:[0,4,7]},minor:{name:"Minor",intervals:[0,3,7]},dim:{name:"Diminished",intervals:[0,3,6]},aug:{name:"Augmented",intervals:[0,4,8]},sus2:{name:"Sus2",intervals:[0,2,7]},sus4:{name:"Sus4",intervals:[0,5,7]},7:{name:"Dominant 7th",intervals:[0,4,7,10]},maj7:{name:"Major 7th",intervals:[0,4,7,11]},min7:{name:"Minor 7th",intervals:[0,3,7,10]},add9:{name:"Add9",intervals:[0,4,7,14]}},d=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],u={C:0,"C#":1,D:2,"D#":3,E:4,F:5,"F#":6,G:7,"G#":8,A:9,"A#":10,B:11},h={C:{major:[0,1,0,2,3,0],minor:[0,1,3,3,2,1],7:[0,1,0,2,3,1],maj7:[0,0,0,2,3,0]},D:{major:[-1,-1,0,2,3,2],minor:[-1,-1,0,2,3,1],7:[-1,-1,0,2,1,2],maj7:[-1,-1,0,2,2,2]},E:{major:[0,2,2,1,0,0],minor:[0,2,2,0,0,0],7:[0,2,0,1,0,0],maj7:[0,2,1,1,0,0]},F:{major:[1,3,3,2,1,1],minor:[1,3,3,1,1,1],7:[1,3,1,2,1,1],maj7:[1,3,2,2,1,1]},G:{major:[3,2,0,0,3,3],minor:[3,5,5,3,3,3],7:[3,2,0,0,0,1],maj7:[3,2,0,0,0,2]},A:{major:[-1,0,2,2,2,0],minor:[-1,0,2,2,1,0],7:[-1,0,2,0,2,0],maj7:[-1,0,2,1,2,0]},B:{major:[-1,2,4,4,4,2],minor:[-1,2,4,4,3,2],7:[-1,2,1,2,0,2],maj7:[-1,2,3,2,4,2]}},m=((w,j)=>{const C=u[w];return(l[j]?.intervals||[0,4,7]).map((k,T)=>{const E=(C+k)%12,D=Math.floor((C+k)/12)+4;return{note:d[E],octave:D,isRoot:T===0}})})(r,t),g=`${r} ${l[t]?.name||"Major"}`,y=()=>{const w=["C","D","E","F","G","A","B"],j=["C#","D#","","F#","G#","A#",""],C=k=>m.some(T=>T.note===k),N=k=>m.some(T=>T.note===k&&T.isRoot);return o.jsx("div",{className:"w-full max-w-sm mx-auto",children:o.jsxs("div",{className:"relative",style:{width:"350px",height:"140px",margin:"0 auto"},children:[o.jsx("div",{className:"flex absolute bottom-0",children:w.map((k,T)=>o.jsx("div",{className:`
                  w-12 h-24 border-2 border-gray-600 flex items-end justify-center pb-2 text-sm font-bold
                  ${C(k)?N(k)?"bg-cyan-300 text-black shadow-xl shadow-cyan-400/80 border-cyan-500":"bg-blue-300 text-black shadow-xl shadow-blue-400/80 border-blue-500":"bg-white text-gray-900 hover:bg-gray-50 border-gray-400"}
                  transition-all duration-200 cursor-pointer relative
                `,onClick:()=>{console.log(`Playing ${k}`)},children:o.jsx("span",{className:"select-none font-bold text-sm",children:k})},k))}),o.jsx("div",{className:"flex absolute bottom-0",children:j.map((k,T)=>k?o.jsx("div",{className:`
                    w-8 h-16 -ml-4 mr-4 flex items-end justify-center pb-2 text-xs font-bold rounded-b-md
                    ${C(k)?N(k)?"bg-cyan-400 text-black shadow-xl shadow-cyan-400/80 border-2 border-cyan-600":"bg-blue-400 text-black shadow-xl shadow-blue-400/80 border-2 border-blue-600":"bg-gray-800 text-white hover:bg-gray-700 border-2 border-gray-600"}
                    transition-all duration-200 cursor-pointer z-10
                  `,onClick:()=>{console.log(`Playing ${k}`)},children:o.jsx("span",{className:"select-none font-bold text-[10px] text-center",children:k})},k):o.jsx("div",{className:"w-12"},T))})]})})},v=()=>{const w=["E","A","D","G","B","E"],j=h[r]?.[t]||[1,3,3,2,1,1];return o.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[o.jsx("h4",{className:"text-center font-medium dropsource-text-primary mb-4",children:"Guitar Chord"}),o.jsxs("div",{className:"bg-amber-50 rounded-xl p-6 border-2 border-amber-200 shadow-lg",children:[o.jsx("div",{className:"flex justify-between mb-3 px-2",children:w.map((C,N)=>o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-sm font-bold text-amber-900",children:C}),o.jsx("div",{className:"text-xs text-amber-700",children:j[N]===-1?"":j[N]===0?"O":j[N]})]},N))}),o.jsx("div",{className:"h-1 bg-gray-800 mb-4 rounded shadow-sm"}),o.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(C=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute w-full h-0.5 bg-gray-400 top-2"}),o.jsx("div",{className:"flex justify-between items-center h-4",children:j.map((N,k)=>o.jsxs("div",{className:"relative flex flex-col items-center",children:[o.jsx("div",{className:"w-0.5 h-4 bg-gray-600",style:{backgroundColor:k===0||k===5?"#8B4513":"#C0C0C0"}}),N===C&&N>0&&o.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 w-4 h-4 bg-red-600 rounded-full border-2 border-white shadow-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white text-[8px] font-bold",children:N})})]},k))}),o.jsx("div",{className:"absolute -right-8 top-1/2 transform -translate-y-1/2",children:o.jsx("span",{className:"text-xs text-amber-800 font-medium",children:C})})]},C))}),o.jsx("div",{className:"mt-4 pt-3 border-t border-amber-300",children:o.jsx("div",{className:"text-center text-xs text-amber-800",children:o.jsxs("div",{className:"flex justify-center items-center gap-4",children:[o.jsx("span",{children:" = Muted"}),o.jsx("span",{children:"O = Open"}),o.jsx("span",{children:" = Fret"})]})})})]})]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm dropsource-text-secondary mb-2",children:"Key"}),o.jsxs(m0,{value:r,onValueChange:e,children:[o.jsx(x0,{className:"dropsource-border-glow bg-transparent text-white",children:o.jsx(g0,{})}),o.jsx(y0,{className:"dropsource-panel border-gray-700",children:d.map(w=>o.jsx(Fh,{value:w,className:"text-white hover:bg-gray-700",children:w},w))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm dropsource-text-secondary mb-2",children:"Chord Type"}),o.jsxs(m0,{value:t,onValueChange:s,children:[o.jsx(x0,{className:"dropsource-border-glow bg-transparent text-white",children:o.jsx(g0,{})}),o.jsx(y0,{className:"dropsource-panel border-gray-700",children:Object.entries(l).map(([w,j])=>o.jsx(Fh,{value:w,className:"text-white hover:bg-gray-700",children:j.name},w))})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Se,{variant:n==="piano"?"default":"outline",size:"sm",onClick:()=>i("piano"),className:`flex-1 ${n==="piano"?"dropsource-gradient text-white":"border-gray-600 dropsource-text-secondary hover:text-cyan-400"}`,children:[o.jsx(u3,{className:"w-4 h-4 mr-2"}),"Piano"]}),o.jsxs(Se,{variant:n==="guitar"?"default":"outline",size:"sm",onClick:()=>i("guitar"),className:`flex-1 ${n==="guitar"?"dropsource-gradient text-white":"border-gray-600 dropsource-text-secondary hover:text-cyan-400"}`,children:[o.jsx(_D,{className:"w-4 h-4 mr-2"}),"Guitar"]})]})]}),o.jsxs(Er,{className:"p-4 bg-gray-900/50 border-gray-700",children:[o.jsx("h3",{className:"text-lg font-medium dropsource-text-primary mb-2 text-center",children:g}),o.jsxs("div",{className:"text-center dropsource-text-secondary text-sm",children:["Notes: ",m.map(w=>w.note).join(" - ")]})]}),o.jsx("div",{className:"bg-gray-900/30 rounded-lg p-6",children:n==="piano"?o.jsx(y,{}):o.jsx(v,{})}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium dropsource-text-primary mb-3",children:["Common Progressions in ",r,":"]}),o.jsx("div",{className:"space-y-2",children:[{name:"I-V-vi-IV",chords:["major","major","minor","major"],roman:["I","V","vi","IV"]},{name:"vi-IV-I-V",chords:["minor","major","major","major"],roman:["vi","IV","I","V"]},{name:"I-vi-IV-V",chords:["major","minor","major","major"],roman:["I","vi","IV","V"]}].map((w,j)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/30 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("span",{className:"dropsource-text-primary font-medium",children:w.name}),o.jsx("div",{className:"text-sm dropsource-text-secondary",children:w.roman.join(" - ")})]}),o.jsx(Se,{variant:"outline",size:"sm",className:"border-gray-600 dropsource-text-secondary hover:text-cyan-400 hover:border-cyan-400",onClick:()=>{if(window.insertIntoLyrics){const C=w.roman.map(N=>`[${N}]`).join(" ");window.insertIntoLyrics(`chord-progression:${C}`)}},children:"Insert"})]},j))})]})]})}function w9(){const[r,e]=b.useState(""),[t,s]=b.useState({words:0,lines:0,syllables:0,verses:0,choruses:0,bridges:0,readingTime:0}),[n,i]=b.useState([]);b.useEffect(()=>{const u=setInterval(()=>{const h=document.querySelectorAll("textarea");if(h.length>0){const p=h[0].value;p!==r&&(e(p),d(p))}},500);return()=>clearInterval(u)},[r]);const l=u=>{if(!u||u.length===0)return 0;const h=u.toLowerCase().replace(/[^a-z]/g,"");if(h.length===0)return 0;const p={the:1,a:1,an:1,and:1,or:1,but:1,in:1,on:1,at:1,to:1,for:1,of:1,with:1,by:1,from:1,like:1,love:1,fire:2,desire:3,hour:1,our:1,every:3,family:3,library:4,different:3,interest:3,camera:3,orange:2,people:2,purple:2,circle:2,simple:2,little:2,middle:2,battle:2,gentle:2};if(p[h])return p[h];let m=0,g=!1;const y="aeiouy";for(let v=0;v<h.length;v++){const w=y.includes(h[v]);w&&!g&&m++,g=w}return h.endsWith("e")&&m>1&&m--,h.endsWith("le")&&h.length>2&&!y.includes(h[h.length-3])&&m++,Math.max(1,m)},d=u=>{if(!u.trim()){s({words:0,lines:0,syllables:0,verses:0,choruses:0,bridges:0,readingTime:0}),i([]);return}const p=u.split(`
`).filter(T=>T.trim().length>0),m=/\b[a-zA-Z]+(?:'[a-zA-Z]+)?\b/g,g=[],y=[];u.replace(m,T=>{if(u.replace(/\[.*?\]/g,"").includes(T)){g.push(T);const D=l(T);y.push({word:T.toLowerCase(),syllables:D})}return T});const v=(u.match(/\[verse\]/gi)||[]).length,w=(u.match(/\[chorus\]/gi)||[]).length,j=(u.match(/\[bridge\]/gi)||[]).length,C=y.reduce((T,E)=>T+E.syllables,0),N=Math.ceil(g.length/150);s({words:g.length,lines:p.length,syllables:C,verses:v,choruses:w,bridges:j,readingTime:N});const k=y.reduce((T,E)=>{const D=T.find(M=>M.word===E.word);return D?D.count=(D.count||1)+1:T.push({...E,count:1}),T},[]);i(k.sort((T,E)=>E.syllables-T.syllables).slice(0,20))};return o.jsxs("div",{className:"space-y-4 h-full overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 flex-shrink-0",children:[o.jsxs(Er,{className:"p-3 bg-gray-900/50 border-gray-700 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[o.jsx(vg,{className:"w-4 h-4 dropsource-text-secondary"}),o.jsx("span",{className:"text-sm dropsource-text-secondary",children:"Words"})]}),o.jsx("div",{className:"text-2xl font-bold dropsource-text-primary dropsource-glow-cyan",children:t.words.toLocaleString()})]}),o.jsxs(Er,{className:"p-3 bg-gray-900/50 border-gray-700 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[o.jsx(Y0,{className:"w-4 h-4 dropsource-text-secondary"}),o.jsx("span",{className:"text-sm dropsource-text-secondary",children:"Syllables"})]}),o.jsx("div",{className:"text-2xl font-bold dropsource-text-primary dropsource-glow-cyan",children:t.syllables.toLocaleString()})]}),o.jsxs(Er,{className:"p-3 bg-gray-900/50 border-gray-700 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[o.jsx(Gh,{className:"w-4 h-4 dropsource-text-secondary"}),o.jsx("span",{className:"text-sm dropsource-text-secondary",children:"Lines"})]}),o.jsx("div",{className:"text-2xl font-bold dropsource-text-primary",children:t.lines})]}),o.jsxs(Er,{className:"p-3 bg-gray-900/50 border-gray-700 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[o.jsx(ja,{className:"w-4 h-4 dropsource-text-secondary"}),o.jsx("span",{className:"text-sm dropsource-text-secondary",children:"Read Time"})]}),o.jsxs("div",{className:"text-2xl font-bold dropsource-text-primary",children:[t.readingTime,"m"]})]})]}),(t.verses>0||t.choruses>0||t.bridges>0)&&o.jsxs(Er,{className:"p-4 bg-gray-900/50 border-gray-700 flex-shrink-0",children:[o.jsxs("h3",{className:"font-medium dropsource-text-primary mb-3 flex items-center gap-2",children:[o.jsx($4,{className:"w-4 h-4"}),"Song Structure"]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.verses>0&&o.jsxs(ht,{variant:"outline",className:"border-blue-600 text-blue-400",children:[t.verses," Verse",t.verses!==1?"s":""]}),t.choruses>0&&o.jsxs(ht,{variant:"outline",className:"border-green-600 text-green-400",children:[t.choruses," Chorus",t.choruses!==1?"es":""]}),t.bridges>0&&o.jsxs(ht,{variant:"outline",className:"border-purple-600 text-purple-400",children:[t.bridges," Bridge",t.bridges!==1?"s":""]})]})]}),o.jsxs("div",{className:"flex-1 overflow-hidden",children:[o.jsx("h3",{className:"font-medium dropsource-text-primary mb-3",children:"Syllable Breakdown"}),n.length>0?o.jsx(un,{className:"h-full",children:o.jsx("div",{className:"space-y-2",children:n.map((u,h)=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"dropsource-text-primary font-medium",children:u.word}),(u.count||0)>1&&o.jsxs(ht,{variant:"outline",className:"text-xs",children:["",u.count]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(ht,{variant:"outline",className:`text-xs ${u.syllables===1?"border-green-600 text-green-400":u.syllables===2?"border-blue-600 text-blue-400":u.syllables===3?"border-yellow-600 text-yellow-400":"border-red-600 text-red-400"}`,children:[u.syllables," syl"]})})]},h))})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-32 dropsource-text-secondary",children:[o.jsx(vg,{className:"w-8 h-8 mb-2 opacity-50"}),o.jsx("p",{className:"text-sm text-center",children:"Start writing to see syllable breakdown"})]})]}),o.jsx("div",{className:"flex-shrink-0 pt-3 border-t border-gray-700",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(Se,{variant:"outline",size:"sm",onClick:()=>{window.insertIntoLyrics&&window.insertIntoLyrics(`

--- Stats ---
Words: ${t.words}
Lines: ${t.lines}
Syllables: ${t.syllables}
`)},className:"border-gray-600 dropsource-text-secondary hover:text-cyan-400 hover:border-cyan-400",children:"Insert Stats"}),o.jsx(Se,{variant:"outline",size:"sm",onClick:()=>{const u=document.querySelectorAll("textarea");u.length>0&&d(u[0].value)},className:"border-gray-600 dropsource-text-secondary hover:text-cyan-400 hover:border-cyan-400",children:"Refresh"})]})})]})}var zT=["PageUp","PageDown"],IT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Xa="Slider",[v0,S9,C9]=iy(Xa),[VT]=yn(Xa,[C9]),[k9,bf]=VT(Xa),WT=b.forwardRef((r,e)=>{const{name:t,min:s=0,max:n=100,step:i=1,orientation:l="horizontal",disabled:d=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[s],value:p,onValueChange:m=()=>{},onValueCommit:g=()=>{},inverted:y=!1,form:v,...w}=r,j=b.useRef(new Set),C=b.useRef(0),k=l==="horizontal"?j9:N9,[T=[],E]=bi({prop:p,defaultProp:h,onChange:I=>{[...j.current][C.current]?.focus(),m(I)}}),D=b.useRef(T);function M(I){const U=P9(T,I);F(I,U)}function P(I){F(I,C.current)}function R(){const I=D.current[C.current];T[C.current]!==I&&g(T)}function F(I,U,{commit:L}={commit:!1}){const X=O9(i),de=F9(Math.round((I-s)/i)*i+s,X),B=dc(de,[s,n]);E((V=[])=>{const O=M9(V,B,U);if(R9(O,u*i)){C.current=O.indexOf(B);const Z=String(O)!==String(V);return Z&&L&&g(O),Z?O:V}else return V})}return o.jsx(k9,{scope:r.__scopeSlider,name:t,disabled:d,min:s,max:n,valueIndexToChangeRef:C,thumbs:j.current,values:T,orientation:l,form:v,children:o.jsx(v0.Provider,{scope:r.__scopeSlider,children:o.jsx(v0.Slot,{scope:r.__scopeSlider,children:o.jsx(k,{"aria-disabled":d,"data-disabled":d?"":void 0,...w,ref:e,onPointerDown:Ye(w.onPointerDown,()=>{d||(D.current=T)}),min:s,max:n,inverted:y,onSlideStart:d?void 0:M,onSlideMove:d?void 0:P,onSlideEnd:d?void 0:R,onHomeKeyDown:()=>!d&&F(s,0,{commit:!0}),onEndKeyDown:()=>!d&&F(n,T.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:U})=>{if(!d){const de=zT.includes(I.key)||I.shiftKey&&IT.includes(I.key)?10:1,B=C.current,V=T[B],O=i*de*U;F(V+O,B,{commit:!0})}}})})})})});WT.displayName=Xa;var[HT,UT]=VT(Xa,{startEdge:"left",endEdge:"right",size:"width",direction:1}),j9=b.forwardRef((r,e)=>{const{min:t,max:s,dir:n,inverted:i,onSlideStart:l,onSlideMove:d,onSlideEnd:u,onStepKeyDown:h,...p}=r,[m,g]=b.useState(null),y=nt(e,k=>g(k)),v=b.useRef(void 0),w=Ec(n),j=w==="ltr",C=j&&!i||!j&&i;function N(k){const T=v.current||m.getBoundingClientRect(),E=[0,T.width],M=cy(E,C?[t,s]:[s,t]);return v.current=T,M(k-T.left)}return o.jsx(HT,{scope:r.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:o.jsx($T,{dir:w,"data-orientation":"horizontal",...p,ref:y,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:k=>{const T=N(k.clientX);l?.(T)},onSlideMove:k=>{const T=N(k.clientX);d?.(T)},onSlideEnd:()=>{v.current=void 0,u?.()},onStepKeyDown:k=>{const E=BT[C?"from-left":"from-right"].includes(k.key);h?.({event:k,direction:E?-1:1})}})})}),N9=b.forwardRef((r,e)=>{const{min:t,max:s,inverted:n,onSlideStart:i,onSlideMove:l,onSlideEnd:d,onStepKeyDown:u,...h}=r,p=b.useRef(null),m=nt(e,p),g=b.useRef(void 0),y=!n;function v(w){const j=g.current||p.current.getBoundingClientRect(),C=[0,j.height],k=cy(C,y?[s,t]:[t,s]);return g.current=j,k(w-j.top)}return o.jsx(HT,{scope:r.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:o.jsx($T,{"data-orientation":"vertical",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const j=v(w.clientY);i?.(j)},onSlideMove:w=>{const j=v(w.clientY);l?.(j)},onSlideEnd:()=>{g.current=void 0,d?.()},onStepKeyDown:w=>{const C=BT[y?"from-bottom":"from-top"].includes(w.key);u?.({event:w,direction:C?-1:1})}})})}),$T=b.forwardRef((r,e)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:n,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:d,onStepKeyDown:u,...h}=r,p=bf(Xa,t);return o.jsx(Ze.span,{...h,ref:e,onKeyDown:Ye(r.onKeyDown,m=>{m.key==="Home"?(l(m),m.preventDefault()):m.key==="End"?(d(m),m.preventDefault()):zT.concat(IT).includes(m.key)&&(u(m),m.preventDefault())}),onPointerDown:Ye(r.onPointerDown,m=>{const g=m.target;g.setPointerCapture(m.pointerId),m.preventDefault(),p.thumbs.has(g)?g.focus():s(m)}),onPointerMove:Ye(r.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&n(m)}),onPointerUp:Ye(r.onPointerUp,m=>{const g=m.target;g.hasPointerCapture(m.pointerId)&&(g.releasePointerCapture(m.pointerId),i(m))})})}),GT="SliderTrack",YT=b.forwardRef((r,e)=>{const{__scopeSlider:t,...s}=r,n=bf(GT,t);return o.jsx(Ze.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...s,ref:e})});YT.displayName=GT;var b0="SliderRange",XT=b.forwardRef((r,e)=>{const{__scopeSlider:t,...s}=r,n=bf(b0,t),i=UT(b0,t),l=b.useRef(null),d=nt(e,l),u=n.values.length,h=n.values.map(g=>ZT(g,n.min,n.max)),p=u>1?Math.min(...h):0,m=100-Math.max(...h);return o.jsx(Ze.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...s,ref:d,style:{...r.style,[i.startEdge]:p+"%",[i.endEdge]:m+"%"}})});XT.displayName=b0;var w0="SliderThumb",KT=b.forwardRef((r,e)=>{const t=S9(r.__scopeSlider),[s,n]=b.useState(null),i=nt(e,d=>n(d)),l=b.useMemo(()=>s?t().findIndex(d=>d.ref.current===s):-1,[t,s]);return o.jsx(T9,{...r,ref:i,index:l})}),T9=b.forwardRef((r,e)=>{const{__scopeSlider:t,index:s,name:n,...i}=r,l=bf(w0,t),d=UT(w0,t),[u,h]=b.useState(null),p=nt(e,N=>h(N)),m=u?l.form||!!u.closest("form"):!0,g=L0(u),y=l.values[s],v=y===void 0?0:ZT(y,l.min,l.max),w=E9(s,l.values.length),j=g?.[d.size],C=j?D9(j,v,d.direction):0;return b.useEffect(()=>{if(u)return l.thumbs.add(u),()=>{l.thumbs.delete(u)}},[u,l.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${v}% + ${C}px)`},children:[o.jsx(v0.ItemSlot,{scope:r.__scopeSlider,children:o.jsx(Ze.span,{role:"slider","aria-label":r["aria-label"]||w,"aria-valuemin":l.min,"aria-valuenow":y,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:p,style:y===void 0?{display:"none"}:r.style,onFocus:Ye(r.onFocus,()=>{l.valueIndexToChangeRef.current=s})})}),m&&o.jsx(qT,{name:n??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:y},s)]})});KT.displayName=w0;var _9="RadioBubbleInput",qT=b.forwardRef(({__scopeSlider:r,value:e,...t},s)=>{const n=b.useRef(null),i=nt(n,s),l=ay(e);return b.useEffect(()=>{const d=n.current;if(!d)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==e&&p){const m=new Event("input",{bubbles:!0});p.call(d,e),d.dispatchEvent(m)}},[l,e]),o.jsx(Ze.input,{style:{display:"none"},...t,ref:i,defaultValue:e})});qT.displayName=_9;function M9(r=[],e,t){const s=[...r];return s[t]=e,s.sort((n,i)=>n-i)}function ZT(r,e,t){const i=100/(t-e)*(r-e);return dc(i,[0,100])}function E9(r,e){return e>2?`Value ${r+1} of ${e}`:e===2?["Minimum","Maximum"][r]:void 0}function P9(r,e){if(r.length===1)return 0;const t=r.map(n=>Math.abs(n-e)),s=Math.min(...t);return t.indexOf(s)}function D9(r,e,t){const s=r/2,i=cy([0,50],[0,s]);return(s-i(e)*t)*t}function A9(r){return r.slice(0,-1).map((e,t)=>r[t+1]-e)}function R9(r,e){if(e>0){const t=A9(r);return Math.min(...t)>=e}return!0}function cy(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(r[1]-r[0]);return e[0]+s*(t-r[0])}}function O9(r){return(String(r).split(".")[1]||"").length}function F9(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}var JT=WT,L9=YT,z9=XT,I9=KT;const S0=b.forwardRef(({className:r,...e},t)=>o.jsxs(JT,{ref:t,className:Et("relative flex w-full touch-none select-none items-center",r),...e,children:[o.jsx(L9,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-gray-700",children:o.jsx(z9,{className:"absolute h-full bg-gradient-to-r from-purple-500 to-pink-500"})}),o.jsx(I9,{className:"block h-5 w-5 rounded-full border-2 border-white bg-white shadow transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));S0.displayName=JT.displayName;function B9({currentBpm:r=120,onBpmChange:e}){const[t,s]=b.useState(r),[n,i]=b.useState(!1),[l,d]=b.useState(.7),[u,h]=b.useState([]),[p,m]=b.useState(0),[g,y]=b.useState(null),v=b.useRef(null),w=b.useRef(null),j=b.useRef(null);b.useEffect(()=>(typeof window<"u"&&(v.current=new(window.AudioContext||window.webkitAudioContext)),()=>{v.current&&v.current.close()}),[]),b.useEffect(()=>{s(r)},[r]);const C=(M=!1)=>{if(!v.current)return;const P=v.current,R=P.createOscillator(),F=P.createGain();R.connect(F),F.connect(P.destination),R.frequency.setValueAtTime(M?1e3:800,P.currentTime),R.type="square",F.gain.setValueAtTime(0,P.currentTime),F.gain.linearRampToValueAtTime(l*.3,P.currentTime+.01),F.gain.exponentialRampToValueAtTime(.001,P.currentTime+.1),R.start(P.currentTime),R.stop(P.currentTime+.1)},N=()=>{if(n)w.current&&(clearInterval(w.current),w.current=null),i(!1);else{const M=6e4/t;let P=0;w.current=setInterval(()=>{C(P%4===0),P++},M),i(!0),C(!0)}},k=M=>{if(s(M),e&&e(M),window.updateProjectBpm&&window.updateProjectBpm(M),n){w.current&&clearInterval(w.current);const P=6e4/M;let R=0;w.current=setInterval(()=>{C(R%4===0),R++},P)}},T=()=>{const M=Date.now();if(p===0){m(M),h([M]);return}if(M-p>3e3){h([M]),m(M),y(null);return}const R=[...u,M].slice(-8);if(h(R),m(M),R.length>=2){const F=[];for(let L=1;L<R.length;L++)F.push(R[L]-R[L-1]);const I=F.reduce((L,X)=>L+X,0)/F.length,U=Math.round(6e4/I);U>=60&&U<=200&&y(U)}j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{h([]),m(0),y(null)},3e3)},E=()=>{g&&(k(g),h([]),m(0),y(null))},D=()=>{h([]),m(0),y(null),j.current&&clearTimeout(j.current)};return b.useEffect(()=>()=>{w.current&&clearInterval(w.current),j.current&&clearTimeout(j.current)},[]),o.jsxs("div",{className:"space-y-4 h-full overflow-hidden flex flex-col",children:[o.jsx(Er,{className:"p-4 bg-gray-900/50 border-gray-700 text-center flex-shrink-0",children:o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-3xl font-bold dropsource-text-primary dropsource-glow-cyan",children:t}),o.jsx("div",{className:"dropsource-text-secondary text-sm",children:"BPM"})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm dropsource-text-secondary mb-2",children:"Set BPM"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Gr,{type:"number",value:t,onChange:M=>k(Number(M.target.value)),min:"60",max:"200",className:"flex-1 bg-gray-900/50 border-gray-700 dropsource-text-primary"}),o.jsx(Se,{variant:"outline",onClick:()=>k(120),className:"border-gray-600 dropsource-text-secondary hover:text-cyan-400",children:"Reset"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm dropsource-text-secondary mb-2",children:["Quick Adjust: ",t," BPM"]}),o.jsx(S0,{value:[t],onValueChange:M=>k(M[0]),max:200,min:60,step:1,className:"w-full"}),o.jsxs("div",{className:"flex justify-between text-xs dropsource-text-secondary mt-1",children:[o.jsx("span",{children:"60"}),o.jsx("span",{children:"200"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-medium dropsource-text-primary",children:"Tap Tempo"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Se,{size:"lg",onClick:T,className:"flex-1 mr-2 bg-cyan-600 hover:bg-cyan-700 text-white font-medium py-8 text-lg",children:"TAP"}),o.jsx(Se,{variant:"outline",size:"sm",onClick:D,className:"border-gray-600 dropsource-text-secondary hover:text-cyan-400",children:o.jsx(ci,{className:"w-4 h-4"})})]}),g&&o.jsx(Er,{className:"p-4 bg-cyan-900/20 border-cyan-700/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-lg font-bold text-cyan-400",children:[g," BPM"]}),o.jsxs("div",{className:"text-xs text-cyan-300",children:["Tap detected (",u.length," taps)"]})]}),o.jsx(Se,{size:"sm",onClick:E,className:"bg-cyan-600 hover:bg-cyan-700 text-white",children:"Apply"})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-medium dropsource-text-primary",children:"Metronome"}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsx(Se,{size:"lg",onClick:N,className:`flex-1 mr-4 ${n?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:n?o.jsxs(o.Fragment,{children:[o.jsx(Yh,{className:"w-5 h-5 mr-2"}),"Stop"]}):o.jsxs(o.Fragment,{children:[o.jsx(_c,{className:"w-5 h-5 mr-2"}),"Start"]})})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(YC,{className:"w-4 h-4 dropsource-text-secondary"}),o.jsxs("label",{className:"text-sm dropsource-text-secondary",children:["Volume: ",Math.round(l*100),"%"]})]}),o.jsx(S0,{value:[l],onValueChange:M=>d(M[0]),max:1,min:0,step:.1,className:"w-full"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium dropsource-text-primary mb-3",children:"Common Tempos"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{name:"Ballad",bpm:80},{name:"Pop",bpm:120},{name:"Rock",bpm:140},{name:"Dance",bpm:128},{name:"Hip-Hop",bpm:95},{name:"House",bpm:130}].map(M=>o.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>k(M.bpm),className:"border-gray-600 dropsource-text-secondary hover:text-cyan-400 hover:border-cyan-400",children:[M.name," (",M.bpm,")"]},M.name))})]})]})]})}function V9(){const[r,e]=b.useState([{id:"1",type:"ai",content:"Hello! I'm your AI songwriting assistant. I can help you with lyrics, chord progressions, song structure, rhymes, and creative inspiration. What would you like to work on today?",timestamp:new Date}]),[t,s]=b.useState(""),[n,i]=b.useState(!1),l=b.useRef(null),d=["Here are some rhymes for that word: {word}. Try incorporating them into your verse!","For a song in that mood, I'd suggest using minor chords like Am, Dm, and Em. They create a melancholic feeling.","That's a great lyrical concept! Consider exploring the emotions from different angles - maybe add a bridge that shows hope?","Try this chord progression: C - Am - F - G. It's versatile and works well for both verses and choruses.","Your lyrics have a nice flow! You might want to vary the syllable count in some lines to create more rhythmic interest.","That theme reminds me of classic songs like 'Hotel California' - you could use similar storytelling techniques."];b.useEffect(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[r]);const u=async()=>{if(!t.trim())return;const m={id:Date.now().toString(),type:"user",content:t,timestamp:new Date};e(g=>[...g,m]),s(""),i(!0),setTimeout(()=>{const g={id:(Date.now()+1).toString(),type:"ai",content:d[Math.floor(Math.random()*d.length)],timestamp:new Date};e(y=>[...y,g]),i(!1)},1e3+Math.random()*1500)},h=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),u())},p=({message:m})=>o.jsxs("div",{className:`flex gap-3 ${m.type==="user"?"justify-end":"justify-start"}`,children:[m.type==="ai"&&o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full dropsource-gradient flex items-center justify-center dropsource-glow-blue",children:o.jsx(mg,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{className:`max-w-[80%] ${m.type==="user"?"order-first":""}`,children:[o.jsx("div",{className:`
            p-3 rounded-2xl
            ${m.type==="ai"?"bg-gray-900/70 dropsource-text-primary border border-cyan-500/30 dropsource-glow-cyan":"bg-gray-800 dropsource-text-primary border border-gray-600"}
          `,children:m.content}),o.jsx("div",{className:"dropsource-text-secondary text-xs mt-1 px-3",children:m.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),m.type==="user"&&o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center",children:o.jsx(G3,{className:"w-4 h-4 dropsource-text-secondary"})})]});return o.jsxs("div",{className:"h-full overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4 p-3 bg-gray-900/50 rounded-lg border border-gray-700 flex-shrink-0",children:[o.jsx(Br,{className:"w-5 h-5 text-cyan-400 dropsource-glow-cyan"}),o.jsx("h4",{className:"dropsource-text-primary font-medium",children:"AI Songwriting Assistant"}),o.jsx("div",{className:"ml-auto",children:o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})})]}),o.jsx("div",{className:"flex-1 overflow-hidden mb-4",children:o.jsx(un,{className:"h-full p-4 bg-gray-900/30 rounded-lg border border-gray-700",ref:l,children:o.jsxs("div",{className:"space-y-4",children:[r.map(m=>o.jsx(p,{message:m},m.id)),n&&o.jsxs("div",{className:"flex gap-3 justify-start",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full dropsource-gradient flex items-center justify-center dropsource-glow-blue",children:o.jsx(mg,{className:"w-4 h-4 text-white"})}),o.jsx("div",{className:"bg-gray-900/70 p-3 rounded-2xl border border-cyan-500/30",children:o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-bounce"}),o.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})})}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsx(Gr,{value:t,onChange:m=>s(m.target.value),onKeyPress:h,placeholder:"Ask me about lyrics, chords, song structure...",className:"flex-1 bg-gray-900/50 border-gray-700 dropsource-text-primary focus:dropsource-glow-cyan focus:border-cyan-500",disabled:n}),o.jsx(Se,{onClick:u,disabled:!t.trim()||n,className:"dropsource-gradient hover:dropsource-glow-blue disabled:opacity-50",children:o.jsx(Mc,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"mt-4 flex-shrink-0",children:[o.jsx("div",{className:"dropsource-text-secondary text-sm mb-2",children:"Quick suggestions:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["Help me write a chorus","Suggest chord progressions",'Find rhymes for "love"',"Song structure ideas"].map(m=>o.jsx(Se,{variant:"outline",size:"sm",onClick:()=>s(m),className:"dropsource-border-glow hover:dropsource-glow-cyan text-xs",children:m},m))})]})]})}function W9(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}const H9=r=>{switch(r){case"success":return G9;case"info":return X9;case"warning":return Y9;case"error":return K9;default:return null}},U9=Array(12).fill(0),$9=({visible:r,className:e})=>Ne.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},Ne.createElement("div",{className:"sonner-spinner"},U9.map((t,s)=>Ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),G9=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Y9=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),X9=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),K9=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),q9=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Z9=()=>{const[r,e]=Ne.useState(document.hidden);return Ne.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r};let C0=1;class J9{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...n}=e,i=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:C0++,l=this.toasts.find(u=>u.id===i),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...e,id:i,title:s}),{...u,...e,id:i,dismissible:d,title:s}):u):this.addToast({title:s,...n,dismissible:d,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let i=s!==void 0,l;const d=n.then(async h=>{if(l=["resolve",h],Ne.isValidElement(h))i=!1,this.create({id:s,type:"default",message:h});else if(e7(h)&&!h.ok){i=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${h.status}`):t.error,g=typeof t.description=="function"?await t.description(`HTTP error! status: ${h.status}`):t.description,v=typeof m=="object"&&!Ne.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:g,...v})}else if(h instanceof Error){i=!1;const m=typeof t.error=="function"?await t.error(h):t.error,g=typeof t.description=="function"?await t.description(h):t.description,v=typeof m=="object"&&!Ne.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:g,...v})}else if(t.success!==void 0){i=!1;const m=typeof t.success=="function"?await t.success(h):t.success,g=typeof t.description=="function"?await t.description(h):t.description,v=typeof m=="object"&&!Ne.isValidElement(m)?m:{message:m};this.create({id:s,type:"success",description:g,...v})}}).catch(async h=>{if(l=["reject",h],t.error!==void 0){i=!1;const p=typeof t.error=="function"?await t.error(h):t.error,m=typeof t.description=="function"?await t.description(h):t.description,y=typeof p=="object"&&!Ne.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:m,...y})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),u=()=>new Promise((h,p)=>d.then(()=>l[0]==="reject"?p(l[1]):h(l[1])).catch(p));return typeof s!="string"&&typeof s!="number"?{unwrap:u}:Object.assign(s,{unwrap:u})},this.custom=(e,t)=>{const s=t?.id||C0++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ir=new J9,Q9=(r,e)=>{const t=e?.id||C0++;return Ir.addToast({title:r,...e,id:t}),t},e7=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",t7=Q9,r7=()=>Ir.toasts,s7=()=>Ir.getActiveToasts(),Lh=Object.assign(t7,{success:Ir.success,info:Ir.info,warning:Ir.warning,error:Ir.error,custom:Ir.custom,message:Ir.message,promise:Ir.promise,dismiss:Ir.dismiss,loading:Ir.loading},{getHistory:r7,getToasts:s7});W9("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ru(r){return r.label!==void 0}const n7=3,o7="24px",i7="16px",n2=4e3,a7=356,l7=14,c7=45,d7=200;function Js(...r){return r.filter(Boolean).join(" ")}function u7(r){const[e,t]=r.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}const h7=r=>{var e,t,s,n,i,l,d,u,h;const{invert:p,toast:m,unstyled:g,interacting:y,setHeights:v,visibleToasts:w,heights:j,index:C,toasts:N,expanded:k,removeToast:T,defaultRichColors:E,closeButton:D,style:M,cancelButtonStyle:P,actionButtonStyle:R,className:F="",descriptionClassName:I="",duration:U,position:L,gap:X,expandByDefault:de,classNames:B,icons:V,closeButtonAriaLabel:O="Close toast"}=r,[Z,Q]=Ne.useState(null),[W,ae]=Ne.useState(null),[q,ce]=Ne.useState(!1),[we,xe]=Ne.useState(!1),[se,K]=Ne.useState(!1),[fe,ie]=Ne.useState(!1),[Te,pe]=Ne.useState(!1),[ue,re]=Ne.useState(0),[J,ge]=Ne.useState(0),oe=Ne.useRef(m.duration||U||n2),ve=Ne.useRef(null),Re=Ne.useRef(null),De=C===0,Je=C+1<=w,He=m.type,he=m.dismissible!==!1,Ge=m.className||"",st=m.descriptionClassName||"",lt=Ne.useMemo(()=>j.findIndex(qe=>qe.toastId===m.id)||0,[j,m.id]),yt=Ne.useMemo(()=>{var qe;return(qe=m.closeButton)!=null?qe:D},[m.closeButton,D]),kr=Ne.useMemo(()=>m.duration||U||n2,[m.duration,U]),$s=Ne.useRef(0),Pt=Ne.useRef(0),hr=Ne.useRef(0),me=Ne.useRef(null),[_e,Ce]=L.split("-"),Ee=Ne.useMemo(()=>j.reduce((qe,Rt,Kt)=>Kt>=lt?qe:qe+Rt.height,0),[j,lt]),We=Z9(),Uo=m.invert||p,$o=He==="loading";Pt.current=Ne.useMemo(()=>lt*X+Ee,[lt,Ee]),Ne.useEffect(()=>{oe.current=kr},[kr]),Ne.useEffect(()=>{ce(!0)},[]),Ne.useEffect(()=>{const qe=Re.current;if(qe){const Rt=qe.getBoundingClientRect().height;return ge(Rt),v(Kt=>[{toastId:m.id,height:Rt,position:m.position},...Kt]),()=>v(Kt=>Kt.filter(fr=>fr.toastId!==m.id))}},[v,m.id]),Ne.useLayoutEffect(()=>{if(!q)return;const qe=Re.current,Rt=qe.style.height;qe.style.height="auto";const Kt=qe.getBoundingClientRect().height;qe.style.height=Rt,ge(Kt),v(fr=>fr.find(Ut=>Ut.toastId===m.id)?fr.map(Ut=>Ut.toastId===m.id?{...Ut,height:Kt}:Ut):[{toastId:m.id,height:Kt,position:m.position},...fr])},[q,m.title,m.description,v,m.id,m.jsx,m.action,m.cancel]);const ns=Ne.useCallback(()=>{xe(!0),re(Pt.current),v(qe=>qe.filter(Rt=>Rt.toastId!==m.id)),setTimeout(()=>{T(m)},d7)},[m,T,v,Pt]);Ne.useEffect(()=>{if(m.promise&&He==="loading"||m.duration===1/0||m.type==="loading")return;let qe;return k||y||We?(()=>{if(hr.current<$s.current){const fr=new Date().getTime()-$s.current;oe.current=oe.current-fr}hr.current=new Date().getTime()})():(()=>{oe.current!==1/0&&($s.current=new Date().getTime(),qe=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),ns()},oe.current))})(),()=>clearTimeout(qe)},[k,y,m,He,We,ns]),Ne.useEffect(()=>{m.delete&&(ns(),m.onDismiss==null||m.onDismiss.call(m,m))},[ns,m.delete]);function Ka(){var qe;if(V?.loading){var Rt;return Ne.createElement("div",{className:Js(B?.loader,m==null||(Rt=m.classNames)==null?void 0:Rt.loader,"sonner-loader"),"data-visible":He==="loading"},V.loading)}return Ne.createElement($9,{className:Js(B?.loader,m==null||(qe=m.classNames)==null?void 0:qe.loader),visible:He==="loading"})}const Kn=m.icon||V?.[He]||H9(He);var Sn,qa;return Ne.createElement("li",{tabIndex:0,ref:Re,className:Js(F,Ge,B?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,B?.default,B?.[He],m==null||(t=m.classNames)==null?void 0:t[He]),"data-sonner-toast":"","data-rich-colors":(Sn=m.richColors)!=null?Sn:E,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":q,"data-promise":!!m.promise,"data-swiped":Te,"data-removed":we,"data-visible":Je,"data-y-position":_e,"data-x-position":Ce,"data-index":C,"data-front":De,"data-swiping":se,"data-dismissible":he,"data-type":He,"data-invert":Uo,"data-swipe-out":fe,"data-swipe-direction":W,"data-expanded":!!(k||de&&q),"data-testid":m.testId,style:{"--index":C,"--toasts-before":C,"--z-index":N.length-C,"--offset":`${we?ue:Pt.current}px`,"--initial-height":de?"auto":`${J}px`,...M,...m.style},onDragEnd:()=>{K(!1),Q(null),me.current=null},onPointerDown:qe=>{qe.button!==2&&($o||!he||(ve.current=new Date,re(Pt.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(K(!0),me.current={x:qe.clientX,y:qe.clientY})))},onPointerUp:()=>{var qe,Rt,Kt;if(fe||!he)return;me.current=null;const fr=Number(((qe=Re.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qn=Number(((Rt=Re.current)==null?void 0:Rt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ut=new Date().getTime()-((Kt=ve.current)==null?void 0:Kt.getTime()),rr=Z==="x"?fr:qn,Zn=Math.abs(rr)/Ut;if(Math.abs(rr)>=c7||Zn>.11){re(Pt.current),m.onDismiss==null||m.onDismiss.call(m,m),ae(Z==="x"?fr>0?"right":"left":qn>0?"down":"up"),ns(),ie(!0);return}else{var ir,Xr;(ir=Re.current)==null||ir.style.setProperty("--swipe-amount-x","0px"),(Xr=Re.current)==null||Xr.style.setProperty("--swipe-amount-y","0px")}pe(!1),K(!1),Q(null)},onPointerMove:qe=>{var Rt,Kt,fr;if(!me.current||!he||((Rt=window.getSelection())==null?void 0:Rt.toString().length)>0)return;const Ut=qe.clientY-me.current.y,rr=qe.clientX-me.current.x;var Zn;const ir=(Zn=r.swipeDirections)!=null?Zn:u7(L);!Z&&(Math.abs(rr)>1||Math.abs(Ut)>1)&&Q(Math.abs(rr)>Math.abs(Ut)?"x":"y");let Xr={x:0,y:0};const Jn=os=>1/(1.5+Math.abs(os)/20);if(Z==="y"){if(ir.includes("top")||ir.includes("bottom"))if(ir.includes("top")&&Ut<0||ir.includes("bottom")&&Ut>0)Xr.y=Ut;else{const os=Ut*Jn(Ut);Xr.y=Math.abs(os)<Math.abs(Ut)?os:Ut}}else if(Z==="x"&&(ir.includes("left")||ir.includes("right")))if(ir.includes("left")&&rr<0||ir.includes("right")&&rr>0)Xr.x=rr;else{const os=rr*Jn(rr);Xr.x=Math.abs(os)<Math.abs(rr)?os:rr}(Math.abs(Xr.x)>0||Math.abs(Xr.y)>0)&&pe(!0),(Kt=Re.current)==null||Kt.style.setProperty("--swipe-amount-x",`${Xr.x}px`),(fr=Re.current)==null||fr.style.setProperty("--swipe-amount-y",`${Xr.y}px`)}},yt&&!m.jsx&&He!=="loading"?Ne.createElement("button",{"aria-label":O,"data-disabled":$o,"data-close-button":!0,onClick:$o||!he?()=>{}:()=>{ns(),m.onDismiss==null||m.onDismiss.call(m,m)},className:Js(B?.closeButton,m==null||(s=m.classNames)==null?void 0:s.closeButton)},(qa=V?.close)!=null?qa:q9):null,(He||m.icon||m.promise)&&m.icon!==null&&(V?.[He]!==null||m.icon)?Ne.createElement("div",{"data-icon":"",className:Js(B?.icon,m==null||(n=m.classNames)==null?void 0:n.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ka():null,m.type!=="loading"?Kn:null):null,Ne.createElement("div",{"data-content":"",className:Js(B?.content,m==null||(i=m.classNames)==null?void 0:i.content)},Ne.createElement("div",{"data-title":"",className:Js(B?.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?Ne.createElement("div",{"data-description":"",className:Js(I,st,B?.description,m==null||(d=m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),Ne.isValidElement(m.cancel)?m.cancel:m.cancel&&Ru(m.cancel)?Ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:qe=>{Ru(m.cancel)&&he&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,qe),ns())},className:Js(B?.cancelButton,m==null||(u=m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,Ne.isValidElement(m.action)?m.action:m.action&&Ru(m.action)?Ne.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||R,onClick:qe=>{Ru(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,qe),!qe.defaultPrevented&&ns())},className:Js(B?.actionButton,m==null||(h=m.classNames)==null?void 0:h.actionButton)},m.action.label):null)};function o2(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function f7(r,e){const t={};return[r,e].forEach((s,n)=>{const i=n===1,l=i?"--mobile-offset":"--offset",d=i?i7:o7;function u(h){["top","right","bottom","left"].forEach(p=>{t[`${l}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof s=="number"||typeof s=="string"?u(s):typeof s=="object"?["top","right","bottom","left"].forEach(h=>{s[h]===void 0?t[`${l}-${h}`]=d:t[`${l}-${h}`]=typeof s[h]=="number"?`${s[h]}px`:s[h]}):u(d)}),t}const p7=Ne.forwardRef(function(e,t){const{id:s,invert:n,position:i="bottom-right",hotkey:l=["altKey","KeyT"],expand:d,closeButton:u,className:h,offset:p,mobileOffset:m,theme:g="light",richColors:y,duration:v,style:w,visibleToasts:j=n7,toastOptions:C,dir:N=o2(),gap:k=l7,icons:T,containerAriaLabel:E="Notifications"}=e,[D,M]=Ne.useState([]),P=Ne.useMemo(()=>s?D.filter(q=>q.toasterId===s):D.filter(q=>!q.toasterId),[D,s]),R=Ne.useMemo(()=>Array.from(new Set([i].concat(P.filter(q=>q.position).map(q=>q.position)))),[P,i]),[F,I]=Ne.useState([]),[U,L]=Ne.useState(!1),[X,de]=Ne.useState(!1),[B,V]=Ne.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=Ne.useRef(null),Z=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=Ne.useRef(null),W=Ne.useRef(!1),ae=Ne.useCallback(q=>{M(ce=>{var we;return(we=ce.find(xe=>xe.id===q.id))!=null&&we.delete||Ir.dismiss(q.id),ce.filter(({id:xe})=>xe!==q.id)})},[]);return Ne.useEffect(()=>Ir.subscribe(q=>{if(q.dismiss){requestAnimationFrame(()=>{M(ce=>ce.map(we=>we.id===q.id?{...we,delete:!0}:we))});return}setTimeout(()=>{z2.flushSync(()=>{M(ce=>{const we=ce.findIndex(xe=>xe.id===q.id);return we!==-1?[...ce.slice(0,we),{...ce[we],...q},...ce.slice(we+1)]:[q,...ce]})})})}),[D]),Ne.useEffect(()=>{if(g!=="system"){V(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;const q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:ce})=>{V(ce?"dark":"light")})}catch{q.addListener(({matches:we})=>{try{V(we?"dark":"light")}catch(xe){console.error(xe)}})}},[g]),Ne.useEffect(()=>{D.length<=1&&L(!1)},[D]),Ne.useEffect(()=>{const q=ce=>{var we;if(l.every(K=>ce[K]||ce.code===K)){var se;L(!0),(se=O.current)==null||se.focus()}ce.code==="Escape"&&(document.activeElement===O.current||(we=O.current)!=null&&we.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[l]),Ne.useEffect(()=>{if(O.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,W.current=!1)}},[O.current]),Ne.createElement("section",{ref:t,"aria-label":`${E} ${Z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((q,ce)=>{var we;const[xe,se]=q.split("-");return P.length?Ne.createElement("ol",{key:q,dir:N==="auto"?o2():N,tabIndex:-1,ref:O,className:h,"data-sonner-toaster":!0,"data-sonner-theme":B,"data-y-position":xe,"data-x-position":se,style:{"--front-toast-height":`${((we=F[0])==null?void 0:we.height)||0}px`,"--width":`${a7}px`,"--gap":`${k}px`,...w,...f7(p,m)},onBlur:K=>{W.current&&!K.currentTarget.contains(K.relatedTarget)&&(W.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:K=>{K.target instanceof HTMLElement&&K.target.dataset.dismissible==="false"||W.current||(W.current=!0,Q.current=K.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{X||L(!1)},onDragEnd:()=>L(!1),onPointerDown:K=>{K.target instanceof HTMLElement&&K.target.dataset.dismissible==="false"||de(!0)},onPointerUp:()=>de(!1)},P.filter(K=>!K.position&&ce===0||K.position===q).map((K,fe)=>{var ie,Te;return Ne.createElement(h7,{key:K.id,icons:T,index:fe,toast:K,defaultRichColors:y,duration:(ie=C?.duration)!=null?ie:v,className:C?.className,descriptionClassName:C?.descriptionClassName,invert:n,visibleToasts:j,closeButton:(Te=C?.closeButton)!=null?Te:u,interacting:X,position:q,style:C?.style,unstyled:C?.unstyled,classNames:C?.classNames,cancelButtonStyle:C?.cancelButtonStyle,actionButtonStyle:C?.actionButtonStyle,closeButtonAriaLabel:C?.closeButtonAriaLabel,removeToast:ae,toasts:P.filter(pe=>pe.position==K.position),heights:F.filter(pe=>pe.position==K.position),setHeights:I,expandByDefault:d,gap:k,expanded:U,swipeDirections:e.swipeDirections})})):null}))});function m7(){const[r]=b.useState("https://dropsource.app/invite/abc123xyz"),[e]=b.useState([{id:"1",name:"Alex Rivers",role:"owner",status:"online"},{id:"2",name:"Jordan Blake",role:"editor",status:"online"},{id:"3",name:"Casey Morgan",role:"viewer",status:"offline"}]),t=()=>{navigator.clipboard.writeText(r),Lh.success("Invite link copied to clipboard!")},s=i=>{switch(i){case"owner":return o.jsx(ic,{className:"w-3 h-3"});case"editor":return o.jsx(wg,{className:"w-3 h-3"});case"viewer":return o.jsx(wi,{className:"w-3 h-3"});default:return o.jsx(ss,{className:"w-3 h-3"})}},n=i=>{switch(i){case"owner":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"editor":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"viewer":return"bg-gray-500/20 text-gray-400 border-gray-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return o.jsxs("div",{className:"space-y-4 h-full overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[o.jsx("div",{className:"p-2 rounded-lg dropsource-gradient",children:o.jsx(ss,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"dropsource-text-primary font-medium",children:"Collaboration"}),o.jsx("p",{className:"text-sm dropsource-text-secondary",children:"Invite others to write together"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm dropsource-text-secondary mb-2",children:"Share Invite Link"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Gr,{value:r,readOnly:!0,className:"flex-1 bg-gray-800/50 border-gray-600 dropsource-text-primary"}),o.jsx(Se,{onClick:t,className:"dropsource-gradient hover:dropsource-glow-blue",children:o.jsx(An,{className:"w-4 h-4"})})]}),o.jsx("p",{className:"text-xs dropsource-text-secondary mt-1",children:"Anyone with this link can edit this project"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Se,{variant:"outline",size:"sm",className:"flex-1 border-gray-600 hover:border-cyan-500 dropsource-text-secondary hover:text-cyan-400",children:"Generate New Link"}),o.jsx(Se,{variant:"outline",size:"sm",className:"flex-1 border-gray-600 hover:border-cyan-500 dropsource-text-secondary hover:text-cyan-400",children:"Set Permissions"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"dropsource-text-primary font-medium",children:"Active Collaborators"}),o.jsxs(ht,{variant:"outline",className:"text-xs dropsource-text-secondary",children:[e.filter(i=>i.status==="online").length," online"]})]}),o.jsx("div",{className:"space-y-2",children:e.map(i=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-800/30 border border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-medium",children:i.name.split(" ").map(l=>l[0]).join("")})}),o.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-gray-800 ${i.status==="online"?"bg-green-500":"bg-gray-500"}`})]}),o.jsxs("div",{children:[o.jsx("p",{className:"dropsource-text-primary text-sm font-medium",children:i.name}),o.jsx("p",{className:"text-xs dropsource-text-secondary",children:i.status})]})]}),o.jsxs(ht,{variant:"outline",className:`text-xs flex items-center gap-1 ${n(i.role)}`,children:[s(i.role),i.role]})]},i.id))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"dropsource-text-primary font-medium",children:"Real-time Features"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"p-3 rounded-lg bg-gray-800/30 border border-gray-700 text-center",children:[o.jsx("div",{className:"w-6 h-6 mx-auto mb-1 text-green-400",children:""}),o.jsx("p",{className:"text-xs dropsource-text-secondary",children:"Live Cursors"})]}),o.jsxs("div",{className:"p-3 rounded-lg bg-gray-800/30 border border-gray-700 text-center",children:[o.jsx("div",{className:"w-6 h-6 mx-auto mb-1 text-green-400",children:""}),o.jsx("p",{className:"text-xs dropsource-text-secondary",children:"Auto-save"})]}),o.jsxs("div",{className:"p-3 rounded-lg bg-gray-800/30 border border-gray-700 text-center",children:[o.jsx("div",{className:"w-6 h-6 mx-auto mb-1 text-green-400",children:""}),o.jsx("p",{className:"text-xs dropsource-text-secondary",children:"Voice Chat"})]}),o.jsxs("div",{className:"p-3 rounded-lg bg-gray-800/30 border border-gray-700 text-center",children:[o.jsx("div",{className:"w-6 h-6 mx-auto mb-1 text-blue-400",children:""}),o.jsx("p",{className:"text-xs dropsource-text-secondary",children:"Coming Soon"})]})]})]}),o.jsx("div",{className:"p-3 rounded-lg bg-cyan-500/10 border border-cyan-500/30",children:o.jsx("p",{className:"text-xs text-cyan-400 text-center",children:" Demo Mode - Real collaboration features coming in full version!"})})]})]})}function g7({className:r}){const e=b.useRef(null),t=b.useRef(0),s=b.useRef(!1),n=b.useRef(0);return b.useEffect(()=>{const i=e.current;if(!i)return;const l=i.getContext("2d");if(!l)return;n.current===0&&(n.current=performance.now());const d=()=>{const y=window.devicePixelRatio||1,v=window.innerWidth,w=window.innerHeight;i.width=v*y,i.height=w*y,i.style.width=v+"px",i.style.height=w+"px",l.scale(y,y),l.imageSmoothingEnabled=!0},u=[{count:28,minSize:2,maxSize:3,minOpacity:.2,maxOpacity:.3,blur:1,twinkleRate:0,driftRangeX:3,driftRangeY:2,drift:!0},{count:24,minSize:3,maxSize:4,minOpacity:.35,maxOpacity:.45,blur:0,twinkleRate:0,driftRangeX:2,driftRangeY:0,drift:!0},{count:18,minSize:4,maxSize:5,minOpacity:.5,maxOpacity:.7,blur:0,twinkleRate:.15,driftRangeX:0,driftRangeY:0,drift:!1}],h=()=>{const y=window.innerWidth,v=window.innerHeight,w=[];return u.forEach(j=>{for(let C=0;C<j.count;C++){const N=Math.random()*y,k=Math.random()*v,T={baseX:N,baseY:k,x:N,y:k,size:j.minSize+Math.random()*(j.maxSize-j.minSize),baseOpacity:j.minOpacity+Math.random()*(j.maxOpacity-j.minOpacity),blur:j.blur,shouldTwinkle:Math.random()<Math.max(j.twinkleRate,.3),twinkleSpeed:Math.PI*2/(2e3+Math.random()*3e3),twinkleStartDelay:Math.random()*2e3,shouldDrift:j.drift,driftRangeX:j.driftRangeX,driftRangeY:j.driftRangeY,driftPhaseX:Math.random()*Math.PI*2,driftPhaseY:Math.random()*Math.PI*2,driftSpeed:Math.PI*2/(6e3+Math.random()*4e3)};w.push(T)}}),w};let p=h();const m=y=>{if(!s.current)return;const v=y-n.current;l.clearRect(0,0,window.innerWidth,window.innerHeight),p.forEach(w=>{let j=w.baseOpacity;if(w.shouldTwinkle&&v>w.twinkleStartDelay){const D=(v-w.twinkleStartDelay)*w.twinkleSpeed,M=.4+.8*(.5+.5*Math.sin(D));j=Math.min(1,w.baseOpacity*M)}let C=w.baseX,N=w.baseY;const T=v*.005%(window.innerWidth+50);if(C=(w.baseX+T)%(window.innerWidth+50),C>window.innerWidth+25&&(C=-25,w.baseX=C-T),w.shouldDrift){const E=v*w.driftSpeed+w.driftPhaseX,D=v*w.driftSpeed+w.driftPhaseY;C=C+Math.sin(E)*w.driftRangeX,N=w.baseY+Math.sin(D)*w.driftRangeY}w.x=C,w.y=N,l.filter=w.blur>0?`blur(${w.blur}px)`:"none",l.globalCompositeOperation="normal",l.beginPath(),l.arc(w.x,w.y,w.size/2,0,Math.PI*2),l.fillStyle=`rgba(255, 255, 255, ${j})`,l.fill()}),l.filter="none",t.current=requestAnimationFrame(m)},g=()=>{d(),p=h()};return d(),s.current=!0,console.log("Starting starfield animation with",p.length,"stars"),t.current=requestAnimationFrame(m),window.addEventListener("resize",g),()=>{s.current=!1,t.current&&cancelAnimationFrame(t.current),window.removeEventListener("resize",g)}},[]),o.jsx("canvas",{ref:e,className:r,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1}})}function x7({className:r}){const e=b.useRef(null);return b.useEffect(()=>{const t=e.current;if(!t)return;const s={maxConcurrent:3,duration:Math.random()*800+1200,delays:[8e3,1e4,12e3,15e3],directions:[{name:"TLBR",startX:-10,startY:-10,endX:110,endY:110,rotation:45},{name:"TRBL",startX:110,startY:-10,endX:-10,endY:110,rotation:135},{name:"LR",startX:-10,startY:50,endX:110,endY:50,rotation:0},{name:"RL",startX:110,startY:50,endX:-10,endY:50,rotation:180}]};let n=0;const i=[],l=()=>{if(n>=s.maxConcurrent)return;const u=document.createElement("div"),h=s.directions[Math.floor(Math.random()*s.directions.length)];u.style.cssText=`
        position: absolute;
        width: 3px;
        height: 3px;
        background: #FFFFFF;
        border-radius: 50%;
        box-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
        left: ${h.startX}vw;
        top: ${h.startY}vh;
        opacity: 0;
        z-index: 2;
        pointer-events: none;
      `,t.appendChild(u),i.push(u),n++,u.style.transition=`transform ${s.duration}ms linear, opacity ${s.duration}ms ease-out`,u.style.transform=`translate(${h.startX}vw, ${h.startY}vh) rotate(${h.rotation}deg) scale(0.97)`,u.style.opacity="0",requestAnimationFrame(()=>{u.style.opacity="0.8",u.style.transform=`translate(${h.endX}vw, ${h.endY}vh) rotate(${h.rotation}deg) scale(0.95)`}),setTimeout(()=>{u.remove();const p=i.indexOf(u);p>-1&&i.splice(p,1),n--;const m=s.delays[Math.floor(Math.random()*s.delays.length)];setTimeout(l,m)},s.duration)};return[3e3,8e3,15e3].forEach(u=>{setTimeout(l,u)}),()=>{i.forEach(u=>{u.parentNode&&u.remove()})}},[]),o.jsx("div",{ref:e,className:r,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none",zIndex:2}})}function Ll({isVisible:r,className:e}){const[t,s]=b.useState([]),[n,i]=b.useState(0);return b.useEffect(()=>{if(!r){s([]);return}const l=setInterval(()=>{const d=["left","right","top","bottom"],u=d[Math.floor(Math.random()*d.length)];let h,p;switch(u){case"left":h=0,p=Math.random()*100;break;case"right":h=100,p=Math.random()*100;break;case"top":h=Math.random()*100,p=0;break;case"bottom":h=Math.random()*100,p=100;break;default:h=50,p=50}const m={id:n,x:h,y:p,side:u,drift:(Math.random()-.5)*20};s(g=>[...g,m]),i(g=>g+1),setTimeout(()=>{s(g=>g.filter(y=>y.id!==m.id))},1200)},200);return()=>clearInterval(l)},[r,n]),r?o.jsx("div",{className:`absolute inset-0 pointer-events-none overflow-hidden ${e}`,children:t.map(l=>o.jsx("div",{className:"absolute w-1 h-1 rounded-full",style:{left:`${l.x}%`,top:`${l.y}%`,background:"linear-gradient(45deg, #63B3FF 0%, #A987FC 100%)",boxShadow:"0 0 4px rgba(99, 179, 255, 0.8), 0 0 8px rgba(169, 135, 252, 0.4)",animation:"spark-fall 1.2s ease-out forwards","--spark-drift":`${l.drift}px`}},l.id))}):null}function y7(){const[r,e]=b.useState([{label:"Creators",value:12847},{label:"Drops",value:45692},{label:"Stickers Created",value:89431},{label:"Users Online",value:342,isOnline:!0}]),[t,s]=b.useState(null);return b.useEffect(()=>{const n=setInterval(()=>{if(Math.random()<.2){const i=Math.floor(Math.random()*r.length);s(i),setTimeout(()=>{s(null),e(l=>l.map((d,u)=>{if(u===i){let h;if(d.isOnline){const p=Math.floor(Math.random()*5)+1,m=Math.random()<.6?1:-1;h=Math.max(1,d.value+p*m)}else{const p=Math.floor(Math.random()*3)+1;h=d.value+p}return{...d,value:h}}return d}))},300)}},2e3+Math.random()*3e3);return()=>clearInterval(n)},[r]),o.jsxs("div",{className:"flex justify-center gap-8",style:{marginTop:"20px",marginBottom:"20px"},children:[r.map((n,i)=>o.jsxs("div",{className:"text-center relative",style:{transition:"all 300ms ease-out",transform:t===i?"scale(1.05)":"scale(1)"},children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",style:{color:t===i?"#5BE9E9":"rgba(255, 255, 255, 0.9)",textShadow:t===i?"0 0 10px #5BE9E9":"none",transition:"all 300ms ease-out"},children:[o.jsx("span",{style:{fontFamily:"Inter",fontWeight:"700",fontSize:"18px",letterSpacing:"-0.01em",fontVariantNumeric:"tabular-nums"},children:n.value.toLocaleString()}),n.isOnline&&o.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:"#22C55E",boxShadow:"0 0 8px rgba(34, 197, 94, 0.6)",animation:"pulse 2s infinite"}})]}),o.jsx("div",{style:{fontFamily:"Inter",fontWeight:"400",fontSize:"12px",color:"rgba(255, 255, 255, 0.6)",letterSpacing:"0.02em",textTransform:"uppercase"},children:n.label})]},n.label)),o.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.5;
          }
        }
      `})]})}function QT({trigger:r,type:e="achievement",children:t}){const[s,n]=b.useState(!1),[i,l]=b.useState([]);b.useEffect(()=>{if(r){n(!0);const h=Array.from({length:20},(p,m)=>({id:m,x:Math.random()*100,y:Math.random()*100,delay:Math.random()*1e3}));l(h),setTimeout(()=>{n(!1),l([])},3e3)}},[r]);const u=(()=>{switch(e){case"purchase":return{emoji:"",color:"#10b981",message:"Purchase Complete!"};case"achievement":return{emoji:"",color:"#f59e0b",message:"Achievement Unlocked!"};case"streak":return{emoji:"",color:"#ef4444",message:"Streak Bonus!"};case"levelup":return{emoji:"",color:"#8b5cf6",message:"Level Up!"};case"collectible":return{emoji:"",color:"#06b6d4",message:"Rare Collectible!"};default:return{emoji:"",color:"#ffffff",message:"Great Job!"}}})();return o.jsxs(o.Fragment,{children:[t,s&&o.jsxs("div",{className:"fixed inset-0 pointer-events-none z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute text-6xl animate-bounce",style:{animation:"dopaminePop 0.6s ease-out",filter:`drop-shadow(0 0 20px ${u.color})`},children:u.emoji}),o.jsx("div",{className:"absolute mt-20 text-xl font-bold text-white",style:{color:u.color,textShadow:`0 0 10px ${u.color}`,animation:"dopamineFadeIn 0.8s ease-out"},children:u.message}),i.map(h=>o.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${h.x}%`,top:`${h.y}%`,backgroundColor:u.color,animation:`dopamineParticle 2s ease-out ${h.delay}ms`,boxShadow:`0 0 10px ${u.color}`}},h.id)),o.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:`radial-gradient(circle, ${u.color}20 0%, transparent 70%)`,animation:"dopamineFlash 0.3s ease-out"}})]}),o.jsx("style",{children:`
        @keyframes dopaminePop {
          0% { transform: scale(0) rotate(0deg); opacity: 0; }
          50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
          100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }
        
        @keyframes dopamineFadeIn {
          0% { opacity: 0; transform: translateY(20px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes dopamineParticle {
          0% { 
            opacity: 1; 
            transform: scale(1) translateY(0); 
          }
          100% { 
            opacity: 0; 
            transform: scale(0) translateY(-100px); 
          }
        }
        
        @keyframes dopamineFlash {
          0% { opacity: 0; }
          50% { opacity: 0.3; }
          100% { opacity: 0; }
        }
      `})]})}function v7({children:r,color:e="#ef4444"}){return o.jsxs("div",{style:{animation:"attentionPulse 2s infinite",boxShadow:`0 0 20px ${e}40`},children:[r,o.jsx("style",{children:`
        @keyframes attentionPulse {
          0%, 100% { 
            transform: scale(1); 
            box-shadow: 0 0 20px ${e}40;
          }
          50% { 
            transform: scale(1.05); 
            box-shadow: 0 0 30px ${e}60;
          }
        }
      `})]})}const b7=[" NEW FEATURE: Voice memo recording now available!"," Weekly beat battle starts in 2 hours!"," Hot trending: Drill beats are taking over!"," Special event: Double star weekend!"," Community playlist updated with your submissions!"," Welcome to DropSource Community Hub! Connect, create, and showcase your work"," New Creator Spotlight: Check out today's featured artists"," Star Economy is live! Earn stars by participating in the community"," Weekly challenges now available - compete for exclusive rewards"];function i2({onNavigate:r,onOpenFeature:e}){const[t,s]=b.useState({}),[n,i]=b.useState(null),[l,d]=b.useState(3),[u,h]=b.useState(!0),[p,m]=b.useState(null),[g,y]=b.useState(7),[v,w]=b.useState(!1),[j,C]=b.useState([1,3]),[N,k]=b.useState(!1),[T,E]=b.useState([]),D=()=>{w(!0),y(M=>M+1),k(!0),E(M=>[` Daily reward claimed! ${g+1} day streak!`,...M.slice(0,4)]),setTimeout(()=>{k(!1)},3e3)};return o.jsx(QT,{trigger:N,type:"achievement",children:o.jsxs("div",{className:"h-full overflow-hidden flex flex-col relative",style:{background:"linear-gradient(180deg, #0D0D0D 0%, #121212 100%)",color:"white",position:"relative"},children:[o.jsx("div",{className:"sticky top-0 z-50 overflow-hidden",style:{background:"linear-gradient(90deg, #FFB039 0%, #FF8C42 100%)",height:"36px",borderBottom:"1px solid rgba(255, 176, 57, 0.3)"},children:o.jsx("div",{className:"flex items-center h-full",style:{animation:"scroll-left 25s linear infinite",whiteSpace:"nowrap"},children:o.jsx("div",{className:"flex items-center gap-12 px-4",children:b7.map((M,P)=>o.jsx("span",{className:"text-black font-medium text-sm",children:M},P))})})}),o.jsx(g7,{}),o.jsx(x7,{}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E")`,mixBlendMode:"overlay",zIndex:3}}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-start relative",style:{maxWidth:"1280px",margin:"0 auto",padding:"0 40px 20px 40px",zIndex:4},children:[o.jsxs("div",{className:"text-center",style:{marginTop:"0px",marginBottom:"8px"},children:[o.jsx("h1",{className:"dropsource-logo-enhanced",style:{fontSize:"54px",fontWeight:"900",fontFamily:"Inter",background:"linear-gradient(90deg, #B8E6F0 0%, #98C1F5 20%, #7DA8F7 40%, #B19CD9 60%, #C8A2C8 80%, #DDA0DD 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-0.03em",textShadow:"0 0 30px rgba(184, 230, 240, 0.4), 0 0 60px rgba(177, 156, 217, 0.3)",filter:"drop-shadow(0 0 25px rgba(255, 255, 255, 0.15))",margin:0,position:"relative"},children:"Drop Source"}),o.jsx(y7,{})]}),!v&&o.jsx(v7,{color:"#f59e0b",children:o.jsx("div",{className:"mb-6",children:o.jsx(Er,{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border-yellow-500/30 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-yellow-400",children:"Daily Reward Available!"}),o.jsxs("p",{className:"text-sm text-gray-300",children:["Claim your ",g+1," day streak bonus"]})]})]}),o.jsx(Se,{onClick:D,className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-black font-bold",children:"Claim +50"})]})})})}),T.length>0&&o.jsx("div",{className:"mb-6 w-full max-w-4xl",children:o.jsxs(Er,{className:"bg-gray-900/50 border-gray-700 p-4",children:[o.jsxs("h3",{className:"font-bold mb-3 flex items-center gap-2",children:[o.jsx(hh,{className:"w-4 h-4 text-blue-400"}),"Your Recent Activity"]}),o.jsx("div",{className:"space-y-2",children:T.map((M,P)=>o.jsxs("div",{className:"text-sm text-gray-300 flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),M]},P))})]})}),o.jsxs("div",{className:"flex gap-10",style:{marginTop:"8px",marginBottom:"16px",gap:"40px",justifyContent:"center"},children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute",style:{width:"456px",height:"636px",left:"-18px",top:"-18px",borderRadius:"16px",background:"radial-gradient(ellipse at 50% 50%, #5BE9E9 0%, transparent 70%)",filter:"blur(55px)",animation:"community-halo-animate 14s ease-in-out infinite",zIndex:0,maskImage:"radial-gradient(ellipse at center, black 70%, transparent 90%)",WebkitMaskImage:"radial-gradient(ellipse at center, black 70%, transparent 90%)"}}),o.jsxs("div",{className:"relative group cursor-pointer",onMouseEnter:()=>i("community"),onMouseLeave:()=>i(null),onClick:()=>r("community-feed"),style:{width:"420px",height:"600px",borderRadius:"12px",background:"linear-gradient(180deg, #1A1033 0%, #2A1F4D 100%)",border:"1px solid transparent",borderImage:"linear-gradient(180deg, rgba(30, 144, 255, 0.4), rgba(91, 233, 233, 0.4)) 1",backdropFilter:"blur(20px)",boxShadow:"inset 0 6px 30px rgba(0, 0, 0, 0.12), 0 0 1px rgba(138, 43, 226, 0.3)",transform:n==="community"?"scale(1.03)":"scale(1)",transition:"250ms ease-out",filter:n==="community"?"brightness(1.08)":"brightness(1)",position:"relative",zIndex:2},children:[o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise2'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise2)' opacity='0.08'/%3E%3C/svg%3E")`,borderRadius:"12px",opacity:.7,mixBlendMode:"overlay"}}),o.jsx(Ll,{isVisible:n==="community"}),o.jsxs("div",{className:"relative z-10 p-12 h-full flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-6xl mb-8 dropsource-emoji-float",style:{"--emoji-delay":"0ms"},children:""}),o.jsx("h2",{style:{fontFamily:"Inter",fontWeight:"800",fontSize:"36px",color:"white",letterSpacing:"-0.02em",textShadow:"0 2px 6px rgba(0, 0, 0, 0.25), 0 0 24px rgba(255, 209, 102, 0.18), 0 0 24px rgba(91, 233, 233, 0.18), inset 0 0 4px rgba(0, 0, 0, 0.1)",marginBottom:"24px"},children:"Community HUB"}),o.jsx("p",{style:{fontFamily:"Inter",fontWeight:"400",fontSize:"16px",color:"#B0B0B0",lineHeight:"1.5",maxWidth:"280px"},children:"Welcome to DropSource! Share your creation with the community!"})]})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute",style:{width:"456px",height:"636px",left:"-18px",top:"-18px",borderRadius:"16px",background:"radial-gradient(ellipse at 50% 50%, #FFD166 0%, transparent 70%)",opacity:.2,filter:"blur(55px)",animation:"pad-halo-animate 15s ease-in-out infinite",zIndex:0,maskImage:"radial-gradient(ellipse at center, black 70%, transparent 90%)",WebkitMaskImage:"radial-gradient(ellipse at center, black 70%, transparent 90%)"}}),o.jsxs("div",{className:"relative group cursor-pointer",onMouseEnter:()=>i("pad"),onMouseLeave:()=>i(null),onClick:()=>r("pad"),style:{width:"420px",height:"600px",borderRadius:"12px",background:"linear-gradient(180deg, #081526 0%, #0F244F 100%)",border:"1px solid transparent",borderImage:"linear-gradient(180deg, rgba(138, 43, 226, 0.4), rgba(255, 215, 0, 0.3)) 1",backdropFilter:"blur(20px)",boxShadow:"inset 0 6px 30px rgba(0, 0, 0, 0.12), 0 0 1px rgba(30, 144, 255, 0.3)",transform:n==="pad"?"scale(1.03)":"scale(1)",transition:"250ms ease-out",filter:n==="pad"?"brightness(1.08)":"brightness(1)",position:"relative",zIndex:2},children:[o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise3'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise3)' opacity='0.08'/%3E%3C/svg%3E")`,borderRadius:"12px",opacity:.7,mixBlendMode:"overlay"}}),o.jsx(Ll,{isVisible:n==="pad"}),o.jsxs("div",{className:"relative z-10 p-12 h-full flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-6xl mb-8 dropsource-emoji-float",style:{"--emoji-delay":"800ms"},children:""}),o.jsx("h2",{style:{fontFamily:"Inter",fontWeight:"800",fontSize:"36px",color:"white",letterSpacing:"-0.02em",textShadow:"0 2px 6px rgba(0, 0, 0, 0.25), 0 0 24px rgba(255, 209, 102, 0.18), 0 0 24px rgba(91, 233, 233, 0.18), inset 0 0 4px rgba(0, 0, 0, 0.1)",marginBottom:"24px"},children:"Pad"}),o.jsx("p",{style:{fontFamily:"Inter",fontWeight:"400",fontSize:"16px",color:"#B0B0B0",lineHeight:"1.5",maxWidth:"280px"},children:"Your creative workspace"})]})]})]})]}),o.jsxs("div",{className:"flex gap-8",style:{marginBottom:"20px",gap:"40px",justifyContent:"center"},children:[o.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>r("dcp"),onMouseEnter:()=>i("dcp"),onMouseLeave:()=>i(null),style:{width:"300px",height:"400px",borderRadius:"10px",background:"#1a1a1a",border:"1px solid rgba(91, 233, 233, 0.15)",backdropFilter:"blur(20px)",boxShadow:"0 0 40px rgba(255, 209, 102, 0.15)",transition:"all 250ms ease-out",transform:n==="dcp"?"translateY(-4px)":"translateY(0)"},children:[o.jsx(Ll,{isVisible:n==="dcp"}),o.jsxs("div",{className:"relative z-10 p-8 h-full flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-5xl mb-6 dropsource-emoji-float",style:{"--emoji-delay":"400ms"},children:""}),o.jsx("h3",{style:{fontFamily:"Inter",fontWeight:"600",fontSize:"22px",color:"white",letterSpacing:"-0.02em",textShadow:"0 2px 6px rgba(0, 0, 0, 0.25), 0 0 18px rgba(255, 209, 102, 0.18), 0 0 18px rgba(91, 233, 233, 0.18)",marginBottom:"16px"},children:"DCP"}),o.jsx("p",{style:{fontFamily:"Inter",fontWeight:"400",fontSize:"16px",color:"#B0B0B0",lineHeight:"1.5",textAlign:"center"},children:"Direct Contact Portal - Message creators directly. No gatekeeping."})]})]}),o.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>r("news"),onMouseEnter:()=>i("news"),onMouseLeave:()=>i(null),style:{width:"300px",height:"400px",borderRadius:"10px",background:"#1a1a1a",border:"1px solid rgba(255, 209, 102, 0.15)",backdropFilter:"blur(20px)",boxShadow:"0 0 40px rgba(91, 233, 233, 0.15)",transition:"all 250ms ease-out",transform:n==="news"?"translateY(-4px)":"translateY(0)"},children:[o.jsx(Ll,{isVisible:n==="news"}),o.jsxs("div",{className:"relative z-10 p-8 h-full flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-5xl mb-6 dropsource-emoji-float",style:{"--emoji-delay":"1200ms"},children:""}),o.jsx("h3",{style:{fontFamily:"Inter",fontWeight:"600",fontSize:"22px",color:"white",letterSpacing:"-0.02em",textShadow:"0 2px 6px rgba(0, 0, 0, 0.25), 0 0 18px rgba(255, 209, 102, 0.18), 0 0 18px rgba(91, 233, 233, 0.18)",marginBottom:"16px"},children:"Drop NEWS"}),o.jsx("p",{style:{fontFamily:"Inter",fontWeight:"400",fontSize:"16px",color:"#B0B0B0",lineHeight:"1.5",textAlign:"center"},children:"Platform updates + spotlighted creators."})]})]}),o.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>window.open("https://kickstarter.com","_blank"),onMouseEnter:()=>i("kickstarter"),onMouseLeave:()=>i(null),style:{width:"300px",height:"400px",borderRadius:"10px",background:"#1a1a1a",border:"1px solid rgba(255, 107, 170, 0.3)",backdropFilter:"blur(20px)",boxShadow:"0 0 40px rgba(255, 107, 170, 0.15)",transition:"all 250ms ease-out",transform:n==="kickstarter"?"translateY(-4px)":"translateY(0)"},children:[o.jsx(Ll,{isVisible:n==="kickstarter"}),o.jsxs("div",{className:"relative z-10 p-8 h-full flex flex-col items-center justify-center text-center",children:[o.jsx("div",{className:"text-5xl mb-6 dropsource-emoji-float",style:{"--emoji-delay":"1600ms"},children:""}),o.jsx("h3",{style:{fontFamily:"Inter",fontWeight:"600",fontSize:"22px",color:"white",letterSpacing:"-0.02em",textShadow:"0 2px 6px rgba(0, 0, 0, 0.25), 0 0 18px rgba(255, 209, 102, 0.18), 0 0 18px rgba(91, 233, 233, 0.18)",marginBottom:"16px"},children:"Kickstarter"}),o.jsx("p",{style:{fontFamily:"Inter",fontWeight:"400",fontSize:"16px",color:"#B0B0B0",lineHeight:"1.5",textAlign:"center",marginBottom:"16px"},children:"Fund the community-owned creator hub"}),o.jsx("div",{style:{background:"linear-gradient(90deg, #FF6BAA 0%, #FFD166 100%)",color:"#000",borderRadius:"8px",padding:"8px 16px",fontWeight:"600",fontSize:"14px",display:"inline-block"},children:" Back Us Now"})]})]})]})]})]})})}const a2={Reactions:["","","","","","","","","","","",""],Music:["","","","",""," trumpet","","","","","",""],Faces:["","","","","","","","","","","",""],Objects:["","","","","","","","","","","",""]};function w7({onEmojiSelect:r,onClose:e,position:t={x:0,y:0}}){const[s,n]=b.useState("Reactions");return o.jsx("div",{className:"fixed",style:{left:t.x,top:t.y,transform:"translate(-50%, -100%)",zIndex:9999,overflow:"visible"},children:o.jsxs(Er,{className:"dropsource-card",style:{width:"300px",maxHeight:"400px",overflow:"visible",zIndex:9999},children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[o.jsx("h3",{className:"font-semibold dropsource-text-primary",children:"Add Reaction"}),o.jsx(Se,{size:"sm",variant:"ghost",onClick:e,className:"dropsource-toolbar-button p-1",children:o.jsx(Cr,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"flex border-b border-gray-700",children:Object.keys(a2).map(i=>o.jsx("button",{onClick:()=>n(i),className:`px-3 py-2 text-xs transition-all ${s===i?"dropsource-text-primary border-b-2 border-teal-400":"dropsource-text-secondary hover:dropsource-text-primary"}`,children:i},i))}),o.jsx("div",{className:"p-4",children:o.jsx("div",{className:"grid grid-cols-6 gap-2",children:a2[s].map((i,l)=>o.jsx("button",{onClick:()=>{r(i),e()},className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-gray-700 rounded transition-colors",children:i},l))})})]})})}const S7=[{id:"1",title:"Midnight Memories",username:"beatmaker_pro",price:50,priceType:"stars",reactions:[{emoji:"",count:12},{emoji:"",count:8},{emoji:"",count:15}]},{id:"2",title:"Summer Vibes Loop",username:"lo_fi_queen",price:25,priceType:"dollar",reactions:[{emoji:"",count:20},{emoji:"",count:6},{emoji:"",count:4}]},{id:"3",title:"Dark Synthwave",username:"synth_master",price:75,priceType:"stars",reactions:[{emoji:"",count:18},{emoji:"",count:11},{emoji:"",count:9}]},{id:"4",title:"Acoustic Dreams",username:"guitar_soul",price:40,priceType:"dollar",reactions:[{emoji:"",count:22},{emoji:"",count:13},{emoji:"",count:7}]}],l2=[{id:"1",type:"status",username:"UserX",action:"Just posted a new status!",timestamp:"2 min ago"},{id:"2",type:"reaction",username:"UserY",action:"reacted  to",target:"UserZ's post",timestamp:"5 min ago"},{id:"3",type:"donation",username:"UserA",action:"donated $5 to",target:"UserB",timestamp:"12 min ago"},{id:"4",type:"event",username:"beatmaker_supreme",action:"joined the community",timestamp:"18 min ago"},{id:"5",type:"status",username:"lo_fi_goddess",action:"shared a new track preview",timestamp:"25 min ago"},{id:"6",type:"reaction",username:"synth_lover",action:"reacted  to",target:"VibeMaster's drop",timestamp:"32 min ago"}];function C7({onNavigate:r}){const[e]=b.useState(1234),[t,s]=b.useState([]),[n,i]=b.useState(100),[l,d]=b.useState({show:!1}),u=[{id:"chat",label:"Chat",icon:Sr},{id:"friends",label:"Friends",icon:ss},{id:"dms",label:"DMs",icon:BD},{id:"auction",label:"Auction House",icon:G0},{id:"scrapbook",label:"Scrapbook",icon:R4}],h=N=>{if(t.some(D=>D.type===N))return;const T=t.length*30,E={type:N,position:{x:100+T,y:100+T},size:{width:400,height:500},zIndex:n+t.length};s(D=>[...D,E])},p=N=>{s(k=>k.filter(T=>T.type!==N))},m=N=>{p(N)},g=(N,k)=>{s(T=>T.map(E=>E.type===N?{...E,position:k}:E))},y=(N,k)=>{s(T=>T.map(E=>E.type===N?{...E,size:k}:E))},v=N=>{s(k=>k.map(T=>T.type===N?{...T,zIndex:n+20}:T)),i(k=>k+1)},w=(N,k)=>{const T=k.currentTarget.getBoundingClientRect();d({show:!0,dropId:N,position:{x:T.left+T.width/2,y:T.top}})},j=N=>{l.dropId&&console.log(`Added ${N} to drop ${l.dropId}`),d({show:!1})},C=N=>{const k={chat:"Community Chat",friends:"Friends List",dms:"Direct Messages",auction:"Auction House",scrapbook:"My Scrapbook"};return o.jsxs("div",{className:"p-6 text-center",children:[o.jsxs("div",{className:"text-4xl mb-4",children:[N==="chat"&&"",N==="friends"&&"",N==="dms"&&"",N==="auction"&&"",N==="scrapbook"&&""]}),o.jsx("h3",{className:"text-lg font-semibold dropsource-text-primary mb-2",children:k[N]}),o.jsx("p",{className:"dropsource-text-tertiary text-sm",children:"Coming soon - this feature is under development"})]})};return o.jsxs("div",{className:"h-full overflow-hidden flex flex-col relative",style:{background:"linear-gradient(180deg, #0D0D0D 0%, #121212 100%)",color:"white"},children:[o.jsxs("div",{className:"flex items-center justify-between",style:{background:"rgba(18, 23, 35, 0.8)",borderBottom:"1px solid var(--dropsource-border)",padding:"calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3)",zIndex:"20",backdropFilter:"blur(12px)"},children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(Se,{onClick:()=>r("community"),className:"dropsource-nav-pill flex items-center gap-2",style:{background:"transparent",color:"var(--dropsource-secondary)",border:"none",padding:"calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2)"},children:[o.jsx(Nc,{className:"w-4 h-4"}),"Back"]})}),o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("h1",{style:{fontSize:"32px",fontWeight:800,textAlign:"center",background:"linear-gradient(90deg, #00AEEF 0%, #63B3FF 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:`
                0 0 8px rgba(0, 174, 239, 0.6),
                0 0 16px rgba(0, 174, 239, 0.4),
                0 0 24px rgba(99, 179, 255, 0.3)
              `,filter:"drop-shadow(0 0 12px rgba(0, 174, 239, 0.5))"},children:"Community Hub"}),o.jsxs("div",{className:"mt-2 flex items-center justify-center gap-3",style:{marginTop:"8px"},children:[o.jsx("p",{style:{fontSize:"16px",fontWeight:"400",color:"#A9B7C6",letterSpacing:"-0.01em"},children:"Welcome to DropSource! Share your creation with the community!"}),o.jsx("button",{className:"dropsource-btn-primary flex items-center gap-2",style:{fontSize:"14px",padding:"8px 16px",background:"linear-gradient(90deg, #00AEEF 0%, #63B3FF 100%)",color:"white",border:"none",borderRadius:"var(--radius-sharp)",fontWeight:"600",boxShadow:"0 0 12px rgba(0, 174, 239, 0.3)",transition:"all 150ms ease-out"},onMouseEnter:N=>{N.currentTarget.style.transform="translateY(-1px) scale(1.02)",N.currentTarget.style.boxShadow="0 0 20px rgba(0, 174, 239, 0.5)"},onMouseLeave:N=>{N.currentTarget.style.transform="translateY(0) scale(1)",N.currentTarget.style.boxShadow="0 0 12px rgba(0, 174, 239, 0.3)"},children:"Create Drop"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 dropsource-surface px-3 py-2 rounded-lg",children:[o.jsx(rt,{className:"w-4 h-4 text-yellow-400 fill-current"}),o.jsx("span",{className:"dropsource-text-primary font-semibold",children:e.toLocaleString()})]}),o.jsxs(Se,{onClick:()=>r("shop"),className:"dropsource-btn-secondary flex items-center gap-2",style:{padding:"calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2)"},children:[o.jsx(yg,{className:"w-4 h-4"}),"Shop"]}),o.jsxs(Se,{onClick:()=>r("book"),className:"dropsource-btn-secondary flex items-center gap-2",style:{padding:"calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2)"},children:[o.jsx(Gh,{className:"w-4 h-4"}),"Drop Source Book"]})]})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsx("div",{className:"dropsource-surface border-r border-dropsource-border overflow-y-auto dropsource-custom-scrollbar",style:{width:"30%",minWidth:"280px"},children:o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-lg font-semibold dropsource-text-primary mb-4",children:"Global Feed"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 h-full",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold dropsource-text-secondary mb-3",children:"Status Updates"}),o.jsx("div",{className:"space-y-2",children:l2.filter(N=>N.type==="status").map(N=>o.jsx("div",{className:"dropsource-feed-card p-2",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-r from-green-500 to-blue-500 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("p",{className:"text-xs dropsource-text-secondary",children:[o.jsx("span",{className:"font-semibold dropsource-text-primary",children:N.username}),o.jsx("br",{}),N.action]}),o.jsx("p",{className:"text-xs dropsource-text-tertiary mt-1",children:N.timestamp})]})]})},N.id))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold dropsource-text-secondary mb-3",children:"Activity"}),o.jsx("div",{className:"space-y-2",children:l2.filter(N=>N.type!=="status").map(N=>o.jsx("div",{className:"dropsource-feed-card p-2",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("p",{className:"text-xs dropsource-text-secondary",children:[o.jsx("span",{className:"font-semibold dropsource-text-primary",children:N.username}),o.jsx("br",{}),N.action,N.target&&o.jsxs("span",{className:"font-semibold dropsource-text-primary",children:[" ",N.target]})]}),o.jsx("p",{className:"text-xs dropsource-text-tertiary mt-1",children:N.timestamp})]})]})},N.id))})]})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto dropsource-custom-scrollbar",style:{width:"40%",minWidth:"320px"},children:o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-lg font-semibold dropsource-text-primary mb-4",children:"Latest Drops"}),o.jsx("div",{className:"space-y-4",children:S7.map(N=>o.jsx("div",{className:"dropsource-card dropsource-clickable p-4",style:{overflow:"visible"},children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"w-16 h-16 flex-shrink-0 transition-all duration-300 cursor-pointer relative overflow-hidden group",style:{borderRadius:"var(--radius-sharp)",background:"linear-gradient(135deg, #7C5CFF 0%, #2D81F7 50%, #25BFA6 100%)",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1), 0 2px 8px rgba(0,0,0,0.1)"},onMouseEnter:k=>{k.currentTarget.style.transform="scale(1.05)",k.currentTarget.style.boxShadow="inset 0 2px 4px rgba(0,0,0,0.2), 0 4px 16px rgba(124, 92, 255, 0.4)"},onMouseLeave:k=>{k.currentTarget.style.transform="scale(1)",k.currentTarget.style.boxShadow="inset 0 2px 4px rgba(0,0,0,0.1), 0 2px 8px rgba(0,0,0,0.1)"},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent rounded-lg"}),o.jsx("div",{className:"relative w-full h-full flex items-center justify-center text-white text-xl font-bold",children:""}),o.jsx("div",{className:"absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:"radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, transparent 70%)"}})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold dropsource-text-primary truncate",children:N.title}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-r from-green-400 to-blue-500"}),o.jsx("span",{className:"text-sm dropsource-text-secondary",children:N.username})]}),o.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[N.priceType==="stars"?o.jsx(rt,{className:"w-4 h-4 text-yellow-400 fill-current"}):o.jsx("span",{className:"text-green-400 font-semibold",children:"$"}),o.jsx("span",{className:"font-semibold dropsource-text-primary",children:N.price})]}),o.jsxs("div",{className:"flex gap-2 mt-3",style:{overflow:"visible"},children:[N.reactions.map((k,T)=>o.jsxs("button",{className:"dropsource-reaction-pill hover:scale-105 transition-transform",children:[o.jsx("span",{children:k.emoji}),o.jsx("span",{className:"text-xs",children:k.count})]},T)),o.jsxs("button",{onClick:k=>w(N.id,k),className:"dropsource-reaction-pill hover:scale-105 transition-transform border-dashed",children:[o.jsx(Si,{className:"w-3 h-3"}),o.jsx("span",{className:"text-xs",children:"Add"})]})]})]})]})},N.id))})]})}),o.jsx("div",{className:"dropsource-surface border-l border-dropsource-border overflow-y-auto dropsource-custom-scrollbar",style:{width:"30%",minWidth:"280px"},children:o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-lg font-semibold dropsource-text-primary mb-4",children:"Quick Access"}),o.jsx("div",{className:"space-y-2",children:u.map(N=>{const k=N.icon;return o.jsxs("button",{onClick:()=>h(N.id),className:"w-full dropsource-toolbar-button text-left flex items-center gap-3 p-3 rounded",style:{justifyContent:"flex-start"},children:[o.jsx(k,{className:"w-5 h-5"}),o.jsx("span",{children:N.label})]},N.id)})})]})})]}),t.map(N=>o.jsx(ef,{title:u.find(k=>k.id===N.type)?.label||"Panel",onClose:()=>p(N.type),onMinimize:()=>m(N.type),initialPosition:N.position,width:N.size.width,height:N.size.height,zIndex:N.zIndex,onPositionChange:k=>g(N.type,k),onSizeChange:k=>y(N.type,k),onFocus:()=>v(N.type),children:C(N.type)},N.type)),l.show&&l.position&&o.jsx(w7,{onEmojiSelect:j,onClose:()=>d({show:!1}),position:l.position})]})}const k7=6e3,Zm=450;function j7({creators:r,onCreatorClick:e}){const t=b.useMemo(()=>r?.filter(Boolean)??[],[r]),[s,n]=b.useState(0),[i,l]=b.useState(!1),d=b.useRef(null),u=b.useRef(!1);if(b.useEffect(()=>{if(!t.length)return;const g=()=>{u.current||(l(!0),window.setTimeout(()=>{n(y=>(y+1)%t.length),l(!1)},Zm))};return d.current=window.setInterval(g,k7),()=>{d.current&&window.clearInterval(d.current)}},[t.length]),!t.length)return null;const h=t[s],p=g=>{g!==s&&(l(!0),setTimeout(()=>{n(g),l(!1)},Zm))},m=()=>{e&&e(h)};return o.jsxs("div",{className:"rounded border relative overflow-hidden",style:{backgroundColor:"#0F1520",borderColor:"#1A2531",minHeight:"280px"},onMouseEnter:()=>u.current=!0,onMouseLeave:()=>u.current=!1,children:[o.jsxs("div",{className:"flex items-center justify-between p-4 pb-3",children:[o.jsx("h3",{style:{color:"#FFB039",fontSize:"14px",fontWeight:"600"},children:"Creator Spotlight"}),o.jsxs("div",{className:"flex items-center gap-2",children:[h.isSponsored&&o.jsx(ht,{variant:"ad",title:"Paid placement",children:"Ad"}),o.jsx("div",{className:"flex gap-1",children:t.map((g,y)=>o.jsx("button",{"aria-label":`Go to ${y+1}`,onClick:()=>p(y),className:"w-2 h-2 rounded-full transition-all duration-200",style:{backgroundColor:y===s?"#FFB039":"rgba(255, 176, 57, 0.3)",transform:y===s?"scale(1.2)":"scale(1)"}},y))})]})]}),o.jsxs("div",{className:"p-4 pt-0 transition-opacity",style:{transitionDuration:`${Zm}ms`,opacity:i?0:1},onClick:m,children:[o.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[o.jsxs("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-white font-semibold text-lg relative",style:{backgroundColor:h.avatarUrl?"transparent":"#FF6B6B",backgroundImage:h.avatarUrl?`url(${h.avatarUrl})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[!h.avatarUrl&&h.name.charAt(0),h.isVerified&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs",style:{backgroundColor:"#FFB039",color:"#000"},children:""})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"flex items-center gap-2 mb-1",children:o.jsx("h4",{className:"font-semibold text-lg",style:{color:"#E6ECF3"},children:h.name})}),o.jsxs("p",{className:"text-sm mb-2",style:{color:"#A9B7C6"},children:["@",h.handle]}),o.jsxs("div",{className:"flex gap-4 text-xs",style:{color:"#A9B7C6"},children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),h.trust??85,"% Trust"]}),o.jsxs("span",{children:[(h.followers??1500).toLocaleString()," followers"]})]})]})]}),h.bio&&o.jsxs("div",{className:"rounded p-3 mb-3 text-sm italic",style:{backgroundColor:"rgba(255,255,255,0.05)",color:"#E6ECF3",border:"1px solid rgba(255,255,255,0.1)"},children:['"',h.bio,'"']}),h.specialties&&h.specialties.length>0&&o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:h.specialties.map((g,y)=>o.jsx("span",{className:"px-2 py-1 rounded text-xs",title:g,style:{backgroundColor:"rgba(255, 176, 57, 0.1)",color:"#FFB039",border:"1px solid rgba(255, 176, 57, 0.2)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"140px"},children:g},y))}),h.recentWork&&o.jsxs("p",{className:"text-xs",style:{color:"#A9B7C6"},children:["Recent: ",h.recentWork]})]}),o.jsx("button",{className:"w-full py-2 px-4 rounded text-sm font-medium transition-colors flex items-center justify-center cursor-pointer",style:{backgroundColor:"#FFB039",color:"#000",border:"none",minHeight:"36px"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor="#E09A2B"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="#FFB039"},children:"View Profile"})]})]})}const c2=["PixelSmith","VerseWriter","CodeCrafter","SynthMaster","NovaMuse","ArtisanAva","EchoKnox","ProtoPunk","GlyphGuru","CollabCat","BugHunter","SnapSage","DevDruid","GameGarden","PhotoPhantom","BrushBloom","ZineZebra","LoomLark","ByteBarista","PaperPirate","RetroRanger","PolyPanda","CloudCarver","LoopLord","ShaderFox","BeatBuddy","MemeDealer","InkWizard","VectorVoid","DigitalDove","CraftyCrow","AudioArk","VisualViper","StoryStorm","FontForge","ColorCrash","LayerLion","FrameFox","MotionMuse","SoundSage","DesignDragon","ArtAtlas","CreativeCub","MakerMoon","BuilderBee","PaintPaw","SketchSky","DoodleDuck","RenderRaven","ModernMoth","TechTiger","CraftCat","MixMagic","EditElf","FilterFish","EffectEagle","StudioStag","WorkspaceWolf","CanvasChief","PalettePanda","BrushBear","PenPenguin","ToolTurtle","AppApe"],d2=["Daily pixel practice. Comms open.","Free sticker every Fridaycome grab one.","Portfolio revampedcritique welcome!","Turning ideas into interactive art since 2020.","Beats that hit different. DM for collabs.","Cursed content creator. You've been warned.","Lowkey the best sticker dealer on this site.","Making memes that cure depression.","Professional shitposter. Amateur artist.","Your mom's favorite content creator.","Accidentally famous. Send help.","Chaotic neutral energy only.","Making art that makes your therapist concerned.","Turning trauma into content since forever.","Feral but in a cute way.","Basement dweller with good WiFi.","Chronically online and proud.","Making weird stuff for weird people.","Certified disaster bisexual.","Goblin mode: permanently activated.","Unhinged but harmless.","Your local cryptid artist.","Making content that shouldn't exist.","Blessed and cursed simultaneously.","Vibes are immaculate. Content is questionable.","Professional disappointment.","Making art with my remaining brain cell.","Chaos incarnate. Tips appreciated.","Local menace to society.","Accidentally started three art movements."],u2=[["UI/UX","Mobile Apps"],["Beat Production","Sampling"],["Pixel Art","Game Dev"],["Typography","Branding"],["Animation","3D Art"],["Photography","Photo Editing"],["Illustration","Character Design"],["Web Design","Frontend"],["Music Production","Sound Design"],["Digital Art","Concept Art"]];function e_(){const[r,e]=b.useState([]),t=()=>{const n=[],i=new Set;for(;n.length<6;){const l=c2[Math.floor(Math.random()*c2.length)];if(i.has(l))continue;i.add(l);const d=d2[Math.floor(Math.random()*d2.length)],u=u2[Math.floor(Math.random()*u2.length)];let h=0;for(let m=0;m<l.length;m++)h+=l.charCodeAt(m);const p=l.toLowerCase().replace(/([A-Z])/g,(m,g,y)=>y>0?"_"+g.toLowerCase():g.toLowerCase());n.push({id:`creator-${n.length+1}`,name:l,handle:p,trust:75+h%20,followers:100+h*23%49900,bio:d,isVerified:Math.random()>.7,isSponsored:Math.random()>.5,recentWork:`Latest ${u[0].toLowerCase()} project`,specialties:u,ctaUrl:`/u/${p}`})}return n};b.useEffect(()=>{e(t())},[]);const s=n=>{console.log("Creator clicked:",n)};return r.length===0?null:o.jsx(j7,{creators:r,onCreatorClick:s})}const h2=["Daily pixel practice. Comms open.","Free sticker every Fridaycome grab one.","Portfolio revampedcritique welcome!","Turning ideas into interactive art since 2020.","Beats that hit different. DM for collabs.","Cursed content creator. You've been warned.","Lowkey the best sticker dealer on this site.","Making memes that cure depression.","Professional shitposter. Amateur artist.","Your mom's favorite content creator.","Accidentally famous. Send help.","Chaotic neutral energy only.","Making art that makes your therapist concerned.","Turning trauma into content since forever.","Feral but in a cute way.","Basement dweller with good WiFi.","Chronically online and proud.","Making weird stuff for weird people.","Certified disaster bisexual.","Goblin mode: permanently activated.","Unhinged but harmless.","Your local cryptid artist.","Making content that shouldn't exist.","Blessed and cursed simultaneously.","Vibes are immaculate. Content is questionable.","Professional disappointment.","Making art with my remaining brain cell.","Chaos incarnate. Tips appreciated.","Local menace to society.","Accidentally started three art movements."],Jm=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#F1948A","#85C1E9","#D7BDE2","#A3E4D7","#F9E79F","#FADBD8","#D5DBDB","#AED6F1"],zl=[{name:"Most Hours This Week",icon:rt,suffix:"hrs"},{name:"Top Stars",icon:rt,suffix:""},{name:"Top Donations",icon:Mo,suffix:""},{name:"Top Stickers Purchased",icon:yg,suffix:""},{name:"Top Stickers Created",icon:xs,suffix:""},{name:"Top Monthly Supporters",icon:ss,suffix:""},{name:"Top Community Actions",icon:zs,suffix:""},{name:"Top Followers Gained",icon:hh,suffix:""},{name:"Top Posts",icon:Sr,suffix:""},{name:"New Users",icon:ss,suffix:"days ago"},{name:"Most Active Streamers",icon:_c,suffix:"hrs"},{name:"Top Content Creators",icon:Ni,suffix:"drops"},{name:"Rising Stars",icon:hh,suffix:""},{name:"Community Champions",icon:Mo,suffix:"actions"},{name:"Collaboration Kings",icon:ss,suffix:"collabs"},{name:"Marketplace MVPs",icon:yg,suffix:"sales"},{name:"Feedback Heroes",icon:Sr,suffix:"reviews"},{name:"Innovation Leaders",icon:zs,suffix:"features"},{name:"Support Squad",icon:Mo,suffix:"helped"}];function N7({widgetIndex:r=0}){const[e,t]=b.useState(0),[s,n]=b.useState([]),[i,l]=b.useState(!1),[d,u]=b.useState(null),[h,p]=b.useState(null),[m,g]=b.useState(!1),[y,v]=b.useState(!0),w=b.useRef(null);b.useEffect(()=>{const F=new IntersectionObserver(([I])=>{v(I.isIntersecting)},{threshold:.1});return w.current&&F.observe(w.current),()=>F.disconnect()},[]),b.useEffect(()=>{if(m||!y||s.length<=1)return;const F=setInterval(()=>{t(I=>(I+1)%s.length)},12e3);return()=>clearInterval(F)},[m,y,s.length]);const j=()=>{const F=(Math.floor(Math.random()*zl.length)+r*10)%zl.length,I=zl[F];if(!I||!I.name)return console.error("Invalid category selected:",F,I),{category:zl[0],entries:[]};const U=[],L=new Set;for(;U.length<5;){const X=Math.random()>.5?Sg():Cg();if(L.has(X))continue;L.add(X);let de=0;for(let O=0;O<X.length;O++)de+=X.charCodeAt(O);const B=de%1e3;let V;switch(I.name){case"Most Hours This Week":case"Most Active Streamers":V=10+B%150;break;case"Top Stars":case"Top Donations":case"Rising Stars":V=1e3+B%49e3;break;case"New Users":V=1+B%30;break;default:V=5+B%495}U.push({name:X,handle:X.toLowerCase().replace(/([A-Z])/g,(O,Z,Q)=>Q>0?"_"+Z.toLowerCase():Z.toLowerCase()),value:V,avatarBg:Jm[de%Jm.length],quote:h2[de%h2.length],trustScore:75+de%20})}return U.sort((X,de)=>I.name==="New Users"?X.value-de.value:de.value-X.value),{category:I,entries:U}},C=()=>{const F=[];if(zl.length===0||Jm.length===0)return console.error("Required data arrays are empty"),[];for(let I=0;I<6;I++){const U=j();U&&U.entries.length>0&&F.push(U)}return F};b.useEffect(()=>{n(C())},[r]);const N=F=>{F===e||i||(l(!0),u(null),setTimeout(()=>{t(F),l(!1)},200))},k=F=>{F.key==="ArrowLeft"&&e>0?N(e-1):F.key==="ArrowRight"&&e<s.length-1?N(e+1):F.key==="Enter"&&F.target instanceof HTMLElement&&F.target.click()},T=(F,I)=>{const U=I.currentTarget.getBoundingClientRect();u(F),p({x:U.left-280,y:Math.max(20,U.top-50)})},E=()=>{u(null),p(null)};if(s.length===0)return null;const D=s[e];if(!D||!D.category||!D.entries)return null;const{category:M,entries:P}=D,R=M.icon;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded border",style:{backgroundColor:"#0F1520",borderColor:"#1A2531",height:"400px",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"},tabIndex:0,onKeyDown:k,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),ref:w,children:[o.jsxs("div",{className:"p-4 flex-1",style:{transform:i?"translateY(-8px)":"translateY(0)",opacity:i?.7:1,transition:"all 400ms ease-in-out",willChange:"transform, opacity"},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(R,{className:"w-4 h-4",style:{color:"#00AEEF"}}),o.jsx("h3",{style:{color:"#E6ECF3",fontSize:"14px",fontWeight:"600"},children:M.name})]}),o.jsx("div",{className:"space-y-3",children:P.map((F,I)=>o.jsxs("div",{className:"flex items-center gap-3 p-2 rounded cursor-pointer transition-all duration-200 hover:bg-opacity-50",style:{backgroundColor:I===0?"rgba(255, 176, 57, 0.1)":"transparent"},onMouseEnter:U=>T(F,U),onMouseLeave:E,children:[o.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold transition-colors duration-200 flex-shrink-0",style:{backgroundColor:I===0?"#FFB039":"#1A2531",color:I===0?"#000":"#A9B7C6"},children:I+1}),o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-semibold transition-transform duration-200 hover:scale-110 flex-shrink-0",style:{backgroundColor:F.avatarBg},children:F.name.charAt(0)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-sm truncate",style:{color:"#E6ECF3"},children:F.name}),o.jsxs("div",{className:"text-xs truncate",style:{color:"#A9B7C6"},children:["@",F.handle]})]}),o.jsxs("div",{className:"text-sm font-semibold flex-shrink-0",style:{color:I===0?"#FFB039":"#63B3FF",fontVariantNumeric:"tabular-nums",minWidth:"60px",textAlign:"right"},children:[F.value.toLocaleString(),M.suffix&&o.jsx("span",{style:{marginLeft:"2px"},children:M.suffix})]})]},`${F.name}-${I}`))})]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 border-t",style:{borderColor:"#1A2531",height:"48px",flexShrink:0},children:[o.jsx("button",{onClick:()=>N(Math.max(0,e-1)),disabled:e===0,className:"p-1 rounded transition-opacity duration-200 hover:bg-gray-800/50 disabled:opacity-30 disabled:cursor-not-allowed",style:{color:"#A9B7C6"},"aria-label":"Previous leaderboard",children:o.jsx(q4,{className:"w-4 h-4"})}),o.jsx("div",{className:"flex items-center gap-2",children:s.map((F,I)=>o.jsx("button",{onClick:()=>N(I),className:"transition-all duration-400 ease-in-out rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500",style:{width:e===I?"12px":"8px",height:e===I?"12px":"8px",backgroundColor:e===I?"#00AEEF":"#A9B7C6",opacity:e===I?1:.5,willChange:"transform, background-color"},"aria-label":`Go to leaderboard ${I+1}`},I))}),o.jsx("button",{onClick:()=>N(Math.min(s.length-1,e+1)),disabled:e===s.length-1,className:"p-1 rounded transition-opacity duration-200 hover:bg-gray-800/50 disabled:opacity-30 disabled:cursor-not-allowed",style:{color:"#A9B7C6"},"aria-label":"Next leaderboard",children:o.jsx(J4,{className:"w-4 h-4"})})]})]}),d&&h&&o.jsx("div",{className:"fixed z-50 animate-fadeInSmooth",style:{left:h.x,top:h.y,minWidth:"280px"},children:o.jsxs("div",{className:"rounded border p-4 shadow-xl backdrop-blur-sm",style:{backgroundColor:"rgba(15, 21, 32, 0.95)",borderColor:"#1A2531",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.5)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold border-2",style:{backgroundColor:d.avatarBg,borderColor:"rgba(255, 255, 255, 0.1)"},children:d.name.charAt(0)}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",style:{color:"#E6ECF3"},children:d.name}),o.jsxs("p",{className:"text-sm",style:{color:"#A9B7C6"},children:["@",d.handle]})]})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"text-xs mb-1 opacity-70",style:{color:"#A9B7C6"},children:"Quote"}),o.jsxs("div",{className:"text-sm italic p-2 rounded",style:{color:"#E6ECF3",backgroundColor:"rgba(0, 174, 239, 0.1)",borderLeft:"3px solid #00AEEF"},children:['"',d.quote,'"']})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs opacity-70",style:{color:"#A9B7C6"},children:"Trust Score"}),o.jsxs("div",{className:"font-semibold",style:{color:d.trustScore>=90?"#2EA043":"#63B3FF"},children:[d.trustScore,"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs opacity-70",style:{color:"#A9B7C6"},children:M.name}),o.jsxs("div",{className:"font-semibold",style:{color:"#FFB039",fontVariantNumeric:"tabular-nums"},children:[d.value.toLocaleString(),M.suffix&&o.jsx("span",{style:{marginLeft:"2px"},children:M.suffix})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded text-sm font-medium transition-colors duration-200",style:{backgroundColor:"#00AEEF",color:"#000"},onMouseEnter:F=>{F.currentTarget.style.backgroundColor="#0099CC"},onMouseLeave:F=>{F.currentTarget.style.backgroundColor="#00AEEF"},children:"View Profile"}),D?.category.name.includes("Stream")&&o.jsx("button",{className:"px-3 py-2 rounded text-sm font-medium transition-colors duration-200",style:{backgroundColor:"#FFB039",color:"#000"},onMouseEnter:F=>{F.currentTarget.style.backgroundColor="#E69A2E"},onMouseLeave:F=>{F.currentTarget.style.backgroundColor="#FFB039"},children:"Watch Stream"})]})]})})]})}const f2=[" @{user}: FIRST DROP OF 2025 IS LIVE! My debut EP 'Midnight Chaos' just dropped - limited edition vinyl available!"," @{user}: COLLAB CALL! Looking for producers to work on my new synthwave project. DM me if you're interested!"," @{user}: RARE CARD ALERT! Just minted 'Golden Frequency' - only 100 copies exist. Auction starts in 1 hour!"," @{user}: FREE SAMPLE PACK! Dropping 50 lo-fi beats for the community. First come, first served!"," @{user}: REMIX CONTEST! Best remix of my track 'Digital Dreams' wins 500 stars + feature on my profile!"," @{user}: BIG NEWS! My track just hit 10K plays! Celebrating with a FREE sticker pack for everyone!"," @{user}: CHALLENGE ACCEPTED! Attempting to create 30 beats in 30 days. Follow my journey!"," @{user}: LEGENDARY CARD DROP! 'Phoenix Rising' collectible now available - hand-drawn artwork included!"," @{user}: MILESTONE REACHED! 1000 followers celebration stream starting NOW. Come hang out!"," @{user}: SURPRISE COLLAB! Just finished an epic track with @{collaborator} - dropping tomorrow at midnight!"," @{user}: AUCTION ALERT! My rare 'Vintage Synth' card is up for bidding. Starting at 100 stars!"," @{user}: LIVESTREAM STARTING! Working on a new beat live - come watch the magic happen!"," @{user}: GIVEAWAY TIME! Giving away 3 premium cards to celebrate my latest single. Repost to enter!"," @{user}: STARS FOR FEEDBACK! First 10 people to review my new track get 50 stars each!"," @{user}: MUSIC THEORY TIPS! Sharing my chord progression secrets in tonight's live tutorial!"," @{user}: BEAT BATTLE! Challenging @{collaborator} to a live production battle. Winner takes all!"," @{user}: EXCLUSIVE PREVIEW! Get early access to my upcoming album by joining my supporter tier!"," @{user}: ARTWORK REVEAL! Check out the stunning cover art for my new single 'Neon Nights'!"," @{user}: FLASH SALE! All my beats 50% off for the next hour only. Don't sleep on this!"," @{user}: GENRE FUSION! Experimenting with trap-jazz. What unexpected combos should I try next?"];function T7({onCreatorClick:r}){const[e,t]=b.useState([]),s=b.useRef(null);b.useRef();const[n,i]=b.useState(!1);b.useEffect(()=>{const h=()=>{const m=[],g=tA.filter(y=>y.active&&(!y.expiresAt||new Date<y.expiresAt)).map(y=>y.message);m.push(...g);for(let y=0;y<15;y++){const v=Math.random()>.5?Sg():Cg();let j=f2[Math.floor(Math.random()*f2.length)].replace("{user}",v);if(j.includes("{collaborator}")){const k=Math.random()>.5?Sg():Cg();j=j.replace("{collaborator}",k)}const C=j.toLowerCase().replace(/[^a-z0-9]/g,"");g.some(k=>k.toLowerCase().replace(/[^a-z0-9]/g,"").includes(C)||C.includes(k.toLowerCase().replace(/[^a-z0-9]/g,"")))||m.push(j)}t(m)};h();const p=setInterval(h,12e4);return()=>clearInterval(p)},[]);const l=(h,p)=>{if(p.preventDefault(),p.stopPropagation(),r){const m=p.currentTarget.getBoundingClientRect();r(h,{x:m.left+m.width/2,y:m.bottom+10})}},d=(h,p)=>{const m=h.split(/(@\w+)/g);return o.jsx("span",{className:"inline-flex items-center whitespace-nowrap",style:{marginRight:"60px"},children:m.map((g,y)=>{if(g.startsWith("@")&&g.length>1){const v=g.substring(1);return o.jsx("button",{onClick:w=>l(v,w),className:"font-medium hover:underline transition-colors duration-200",style:{color:"#000"},children:g},`${p}-${y}`)}return o.jsx("span",{children:g},`${p}-${y}`)})},`msg-${p}`)};if(e.length===0)return null;const u=[...e,...e];return o.jsx("div",{className:"fixed top-0 left-0 right-0 z-40",style:{backgroundColor:"#63B3FF",color:"#000",padding:"10px 0",overflow:"hidden",height:window.innerWidth<768?"36px":"44px",marginTop:"80px"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:o.jsxs("div",{className:"mx-auto max-w-[1400px] px-4 md:px-6 flex items-center gap-2 md:gap-4 h-full",children:[o.jsx(GD,{className:"w-4 h-4 md:w-5 md:h-5 flex-shrink-0",style:{minWidth:window.innerWidth<768?"16px":"20px"}}),o.jsx("div",{className:"overflow-hidden flex-1",style:{height:window.innerWidth<768?"20px":"24px"},children:o.jsx("div",{ref:s,className:"flex items-center",style:{animationName:"scroll-left",animationDuration:window.innerWidth<768?"120s":"180s",animationTimingFunction:"linear",animationIterationCount:"infinite",animationPlayState:n?"paused":"running",fontSize:window.innerWidth<768?"13px":"15px",fontWeight:"500",height:window.innerWidth<768?"20px":"24px",willChange:"transform"},children:u.map((h,p)=>d(h,p))})}),window.innerWidth<768&&o.jsx("div",{className:"text-xs opacity-50 flex-shrink-0",style:{minWidth:"30px",fontSize:"10px"},children:n?"":""})]})})}function _7({user:r,handle:e,avatar:t,color:s,position:n,onClose:i}){const l={trustPercent:Math.floor(Math.random()*30)+70,followers:Math.floor(Math.random()*5e3)+100,following:Math.floor(Math.random()*1e3)+50,posts:Math.floor(Math.random()*200)+20,stars:Math.floor(Math.random()*1e4)+500,level:Math.floor(Math.random()*20)+1,badges:[" Creator"," Supporter"," Top Contributor"].slice(0,Math.floor(Math.random()*3)+1)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-50",onClick:i,style:{background:"transparent"}}),o.jsxs("div",{className:"fixed z-[60] rounded-lg border shadow-lg p-4 min-w-[280px]",style:{left:`${n.x}px`,top:`${n.y}px`,backgroundColor:"#0F1520",borderColor:"#1A2531",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.6)",transform:"translateX(-50%)",animation:"fadeInSmooth 200ms ease-out"},children:[o.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-medium",style:{backgroundColor:s},children:t}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold",style:{color:"#E6ECF3"},children:r}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(j3,{className:"w-3 h-3",style:{color:"#4CAF50"}}),o.jsxs("span",{style:{color:"#4CAF50",fontSize:"12px"},children:[l.trustPercent,"%"]})]})]}),e&&o.jsx("div",{style:{color:"#A9B7C6",fontSize:"13px"},children:e}),o.jsxs("div",{style:{color:"#FFB039",fontSize:"12px",fontWeight:"500"},children:["Level ",l.level,"  ",l.stars.toLocaleString()," "]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{style:{color:"#E6ECF3",fontSize:"16px",fontWeight:"600"},children:l.followers.toLocaleString()}),o.jsx("div",{style:{color:"#A9B7C6",fontSize:"11px"},children:"Followers"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{style:{color:"#E6ECF3",fontSize:"16px",fontWeight:"600"},children:l.following.toLocaleString()}),o.jsx("div",{style:{color:"#A9B7C6",fontSize:"11px"},children:"Following"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{style:{color:"#E6ECF3",fontSize:"16px",fontWeight:"600"},children:l.posts}),o.jsx("div",{style:{color:"#A9B7C6",fontSize:"11px"},children:"Posts"})]})]}),l.badges.length>0&&o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{style:{color:"#A9B7C6",fontSize:"11px",marginBottom:"6px"},children:"Badges"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:l.badges.map((d,u)=>o.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"rgba(255, 176, 57, 0.12)",color:"#FFB039",border:"1px solid rgba(255, 176, 57, 0.3)",fontSize:"10px"},children:d},u))})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"flex-1 px-3 py-1.5 rounded text-sm font-medium transition-colors",style:{backgroundColor:"#00AEEF",color:"#fff",border:"none"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#0099CC"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="#00AEEF"},children:"Follow"}),o.jsx("button",{className:"px-3 py-1.5 rounded text-sm font-medium transition-colors",style:{backgroundColor:"transparent",color:"#A9B7C6",border:"1px solid #1A2531"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#161B2E",d.currentTarget.style.color="#E6ECF3"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent",d.currentTarget.style.color="#A9B7C6"},children:"Message"})]})]})]})}function k0({userId:r,username:e,displayName:t,handle:s,className:n="",style:i,onClick:l,children:d}){const u=t||e,h=s||e,p=m=>{m.preventDefault(),l?l(m):console.log("Open profile for:",{userId:r,username:e,handle:h})};return e?o.jsx("a",{href:`/profile/${h}`,onClick:p,className:`cursor-pointer hover:underline ${n}`,style:i,"aria-label":`Open ${u} profile`,tabIndex:0,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),p(m))},children:d||u}):(console.warn("UserLink missing username:",{userId:r,username:e,displayName:t,handle:s}),o.jsx("span",{className:n,style:i,children:d||u}))}const Qm={mention:/@([a-zA-Z0-9_]+)(?![a-zA-Z0-9_])/g,hashtag:/#([a-zA-Z0-9_]+)(?![a-zA-Z0-9_])/g,cta:/(Watch Stream|View Auction|Leave Feedback|Join Challenge|Start Collab|Buy Now)/gi},M7=(r,e)=>{const t=new Set;return r&&t.add(r.name),e&&t.add(e.name),t},E7=(r,e,t,s,n,i)=>{const l=[],d=M7(e,t);let u=0;const h=[];let p;const m=new RegExp(Qm.mention);for(;(p=m.exec(r))!==null;){const v=p[1];h.push({start:p.index,end:p.index+p[0].length,token:{type:"mention",content:p[0],data:{username:v,handle:`@${v}`}}})}const g=new RegExp(Qm.hashtag);for(;(p=g.exec(r))!==null;)h.push({start:p.index,end:p.index+p[0].length,token:{type:"hashtag",content:p[0],data:{hashtag:p[1]}}});const y=new RegExp(Qm.cta);for(;(p=y.exec(r))!==null;)h.push({start:p.index,end:p.index+p[0].length,token:{type:"cta",content:p[0],data:{cta:p[0]}}});if(s||n){const v=s||n;if(v){const w=new RegExp(`\\b${v.name}\\b`,"gi");for(;(p=w.exec(r))!==null;)h.push({start:p.index,end:p.index+p[0].length,token:{type:"collectible",content:p[0],data:v}})}}if(i){const v=new RegExp(`\\b${i}\\b`,"gi");for(;(p=v.exec(r))!==null;)h.push({start:p.index,end:p.index+p[0].length,token:{type:"challenge",content:p[0],data:{challengeName:i}}})}if(d.forEach(v=>{const w=new RegExp(`\\b${v}\\b(?!@)`,"gi");for(;(p=w.exec(r))!==null;)if(!h.some(C=>p.index>=C.start&&p.index<C.end||p.index+p[0].length>C.start&&p.index+p[0].length<=C.end)){const C=v===e?.name?e:t;h.push({start:p.index,end:p.index+p[0].length,token:{type:"user",content:p[0],data:C}})}}),h.sort((v,w)=>v.start-w.start),h.forEach(v=>{if(u<v.start){const w=r.substring(u,v.start);w&&l.push({type:"text",content:w})}l.push(v.token),u=v.end}),u<r.length){const v=r.substring(u);v&&l.push({type:"text",content:v})}return l},p2=({text:r,actorUser:e,targetUser:t,stickerData:s,cardData:n,challengeName:i,onUserClick:l,onCollectibleClick:d,onChallengeClick:u,onHashtagClick:h,onCtaClick:p})=>{const m=E7(r,e,t,s,n,i),g=(y,v)=>{switch(v.stopPropagation(),y.type){case"user":l&&y.data&&l(y.data.name,`@${y.data.name.toLowerCase()}`,y.data.avatar,y.data.color,v);break;case"mention":if(l&&y.data){const w={name:y.data.username,avatar:y.data.username.slice(0,2).toUpperCase(),color:"#6B7280"};l(w.name,y.data.handle,w.avatar,w.color,v)}break;case"hashtag":h&&y.data&&h(y.data.hashtag,v);break;case"collectible":d&&y.data&&d(y.data,v);break;case"challenge":u&&y.data&&u(y.data.challengeName,v);break;case"cta":p&&y.data&&p(y.data.cta,v);break}};return o.jsx(o.Fragment,{children:m.map((y,v)=>{switch(y.type){case"text":return o.jsx("span",{style:{pointerEvents:"none",cursor:"default"},children:y.content},v);case"user":return o.jsx(k0,{userId:`user-${y.data.name}`,username:y.data.name,handle:`@${y.data.name.toLowerCase()}`,style:{color:y.data.color,fontWeight:"500",cursor:"pointer"},"data-entity":"user",role:"link","aria-label":`View ${y.data.name}'s profile`,onClick:w=>g(y,w)},v);case"mention":return o.jsx("span",{"data-entity":"mention",role:"link",tabIndex:0,"aria-label":`View ${y.data.username}'s profile`,style:{color:"#60A5FA",fontWeight:"500",cursor:"pointer",textDecoration:"none"},className:"hover:underline focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded",onClick:w=>g(y,w),onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),g(y,w))},children:y.content},v);case"hashtag":return o.jsx("span",{"data-entity":"hashtag",role:"link",tabIndex:0,"aria-label":`Filter by ${y.data.hashtag}`,style:{color:"#10B981",fontWeight:"500",cursor:"pointer",textDecoration:"none"},className:"hover:underline focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 rounded",onClick:w=>g(y,w),onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),g(y,w))},children:y.content},v);case"collectible":return o.jsx("span",{"data-entity":"collectible",role:"button",tabIndex:0,"aria-label":`View ${y.data.name} collectible`,title:y.data.name,style:{color:"#F59E0B",fontWeight:"600",cursor:"pointer",padding:"2px 6px",backgroundColor:"rgba(245, 158, 11, 0.1)",borderRadius:"4px",border:"1px solid rgba(245, 158, 11, 0.2)",textDecoration:"none",pointerEvents:"auto",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"},className:"hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50",onClick:w=>g(y,w),onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),g(y,w))},children:y.content},v);case"challenge":return o.jsx("span",{"data-entity":"challenge",role:"button",tabIndex:0,"aria-label":`View ${y.data.challengeName} challenge`,style:{color:"#8B5CF6",fontWeight:"600",cursor:"pointer",padding:"2px 6px",backgroundColor:"rgba(139, 92, 246, 0.1)",borderRadius:"4px",border:"1px solid rgba(139, 92, 246, 0.2)",textDecoration:"none",pointerEvents:"auto"},className:"hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50",onClick:w=>g(y,w),onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),g(y,w))},children:y.content},v);case"cta":return o.jsx("button",{"data-entity":"cta","aria-label":y.data.cta,style:{color:"#EF4444",fontWeight:"600",cursor:"pointer",padding:"4px 8px",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",border:"1px solid rgba(239, 68, 68, 0.3)",textDecoration:"none",fontSize:"inherit",fontFamily:"inherit"},className:"hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 transition-all duration-150",onClick:w=>g(y,w),children:y.content},v);default:return o.jsx("span",{style:{pointerEvents:"none"},children:y.content},v)}})})};function P7(r){const e=r.id??m2(),t=r.ts??Date.now(),s=r.payload?.hash??r.payload?.slug??m2();return`${r.type}:${e}:${t}:${s}`}function m2(){return Math.random().toString(36).slice(2)}function Ou(r){const e=r.ts??Date.now();return{...r,ts:e,uid:P7({...r,ts:e})}}function g2(r,e,t=25){const s=Array.isArray(e)?e:[e],n=new Set(r.map(d=>d.uid)),i=[];for(const d of s)n.has(d.uid)||(i.push(d),n.add(d.uid));return[...i,...r].sort((d,u)=>u.ts-d.ts).slice(0,t)}const Pa=[{id:"ceiling-fan",name:"Ceiling Fan Enthusiast",serial:"#482/1000",totalSupply:1e3,rarity:"common",type:"sticker",price:5},{id:"spaghetti-code",name:"Spaghetti Code Sticker",serial:"#317/1000",totalSupply:1e3,rarity:"common",type:"sticker",price:5},{id:"vape-skeleton",name:"Vape Cloud Skeleton",serial:"#999/1000",totalSupply:1e3,rarity:"common",type:"sticker",price:5},{id:"leftover-pizza",name:"Leftover Pizza Slice",serial:"#128/500",totalSupply:500,rarity:"common",type:"sticker",price:5},{id:"emo-goose",name:"Emo Goose",serial:"#42/750",totalSupply:750,rarity:"common",type:"sticker",price:5},{id:"bonk-horny-jail",name:"Bonk! Horny Jail",serial:"#69/250",totalSupply:250,rarity:"rare",type:"sticker",price:10},{id:"dumpster-fire-2025",name:"Dumpster Fire 2025",serial:"#101/250",totalSupply:250,rarity:"rare",type:"sticker",price:10},{id:"shrek-4k",name:"Shrek in 4K",serial:"#177/250",totalSupply:250,rarity:"rare",type:"sticker",price:10},{id:"reverse-uno",name:"Reverse Uno Card",serial:"#88/200",totalSupply:200,rarity:"rare",type:"sticker",price:10},{id:"gamer-chair-collapse",name:"Gamer Chair Collapse",serial:"#211/300",totalSupply:300,rarity:"rare",type:"sticker",price:10},{id:"mega-frog-pack",name:"Mega Frog Pack",serial:"#88/150",totalSupply:150,rarity:"epic",type:"card",price:15},{id:"hotdog-usb",name:"Hotdog USB Drive",serial:"#23/100",totalSupply:100,rarity:"epic",type:"card",price:15},{id:"cursed-flute",name:"Cursed Flute Solo",serial:"#99/100",totalSupply:100,rarity:"epic",type:"card",price:15},{id:"zoom-potato",name:"Zoom Call Potato Filter",serial:"#15/100",totalSupply:100,rarity:"epic",type:"card",price:15},{id:"final-boss-toaster",name:"Final Boss Toaster",serial:"#45/75",totalSupply:75,rarity:"epic",type:"card",price:15},{id:"chair-sniffer",name:"Chair Sniffer 1/1",serial:"#1/1",totalSupply:1,rarity:"legendary",type:"card"},{id:"emotional-damage",name:"Emotional Damage.wav",serial:"#3/10",totalSupply:10,rarity:"legendary",type:"card"},{id:"skibidi-crown",name:"Skibidi Toilet Crown",serial:"#5/25",totalSupply:25,rarity:"legendary",type:"card"},{id:"404-fun",name:"404 Fun Not Found",serial:"#7/20",totalSupply:20,rarity:"legendary",type:"card"},{id:"ancient-vine",name:"Ancient Vine Compilation",serial:"#9/10",totalSupply:10,rarity:"legendary",type:"card"}],It=r=>{switch(r){case"common":return"#6b7280";case"rare":return"#3b82f6";case"epic":return"#a855f7";case"legendary":return"#f59e0b";default:return"#6b7280"}},j0=r=>{switch(r){case"common":return"rgba(107, 114, 128, 0.1)";case"rare":return"rgba(59, 130, 246, 0.1)";case"epic":return"rgba(168, 85, 247, 0.1)";case"legendary":return"rgba(245, 158, 11, 0.1)";default:return"rgba(107, 114, 128, 0.1)"}},D7=()=>Pa.filter(r=>r.rarity==="rare"||r.rarity==="epic"||r.rarity==="legendary"),A7=()=>Pa,R7=()=>Pa.filter(r=>r.type==="sticker"),O7=()=>Pa.filter(r=>r.type==="card"),N0=()=>{const r=R7();return r[Math.floor(Math.random()*r.length)]},F7=()=>{const r=O7();return r[Math.floor(Math.random()*r.length)]},L7={like:15,comment:12,follow:8,stream:6,supporter:5,tip:4,collab:4,challenge:3,mint:3,collect:3,chalkboard:2,auction:2,stream_milestone:1,join:1},Bt={recentEvents:[],actionTypeCooldowns:new Map,userActionCooldowns:new Map,templateUsageCount:new Map,lastActionType:null};function t_(r,e){if(r.length!==e.length)throw new Error("Items and weights arrays must have the same length");const t=e.reduce((n,i)=>n+i,0);let s=Math.random()*t;for(let n=0;n<r.length;n++)if(s-=e[n],s<=0)return r[n];return r[r.length-1]}function r_(){const r=Date.now(),e=1200*1e3;Bt.recentEvents=Bt.recentEvents.filter(n=>r-n.timestamp<e).slice(-20);const t=300*1e3;Bt.actionTypeCooldowns.forEach((n,i)=>{r-n>t&&Bt.actionTypeCooldowns.delete(i)});const s=600*1e3;Bt.userActionCooldowns.forEach((n,i)=>{n.forEach((l,d)=>{r-l>s&&n.delete(d)}),n.size===0&&Bt.userActionCooldowns.delete(i)})}function z7(r){const e=Date.now();if(Bt.lastActionType===r)return!1;const t=Bt.actionTypeCooldowns.get(r);return!(t&&e-t<3e4||r==="join"&&t&&e-t<3e5)}function I7(r,e){const t=Date.now(),s=Bt.userActionCooldowns.get(r);if(!s)return!0;const n=s.get(e);if(!n)return!0;const i=120*1e3;return t-n>i}function s_(r){return!!Bt.recentEvents.find(t=>t.template===r&&Date.now()-t.timestamp<6e5)}function B7(){r_();const r=[],e=[];return Object.entries(L7).forEach(([t,s])=>{if(z7(t)){r.push(t);const n=Bt.templateUsageCount.get(t)||0,i=Math.max(1,s-Math.floor(n/3));e.push(i)}}),r.length===0?{types:["like","comment"],weights:[10,8]}:{types:r,weights:e}}function ft(r){return r[Math.floor(Math.random()*r.length)]}function V7(){return t_([1,2,3,5,10,15,20,25,50,100,250,500],[20,15,12,10,8,6,5,4,3,2,1,1]).toString()}function W7(r,e,t){const s=Date.now();Bt.recentEvents.push({template:e,timestamp:s,actionType:r}),Bt.actionTypeCooldowns.set(r,s),Bt.userActionCooldowns.has(t)||Bt.userActionCooldowns.set(t,new Map),Bt.userActionCooldowns.get(t).set(r,s);const n=Bt.templateUsageCount.get(e)||0;Bt.templateUsageCount.set(e,n+1),Bt.lastActionType=r}function x2(r){r_();const{types:e,weights:t}=B7(),s=t_(e,t),n=rA[s];if(!n||n.length===0)return H7(r);const i=n.filter(C=>!s_(C)),l=i.length>0?ft(i):ft(n);let u=ft(ts),h=0;for(;!I7(u,s)&&h<10;)u=ft(ts),h++;let p=null,m=null,g=null,y=null;if(["supporter","tip","like","comment","follow","collab","collect","chalkboard"].includes(s)){const C=ft(ts.filter(N=>N!==u));p={name:C,avatar:C.slice(0,2).toUpperCase(),color:`hsl(${Math.floor(Math.random()*360)}, 70%, 60%)`}}if(s==="mint"||s==="collect"||s==="auction"){const C=N0();m={name:C.name,serial:C.serial,thumbnail:`https://picsum.photos/80/80?random=${C.id}`}}s==="challenge"&&(g=ft(_w),y=ft(Tw));let v=l.replace("{user}",u).replace("{target}",p?.name||ft(ts)).replace("{amount}",V7()).replace("{challenge}",g||ft(_w)).replace("{badge}",y||ft(Tw)).replace("{collectible}",m?.name||"Mystery Item").replace("{type}",ft(Q3)).replace("{rarity}",ft(eA)).replace("{genre}",ft(cc)).replace("{adjective}",ft([...fh,...ph]));W7(s,l,u);const w=`hsl(${Math.floor(Math.random()*360)}, 70%, 60%)`,j=u.slice(0,2).toUpperCase();return{id:r,user:u,action:v,time:ft(["just now","1m","2m","3m"]),avatar:j,color:w,actionType:s,targetUser:p,stickerData:m,challengeName:g,badgeName:y}}function H7(r){const e=ft(ts),t=`hsl(${Math.floor(Math.random()*360)}, 70%, 60%)`,s=e.slice(0,2).toUpperCase(),n=[`${e} just joined the community `,`${e} is exploring the marketplace`,`${e} updated their profile`,`${e} shared a new creation`,`${e} is looking for collaborators`,`${e} discovered a rare collectible`,`${e} completed their first challenge`,`${e} earned a new badge`,`${e} is browsing the sticker gallery`,`${e} joined a live stream`];return{id:r,user:e,action:ft(n),time:"just now",avatar:s,color:t,actionType:"join"}}function y2(r){const e=ft(ts),t=`@${e.toLowerCase()}`,s=`hsl(${Math.floor(Math.random()*360)}, 70%, 60%)`,n=e.slice(0,2).toUpperCase(),i=Mw.filter(k=>!s_(k)),l=i.length>0?ft(i):ft(Mw),d=N0();let u=l.replace("{collectible}",d.name).replace("{genre}",ft(cc)).replace("{other_genre}",ft(cc)).replace("{adjective}",ft([...fh,...ph])).replace("{software}",ft(kg)).replace("{decade}",ft(jg)).replace("{username}",ft(ts.filter(k=>k!==e)));const h=Math.floor(Math.random()*3)+2,m=[...sA].sort(()=>Math.random()-.5).slice(0,h).map(k=>({emoji:k.emoji,count:Math.floor(Math.random()*50)+1})),g=Math.random()<.3?N0():null,y=Math.random()<.2?F7():null,v=g?{name:g.name,serial:g.serial,thumbnail:`https://picsum.photos/80/80?random=${g.id}`}:null,w=y?{name:y.name,serial:y.serial,thumbnail:`https://picsum.photos/80/80?random=${y.id}`}:null,j=["Questions","Sticker","Collab Req","Trade","Drop","Sale","Help","Showcase"],C=Math.random()<.7?ft(j):void 0,N=Bt.templateUsageCount.get(l)||0;return Bt.templateUsageCount.set(l,N+1),{id:r,user:e,handle:t,content:u,avatar:n,color:s,category:C,reactions:m,stickerData:v,cardData:w}}const U7=r=>{const e={Questions:{backgroundColor:"rgba(69, 181, 209, 0.18)",color:"#45B7D1",border:"1px solid rgba(69, 181, 209, 0.4)",emoji:""},Sticker:{backgroundColor:"rgba(255, 107, 107, 0.18)",color:"#FF6B6B",border:"1px solid rgba(255, 107, 107, 0.4)",emoji:""},"Collab Req":{backgroundColor:"rgba(130, 224, 170, 0.18)",color:"#82E0AA",border:"1px solid rgba(130, 224, 170, 0.4)",emoji:""},Trade:{backgroundColor:"rgba(139, 195, 74, 0.18)",color:"#8BC34A",border:"1px solid rgba(139, 195, 74, 0.4)",emoji:""},Drop:{backgroundColor:"rgba(255, 176, 57, 0.18)",color:"#FFB039",border:"1px solid rgba(255, 176, 57, 0.4)",emoji:""},Sale:{backgroundColor:"rgba(76, 175, 80, 0.18)",color:"#4CAF50",border:"1px solid rgba(76, 175, 80, 0.4)",emoji:""},Help:{backgroundColor:"rgba(244, 67, 54, 0.18)",color:"#F44336",border:"1px solid rgba(244, 67, 54, 0.4)",emoji:""},Showcase:{backgroundColor:"rgba(255, 193, 7, 0.18)",color:"#FFC107",border:"1px solid rgba(255, 193, 7, 0.4)",emoji:""}};return e[r]||e.Questions},$7=r=>({follow:{color:"#4ECDC4",backgroundColor:"rgba(78, 205, 196, 0.12)",border:"1px solid rgba(78, 205, 196, 0.3)"},like:{color:"#FF6B6B",backgroundColor:"rgba(255, 107, 107, 0.12)",border:"1px solid rgba(255, 107, 107, 0.3)"},comment:{color:"#87CEEB",backgroundColor:"rgba(135, 206, 235, 0.12)",border:"1px solid rgba(135, 206, 235, 0.3)"},supporter:{color:"#FFD700",backgroundColor:"rgba(255, 215, 0, 0.12)",border:"1px solid rgba(255, 215, 0, 0.3)"},tip:{color:"#FFA500",backgroundColor:"rgba(255, 165, 0, 0.12)",border:"1px solid rgba(255, 165, 0, 0.3)"},challenge:{color:"#9370DB",backgroundColor:"rgba(147, 112, 219, 0.12)",border:"1px solid rgba(147, 112, 219, 0.3)"},chalkboard:{color:"#20B2AA",backgroundColor:"rgba(32, 178, 170, 0.12)",border:"1px solid rgba(32, 178, 170, 0.3)"},mint:{color:"#9C27B0",backgroundColor:"rgba(156, 39, 176, 0.12)",border:"1px solid rgba(156, 39, 176, 0.3)"},collect:{color:"#FF1493",backgroundColor:"rgba(255, 20, 147, 0.12)",border:"1px solid rgba(255, 20, 147, 0.3)"},auction:{color:"#FFB347",backgroundColor:"rgba(255, 179, 71, 0.12)",border:"1px solid rgba(255, 179, 71, 0.3)"},stream:{color:"#FF4757",backgroundColor:"rgba(255, 71, 87, 0.12)",border:"1px solid rgba(255, 71, 87, 0.3)"},stream_milestone:{color:"#FF6B6B",backgroundColor:"rgba(255, 107, 107, 0.15)",border:"1px solid rgba(255, 107, 107, 0.4)"},collab:{color:"#32CD32",backgroundColor:"rgba(50, 205, 50, 0.12)",border:"1px solid rgba(50, 205, 50, 0.3)"},join:{color:"#82E0AA",backgroundColor:"rgba(130, 224, 170, 0.12)",border:"1px solid rgba(130, 224, 170, 0.3)"}})[r]||{color:"#E6ECF3",backgroundColor:"rgba(230, 236, 243, 0.12)",border:"1px solid rgba(230, 236, 243, 0.3)"};function G7({onNavigate:r}){const{open:e,focus:t,state:s}=K0(),[n,i]=b.useState(!1),[l,d]=b.useState(null),[u,h]=b.useState([]),[p,m]=b.useState([]),[g,y]=b.useState(!1),[v,w]=b.useState(!1),[j,C]=b.useState(!0),[N,k]=b.useState(0),[T,E]=b.useState(0);b.useEffect(()=>{const R=()=>{i(window.innerWidth<768)};return R(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),b.useEffect(()=>{const R=()=>{C(!document.hidden)};return document.addEventListener("visibilitychange",R),()=>document.removeEventListener("visibilitychange",R)},[]),b.useEffect(()=>{const R=[],F=[];for(let I=0;I<5;I++){const U=x2(`initial-action-${I}`),L=Ou({type:"site_action",id:U.id,ts:Date.now()-I*6e4,payload:U});R.push({...L,...U})}for(let I=0;I<3;I++){const U=y2(`initial-post-${I}`),L=Ou({type:"community_post",id:U.id,ts:Date.now()-I*3e4,payload:U});F.push({...L,...U})}h(R),m(F)},[]),b.useEffect(()=>{if(g||!j)return;const R=setInterval(()=>{const F=x2(`action-${Date.now()}-${N}`),U={...Ou({type:"site_action",id:F.id,ts:Date.now(),payload:F}),...F};h(L=>g2(L,U,25)),k(L=>L+1)},Math.random()*2e3+2e3);return()=>clearInterval(R)},[g,j,N]),b.useEffect(()=>{if(v||!j)return;const R=setInterval(()=>{const F=y2(`post-${Date.now()}-${T}`),U={...Ou({type:"community_post",id:F.id,ts:Date.now(),payload:F}),...F};m(L=>g2(L,U,25)),E(L=>L+1)},Math.random()*2e3+2e3);return()=>clearInterval(R)},[v,j,T]);const D=b.useCallback((R,F)=>{},[]),M=(R,F,I,U,L)=>{const X=L.currentTarget.getBoundingClientRect();d({user:R,handle:F,avatar:I,color:U,position:{x:X.left+X.width/2,y:X.bottom+10}})},P=R=>{d(null),r("profile")};return o.jsx(ws,{children:o.jsxs("div",{className:"min-h-screen",style:{background:"#0B0F14",height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[o.jsx(T7,{onCreatorClick:D}),o.jsx("div",{className:"flex justify-center py-3",style:{borderBottom:"1px solid #1A2531",backgroundColor:"rgba(15, 21, 32, 0.8)",backdropFilter:"blur(12px)",marginTop:"-6px"},children:o.jsx("h1",{className:"text-2xl font-semibold community-hub-pulse",style:{color:"#4DA6FF",textShadow:"0 0 6px rgba(77,166,255,0.8), 0 0 14px rgba(77,166,255,0.6)"},children:"Community Hub"})}),o.jsxs("div",{className:"flex justify-center flex-1",style:{paddingTop:"24px",maxWidth:"1400px",margin:"0 auto",width:"100%",overflow:"hidden"},children:[o.jsxs("div",{className:"hidden lg:flex w-full justify-center gap-6",children:[o.jsx("div",{style:{width:"350px",flexShrink:0},children:o.jsxs("div",{className:"rounded border p-4",style:{backgroundColor:"#0F1520",borderColor:"#1A2531",height:"calc(100vh - 160px)"},onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(zs,{className:"w-5 h-5",style:{color:"#00AEEF"}}),o.jsx("h2",{className:"font-semibold",style:{color:"#E6ECF3"},children:"All Site Actions"})]}),o.jsx("div",{className:"space-y-3 overflow-y-auto dropsource-custom-scrollbar",style:{height:"calc(100% - 60px)"},children:u.map(R=>{const F=$7(R.actionType||"");return o.jsx("div",{className:"p-3 rounded border feed-item-enter",style:{backgroundColor:F.backgroundColor||"#161B2E",borderColor:F.border?.split(" ")[3]||"#1A2531",opacity:1,transform:"translateY(0)",transition:"all 300ms ease-in-out"},children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs cursor-pointer hover:scale-105 transition-transform",style:{backgroundColor:R.color},title:`View ${R.user}'s profile`,onClick:I=>M(R.user,void 0,R.avatar,R.color,I),children:R.avatar}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{style:{color:"#E6ECF3",fontSize:"13px"},children:o.jsx(p2,{text:R.action,actorUser:{name:R.user,avatar:R.avatar,color:R.color},targetUser:R.targetUser,stickerData:R.stickerData,onUserClick:M,onCollectibleClick:(I,U)=>{U.stopPropagation(),console.log("Open collectible sheet:",I)},onChallengeClick:(I,U)=>{U.stopPropagation(),console.log("Open challenge:",I)},onHashtagClick:(I,U)=>{U.stopPropagation(),console.log("Filter by hashtag:",I)},onCtaClick:(I,U)=>{U.stopPropagation(),console.log("CTA clicked:",I)}})}),o.jsx("div",{style:{color:"#A9B7C6",fontSize:"11px"},children:R.time}),R.stickerData&&o.jsx("div",{className:"mt-2 p-2 rounded border",style:{backgroundColor:"rgba(0, 0, 0, 0.2)",borderColor:"rgba(255, 255, 255, 0.1)"},children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:R.stickerData.thumbnail,alt:R.stickerData.name,className:"w-8 h-8 rounded object-cover dropsource-thumbnail"}),o.jsx("div",{className:"dropsource-serial-overlay group-hover:opacity-100",children:R.stickerData.serial})]}),o.jsxs("div",{children:[o.jsx("div",{style:{color:"#E6ECF3",fontSize:"12px",fontWeight:"500"},children:R.stickerData.name}),o.jsx("div",{style:{color:"#A9B7C6",fontSize:"10px",fontFamily:"monospace"},children:R.stickerData.serial})]})]})})]})]})},R.uid)})})]})}),o.jsx("div",{style:{width:"450px",flexShrink:0},children:o.jsxs("div",{className:"rounded border p-4",style:{backgroundColor:"#0F1520",borderColor:"#1A2531",height:"calc(100vh - 160px)"},onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(KD,{className:"w-5 h-5",style:{color:"#00AEEF"}}),o.jsx("h2",{className:"font-semibold",style:{color:"#E6ECF3"},children:"Community Feed"})]}),o.jsx("div",{className:"space-y-4 overflow-y-auto dropsource-custom-scrollbar",style:{height:"calc(100% - 60px)"},children:p.map(R=>{const F=U7(R.category||"");return o.jsxs("div",{className:"p-4 rounded border feed-item-enter",style:{backgroundColor:"#161B2E",borderColor:"#1A2531",transition:"all 300ms ease-in-out"},children:[o.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold cursor-pointer hover:scale-105 transition-transform",style:{backgroundColor:R.color},title:`View ${R.user}'s profile`,onClick:I=>M(R.user,R.handle,R.avatar,R.color,I),children:R.avatar}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(k0,{userId:`user-${R.user}`,username:R.user,handle:R.handle,className:"font-medium",style:{color:"#E6ECF3",fontSize:"14px"},onClick:I=>M(R.user,R.handle,R.avatar,R.color,I)}),o.jsx(k0,{userId:`user-${R.user}`,username:R.user,handle:R.handle,style:{color:"#A9B7C6",fontSize:"13px"},onClick:I=>M(R.user,R.handle,R.avatar,R.color,I),children:R.handle}),R.category&&o.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium flex items-center gap-1",title:R.category,style:{backgroundColor:F.backgroundColor,color:F.color,border:F.border,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"160px"},children:[F.emoji,R.category]})]}),o.jsx("div",{style:{color:"#E6ECF3",fontSize:"14px",lineHeight:"1.4"},children:o.jsx(p2,{text:R.content,actorUser:{name:R.user,avatar:R.avatar,color:R.color},stickerData:R.stickerData,cardData:R.cardData,onUserClick:M,onCollectibleClick:(I,U)=>{U.stopPropagation(),console.log("Open collectible sheet:",I)},onChallengeClick:(I,U)=>{U.stopPropagation(),console.log("Open challenge:",I)},onHashtagClick:(I,U)=>{U.stopPropagation(),console.log("Filter by hashtag:",I)},onCtaClick:(I,U)=>{U.stopPropagation(),console.log("CTA clicked:",I)}})}),o.jsx("div",{className:"flex items-center gap-2 mt-3",children:R.reactions.map((I,U)=>o.jsxs("button",{className:"dropsource-reaction-pill hover:scale-105 transition-transform",children:[o.jsx("span",{children:I.emoji}),o.jsx("span",{children:I.count})]},U))})]})]}),R.stickerData&&o.jsx("div",{className:"mt-3 p-3 rounded border",style:{backgroundColor:"rgba(0, 0, 0, 0.2)",borderColor:"rgba(255, 255, 255, 0.1)"},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:R.stickerData.thumbnail,alt:R.stickerData.name,className:"w-12 h-12 rounded object-cover dropsource-thumbnail"}),o.jsx("div",{className:"dropsource-serial-overlay group-hover:opacity-100",children:R.stickerData.serial})]}),o.jsxs("div",{children:[o.jsx("div",{style:{color:"#E6ECF3",fontSize:"14px",fontWeight:"500"},children:R.stickerData.name}),o.jsx("div",{style:{color:"#A9B7C6",fontSize:"12px",fontFamily:"monospace"},children:R.stickerData.serial})]})]})})]},R.uid)})})]})}),o.jsx("div",{style:{width:"350px",flexShrink:0},children:o.jsxs("div",{className:"space-y-6",children:[o.jsx(e_,{}),o.jsx(N7,{})]})})]}),o.jsx("div",{className:"lg:hidden flex flex-col h-full"})]}),l&&o.jsx(_7,{user:l.user,handle:l.handle,avatar:l.avatar,color:l.color,position:l.position,onClose:()=>d(null),onNavigateToProfile:()=>P(l.user)})]})})}var Y7="Separator",v2="horizontal",X7=["horizontal","vertical"],n_=b.forwardRef((r,e)=>{const{decorative:t,orientation:s=v2,...n}=r,i=K7(s)?s:v2,d=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(Ze.div,{"data-orientation":i,...d,...n,ref:e})});n_.displayName=Y7;function K7(r){return X7.includes(r)}var q7=n_;function Z7({className:r,orientation:e="horizontal",decorative:t=!0,...s}){return o.jsx(q7,{"data-slot":"separator-root",decorative:t,orientation:e,className:Et("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",r),...s})}var wf="Switch",[J7]=yn(wf),[Q7,eV]=J7(wf),o_=b.forwardRef((r,e)=>{const{__scopeSwitch:t,name:s,checked:n,defaultChecked:i,required:l,disabled:d,value:u="on",onCheckedChange:h,form:p,...m}=r,[g,y]=b.useState(null),v=nt(e,k=>y(k)),w=b.useRef(!1),j=g?p||!!g.closest("form"):!0,[C,N]=bi({prop:n,defaultProp:i??!1,onChange:h,caller:wf});return o.jsxs(Q7,{scope:t,checked:C,disabled:d,children:[o.jsx(Ze.button,{type:"button",role:"switch","aria-checked":C,"aria-required":l,"data-state":c_(C),"data-disabled":d?"":void 0,disabled:d,value:u,...m,ref:v,onClick:Ye(r.onClick,k=>{N(T=>!T),j&&(w.current=k.isPropagationStopped(),w.current||k.stopPropagation())})}),j&&o.jsx(l_,{control:g,bubbles:!w.current,name:s,value:u,checked:C,required:l,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});o_.displayName=wf;var i_="SwitchThumb",a_=b.forwardRef((r,e)=>{const{__scopeSwitch:t,...s}=r,n=eV(i_,t);return o.jsx(Ze.span,{"data-state":c_(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:e})});a_.displayName=i_;var tV="SwitchBubbleInput",l_=b.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:s=!0,...n},i)=>{const l=b.useRef(null),d=nt(l,i),u=ay(t),h=L0(e);return b.useEffect(()=>{const p=l.current;if(!p)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==t&&y){const v=new Event("click",{bubbles:s});y.call(p,t),p.dispatchEvent(v)}},[u,t,s]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:d,style:{...n.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});l_.displayName=tV;function c_(r){return r?"checked":"unchecked"}var rV=o_,sV=a_;function na({className:r,...e}){return o.jsx(rV,{"data-slot":"switch",className:Et("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:o.jsx(sV,{"data-slot":"switch-thumb",className:Et("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var nV=(r,e,t,s,n,i,l,d)=>{let u=document.documentElement,h=["light","dark"];function p(y){(Array.isArray(r)?r:[r]).forEach(v=>{let w=v==="class",j=w&&i?n.map(C=>i[C]||C):n;w?(u.classList.remove(...j),u.classList.add(i&&i[y]?i[y]:y)):u.setAttribute(v,y)}),m(y)}function m(y){d&&h.includes(y)&&(u.style.colorScheme=y)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)p(s);else try{let y=localStorage.getItem(e)||t,v=l&&y==="system"?g():y;p(v)}catch{}},oV=b.createContext(void 0),iV={setTheme:r=>{},themes:[]},aV=()=>{var r;return(r=b.useContext(oV))!=null?r:iV};b.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:n,defaultTheme:i,value:l,themes:d,nonce:u,scriptProps:h})=>{let p=JSON.stringify([t,e,i,r,d,l,s,n]).slice(1,-1);return b.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${nV.toString()})(${p})`}})});const lV=({...r})=>{const{theme:e="system"}=aV();return o.jsx(p7,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r})},d_=b.createContext(null);function cV({children:r}){const[e,t]=b.useState("paw");return o.jsx(d_.Provider,{value:{flair:e,setFlair:t},children:r})}const u_=()=>{const r=b.useContext(d_);if(!r)throw new Error("useProfileFlair outside provider");return r},dV={paw:"",heart:"",fire:"",sparkles:"",skull:""},uV=b.forwardRef((r,e)=>{const[t,s]=b.useState([]);return b.useImperativeHandle(e,()=>({burst(n,i,l){const d=Date.now()+Math.random();s(u=>[...u,{id:d,x:n,y:i,icon:dV[l]}]),setTimeout(()=>s(u=>u.filter(h=>h.id!==d)),650)}})),o.jsx("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:t.map(n=>o.jsx("div",{className:"select-none",style:{position:"absolute",left:n.x-12,top:n.y-12,animation:"profile-burst 600ms ease-out forwards",fontSize:24,filter:"drop-shadow(0 2px 6px rgba(0,0,0,.35))"},children:n.icon},n.id))})});var Il={exports:{}},eg={},tg={exports:{}},rg,b2;function hV(){if(b2)return rg;b2=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return rg=r,rg}var sg,w2;function fV(){if(w2)return sg;w2=1;var r=hV();function e(){}function t(){}return t.resetWarningCache=e,sg=function(){function s(l,d,u,h,p,m){if(m!==r){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function n(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:n,element:s,elementType:s,instanceOf:n,node:s,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},sg}var S2;function h_(){return S2||(S2=1,tg.exports=fV()()),tg.exports}function f_(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=f_(r[e]))&&(s&&(s+=" "),s+=t);else for(e in r)r[e]&&(s&&(s+=" "),s+=e);return s}function C2(){for(var r,e,t=0,s="";t<arguments.length;)(r=arguments[t++])&&(e=f_(r))&&(s&&(s+=" "),s+=e);return s}const pV=Object.freeze(Object.defineProperty({__proto__:null,clsx:C2,default:C2},Symbol.toStringTag,{value:"Module"})),mV=_M(pV);var Lt={},So={},k2;function Sf(){if(k2)return So;k2=1,Object.defineProperty(So,"__esModule",{value:!0}),So.dontSetMe=n,So.findInArray=r,So.int=s,So.isFunction=e,So.isNum=t;function r(i,l){for(let d=0,u=i.length;d<u;d++)if(l.apply(l,[i[d],d,i]))return i[d]}function e(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Function]"}function t(i){return typeof i=="number"&&!isNaN(i)}function s(i){return parseInt(i,10)}function n(i,l,d){if(i[l])return new Error("Invalid prop ".concat(l," passed to ").concat(d," - do not set this, set it on the child."))}return So}var Co={},j2;function gV(){if(j2)return Co;j2=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.browserPrefixToKey=t,Co.browserPrefixToStyle=s,Co.default=void 0,Co.getPrefix=e;const r=["Moz","Webkit","O","ms"];function e(){var i;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const d=(i=window.document)===null||i===void 0||(i=i.documentElement)===null||i===void 0?void 0:i.style;if(!d||l in d)return"";for(let u=0;u<r.length;u++)if(t(l,r[u])in d)return r[u];return""}function t(i,l){return l?"".concat(l).concat(n(i)):i}function s(i,l){return l?"-".concat(l.toLowerCase(),"-").concat(i):i}function n(i){let l="",d=!0;for(let u=0;u<i.length;u++)d?(l+=i[u].toUpperCase(),d=!1):i[u]==="-"?d=!0:l+=i[u];return l}return Co.default=e(),Co}var N2;function dy(){if(N2)return Lt;N2=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.addClassName=E,Lt.addEvent=d,Lt.addUserSelectStyles=k,Lt.createCSSTransform=v,Lt.createSVGTransform=w,Lt.getTouch=C,Lt.getTouchIdentifier=N,Lt.getTranslation=j,Lt.innerHeight=m,Lt.innerWidth=g,Lt.matchesSelector=i,Lt.matchesSelectorAndParentsTo=l,Lt.offsetXYFromParent=y,Lt.outerHeight=h,Lt.outerWidth=p,Lt.removeClassName=D,Lt.removeEvent=u,Lt.removeUserSelectStyles=T;var r=Sf(),e=s(gV());function t(M){if(typeof WeakMap!="function")return null;var P=new WeakMap,R=new WeakMap;return(t=function(F){return F?R:P})(M)}function s(M,P){if(M&&M.__esModule)return M;if(M===null||typeof M!="object"&&typeof M!="function")return{default:M};var R=t(P);if(R&&R.has(M))return R.get(M);var F={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in M)if(U!=="default"&&Object.prototype.hasOwnProperty.call(M,U)){var L=I?Object.getOwnPropertyDescriptor(M,U):null;L&&(L.get||L.set)?Object.defineProperty(F,U,L):F[U]=M[U]}return F.default=M,R&&R.set(M,F),F}let n="";function i(M,P){return n||(n=(0,r.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(R){return(0,r.isFunction)(M[R])})),(0,r.isFunction)(M[n])?M[n](P):!1}function l(M,P,R){let F=M;do{if(i(F,P))return!0;if(F===R)return!1;F=F.parentNode}while(F);return!1}function d(M,P,R,F){if(!M)return;const I={capture:!0,...F};M.addEventListener?M.addEventListener(P,R,I):M.attachEvent?M.attachEvent("on"+P,R):M["on"+P]=R}function u(M,P,R,F){if(!M)return;const I={capture:!0,...F};M.removeEventListener?M.removeEventListener(P,R,I):M.detachEvent?M.detachEvent("on"+P,R):M["on"+P]=null}function h(M){let P=M.clientHeight;const R=M.ownerDocument.defaultView.getComputedStyle(M);return P+=(0,r.int)(R.borderTopWidth),P+=(0,r.int)(R.borderBottomWidth),P}function p(M){let P=M.clientWidth;const R=M.ownerDocument.defaultView.getComputedStyle(M);return P+=(0,r.int)(R.borderLeftWidth),P+=(0,r.int)(R.borderRightWidth),P}function m(M){let P=M.clientHeight;const R=M.ownerDocument.defaultView.getComputedStyle(M);return P-=(0,r.int)(R.paddingTop),P-=(0,r.int)(R.paddingBottom),P}function g(M){let P=M.clientWidth;const R=M.ownerDocument.defaultView.getComputedStyle(M);return P-=(0,r.int)(R.paddingLeft),P-=(0,r.int)(R.paddingRight),P}function y(M,P,R){const I=P===P.ownerDocument.body?{left:0,top:0}:P.getBoundingClientRect(),U=(M.clientX+P.scrollLeft-I.left)/R,L=(M.clientY+P.scrollTop-I.top)/R;return{x:U,y:L}}function v(M,P){const R=j(M,P,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:R}}function w(M,P){return j(M,P,"")}function j(M,P,R){let{x:F,y:I}=M,U="translate(".concat(F).concat(R,",").concat(I).concat(R,")");if(P){const L="".concat(typeof P.x=="string"?P.x:P.x+R),X="".concat(typeof P.y=="string"?P.y:P.y+R);U="translate(".concat(L,", ").concat(X,")")+U}return U}function C(M,P){return M.targetTouches&&(0,r.findInArray)(M.targetTouches,R=>P===R.identifier)||M.changedTouches&&(0,r.findInArray)(M.changedTouches,R=>P===R.identifier)}function N(M){if(M.targetTouches&&M.targetTouches[0])return M.targetTouches[0].identifier;if(M.changedTouches&&M.changedTouches[0])return M.changedTouches[0].identifier}function k(M){if(!M)return;let P=M.getElementById("react-draggable-style-el");P||(P=M.createElement("style"),P.type="text/css",P.id="react-draggable-style-el",P.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,P.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,M.getElementsByTagName("head")[0].appendChild(P)),M.body&&E(M.body,"react-draggable-transparent-selection")}function T(M){if(M)try{if(M.body&&D(M.body,"react-draggable-transparent-selection"),M.selection)M.selection.empty();else{const P=(M.defaultView||window).getSelection();P&&P.type!=="Caret"&&P.removeAllRanges()}}catch{}}function E(M,P){M.classList?M.classList.add(P):M.className.match(new RegExp("(?:^|\\s)".concat(P,"(?!\\S)")))||(M.className+=" ".concat(P))}function D(M,P){M.classList?M.classList.remove(P):M.className=M.className.replace(new RegExp("(?:^|\\s)".concat(P,"(?!\\S)"),"g"),"")}return Lt}var Qs={},T2;function p_(){if(T2)return Qs;T2=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.canDragX=n,Qs.canDragY=i,Qs.createCoreData=d,Qs.createDraggableData=u,Qs.getBoundPosition=t,Qs.getControlPosition=l,Qs.snapToGrid=s;var r=Sf(),e=dy();function t(m,g,y){if(!m.props.bounds)return[g,y];let{bounds:v}=m.props;v=typeof v=="string"?v:h(v);const w=p(m);if(typeof v=="string"){const{ownerDocument:j}=w,C=j.defaultView;let N;if(v==="parent"?N=w.parentNode:N=j.querySelector(v),!(N instanceof C.HTMLElement))throw new Error('Bounds selector "'+v+'" could not find an element.');const k=N,T=C.getComputedStyle(w),E=C.getComputedStyle(k);v={left:-w.offsetLeft+(0,r.int)(E.paddingLeft)+(0,r.int)(T.marginLeft),top:-w.offsetTop+(0,r.int)(E.paddingTop)+(0,r.int)(T.marginTop),right:(0,e.innerWidth)(k)-(0,e.outerWidth)(w)-w.offsetLeft+(0,r.int)(E.paddingRight)-(0,r.int)(T.marginRight),bottom:(0,e.innerHeight)(k)-(0,e.outerHeight)(w)-w.offsetTop+(0,r.int)(E.paddingBottom)-(0,r.int)(T.marginBottom)}}return(0,r.isNum)(v.right)&&(g=Math.min(g,v.right)),(0,r.isNum)(v.bottom)&&(y=Math.min(y,v.bottom)),(0,r.isNum)(v.left)&&(g=Math.max(g,v.left)),(0,r.isNum)(v.top)&&(y=Math.max(y,v.top)),[g,y]}function s(m,g,y){const v=Math.round(g/m[0])*m[0],w=Math.round(y/m[1])*m[1];return[v,w]}function n(m){return m.props.axis==="both"||m.props.axis==="x"}function i(m){return m.props.axis==="both"||m.props.axis==="y"}function l(m,g,y){const v=typeof g=="number"?(0,e.getTouch)(m,g):null;if(typeof g=="number"&&!v)return null;const w=p(y),j=y.props.offsetParent||w.offsetParent||w.ownerDocument.body;return(0,e.offsetXYFromParent)(v||m,j,y.props.scale)}function d(m,g,y){const v=!(0,r.isNum)(m.lastX),w=p(m);return v?{node:w,deltaX:0,deltaY:0,lastX:g,lastY:y,x:g,y}:{node:w,deltaX:g-m.lastX,deltaY:y-m.lastY,lastX:m.lastX,lastY:m.lastY,x:g,y}}function u(m,g){const y=m.props.scale;return{node:g.node,x:m.state.x+g.deltaX/y,y:m.state.y+g.deltaY/y,deltaX:g.deltaX/y,deltaY:g.deltaY/y,lastX:m.state.x,lastY:m.state.y}}function h(m){return{left:m.left,top:m.top,right:m.right,bottom:m.bottom}}function p(m){const g=m.findDOMNode();if(!g)throw new Error("<DraggableCore>: Unmounted during event!");return g}return Qs}var Bl={},Fu={},_2;function m_(){if(_2)return Fu;_2=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.default=r;function r(){}return Fu}var M2;function xV(){if(M2)return Bl;M2=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.default=void 0;var r=h(Cc()),e=d(h_()),t=d(zh()),s=dy(),n=p_(),i=Sf(),l=d(m_());function d(j){return j&&j.__esModule?j:{default:j}}function u(j){if(typeof WeakMap!="function")return null;var C=new WeakMap,N=new WeakMap;return(u=function(k){return k?N:C})(j)}function h(j,C){if(j&&j.__esModule)return j;if(j===null||typeof j!="object"&&typeof j!="function")return{default:j};var N=u(C);if(N&&N.has(j))return N.get(j);var k={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in j)if(E!=="default"&&Object.prototype.hasOwnProperty.call(j,E)){var D=T?Object.getOwnPropertyDescriptor(j,E):null;D&&(D.get||D.set)?Object.defineProperty(k,E,D):k[E]=j[E]}return k.default=j,N&&N.set(j,k),k}function p(j,C,N){return C=m(C),C in j?Object.defineProperty(j,C,{value:N,enumerable:!0,configurable:!0,writable:!0}):j[C]=N,j}function m(j){var C=g(j,"string");return typeof C=="symbol"?C:String(C)}function g(j,C){if(typeof j!="object"||j===null)return j;var N=j[Symbol.toPrimitive];if(N!==void 0){var k=N.call(j,C);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(j)}const y={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let v=y.mouse,w=class extends r.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",C=>{if(this.props.onMouseDown(C),!this.props.allowAnyClick&&typeof C.button=="number"&&C.button!==0)return!1;const N=this.findDOMNode();if(!N||!N.ownerDocument||!N.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:k}=N;if(this.props.disabled||!(C.target instanceof k.defaultView.Node)||this.props.handle&&!(0,s.matchesSelectorAndParentsTo)(C.target,this.props.handle,N)||this.props.cancel&&(0,s.matchesSelectorAndParentsTo)(C.target,this.props.cancel,N))return;C.type==="touchstart"&&C.preventDefault();const T=(0,s.getTouchIdentifier)(C);this.touchIdentifier=T;const E=(0,n.getControlPosition)(C,T,this);if(E==null)return;const{x:D,y:M}=E,P=(0,n.createCoreData)(this,D,M);(0,l.default)("DraggableCore: handleDragStart: %j",P),(0,l.default)("calling",this.props.onStart),!(this.props.onStart(C,P)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(k),this.dragging=!0,this.lastX=D,this.lastY=M,(0,s.addEvent)(k,v.move,this.handleDrag),(0,s.addEvent)(k,v.stop,this.handleDragStop))}),p(this,"handleDrag",C=>{const N=(0,n.getControlPosition)(C,this.touchIdentifier,this);if(N==null)return;let{x:k,y:T}=N;if(Array.isArray(this.props.grid)){let M=k-this.lastX,P=T-this.lastY;if([M,P]=(0,n.snapToGrid)(this.props.grid,M,P),!M&&!P)return;k=this.lastX+M,T=this.lastY+P}const E=(0,n.createCoreData)(this,k,T);if((0,l.default)("DraggableCore: handleDrag: %j",E),this.props.onDrag(C,E)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const P=document.createEvent("MouseEvents");P.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(P)}return}this.lastX=k,this.lastY=T}),p(this,"handleDragStop",C=>{if(!this.dragging)return;const N=(0,n.getControlPosition)(C,this.touchIdentifier,this);if(N==null)return;let{x:k,y:T}=N;if(Array.isArray(this.props.grid)){let P=k-this.lastX||0,R=T-this.lastY||0;[P,R]=(0,n.snapToGrid)(this.props.grid,P,R),k=this.lastX+P,T=this.lastY+R}const E=(0,n.createCoreData)(this,k,T);if(this.props.onStop(C,E)===!1||this.mounted===!1)return!1;const M=this.findDOMNode();M&&this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(M.ownerDocument),(0,l.default)("DraggableCore: handleDragStop: %j",E),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,M&&((0,l.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(M.ownerDocument,v.move,this.handleDrag),(0,s.removeEvent)(M.ownerDocument,v.stop,this.handleDragStop))}),p(this,"onMouseDown",C=>(v=y.mouse,this.handleDragStart(C))),p(this,"onMouseUp",C=>(v=y.mouse,this.handleDragStop(C))),p(this,"onTouchStart",C=>(v=y.touch,this.handleDragStart(C))),p(this,"onTouchEnd",C=>(v=y.touch,this.handleDragStop(C)))}componentDidMount(){this.mounted=!0;const C=this.findDOMNode();C&&(0,s.addEvent)(C,y.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const C=this.findDOMNode();if(C){const{ownerDocument:N}=C;(0,s.removeEvent)(N,y.mouse.move,this.handleDrag),(0,s.removeEvent)(N,y.touch.move,this.handleDrag),(0,s.removeEvent)(N,y.mouse.stop,this.handleDragStop),(0,s.removeEvent)(N,y.touch.stop,this.handleDragStop),(0,s.removeEvent)(C,y.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(N)}}findDOMNode(){var C,N;return(C=this.props)!==null&&C!==void 0&&C.nodeRef?(N=this.props)===null||N===void 0||(N=N.nodeRef)===null||N===void 0?void 0:N.current:t.default.findDOMNode(this)}render(){return r.cloneElement(r.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return Bl.default=w,p(w,"displayName","DraggableCore"),p(w,"propTypes",{allowAnyClick:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(j,C){if(j[C]&&j[C].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:i.dontSetMe,style:i.dontSetMe,transform:i.dontSetMe}),p(w,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),Bl}var E2;function yV(){return E2||(E2=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),r.default=void 0;var e=g(Cc()),t=p(h_()),s=p(zh()),n=p(mV),i=dy(),l=p_(),d=Sf(),u=p(xV()),h=p(m_());function p(N){return N&&N.__esModule?N:{default:N}}function m(N){if(typeof WeakMap!="function")return null;var k=new WeakMap,T=new WeakMap;return(m=function(E){return E?T:k})(N)}function g(N,k){if(N&&N.__esModule)return N;if(N===null||typeof N!="object"&&typeof N!="function")return{default:N};var T=m(k);if(T&&T.has(N))return T.get(N);var E={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in N)if(M!=="default"&&Object.prototype.hasOwnProperty.call(N,M)){var P=D?Object.getOwnPropertyDescriptor(N,M):null;P&&(P.get||P.set)?Object.defineProperty(E,M,P):E[M]=N[M]}return E.default=N,T&&T.set(N,E),E}function y(){return y=Object.assign?Object.assign.bind():function(N){for(var k=1;k<arguments.length;k++){var T=arguments[k];for(var E in T)Object.prototype.hasOwnProperty.call(T,E)&&(N[E]=T[E])}return N},y.apply(this,arguments)}function v(N,k,T){return k=w(k),k in N?Object.defineProperty(N,k,{value:T,enumerable:!0,configurable:!0,writable:!0}):N[k]=T,N}function w(N){var k=j(N,"string");return typeof k=="symbol"?k:String(k)}function j(N,k){if(typeof N!="object"||N===null)return N;var T=N[Symbol.toPrimitive];if(T!==void 0){var E=T.call(N,k);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(N)}class C extends e.Component{static getDerivedStateFromProps(k,T){let{position:E}=k,{prevPropsPosition:D}=T;return E&&(!D||E.x!==D.x||E.y!==D.y)?((0,h.default)("Draggable: getDerivedStateFromProps %j",{position:E,prevPropsPosition:D}),{x:E.x,y:E.y,prevPropsPosition:{...E}}):null}constructor(k){super(k),v(this,"onDragStart",(T,E)=>{if((0,h.default)("Draggable: onDragStart: %j",E),this.props.onStart(T,(0,l.createDraggableData)(this,E))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),v(this,"onDrag",(T,E)=>{if(!this.state.dragging)return!1;(0,h.default)("Draggable: onDrag: %j",E);const D=(0,l.createDraggableData)(this,E),M={x:D.x,y:D.y,slackX:0,slackY:0};if(this.props.bounds){const{x:R,y:F}=M;M.x+=this.state.slackX,M.y+=this.state.slackY;const[I,U]=(0,l.getBoundPosition)(this,M.x,M.y);M.x=I,M.y=U,M.slackX=this.state.slackX+(R-M.x),M.slackY=this.state.slackY+(F-M.y),D.x=M.x,D.y=M.y,D.deltaX=M.x-this.state.x,D.deltaY=M.y-this.state.y}if(this.props.onDrag(T,D)===!1)return!1;this.setState(M)}),v(this,"onDragStop",(T,E)=>{if(!this.state.dragging||this.props.onStop(T,(0,l.createDraggableData)(this,E))===!1)return!1;(0,h.default)("Draggable: onDragStop: %j",E);const M={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:R,y:F}=this.props.position;M.x=R,M.y=F}this.setState(M)}),this.state={dragging:!1,dragged:!1,x:k.position?k.position.x:k.defaultPosition.x,y:k.position?k.position.y:k.defaultPosition.y,prevPropsPosition:{...k.position},slackX:0,slackY:0,isElementSVG:!1},k.position&&!(k.onDrag||k.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var k,T;return(k=(T=this.props)===null||T===void 0||(T=T.nodeRef)===null||T===void 0?void 0:T.current)!==null&&k!==void 0?k:s.default.findDOMNode(this)}render(){const{axis:k,bounds:T,children:E,defaultPosition:D,defaultClassName:M,defaultClassNameDragging:P,defaultClassNameDragged:R,position:F,positionOffset:I,scale:U,...L}=this.props;let X={},de=null;const V=!!!F||this.state.dragging,O=F||D,Z={x:(0,l.canDragX)(this)&&V?this.state.x:O.x,y:(0,l.canDragY)(this)&&V?this.state.y:O.y};this.state.isElementSVG?de=(0,i.createSVGTransform)(Z,I):X=(0,i.createCSSTransform)(Z,I);const Q=(0,n.default)(E.props.className||"",M,{[P]:this.state.dragging,[R]:this.state.dragged});return e.createElement(u.default,y({},L,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(E),{className:Q,style:{...E.props.style,...X},transform:de}))}}r.default=C,v(C,"displayName","Draggable"),v(C,"propTypes",{...u.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:d.dontSetMe,style:d.dontSetMe,transform:d.dontSetMe}),v(C,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(eg)),eg}var P2;function vV(){if(P2)return Il.exports;P2=1;const{default:r,DraggableCore:e}=yV();return Il.exports=r,Il.exports.default=r,Il.exports.DraggableCore=e,Il.exports}var bV=vV();const wV=M0(bV);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var T0=function(r,e){return T0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var n in s)s.hasOwnProperty(n)&&(t[n]=s[n])},T0(r,e)};function SV(r,e){T0(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Qt=function(){return Qt=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Qt.apply(this,arguments)};function CV(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t}var kV={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},jV=function(r){return{bottom:r,bottomLeft:r,bottomRight:r,left:r,right:r,top:r,topLeft:r,topRight:r}},NV=(function(r){SV(e,r);function e(t){var s=r.call(this,t)||this;return s.resizingPosition={x:0,y:0},s.offsetFromParent={left:0,top:0},s.resizableElement={current:null},s.originalPosition={x:0,y:0},s.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},s.onResizeStart=s.onResizeStart.bind(s),s.onResize=s.onResize.bind(s),s.onResizeStop=s.onResizeStop.bind(s),s.onDragStart=s.onDragStart.bind(s),s.onDrag=s.onDrag.bind(s),s.onDragStop=s.onDragStop.bind(s),s.getMaxSizesFromProps=s.getMaxSizesFromProps.bind(s),s}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,s=t.left,n=t.top,i=this.getDraggablePosition(),l=i.x,d=i.y;this.draggable.setState({x:l-s,y:d-n}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,s=t.x,n=t.y;return{x:s,y:n}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,s=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:s}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var s=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/s;case"body":return document.body.offsetHeight/s;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var s=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/s;case"body":return document.body.offsetWidth/s;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,s){this.props.onDragStart&&this.props.onDragStart(t,s);var n=this.getDraggablePosition();if(this.originalPosition=n,!!this.props.bounds){var i=this.getParent(),l=this.props.scale,d;if(this.props.bounds==="parent")d=i;else if(this.props.bounds==="body"){var u=i.getBoundingClientRect(),h=u.left,p=u.top,m=document.body.getBoundingClientRect(),g=-(h-i.offsetLeft*l-m.left)/l,y=-(p-i.offsetTop*l-m.top)/l,v=(document.body.offsetWidth-this.resizable.size.width*l)/l+g,w=(document.body.offsetHeight-this.resizable.size.height*l)/l+y;return this.setState({bounds:{top:y,right:v,bottom:w,left:g}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var j=i.getBoundingClientRect(),C=j.left,N=j.top,k=-(C-i.offsetLeft*l)/l,T=-(N-i.offsetTop*l)/l,v=(window.innerWidth-this.resizable.size.width*l)/l+k,w=(window.innerHeight-this.resizable.size.height*l)/l+T;return this.setState({bounds:{top:T,right:v,bottom:w,left:k}})}else typeof this.props.bounds=="string"?d=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(d=this.props.bounds);if(!(!(d instanceof HTMLElement)||!(i instanceof HTMLElement))){var E=d.getBoundingClientRect(),D=E.left,M=E.top,P=i.getBoundingClientRect(),R=P.left,F=P.top,I=(D-R)/l,U=M-F;if(this.resizable){this.updateOffsetFromParent();var L=this.offsetFromParent;this.setState({bounds:{top:U-L.top,right:I+(d.offsetWidth-this.resizable.size.width)-L.left/l,bottom:U+(d.offsetHeight-this.resizable.size.height)-L.top,left:I-L.left/l}})}}}},e.prototype.onDrag=function(t,s){if(this.props.onDrag){var n=this.offsetFromParent,i=n.left,l=n.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,Qt(Qt({},s),{x:s.x+i,y:s.y+l}));if(this.props.dragAxis==="x")return this.props.onDrag(t,Qt(Qt({},s),{x:s.x+i,y:this.originalPosition.y+l,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,Qt(Qt({},s),{x:this.originalPosition.x+i,y:s.y+l,deltaX:0}))}},e.prototype.onDragStop=function(t,s){if(this.props.onDragStop){var n=this.offsetFromParent,i=n.left,l=n.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,Qt(Qt({},s),{x:s.x+i,y:s.y+l}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,Qt(Qt({},s),{x:s.x+i,y:this.originalPosition.y+l,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,Qt(Qt({},s),{x:this.originalPosition.x+i,y:s.y+l,deltaX:0}))}},e.prototype.onResizeStart=function(t,s,n){t.stopPropagation(),this.setState({resizing:!0});var i=this.props.scale,l=this.offsetFromParent,d=this.getDraggablePosition();if(this.resizingPosition={x:d.x+l.left,y:d.y+l.top},this.originalPosition=d,this.props.bounds){var u=this.getParent(),h=void 0;this.props.bounds==="parent"?h=u:this.props.bounds==="body"?h=document.body:this.props.bounds==="window"?h=window:typeof this.props.bounds=="string"?h=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(h=this.props.bounds);var p=this.getSelfElement();if(p instanceof Element&&(h instanceof HTMLElement||h===window)&&u instanceof HTMLElement){var m=this.getMaxSizesFromProps(),g=m.maxWidth,y=m.maxHeight,v=this.getParentSize();if(g&&typeof g=="string")if(g.endsWith("%")){var w=Number(g.replace("%",""))/100;g=v.width*w}else g.endsWith("px")&&(g=Number(g.replace("px","")));if(y&&typeof y=="string")if(y.endsWith("%")){var w=Number(y.replace("%",""))/100;y=v.height*w}else y.endsWith("px")&&(y=Number(y.replace("px","")));var j=p.getBoundingClientRect(),C=j.left,N=j.top,k=this.props.bounds==="window"?{left:0,top:0}:h.getBoundingClientRect(),T=k.left,E=k.top,D=this.getOffsetWidth(h),M=this.getOffsetHeight(h),P=s.toLowerCase().endsWith("left"),R=s.toLowerCase().endsWith("right"),F=s.startsWith("top"),I=s.startsWith("bottom");if((P||F)&&this.resizable){var U=(C-T)/i+this.resizable.size.width;this.setState({maxWidth:U>Number(g)?g:U})}if(R||this.props.lockAspectRatio&&!P&&!F){var U=D+(T-C)/i;this.setState({maxWidth:U>Number(g)?g:U})}if((F||P)&&this.resizable){var U=(N-E)/i+this.resizable.size.height;this.setState({maxHeight:U>Number(y)?y:U})}if(I||this.props.lockAspectRatio&&!F&&!P){var U=M+(E-N)/i;this.setState({maxHeight:U>Number(y)?y:U})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,s,n)},e.prototype.onResize=function(t,s,n,i){var l=this,d={x:this.originalPosition.x,y:this.originalPosition.y},u=-i.width,h=-i.height,p=["top","left","topLeft","bottomLeft","topRight"];p.includes(s)&&(s==="bottomLeft"?d.x+=u:(s==="topRight"||(d.x+=u),d.y+=h));var m=this.draggable.state;(d.x!==m.x||d.y!==m.y)&&Lo.flushSync(function(){l.draggable.setState(d)}),this.updateOffsetFromParent();var g=this.offsetFromParent,y=this.getDraggablePosition().x+g.left,v=this.getDraggablePosition().y+g.top;this.resizingPosition={x:y,y:v},this.props.onResize&&this.props.onResize(t,s,n,i,{x:y,y:v})},e.prototype.onResizeStop=function(t,s,n,i){this.setState({resizing:!1});var l=this.getMaxSizesFromProps(),d=l.maxWidth,u=l.maxHeight;this.setState({maxWidth:d,maxHeight:u}),this.props.onResizeStop&&this.props.onResizeStop(t,s,n,i,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,s=this.getParent(),n=this.getSelfElement();if(!s||n===null)return{top:0,left:0};var i=s.getBoundingClientRect(),l=i.left,d=i.top,u=n.getBoundingClientRect(),h=this.getDraggablePosition(),p=s.scrollLeft,m=s.scrollTop;this.offsetFromParent={left:u.left-l+p-h.x*t,top:u.top-d+m-h.y*t}},e.prototype.render=function(){var t=this,s=this.props,n=s.disableDragging,i=s.style,l=s.dragHandleClassName,d=s.position,u=s.onMouseDown,h=s.onMouseUp,p=s.dragAxis,m=s.dragGrid,g=s.bounds,y=s.enableUserSelectHack,v=s.cancel,w=s.children;s.onResizeStart,s.onResize,s.onResizeStop,s.onDragStart,s.onDrag,s.onDragStop;var j=s.resizeHandleStyles,C=s.resizeHandleClasses,N=s.resizeHandleComponent,k=s.enableResizing,T=s.resizeGrid,E=s.resizeHandleWrapperClass,D=s.resizeHandleWrapperStyle,M=s.scale,P=s.allowAnyClick,R=s.dragPositionOffset,F=CV(s,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),I=this.props.default?Qt({},this.props.default):void 0;delete F.default;var U=n||l?{cursor:"auto"}:{cursor:"move"},L=Qt(Qt(Qt({},kV),U),i),X=this.offsetFromParent,de=X.left,B=X.top,V;d&&(V={x:d.x-de,y:d.y-B});var O=this.state.resizing?void 0:V,Z=this.state.resizing?"both":p;return b.createElement(wV,{ref:function(Q){Q&&(t.draggable=Q)},handle:l?".".concat(l):void 0,defaultPosition:I,onMouseDown:u,onMouseUp:h,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:Z,disabled:n,grid:m,bounds:g?this.state.bounds:void 0,position:O,enableUserSelectHack:y,cancel:v,scale:M,allowAnyClick:P,nodeRef:this.resizableElement,positionOffset:R},b.createElement(Wj,Qt({},F,{ref:function(Q){Q&&(t.resizable=Q,t.resizableElement.current=Q.resizable)},defaultSize:I,size:this.props.size,enable:typeof k=="boolean"?jV(k):k,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:L,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:T,handleWrapperClass:E,handleWrapperStyle:D,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:j,handleClasses:C,handleComponent:N,scale:this.props.scale}),w))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e})(b.PureComponent);const Lu=8;function TV(r){const[e,t]=b.useState({}),s=b.useMemo(()=>r.map(l=>({id:l.id,l:l.x,r:l.x+l.w,t:l.y,b:l.y+l.h,cx:l.x+l.w/2,cy:l.y+l.h/2})),[r]);function n(l,d){const u={l:d.x,r:d.x+d.w,t:d.y,b:d.y+d.h,cx:d.x+d.w/2,cy:d.y+d.h/2};let h=0,p=0,m,g;for(const v of s){if(v.id===l)continue;const w=[[u.l,v.l],[u.l,v.cx],[u.l,v.r],[u.cx,v.l],[u.cx,v.cx],[u.cx,v.r],[u.r,v.l],[u.r,v.cx],[u.r,v.r]];for(const[C,N]of w){const k=N-C;(Math.abs(k)<=Lu&&Math.abs(k)<Math.abs(h)||h===0)&&(h=k,m=N)}const j=[[u.t,v.t],[u.t,v.cy],[u.t,v.b],[u.cy,v.t],[u.cy,v.cy],[u.cy,v.b],[u.b,v.t],[u.b,v.cy],[u.b,v.b]];for(const[C,N]of j){const k=N-C;(Math.abs(k)<=Lu&&Math.abs(k)<Math.abs(p)||p===0)&&(p=k,g=N)}}t({v:m,h:g});const y={...d};return Math.abs(h)<=Lu&&(y.x+=h),Math.abs(p)<=Lu&&(y.y+=p),y}function i(){t({})}return{guides:e,snapRect:n,clearGuides:i}}function _V({onClear:r,blockId:e="chalk"}){const t=b.useRef(null),[s,n]=b.useState(!1),[i,l]=b.useState({color:"#b7cdfc",size:3,alpha:.95}),[d,u]=b.useState([]),h=["#b7cdfc","#ff6b9d","#ffd166","#5af5d0","#ff8a65","#a78bfa","#67e8f9","#84cc16"];b.useEffect(()=>{const k=t.current;if(!k)return;const T=window.devicePixelRatio||1,E=k.getBoundingClientRect();k.width=E.width*T,k.height=E.height*T;const D=k.getContext("2d");D&&(D.scale(T,T),D.lineJoin="round",D.lineCap="round",D.fillStyle="#0c1424",D.fillRect(0,0,E.width,E.height))},[e]),b.useEffect(()=>{const k=setTimeout(()=>{j()},150);return()=>clearTimeout(k)},[e]);const p=(k,T)=>{const E=t.current;if(!E)return;const D=E.getContext("2d");D&&(D.strokeStyle=i.color,D.globalAlpha=i.alpha,D.lineWidth=i.size,D.lineTo(k,T),D.stroke())},m=k=>{const T=t.current;if(!T)return{x:0,y:0};const E=T.getBoundingClientRect();return{x:k.clientX-E.left,y:k.clientY-E.top}},g=k=>{const{x:T,y:E}=m(k),D=t.current?.getContext("2d");D&&(D.beginPath(),D.moveTo(T,E),n(!0))},y=k=>{if(!s)return;const{x:T,y:E}=m(k);p(T,E)},v=()=>{n(!1),w()},w=()=>{try{const k=t.current;if(k){const T=k.toDataURL();localStorage.setItem(`chalkboard-${e}`,T)}}catch(k){console.warn("Failed to save chalkboard:",k)}},j=()=>{try{const k=localStorage.getItem(`chalkboard-${e}`);if(k&&t.current){const T=new Image;T.onload=()=>{const E=t.current?.getContext("2d");E&&E.drawImage(T,0,0)},T.src=k}}catch(k){console.warn("Failed to load chalkboard:",k)}},C=()=>{n(!1)},N=()=>{const k=t.current;if(!k)return;const T=k.getContext("2d");if(!T)return;const E=k.getBoundingClientRect();T.fillStyle="#0c1424",T.fillRect(0,0,E.width,E.height),r?.()};return o.jsxs("div",{className:"chalk-wrap w-full h-full",children:[o.jsx("div",{className:"chalk-tools w-full max-w-full",children:o.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[o.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center w-full",children:[o.jsx("span",{className:"text-xs flex-shrink-0 mr-1",children:"Colors:"}),o.jsxs("div",{className:"flex flex-wrap gap-1 flex-1 max-w-full overflow-hidden",children:[h.map(k=>o.jsx("button",{onClick:()=>l(T=>({...T,color:k})),className:`w-5 h-5 rounded border hover:scale-110 transition-transform flex-shrink-0 ${i.color===k?"border-white/60":"border-white/20"}`,style:{backgroundColor:k},title:k,"aria-label":`choose ${k}`},k)),o.jsx("input",{type:"color",value:i.color,onChange:k=>l(T=>({...T,color:k.target.value})),className:"w-5 h-5 rounded border border-white/20 flex-shrink-0",title:"Custom color"})]})]}),o.jsxs("div",{className:"flex items-center gap-2 justify-between w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("span",{className:"text-xs flex-shrink-0",children:"Size:"}),o.jsx("input",{type:"range",min:1,max:12,value:i.size,onChange:k=>l(T=>({...T,size:+k.target.value})),className:"w-12 flex-shrink-0"}),o.jsxs("span",{className:"text-xs opacity-70 flex-shrink-0",children:[i.size,"px"]})]}),o.jsx("button",{onClick:N,className:"dropsource-btn-secondary text-xs px-2 py-1 flex-shrink-0",children:"Clear"})]})]})}),o.jsx("canvas",{ref:t,className:"chalk-canvas flex-1 w-full",onPointerDown:g,onPointerMove:y,onPointerUp:v,onPointerLeave:C,style:{touchAction:"none"}})]})}function MV(){return o.jsxs("div",{className:"ph-card",children:[o.jsxs("div",{className:"ph-top",children:[o.jsxs("div",{className:"ph-id",children:[o.jsx("div",{className:"ph-avatar",children:"T"}),o.jsxs("div",{children:[o.jsx("div",{className:"ph-name",children:"TestUser"}),o.jsx("div",{className:"ph-handle",children:"@TestUser  Eugene, OR"})]}),o.jsx("span",{className:"ph-pro",title:"DropSource BLUE",children:"DS BLUE"})]}),o.jsxs("div",{className:"ph-ctas",children:[o.jsx("button",{className:"cta donate",title:"Send a one-time tip",children:" Donate"}),o.jsx("button",{className:"cta monthly",title:"Monthly support",children:" Monthly Support"}),o.jsx("button",{className:"cta ghost",children:"Message"})]})]}),o.jsx("p",{className:"ph-bio",children:"Check out the Kickstarter!"}),o.jsxs("div",{className:"ph-stats",children:[o.jsx("span",{children:" 12,847 stars"}),o.jsx("span",{children:" Level 47"}),o.jsx("span",{children:" Trust 94%"}),o.jsx("span",{children:" 2,341 followers"}),o.jsx("span",{children:" 892 following"})]}),o.jsxs("div",{className:"ph-links",children:[o.jsx("a",{children:"SoundCloud"}),o.jsx("a",{children:"YouTube"}),o.jsx("a",{children:"Spotify"})]})]})}function g_({preset:r,density:e="medium",opacity:t=1,zIndex:s=1,colors:n}){const i=b.useRef(null),l=b.useRef();return b.useEffect(()=>{const d=i.current,u=d.getContext("2d",{alpha:!0});Object.assign(d.style,{position:"absolute",inset:"0",width:"100%",height:"100%",pointerEvents:"none",zIndex:String(s)});const h=()=>{const ue=d.getBoundingClientRect(),re=Math.max(1,window.devicePixelRatio||1);d.width=Math.max(1,Math.round(ue.width*re)),d.height=Math.max(1,Math.round(ue.height*re)),u.setTransform(1,0,0,1,0,0),u.scale(re,re)};h();const p=new ResizeObserver(h);p.observe(d);const m=()=>d.getBoundingClientRect(),g=e==="low"?40:e==="high"?160:90,y=n??["#86E1FF","#A78BFA","#FDE68A","#34D399"],v=(ue,re)=>Math.random()*(re-ue)+ue,w=(ue,re,J)=>Math.max(re,Math.min(J,ue));function j(ue,re){return Math.sin(ue*127.1+re*311.7)*43758.5453%1}function C(ue,re){const J=Math.floor(ue),ge=Math.floor(re),oe=ue-J,ve=re-ge,Re=j(J,ge),De=j(J+1,ge),Je=j(J,ge+1),He=j(J+1,ge+1),he=(lt,yt,kr)=>lt+(yt-lt)*kr,Ge=oe*oe*(3-2*oe),st=ve*ve*(3-2*ve);return he(he(Re,De,Ge),he(Je,He,Ge),st)}const N=(ue,re=3)=>(Math.sin(ue*re)+1)/2,k=()=>{const ue=[{n:Math.floor(g*.45),sp:12,size:[.6,1.1],col:"rgba(255,255,255,0.9)"},{n:Math.floor(g*.35),sp:28,size:[.8,1.6],col:"rgba(185,205,255,0.8)"},{n:Math.floor(g*.2),sp:50,size:[1,2],col:"rgba(150,180,255,0.75)"}].map(J=>({...J,pts:Array.from({length:J.n},()=>({x:v(0,m().width),y:v(0,m().height),r:v(J.size[0],J.size[1])}))}));let re=null;return{draw(J){const{width:ge,height:oe}=m();if(u.clearRect(0,0,ge,oe),ue.forEach(ve=>{u.fillStyle=ve.col,ve.pts.forEach(Re=>{Re.x-=ve.sp*J,Re.x<0&&(Re.x=ge);const De=Math.round(Re.x)+.5,Je=Math.round(Re.y)+.5;u.beginPath(),u.arc(De,Je,Re.r,0,Math.PI*2),u.fill()})}),!re&&Math.random()<.015&&(re={x:v(ge*.3,ge),y:v(0,oe*.6),vx:v(-360,-240),vy:v(-40,40),len:v(50,90),life:.24}),re){re.life-=J,re.x+=re.vx*J,re.y+=re.vy*J;const ve=w(re.life/.24,0,1),Re=Math.atan2(re.vy,re.vx),De=re.x-Math.cos(Re)*re.len,Je=re.y-Math.sin(Re)*re.len,He=u.createLinearGradient(re.x,re.y,De,Je);He.addColorStop(0,`rgba(255,255,255,${.95*t*ve})`),He.addColorStop(1,"rgba(255,255,255,0)"),u.strokeStyle=He,u.lineWidth=1.6,u.beginPath(),u.moveTo(re.x,re.y),u.lineTo(De,Je),u.stroke(),(ve<=0||re.x<-120||re.y<-80||re.y>oe+80)&&(re=null)}}}},T=()=>{const ue=Array.from({length:g},()=>({x:v(0,m().width),y:v(-m().height,m().height),r:v(1.8,3.4),vy:v(25,55),phase:v(0,Math.PI*2),sway:v(10,30)}));return{draw(re){u.clearRect(0,0,m().width,m().height),ue.forEach(J=>{J.phase+=re,J.y+=J.vy*re,J.x+=Math.sin(J.phase)*J.sway*re,J.y>m().height+4&&(J.y=-4,J.x=v(0,m().width)),u.beginPath(),u.fillStyle="rgba(255,255,255,0.85)",u.shadowColor="rgba(255,255,255,0.6)",u.shadowBlur=4,u.arc(J.x,J.y,J.r,0,Math.PI*2),u.fill(),u.shadowBlur=0})}}},E=()=>{const ue=Math.floor(g*.35),re=Array.from({length:ue},()=>({x:v(0,m().width),y:v(0,m().height),r:v(2.2,3.6),t:v(0,Math.PI*2),s:v(.6,1.2),hue:v(40,90)}));return{draw(J){u.clearRect(0,0,m().width,m().height),re.forEach(ge=>{ge.t+=J*ge.s,ge.x+=Math.cos(ge.t)*12*J,ge.y+=Math.sin(ge.t*1.3)*12*J,ge.x<0&&(ge.x=m().width),ge.x>m().width&&(ge.x=0),ge.y<0&&(ge.y=m().height),ge.y>m().height&&(ge.y=0);const oe=.35+.65*N(ge.t,2.2);u.beginPath(),u.fillStyle=`hsla(${ge.hue},80%,70%,${oe})`,u.shadowColor=`hsla(${ge.hue},100%,70%,${oe})`,u.shadowBlur=10,u.arc(ge.x,ge.y,ge.r*(1+oe*.4),0,Math.PI*2),u.fill(),u.shadowBlur=0})}}},D=()=>{const ue=Array.from({length:g},()=>({x:v(0,m().width),y:v(-m().height,m().height),z:v(.6,1.5),r:v(7,14),rot:v(0,Math.PI*2),vr:v(-1,1),vx:v(10,22),vy:v(24,46),wob:v(.8,1.4),h:v(330,355),shape:Math.random()*3|0})),re=(ge,oe,ve)=>{ge.beginPath(),ve===0?(ge.moveTo(0,-oe*.05),ge.bezierCurveTo(oe*.7,-oe*.6,oe*.92,oe*.1,0,oe*.88),ge.bezierCurveTo(-oe*.92,oe*.1,-oe*.7,-oe*.6,0,-oe*.05)):ve===1?(ge.moveTo(0,-oe*.18),ge.bezierCurveTo(oe*.65,-oe*.55,oe*.85,oe*.15,0,oe*.9),ge.bezierCurveTo(-oe*.85,oe*.15,-oe*.65,-oe*.55,0,-oe*.18)):(ge.moveTo(0,-oe*.06),ge.bezierCurveTo(oe*.55,-oe*.62,oe*.95,oe*.15,0,oe*.92),ge.bezierCurveTo(-oe*.95,oe*.15,-oe*.55,-oe*.62,0,-oe*.06),ge.save(),ge.globalCompositeOperation="destination-out",ge.arc(0,-oe*.04,oe*.16,0,Math.PI*2),ge.fill(),ge.restore()),ge.closePath()};let J=0;return{draw(ge){const{width:oe,height:ve}=m();J+=ge,u.clearRect(0,0,oe,ve);const Re=Math.sin(J*.4)*18;ue.forEach(De=>{De.x+=(De.vx+Re)*ge*(.6+De.z*.4),De.y+=De.vy*ge*(.7+De.z*.3),De.rot+=De.vr*ge,De.x+=Math.sin((J+De.rot)*De.wob)*5*ge,De.y>ve+24&&(De.y=-24,De.x=v(0,oe)),De.x>oe+24&&(De.x=-24);const Je=De.r*(.65+De.z*.45);u.save(),u.translate(De.x,De.y),u.rotate(De.rot),u.scale(1,.9+Math.sin(J*1.2+De.rot)*.1);const He=u.createRadialGradient(0,0,0,0,0,Je);He.addColorStop(0,`hsla(${De.h},90%,92%,${.95*t})`),He.addColorStop(1,`hsla(${De.h},75%,82%,${.65*t})`),u.fillStyle=He,re(u,Je,De.shape),u.fill(),u.strokeStyle="rgba(255,255,255,0.45)",u.lineWidth=.7,u.stroke(),u.restore()})}}},M=()=>{const ue=Math.max(20,Math.floor(m().width/14)),re=Array.from({length:ue},(ge,oe)=>({x:Math.floor(oe*(m().width/ue)),y:v(-m().height,0),speed:v(90,160),len:Math.floor(v(12,26)),t:0})),J="0123456789";return{draw(ge){const{width:oe,height:ve}=m();u.fillStyle="rgba(0,0,0,0.12)",u.fillRect(0,0,oe,ve),re.forEach(Re=>{Re.t+=ge,Re.y+=Re.speed*ge,Re.y-Re.len*16>ve&&(Re.y=-v(0,ve*.5),Re.speed=v(90,160),Re.len=Math.floor(v(12,26)));for(let De=0;De<Re.len;De++){const Je=Re.y-De*16;if(Je<-16||Je>ve+16)continue;const He=Math.max(0,1-De/Re.len),he=De===0;u.fillStyle=he?"rgba(180,255,180,1)":`rgba(0,255,128,${.15+He*.6})`,u.font="14px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace",u.fillText(J[Math.floor((Re.t*20+De)%J.length)],Re.x,Je)}})}}},P=()=>{const ue=Array.from({length:g},()=>({x:v(0,m().width),y:v(-m().height,0),w:v(3,7),h:v(6,12),vy:v(60,120),vx:v(-20,20),rot:v(0,Math.PI*2),vr:v(-1.2,1.2),col:y[Math.floor(v(0,y.length))]}));return{draw(re){u.clearRect(0,0,m().width,m().height),ue.forEach(J=>{J.y+=J.vy*re,J.x+=J.vx*re,J.rot+=J.vr*re,J.y>m().height+16&&(J.y=-16,J.x=v(0,m().width)),u.save(),u.translate(J.x,J.y),u.rotate(J.rot),u.fillStyle=J.col,u.fillRect(-J.w/2,-J.h/2,J.w,J.h),u.restore()})}}},R=()=>{const ue=Array.from({length:Math.floor(g*.5)},()=>({x:v(0,m().width),y:v(0,m().height),r:v(6,14),vy:v(-16,-40)}));return{draw(re){u.clearRect(0,0,m().width,m().height),ue.forEach(J=>{J.y+=J.vy*re,J.y<-J.r&&(J.y=m().height+J.r,J.x=v(0,m().width)),u.beginPath(),u.strokeStyle="rgba(255,255,255,0.35)",u.lineWidth=1.2,u.arc(J.x,J.y,J.r,0,Math.PI*2),u.stroke()})}}},F=()=>{const ue=Array.from({length:Math.floor(g*.2)},()=>({x:v(-m().width*.2,m().width*.8),y:v(-m().height*.2,m().height*.5),vx:v(180,260),vy:v(80,140),len:v(40,80)}));return{draw(re){u.clearRect(0,0,m().width,m().height),ue.forEach(J=>{J.x+=J.vx*re,J.y+=J.vy*re,(J.x>m().width+40||J.y>m().height+40)&&(J.x=v(-m().width*.2,m().width*.1),J.y=v(-m().height*.2,m().height*.1));const ge=Math.atan2(J.vy,J.vx),oe=J.x-Math.cos(ge)*J.len,ve=J.y-Math.sin(ge)*J.len,Re=u.createLinearGradient(J.x,J.y,oe,ve);Re.addColorStop(0,"rgba(255,255,255,0.9)"),Re.addColorStop(1,"rgba(255,255,255,0.0)"),u.strokeStyle=Re,u.lineWidth=2.2,u.beginPath(),u.moveTo(J.x,J.y),u.lineTo(oe,ve),u.stroke()})}}},I=()=>{const ue=Array.from({length:90},()=>({x:v(0,m().width),y:v(0,m().height),r:v(.7,1.5),tw:v(0,Math.PI*2)}));let re=0;return{draw(J){re+=J*.25;const{width:ge,height:oe}=m(),ve=u.createLinearGradient(0,0,0,oe);ve.addColorStop(0,"#08101c"),ve.addColorStop(1,"#0a0d15"),u.fillStyle=ve,u.fillRect(0,0,ge,oe),ue.forEach(De=>{De.tw+=J*1.6;const Je=.35+.65*((Math.sin(De.tw)+1)/2);u.globalAlpha=t*Je,u.fillStyle="#fff",u.beginPath(),u.arc(De.x,De.y,De.r,0,Math.PI*2),u.fill()}),u.globalCompositeOperation="lighter";const Re=3;for(let De=0;De<Re;De++){const Je=n[De%n.length]||["#7ef3ff","#a78bfa","#34d399"][De%3];u.strokeStyle=Je,u.shadowColor=Je,u.shadowBlur=26,u.lineWidth=30,u.globalAlpha=t*.28,u.beginPath();for(let He=0;He<=ge;He+=16){const he=C(He*.012+De*1.8,re+De*7.3),Ge=oe*.22+De*90+(he-.5)*160;He===0?u.moveTo(He,Ge):u.lineTo(He,Ge)}u.stroke(),u.lineWidth=2,u.shadowBlur=0,u.globalAlpha=t*.85,u.stroke()}u.globalCompositeOperation="source-over",u.globalAlpha=1}}},U=()=>{const ue=Array.from({length:Math.floor(g*.55)},()=>({x:v(0,m().width),y:v(0,m().height),r:v(16,28),a:v(.05,.1)}));let re=0;return{draw(J){re+=J*.23;const{width:ge,height:oe}=m();u.clearRect(0,0,ge,oe),ue.forEach(ve=>{const Re=(C(ve.x*.006,ve.y*.006+re)-.5)*18,De=(C(ve.x*.006+100,ve.y*.006+re)-.5)*16;ve.x+=Re*J,ve.y+=De*J,ve.x<-40&&(ve.x=ge+40),ve.x>ge+40&&(ve.x=-40),ve.y<-40&&(ve.y=oe+40),ve.y>oe+40&&(ve.y=-40);const Je=u.createRadialGradient(ve.x,ve.y,0,ve.x,ve.y,ve.r);Je.addColorStop(0,`rgba(255,255,255,${ve.a*t})`),Je.addColorStop(1,"rgba(255,255,255,0)"),u.fillStyle=Je,u.beginPath(),u.arc(ve.x,ve.y,ve.r,0,Math.PI*2),u.fill()})}}},L=()=>{let ue=[],re=0;const J=()=>{const ge=v(0,m().width),oe=v(0,m().height*.5),ve=v(0,m().width),Re=v(m().height*.4,m().height),De=12,Je=[{x:ge,y:oe}];for(let He=1;He<De-1;He++){const he=He/(De-1),Ge=ge+(ve-ge)*he+v(-14,14),st=oe+(Re-oe)*he+v(-14,14);Je.push({x:Ge,y:st})}Je.push({x:ve,y:Re}),ue.push({pts:Je,life:.18})};return{draw(ge){re-=ge,re<=0&&(J(),re=v(.25,.6)),u.fillStyle="rgba(0,0,0,0.12)",u.fillRect(0,0,m().width,m().height),ue.forEach(oe=>{oe.life-=ge;const ve=w(oe.life/.18,0,1);u.strokeStyle=`rgba(173,216,255,${.7*ve})`,u.lineWidth=2.2,u.beginPath(),u.moveTo(oe.pts[0].x,oe.pts[0].y);for(let Re=1;Re<oe.pts.length;Re++)u.lineTo(oe.pts[Re].x,oe.pts[Re].y);u.stroke()}),ue=ue.filter(oe=>oe.life>0)}}},X=()=>{const ue=Array.from({length:Math.floor(g*.4)},()=>({x:v(0,m().width),y:v(0,m().height),r:v(10,24),vr:v(-.6,.6),rot:v(0,Math.PI*2),hue:v(170,320)}));return{draw(re){u.clearRect(0,0,m().width,m().height),ue.forEach(J=>{J.rot+=J.vr*re,u.save(),u.translate(J.x,J.y),u.rotate(J.rot),u.strokeStyle=`hsla(${J.hue},90%,60%,0.8)`,u.lineWidth=1.5,u.shadowBlur=8,u.shadowColor=`hsla(${J.hue},90%,60%,0.9)`,u.beginPath(),u.moveTo(0,-J.r),u.lineTo(J.r*.866,J.r*.5),u.lineTo(-J.r*.866,J.r*.5),u.closePath(),u.stroke(),u.restore(),u.shadowBlur=0})}}},de=()=>{const ue=Array.from({length:Math.floor(g*.25)},()=>({x:v(-m().width*.2,m().width),y:v(-m().height*.1,m().height*.6),vx:v(60,110),vy:v(10,40),len:v(16,28),rot:v(-.2,.2)}));return{draw(re){u.clearRect(0,0,m().width,m().height),ue.forEach(J=>{J.x+=J.vx*re,J.y+=J.vy*re,J.x>m().width+40&&(J.x=-40,J.y=v(0,m().height*.5)),u.save(),u.translate(J.x,J.y),u.rotate(J.rot),u.fillStyle="rgba(255,255,255,0.9)",u.beginPath(),u.moveTo(0,0),u.lineTo(J.len,J.len*.4),u.lineTo(0,J.len*.2),u.closePath(),u.fill(),u.restore()})}}},B=(ue,re)=>{const[J,ge]=re?.vy??[80,160],oe=re?.font??"18px system-ui, Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji",ve=Array.from({length:Math.floor(g*.6)},()=>({x:v(0,m().width),y:v(-m().height,0),vy:v(J,ge),g:ue[Math.floor(Math.random()*ue.length)],rot:v(-.25,.25)}));return{draw(Re){const{width:De,height:Je}=m();u.clearRect(0,0,De,Je),u.font=oe,u.textBaseline="middle",ve.forEach(He=>{He.y+=He.vy*Re,He.y>Je+24&&(He.y=-24,He.x=v(0,De)),u.save(),u.translate(He.x,He.y),u.rotate(He.rot),u.globalAlpha=.9*t,u.fillText(He.g,0,0),u.restore()})}}},V=["","","","","","","","",""],O=["","","","",""],Z=["","",""],Q=["","",""],fe={none:()=>({draw:()=>{}}),starfield:k,snow:T,fireflies:E,confetti:P,bubbles:R,meteors:F,matrixDigits:M,sakura:D,aurora:I,smoke:U,electric:L,neonTriangles:X,paperPlanes:de,emojiRain:()=>B(V),heartsRain:()=>B(O,{vy:[70,130]}),coinsRain:()=>B(Z,{vy:[110,200]}),starsRain:()=>B(Q,{vy:[80,150]}),rain:()=>{const ue=Array.from({length:Math.floor(g*1.2)},()=>({x:v(0,m().width),y:v(-m().height,0),vy:v(280,420),len:v(10,20)}));return{draw(re){const{width:J,height:ge}=m();u.clearRect(0,0,J,ge),u.globalAlpha=t*.8,u.strokeStyle="rgba(200,220,255,0.9)",u.lineWidth=1,ue.forEach(oe=>{oe.y+=oe.vy*re,oe.y>ge&&(oe.y=-10,oe.x=Math.random()*J),u.beginPath(),u.moveTo(oe.x,oe.y),u.lineTo(oe.x,oe.y+oe.len),u.stroke()})}}},butterflies:()=>{const ue=Math.max(8,Math.floor(g*.22)),re=Array.from({length:ue},()=>({x:v(0,m().width),y:v(0,m().height*.6),t:v(0,Math.PI*2),s:v(.55,1.1),hue:v(290,350)}));return{draw(J){const{width:ge,height:oe}=m();u.clearRect(0,0,ge,oe),re.forEach(ve=>{ve.t+=J*ve.s,ve.x+=Math.cos(ve.t*1.2)*22*J,ve.y+=Math.sin(ve.t*1.4)*16*J,ve.x<0&&(ve.x=ge),ve.x>ge&&(ve.x=0),ve.y<0&&(ve.y=oe),ve.y>oe&&(ve.y=0);const Re=(Math.sin(ve.t*10)+1)/2;u.save(),u.translate(ve.x,ve.y),u.fillStyle=`hsla(${ve.hue},90%,70%,${.85*t})`,u.beginPath(),u.ellipse(-7,0,10,6+Re*3,0,0,Math.PI*2),u.fill(),u.beginPath(),u.ellipse(7,0,10,6+Re*3,0,0,Math.PI*2),u.fill(),u.fillStyle=`hsla(${ve.hue},60%,35%,${.9*t})`,u.fillRect(-1.5,-5,3,10),u.strokeStyle=`hsla(${ve.hue},60%,35%,${.9*t})`,u.lineWidth=1,u.beginPath(),u.moveTo(0,-5),u.quadraticCurveTo(-3,-9,-4,-11),u.moveTo(0,-5),u.quadraticCurveTo(3,-9,4,-11),u.stroke(),u.restore()})}}},musicNotes:()=>{const ue=["","","","","",""],re=Array.from({length:Math.floor(g*.6)},()=>({x:v(0,m().width),y:v(-m().height,0),vy:v(60,120),ch:ue[Math.floor(Math.random()*ue.length)],rot:v(-.3,.3)}));return{draw(J){const{width:ge,height:oe}=m();u.clearRect(0,0,ge,oe),re.forEach(ve=>{ve.y+=ve.vy*J,ve.y>oe+20&&(ve.y=-20,ve.x=Math.random()*ge),u.save(),u.translate(ve.x,ve.y),u.rotate(ve.rot),u.font="18px ui-serif, Georgia, Times New Roman, serif",u.fillStyle=`rgba(255,255,255,${.85*t})`,u.fillText(ve.ch,0,0),u.restore()})}}},sparkles:()=>{const ue=Array.from({length:g},()=>({x:v(0,m().width),y:v(0,m().height),t:v(0,Math.PI*2),s:v(.6,1.4)}));return{draw(re){u.clearRect(0,0,m().width,m().height),ue.forEach(J=>{J.t+=re*2;const ge=.25+.75*((Math.sin(J.t*4)+1)/2),oe=2+2*Math.sin(J.t)*J.s;u.save(),u.translate(J.x,J.y),u.globalAlpha=ge*t,u.strokeStyle="rgba(255,255,255,0.9)",u.lineWidth=1,u.beginPath(),u.moveTo(-oe,0),u.lineTo(oe,0),u.moveTo(0,-oe),u.lineTo(0,oe),u.stroke(),u.restore()})}}}},ie=(fe[r]??fe.starfield)();let Te=performance.now();const pe=ue=>{const re=Math.min(.05,(ue-Te)/1e3);Te=ue,u.globalAlpha=t,ie.draw(re),l.current=requestAnimationFrame(pe)};return l.current=requestAnimationFrame(pe),()=>{l.current&&cancelAnimationFrame(l.current),p.disconnect()}},[r,e,t,s,n]),o.jsx("canvas",{ref:i})}const li=[{id:"1",username:"@TestUser",description:"Check out this beat! ",likes:2100,comments:156,shares:89,backgroundColor:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:"2",username:"@BeatMaker",description:"New track preview! What do you think? ",likes:1800,comments:234,shares:67,backgroundColor:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},{id:"3",username:"@ProducerLife",description:"Studio session vibes ",likes:3200,comments:445,shares:123,backgroundColor:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{id:"4",username:"@MusicCreator",description:"Late night inspiration ",likes:2650,comments:189,shares:78,backgroundColor:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},{id:"5",username:"@SoundDesigner",description:"Experimental sounds ",likes:1950,comments:267,shares:95,backgroundColor:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"}];function EV({width:r=300,height:e=400}){const[t,s]=b.useState(0),[n,i]=b.useState(!1),[l,d]=b.useState(!0),[u,h]=b.useState(0),[p,m]=b.useState(0),[g,y]=b.useState(!1),[v,w]=b.useState(0),[j,C]=b.useState(!1),N=b.useRef(null),k=li[t],T=b.useCallback(L=>{if(g)return;const X=L.targetTouches[0].clientY;h(X),m(X),C(!0),w(0)},[g]),E=b.useCallback(L=>{if(!j||g)return;L.preventDefault();const X=L.targetTouches[0].clientY,de=X-u;let B=de*.6;(t===0&&de>0||t===li.length-1&&de<0)&&(B=de*.3),w(B),m(X)},[u,j,t,g]),D=b.useCallback(()=>{if(!j||g)return;C(!1);const L=u-p,X=Math.abs(L),de=25,B=40,V=L>de||L>10&&X>B,O=L<-de||L<-10&&X>B;V&&t<li.length-1?P():O&&t>0&&R(),w(0)},[u,p,t,j,g]),M=b.useCallback(L=>{if(L.preventDefault(),g)return;const X=L.deltaY,de=50;X>de&&t<li.length-1?P():X<-de&&t>0&&R()},[t,g]),P=()=>{t<li.length-1&&!g&&(y(!0),w(0),s(L=>L+1),setTimeout(()=>y(!1),150))},R=()=>{t>0&&!g&&(y(!0),w(0),s(L=>L-1),setTimeout(()=>y(!1),150))};b.useEffect(()=>{const L=N.current;if(L)return L.addEventListener("wheel",M,{passive:!1}),()=>{L.removeEventListener("wheel",M)}},[M]);const F=L=>L>=1e3?(L/1e3).toFixed(1)+"K":L.toString(),I=()=>{i(!n)},U=()=>{d(!l)};return o.jsxs("div",{ref:N,className:"relative w-full h-full bg-black rounded-lg overflow-hidden",onTouchStart:T,onTouchMove:E,onTouchEnd:D,style:{width:`${r}px`,height:`${e}px`,touchAction:"pan-y",userSelect:"none",WebkitUserSelect:"none",msUserSelect:"none"},children:[o.jsxs("div",{className:"absolute inset-0 ease-out",style:{background:k.backgroundColor,transform:`translateY(${v}px)`,opacity:g?.95:1,transition:j?"none":"all 150ms ease-out"},children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("button",{onClick:I,className:"w-14 h-14 rounded-full bg-black/30 hover:bg-black/50 border-2 border-white/50 backdrop-blur-sm transition-all flex items-center justify-center",children:n?o.jsx(Yh,{className:"w-6 h-6 text-white fill-white"}):o.jsx(_c,{className:"w-6 h-6 text-white fill-white ml-0.5"})})}),n&&o.jsx("div",{className:"absolute bottom-20 left-4 flex items-end gap-1",children:[...Array(6)].map((L,X)=>o.jsx("div",{className:"w-1 bg-white rounded-full opacity-80",style:{height:`${Math.random()*16+8}px`,animation:`audioVisualization ${Math.random()*.4+.6}s ease-in-out infinite alternate`}},X))}),o.jsx("button",{onClick:U,className:"absolute top-4 right-4 w-8 h-8 bg-black/30 backdrop-blur-sm rounded-full flex items-center justify-center",children:l?o.jsx(q3,{className:"w-4 h-4 text-white"}):o.jsx(YC,{className:"w-4 h-4 text-white"})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsxs("div",{className:"flex-1 pr-4",children:[o.jsx("p",{className:"text-white font-semibold text-sm mb-1",children:k.username}),o.jsx("p",{className:"text-white/90 text-sm mb-3",children:k.description}),o.jsxs("div",{className:"flex items-center gap-4 text-white/80 text-xs",children:[o.jsxs("span",{children:[" ",F(k.likes)]}),o.jsxs("span",{children:[" ",F(k.comments)]}),o.jsxs("span",{children:[" ",F(k.shares)]})]})]}),o.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[o.jsx("button",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm hover:bg-white/20 transition-colors",children:o.jsx(Mo,{className:"w-5 h-5 text-white"})}),o.jsx("button",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm hover:bg-white/20 transition-colors",children:o.jsx(Sr,{className:"w-5 h-5 text-white"})}),o.jsx("button",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm hover:bg-white/20 transition-colors",children:o.jsx(UC,{className:"w-5 h-5 text-white"})})]})]})}),o.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex flex-col gap-1",children:li.map((L,X)=>o.jsx("div",{className:`w-1 h-6 rounded-full transition-all cursor-pointer hover:bg-white/70 ${X===t?"bg-white":"bg-white/40"}`,onClick:()=>{!g&&X!==t&&(y(!0),s(X),w(0),setTimeout(()=>y(!1),150))}},X))}),t===0&&o.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 text-white/60 text-xs bg-black/30 px-2 py-1 rounded backdrop-blur-sm",children:"Swipe  or scroll for more videos"})]}),o.jsxs("div",{className:"absolute top-4 left-4 bg-black/30 backdrop-blur-sm px-2 py-1 rounded text-xs text-white",children:[t+1," / ",li.length]}),o.jsx("style",{jsx:!0,children:`
        @keyframes audioVisualization {
          0% { height: 8px; }
          100% { height: 20px; }
        }
      `})]})}function PV({title:r="Late Night Beats ",isLive:e=!0,viewerCount:t=127,category:s="Music Creation",thumbnail:n}){const[i,l]=b.useState(!1),[d,u]=b.useState(t);b.useEffect(()=>{if(!e)return;const p=setInterval(()=>{u(m=>{const g=Math.floor(Math.random()*6)-2;return Math.max(50,m+g)})},3e3);return()=>clearInterval(p)},[e]);const h=()=>{l(!i)};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"relative flex-1 min-h-0 mb-3",children:o.jsxs("div",{className:"w-full h-full rounded-lg overflow-hidden relative",style:{background:n?`url(${n})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center"},children:[e&&o.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-2",children:o.jsxs("div",{className:"px-2 py-1 rounded-full flex items-center gap-1.5",style:{backgroundColor:"#DC2626",animation:"pulse 2s ease-in-out infinite"},children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),o.jsx("span",{className:"text-white text-xs font-semibold",children:"LIVE"})]})}),o.jsx("div",{className:"absolute top-3 right-3",children:o.jsxs("div",{className:"px-2 py-1 rounded-full backdrop-blur-md flex items-center gap-1",style:{backgroundColor:"rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[o.jsx(wi,{className:"w-3 h-3 text-white"}),o.jsx("span",{className:"text-white text-xs font-medium",children:d})]})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(Se,{onClick:h,className:"w-14 h-14 rounded-full bg-black/50 hover:bg-black/70 border-2 border-white/30 backdrop-blur-sm transition-all",style:{background:i?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(8px)"},children:i?o.jsx(Yh,{className:"w-6 h-6 text-white fill-white"}):o.jsx(_c,{className:"w-6 h-6 text-white fill-white ml-0.5"})})}),i&&o.jsx("div",{className:"absolute bottom-3 left-3 flex items-end gap-1",children:[...Array(8)].map((p,m)=>o.jsx("div",{className:"w-1 bg-white rounded-full",style:{height:`${Math.random()*20+10}px`,animation:`audioVisualization ${Math.random()*.5+.5}s ease-in-out infinite alternate`,opacity:.8}},m))})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sm mb-1",style:{color:"#E6ECF3"},children:r}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ht,{style:{backgroundColor:"rgba(99, 179, 255, 0.1)",color:"#63B3FF",fontSize:"10px"},children:s}),e&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(m3,{className:"w-3 h-3",style:{color:"#DC2626"}}),o.jsx("span",{className:"text-xs",style:{color:"#DC2626"},children:"Live"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"p-1.5 rounded hover:bg-gray-700 transition-colors",children:o.jsx(Mo,{className:"w-4 h-4 text-gray-400 hover:text-red-400"})}),o.jsx("button",{className:"p-1.5 rounded hover:bg-gray-700 transition-colors",children:o.jsx(Sr,{className:"w-4 h-4 text-gray-400 hover:text-blue-400"})}),o.jsx("button",{className:"p-1.5 rounded hover:bg-gray-700 transition-colors",children:o.jsx(UC,{className:"w-4 h-4 text-gray-400 hover:text-green-400"})})]}),o.jsx(Se,{className:"text-xs px-3 py-1.5 h-auto",style:{background:e?"linear-gradient(90deg, #DC2626 0%, #EF4444 100%)":"linear-gradient(90deg, #3B82F6 0%, #1D4ED8 100%)",color:"white",border:"none"},onClick:()=>console.log(e?"Join stream":"Watch recording"),children:e?"Join Stream":"Watch"})]})]}),o.jsx("style",{jsx:!0,children:`
        @keyframes audioVisualization {
          0% { height: 8px; }
          100% { height: 24px; }
        }
      `})]})}const sh=[{id:"profile-header",type:"header",x:24,y:24,w:980,h:180,locked:!0,movable:!0,resizable:!0,style:{kind:"solid",color:"rgba(16,22,36,.92)",radius:16,border:"1px solid rgba(255,255,255,.08)",shadow:"0 12px 30px rgba(0,0,0,.24)"}},{id:"new-drops",type:"new-drops",x:24,y:220,w:520,h:160,style:{kind:"solid",color:"rgba(16,22,36,.92)",radius:16,border:"1px solid rgba(255,255,255,.08)",shadow:"0 12px 30px rgba(0,0,0,.24)"}},{id:"your-posts",type:"your-posts",x:560,y:220,w:520,h:160,style:{kind:"solid",color:"rgba(16,22,36,.92)",radius:16,border:"1px solid rgba(255,255,255,.08)",shadow:"0 12px 30px rgba(0,0,0,.24)"}},{id:"comments",type:"comments",x:24,y:388,w:520,h:144,style:{kind:"solid",color:"rgba(16,22,36,.92)",radius:16,border:"1px solid rgba(255,255,255,.08)",shadow:"0 12px 30px rgba(0,0,0,.24)"}},{id:"links",type:"links",x:560,y:388,w:520,h:144,style:{kind:"solid",color:"rgba(16,22,36,.92)",radius:16,border:"1px solid rgba(255,255,255,.08)",shadow:"0 12px 30px rgba(0,0,0,.24)"}},{id:"collection",type:"collection",x:24,y:544,w:1056,h:160,style:{kind:"solid",color:"rgba(16,22,36,.92)",radius:16,border:"1px solid rgba(255,255,255,.08)",shadow:"0 12px 30px rgba(0,0,0,.24)"}},{id:"chalk",type:"chalkboard",x:24,y:712,w:1056,h:190,locked:!0,movable:!0,resizable:!0,style:{kind:"solid",color:"rgba(16,22,36,.92)",radius:16,border:"1px solid rgba(255,255,255,.08)",shadow:"0 12px 30px rgba(0,0,0,.24)"}},{id:"shop",type:"shop",x:24,y:914,w:520,h:150,style:{kind:"solid",color:"rgba(16,22,36,.92)",radius:16,border:"1px solid rgba(255,255,255,.08)",shadow:"0 12px 30px rgba(0,0,0,.24)"}},{id:"friends",type:"friends",x:560,y:914,w:520,h:150,style:{kind:"solid",color:"rgba(16,22,36,.92)",radius:16,border:"1px solid rgba(255,255,255,.08)",shadow:"0 12px 30px rgba(0,0,0,.24)"}}];function DV(r){localStorage.setItem("profile.blocks",JSON.stringify(r))}function AV(){try{return JSON.parse(localStorage.getItem("profile.blocks")||"[]")}catch{return[]}}function RV(r){switch(r){case"purple":return"linear-gradient(135deg, #615CFF, #8F63FF)";case"mint":return"linear-gradient(135deg, #00F5D4, #A78BFA)";case"gold":return"linear-gradient(135deg, #FFD700, #FFB347)";case"dark":default:return"radial-gradient(1200px 800px at 25% 0%, #0e1626 0%, #0b1322 45%, #091021 100%)"}}function OV({block:r,onDelete:e,onStyleChange:t,children:s}){const[n,i]=b.useState(!0);b.useLayoutEffect(()=>{i(r.visible!==!1)},[r.visible]);const l=()=>{e()},d=()=>{i(!n)},{style:u={}}=r,h=u.kind==="linear"?`linear-gradient(${u.angle??135}deg, ${u.from}, ${u.to})`:u.color??"rgba(16,22,36,.92)";return o.jsxs("div",{className:"block-frame",style:{background:h,borderRadius:(u.radius??16)+"px",border:u.border??"1px solid rgba(255,255,255,.08)",boxShadow:u.shadow??"0 12px 30px rgba(0,0,0,.24)",width:"100%",height:"100%",position:"relative"},children:[o.jsxs("div",{className:"block-toolbar",children:[o.jsx("span",{className:"block-drag-handle",children:""}),o.jsx("button",{className:`eye ${n?"on":"off"}`,onClick:d,title:n?"Hide block":"Show block",style:{background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",color:n?"#5af5d0":"#ff6b6b",borderRadius:"8px",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},children:n?"":""}),r.type!=="header"&&r.type!=="chalkboard"&&o.jsx("button",{className:"icon-btn",title:"Delete",onClick:l,children:""}),o.jsx(FV,{current:u,onChange:t})]}),o.jsx("div",{className:"block-content",children:s})]})}function FV({current:r,onChange:e}){const[t,s]=b.useState(!1),n=[{kind:"solid",color:"rgba(16,22,36,.92)",label:"Dark"},{kind:"solid",color:"rgba(67,163,255,.15)",label:"Blue"},{kind:"linear",from:"#615CFF",to:"#8F63FF",angle:135,label:"Purple"},{kind:"linear",from:"#00F5D4",to:"#A78BFA",angle:135,label:"Mint"}];return o.jsxs("div",{className:"relative",children:[o.jsx("button",{className:"icon-btn",onClick:()=>s(!t),title:"Change style",children:""}),t&&o.jsx("div",{className:"absolute top-8 right-0 bg-gray-800 border border-gray-600 rounded p-2 z-50",children:o.jsx("div",{className:"grid grid-cols-2 gap-1",children:n.map((i,l)=>o.jsx("button",{className:"w-8 h-6 rounded border border-gray-600 hover:scale-110 transition-transform",style:{background:i.kind==="solid"?i.color:`linear-gradient(${i.angle}deg, ${i.from}, ${i.to})`},onClick:()=>{e({...r,kind:i.kind,color:i.color,from:i.from,to:i.to,angle:i.angle}),s(!1)},title:i.label},l))})})]})}const LV=b.forwardRef(({initialBlocks:r=sh,onBlocksChange:e,snapToGrid:t=!1,editMode:s=!0,backgroundCSS:n,particleEffect:i,currentSheet:l,onDrop:d,onBlockSelect:u,showGridLines:h=!1,canvasBackground:p="dark"},m)=>{const[g,y]=b.useState(r),[v,w]=b.useState(1),j=b.useRef(null),C=b.useRef(null),{guides:N,snapRect:k,clearGuides:T}=TV(g.map(B=>({id:B.id,x:B.x,y:B.y,w:B.w,h:B.h}))),E=()=>{if(!j.current||!g.length)return;const B=120,V=Math.max(...g.map(Z=>Z.x+Z.w),1200),O=Math.max(...g.map(Z=>Z.y+Z.h),900);j.current.style.width=`${V+B}px`,j.current.style.height=`${O+B}px`};b.useLayoutEffect(()=>{j.current&&(j.current.style.transformOrigin="0 0")},[]),b.useLayoutEffect(()=>{E()},[g.length]),b.useLayoutEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]),b.useImperativeHandle(m,()=>({addBlock:(B,V,O)=>{I(B,V,O)},updateBlock:B=>{M(B.id,B)},getBlocks:()=>g}),[g]);const D=B=>{w(B),j.current&&(j.current.style.transform=`scale(${B})`)},M=(B,V)=>{y(O=>{const Z=O.map(Q=>Q.id===B?{...Q,...V}:Q);return C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{e?.(Z),C.current=null},0),Z})},P=16,R=(B,V)=>{const O=Math.round(B/P)*P,Z=Math.round(V/P)*P;return{x:O,y:Z}},F=B=>{const V=g.find(O=>O.id===B);V&&(y(O=>{const Z=O.filter(Q=>Q.id!==B);return setTimeout(()=>e?.(Z),0),Z}),Lh("Block deleted",{action:{label:"Undo",onClick:()=>{y(O=>{const Z=[...O,V];return setTimeout(()=>e?.(Z),0),Z})}},duration:3e3}))},I=(B,V,O)=>{const Z={id:crypto.randomUUID(),type:B,x:V,y:O,w:360,h:200,style:{kind:"solid",color:"rgba(14,19,28,.78)",radius:16,border:"1px solid rgba(148,163,184,.18)",shadow:"0 8px 24px rgba(0,0,0,.35)"}};y(Q=>{const W=[...Q,Z];return setTimeout(()=>e?.(W),0),W})},U=()=>{y(sh),setTimeout(()=>e?.(sh),0)},L=()=>{DV(g),console.log("Layout saved!")},X=()=>{const B=AV();B.length>0?(y(B),setTimeout(()=>e?.(B),0)):U()},de=B=>{switch(B.type){case"header":return o.jsx(MV,{});case"chalkboard":return o.jsx(_V,{blockId:B.id});case"new-drops":return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(Na,{className:"w-4 h-4"})," New Drops"]}),o.jsx("div",{className:"space-y-2",children:["Midnight Vibes","Summer Heat"].map((V,O)=>o.jsxs("div",{className:"flex items-center gap-2 bg-gray-800/50 p-2 rounded",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded flex items-center justify-center text-sm",children:O===0?"":""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:V}),o.jsx("p",{className:"text-xs opacity-70",children:O===0?"2 days ago":"5 days ago"})]})]},O))})]});case"your-posts":return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(BC,{className:"w-4 h-4"})," Your Posts"]}),o.jsxs("div",{className:"bg-gray-800/50 p-3 rounded",children:[o.jsx("p",{className:"text-sm font-medium mb-1",children:"Just dropped a new beat pack!"}),o.jsx("p",{className:"text-xs opacity-70",children:"Community  3 days ago"})]})]});case"comments":return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(Sr,{className:"w-4 h-4"})," Comments"]}),o.jsxs("div",{className:"bg-gray-800/50 p-3 rounded",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-xs",children:"U"}),o.jsx("span",{className:"text-sm font-medium",children:"User123"})]}),o.jsx("p",{className:"text-sm opacity-80",children:'"Amazing beats! Keep it up! "'})]})]});case"links":return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(bw,{className:"w-4 h-4"})," Links"]}),o.jsx("div",{className:"space-y-2",children:["My SoundCloud","YouTube Channel"].map((V,O)=>o.jsxs("a",{href:"#",className:"flex items-center gap-2 bg-gray-800/50 p-2 rounded hover:bg-gray-700/50 transition-colors",children:[o.jsx(bw,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:V})]},O))})]});case"collection":return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(Na,{className:"w-4 h-4"})," My Collection"]}),o.jsx("div",{className:"flex-1 flex items-center",children:o.jsx("div",{className:"flex gap-2 flex-wrap",children:["","","",""].map((V,O)=>o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-500 rounded flex items-center justify-center",children:V},O))})})]});case"shop":return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(s3,{className:"w-4 h-4"})," Shop"]}),o.jsxs("div",{className:"bg-gray-800/50 p-3 rounded",children:[o.jsx("div",{className:"w-full h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded mb-2"}),o.jsx("p",{className:"text-xs font-medium",children:"Beat Pack Vol. 1"}),o.jsx("p",{className:"text-xs opacity-70",children:" 299"})]})]});case"friends":return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(ss,{className:"w-4 h-4"})," Friends"]}),o.jsxs("div",{className:"flex -space-x-2",children:[[1,2,3].map(V=>o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-red-500 to-pink-500 rounded-full border-2 border-gray-800"},V)),o.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full border-2 border-gray-800 flex items-center justify-center",children:o.jsx("span",{className:"text-xs",children:"+12"})})]})]});case"donators":return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(Mo,{className:"w-4 h-4"})," Donators"]}),o.jsx("div",{className:"space-y-2",children:["MusicLover42","BeatFan2024"].map((V,O)=>o.jsxs("div",{className:"flex items-center gap-2 bg-gray-800/50 p-2 rounded",children:[o.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-full flex items-center justify-center text-xs",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:V}),o.jsxs("p",{className:"text-xs opacity-70",children:[" ",O===0?"500":"250"," stars"]})]})]},O))})]});case"monthly-supporters":return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[o.jsx(rt,{className:"w-4 h-4"})," Monthly Supporters"]}),o.jsx("div",{className:"space-y-2",children:["ProducerPro","SynthLover","Collaborator1"].map((V,O)=>o.jsxs("div",{className:"flex items-center gap-2 bg-gray-800/50 p-2 rounded",children:[o.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full flex items-center justify-center text-xs",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:V}),o.jsx("p",{className:"text-xs opacity-70",children:O<2?"Active":"2 months"})]})]},O))})]});case"videos":return o.jsx(EV,{width:B.w,height:B.h});case"stream":return o.jsx(PV,{});default:return o.jsx("div",{className:"h-full flex items-center justify-center opacity-70",children:o.jsxs("p",{className:"text-sm",children:["Content for ",B.type]})})}};return o.jsxs("div",{className:"w-full h-full relative",children:[o.jsx("div",{className:"top-controls",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:L,className:"dropsource-btn-secondary text-xs",children:"Save Layout"}),o.jsx("button",{onClick:U,className:"dropsource-btn-secondary text-xs",children:"Reset Layout"}),o.jsx("button",{onClick:X,className:"dropsource-btn-secondary text-xs",children:"Load Layout"}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx("label",{className:"text-xs opacity-70",children:"Zoom:"}),o.jsx("input",{type:"range",min:"70",max:"130",value:v*100,onChange:B=>D(parseInt(B.target.value)/100),className:"w-16"}),o.jsxs("span",{className:"text-xs opacity-70",children:[Math.round(v*100),"%"]})]})]})}),o.jsx("div",{id:"profile-canvas",className:"profile-canvas",style:{background:RV(p),backgroundImage:h?"linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)":void 0,backgroundSize:h?"16px 16px":void 0},children:o.jsxs("div",{id:"profile-canvas-inner",ref:j,className:"profile-canvas-inner",children:[n&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:n,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",zIndex:0}}),o.jsx("div",{className:"canvas-sheet",style:{zIndex:1}}),i&&i!=="none"&&o.jsx(g_,{preset:i,density:"medium",opacity:1,zIndex:2}),N.v!==void 0&&o.jsx("div",{className:"guide-v",style:{left:N.v,zIndex:9999}}),N.h!==void 0&&o.jsx("div",{className:"guide-h",style:{top:N.h,zIndex:9999}}),g.map(B=>o.jsx(NV,{bounds:"#profile-canvas-inner",size:{width:B.w,height:B.h},position:{x:B.x,y:B.y},scale:v,enableResizing:B.resizable!==!1,disableDragging:B.movable===!1,dragHandleClassName:"block-drag-handle",onDrag:(V,O)=>{k(B.id,{id:B.id,x:O.x,y:O.y,w:B.w,h:B.h})},onDragStop:(V,O)=>{const Z=k(B.id,{id:B.id,x:O.x,y:O.y,w:B.w,h:B.h}),Q=R(Z.x,Z.y);M(B.id,{x:Q.x,y:Q.y}),T(),setTimeout(()=>E(),0)},onResizeStop:(V,O,Z,Q,W)=>{const ae=k(B.id,{id:B.id,x:W.x,y:W.y,w:Z.offsetWidth,h:Z.offsetHeight}),q=R(ae.x,ae.y);M(B.id,{w:ae.w??Z.offsetWidth,h:ae.h??Z.offsetHeight,x:q.x,y:q.y}),T(),setTimeout(()=>E(),0)},minWidth:360,minHeight:120,dragGrid:t?[16,16]:void 0,resizeGrid:t?[16,16]:void 0,children:o.jsx(OV,{block:B,onDelete:()=>!B.locked&&F(B.id),onStyleChange:V=>M(B.id,{style:V}),children:de(B)})},B.id))]})})]})}),zV=[{kind:"linear",from:"#6DC7FF",to:"#E6ABFF",angle:135},{kind:"linear",from:"#FFB56B",to:"#FD5E53",angle:135},{kind:"linear",from:"#00D2FF",to:"#3A47D5",angle:135},{kind:"radial",inner:"rgba(255,240,200,.25)",outer:"rgba(20,26,40,.9)"}],IV=["#121A26","#0F172A","#1E293B","#111827","#0B1220","#101828"];function BV({block:r,onChange:e}){return o.jsxs("div",{className:"grid gap-2 w-full max-w-full overflow-hidden",children:[o.jsx("div",{className:"text-xs opacity-70",children:"Solid"}),o.jsx("div",{className:"flex gap-1.5 flex-wrap max-w-full overflow-hidden",children:IV.map(t=>o.jsx("button",{"aria-label":t,onClick:()=>e({kind:"solid",color:t}),className:"flex-shrink-0",style:{width:24,height:24,borderRadius:6,background:t,border:"1px solid #223042"}},t))}),o.jsx("div",{className:"text-xs mt-3 opacity-70",children:"Gradients"}),o.jsx("div",{className:"flex gap-2 flex-wrap max-w-full overflow-hidden",children:zV.map((t,s)=>o.jsx("button",{onClick:()=>e(t),className:"flex-shrink-0",style:{width:80,height:24,borderRadius:6,border:"1px solid #223042",background:t.kind==="linear"?`linear-gradient(${t.angle??135}deg, ${t.from}, ${t.to})`:`radial-gradient(circle at 35% 30%, ${t.inner}, ${t.outer})`}},s))}),o.jsxs("div",{className:"mt-3 flex items-center gap-2 max-w-full",children:[o.jsx("label",{className:"text-xs opacity-70 flex-shrink-0",children:"Radius"}),o.jsx("input",{type:"range",min:8,max:28,defaultValue:r.style?.radius??18,onChange:t=>e({...r.style,radius:Number(t.target.value)}),className:"flex-1 min-w-0"})]})]})}function VV({block:r,onChange:e}){const t=s=>{e({...r,style:s})};return o.jsxs("div",{className:"space-y-3 p-3 dropsource-card",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Block Style"}),o.jsx(BV,{block:r,onChange:t})]})}const WV=[{key:"starfield",label:"Starfield",emoji:"",group:"Calm",description:"Streaming stars with occasional meteors"},{key:"aurora",label:"Aurora",emoji:"",group:"Calm",description:"Northern lights dancing across dark sky"},{key:"smoke",label:"Mystic Smoke",emoji:"",group:"Calm",description:"Ambient haze drifting softly"},{key:"snow",label:"Snow",emoji:"",group:"Calm",description:"Gentle snowfall with wind effects"},{key:"bubbles",label:"Bubbles",emoji:"",group:"Calm",description:"Floating soap bubbles rising up"},{key:"confetti",label:"Confetti",emoji:"",group:"Playful",description:"Colorful celebration confetti"},{key:"emojiRain",label:"Emoji Rain",emoji:"",group:"Playful",description:"Musical emojis falling from sky"},{key:"butterflies",label:"Butterflies",emoji:"",group:"Playful",description:"Butterflies with flapping wings"},{key:"starsRain",label:"Stars Rain",emoji:"",group:"Playful",description:"Twinkling stars falling down"},{key:"sparkles",label:"Sparkles",emoji:"",group:"Playful",description:"Quick celebratory shimmer"},{key:"matrixDigits",label:"Matrix",emoji:"",group:"Sci-Fi",description:"Green digital rain columns"},{key:"meteors",label:"Meteors",emoji:"",group:"Sci-Fi",description:"Fast-moving space meteors"},{key:"electric",label:"Electric",emoji:"",group:"Sci-Fi",description:"Lightning bolts flashing"},{key:"neonTriangles",label:"Neon",emoji:"",group:"Sci-Fi",description:"Glowing neon geometric shapes"},{key:"coinsRain",label:"Coins",emoji:"",group:"Sci-Fi",description:"Golden coins for achievements"},{key:"sakura",label:"Sakura",emoji:"",group:"Nature",description:"Cherry blossom petals falling"},{key:"heartsRain",label:"Hearts",emoji:"",group:"Nature",description:"Romantic hearts floating down"},{key:"fireflies",label:"Fireflies",emoji:"",group:"Nature",description:"Glowing bugs with gentle movement"},{key:"rain",label:"Rain",emoji:"",group:"Nature",description:"Fast diagonal raindrops"},{key:"musicNotes",label:"Music Notes",emoji:"",group:"Nature",description:"Musical notation symbols"},{key:"paperPlanes",label:"Paper Planes",emoji:"",group:"Nature",description:"Paper airplanes gliding across"}];function HV({value:r,onChange:e,density:t="medium",onDensityChange:s}){const n=["Calm","Playful","Sci-Fi","Nature"];return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Particle Effects"}),s&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs mb-2 opacity-70",children:"Intensity"}),o.jsx("div",{className:"flex gap-1",children:["low","medium","high"].map(i=>o.jsx("button",{onClick:()=>s(i),className:`flex-1 px-2 py-1 border rounded text-xs capitalize transition-all ${t===i?"border-white/30 bg-white/5 text-white":"border-white/10 hover:bg-white/5 text-white/70 hover:text-white"}`,children:i},i))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{className:`h-10 rounded border text-sm font-medium transition-all ${r?"border-white/10 hover:border-cyan-400/50 text-white/70 hover:text-white":"border-cyan-400/50 bg-cyan-400/10 text-cyan-400"}`,onClick:()=>e(void 0),title:"Disable particles",children:"None"}),n.map(i=>WV.filter(d=>d.group===i).map(d=>o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("div",{className:`rounded border p-2 cursor-pointer transition-all ${r===d.key?"border-cyan-400/50 bg-cyan-400/5 text-cyan-400":"border-white/10 hover:border-cyan-400/50 hover:bg-white/5 text-white/70 hover:text-white"}`,onClick:()=>e(d.key),children:o.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[o.jsxs("span",{children:[d.emoji," ",d.label]}),o.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10",children:d.group})]})})}),o.jsx(wt,{side:"right",className:"dropsource-card",children:o.jsx("p",{style:{fontSize:"var(--text-sm)"},children:d.description})})]},d.key)))]})]})}function UV(){return o.jsxs("div",{className:"advanced",children:[o.jsxs("div",{className:"card",children:[o.jsx("h4",{children:"Custom HTML / CSS (Tumblr/MySpace-style)"}),o.jsx("p",{className:"muted",children:"Paste custom CSS or light HTML to restyle your profile. (Sandboxed in demo)"}),o.jsx("textarea",{placeholder:"/* CSS here (demo placeholder) */",rows:8,disabled:!0}),o.jsx("div",{className:"hint",children:"In the full version you'll be able to theme containers, fonts, and colors."})]}),o.jsxs("div",{className:"card",children:[o.jsx("h4",{children:"AI Profile Helper (Preview)"}),o.jsx("p",{className:"muted",children:"Describe what you want and we'll suggest layout, colors and blocks."}),o.jsx("input",{className:"ai-input",placeholder:"e.g., cozy dark theme, neon accents, big header, grid gallery"}),o.jsxs("div",{className:"row",children:[o.jsx("button",{className:"cta",children:"Try Prompt"}),o.jsx("button",{className:"cta ghost",children:"Use Suggestion"})]}),o.jsxs("ul",{className:"muted small",children:[o.jsx("li",{children:' "minimal pastel with rounded cards"'}),o.jsx("li",{children:' "vaporwave gradient, center header, 2-col feed"'}),o.jsx("li",{children:' "mocha theme, photos first, chalkboard at bottom"'})]})]})]})}function $V(r,e){if(r.locked)return r;const t={radius:18,border:"1px solid #223042",shadow:"var(--elev-1)"};switch(e){case"calm":return{...r,style:{kind:"solid",color:"rgba(18,24,38,.86)",...t}};case"vibrant":return{...r,style:{kind:"linear",from:"#6DC7FF",to:"#E6ABFF",angle:135,...t}};case"cosmic":return{...r,style:{kind:"radial",inner:"rgba(110,80,255,.28)",outer:"rgba(10,14,24,.96)",...t}};case"minimal":return{...r,style:{kind:"solid",color:"#0B1220",border:"1px solid #1b2a3b",radius:14,shadow:"none"}}}}function GV(r,e){return e.map(t=>$V(t,r))}const YV=[{emoji:"",name:"paw",color:"#FFB039",label:"Paw"},{emoji:"",name:"heart",color:"#FF6BAA",label:"Heart"},{emoji:"",name:"fire",color:"#FF4757",label:"Fire"},{emoji:"",name:"sparkles",color:"#5BE9E9",label:"Sparkles"},{emoji:"",name:"skull",color:"#A78BFA",label:"Skull"}],XV=[{type:"collection",icon:"",label:"Collection",category:"Core"},{type:"new-drops",icon:"",label:"New Drops",category:"Content"},{type:"comments",icon:"",label:"Comments",category:"Social"},{type:"your-posts",icon:"",label:"Your Posts",category:"Content"},{type:"links",icon:"",label:"Links",category:"Social"},{type:"shop",icon:"",label:"Shop",category:"Commerce"},{type:"friends",icon:"",label:"Friends",category:"Social"},{type:"donators",icon:"",label:"Donators",category:"Social"},{type:"monthly-supporters",icon:"",label:"Monthly Supporters",category:"Social"},{type:"photos",icon:"",label:"Photo Grid",category:"Media"},{type:"videos",icon:"",label:"Video Player",category:"Media"},{type:"stream",icon:"",label:"Live Stream",category:"Media"},{type:"music-player",icon:"",label:"Music Player",category:"Media"},{type:"pinned-note",icon:"",label:"Pinned Note",category:"Content"},{type:"stats",icon:"",label:"Stats Block",category:"Core"},{type:"events",icon:"",label:"Events",category:"Content"},{type:"poll",icon:"",label:"Poll/Question",category:"Social"},{type:"mini-games",icon:"",label:"Mini Games",category:"Media"}];function KV({onNavigate:r}){const e=b.useRef(null),t=b.useRef(null),{flair:s}=u_(),[n,i]=b.useState("blocks"),[l,d]=b.useState(!0),[u,h]=b.useState(!1),[p,m]=b.useState(),[g,y]=b.useState("medium"),[v,w]=b.useState(null),[j,C]=b.useState(null),[N,k]=b.useState(sh),[T,E]=b.useState(!0),[D,M]=b.useState(!1),[P,R]=b.useState(!0),[F,I]=b.useState("dark"),[U,L]=b.useState(null),[X,de]=b.useState("calm"),[B,V]=b.useState(!1),[O,Z]=b.useState(1247),[Q,W]=b.useState(89),[ae,q]=b.useState(!1),[ce,we]=b.useState(12),[xe,se]=b.useState(2340),K=pe=>{const ue=t.current?.getBlocks()||[],re=GV(pe,ue);re.forEach(J=>{t.current?.updateBlock(J)}),de(pe),console.log(`Applied ${pe} theme to ${re.length} blocks`)},fe=(pe,ue)=>{I(pe),ue&&L(ue);const re=document.getElementById("profile-canvas");if(re)if(pe==="custom"&&ue)re.style.setProperty("--canvas-bg",`url(${ue})`),re.style.backgroundSize="cover",re.style.backgroundPosition="center",re.style.backgroundRepeat="no-repeat";else switch(re.style.backgroundSize="",re.style.backgroundPosition="",re.style.backgroundRepeat="",pe){case"dark":re.style.setProperty("--canvas-bg","radial-gradient(1200px 800px at 25% 0%, #0e1626 0%, #0b1322 45%, #091021 100%)");break;case"purple":re.style.setProperty("--canvas-bg","linear-gradient(135deg, #615CFF, #8F63FF)");break;case"mint":re.style.setProperty("--canvas-bg","linear-gradient(135deg, #00F5D4, #A78BFA)");break;case"gold":re.style.setProperty("--canvas-bg","linear-gradient(135deg, #FFD700, #FFB347)");break}},ie=pe=>{R(pe),document.body.setAttribute("data-theme",pe?"dark":"light")},Te=pe=>{const ue=pe.target.files?.[0];if(ue){const re=new FileReader;re.onload=J=>{const ge=J.target?.result;fe("custom",ge)},re.readAsDataURL(ue)}};return o.jsxs("div",{className:"h-full overflow-hidden dropsource-bg dropsource-text-primary",children:[o.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-black/20",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>r("community"),className:"dropsource-toolbar-button",children:o.jsx(Nc,{className:"w-4 h-4"})}),o.jsx("h1",{className:"text-xl font-semibold",children:"Enhanced Profile"})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(Se,{onClick:()=>h(!u),className:u?"dropsource-btn-primary":"dropsource-btn-secondary",children:[u?o.jsx(wi,{className:"w-4 h-4 mr-2"}):o.jsx(fD,{className:"w-4 h-4 mr-2"}),u?"Preview Mode":"Edit Mode"]})})]}),o.jsxs("div",{className:"flex h-full",children:[!u&&o.jsxs("div",{className:"profile-sidebar border-r border-gray-700 dropsource-panel overflow-y-auto flex flex-col",children:[o.jsx("div",{className:"p-4",children:o.jsx("div",{className:"space-y-2 mb-6",children:[{id:"blocks",label:"Add Blocks",icon:o.jsx(i3,{className:"w-4 h-4"})},{id:"appearance",label:"Appearance",icon:o.jsx(xs,{className:"w-4 h-4"})},{id:"particles",label:"Particles",icon:o.jsx(Br,{className:"w-4 h-4"})},{id:"gamification",label:"Achievements",icon:o.jsx(Ni,{className:"w-4 h-4"})},{id:"advanced",label:"Advanced",icon:o.jsx(ia,{className:"w-4 h-4"})}].map(pe=>o.jsxs("button",{onClick:()=>i(pe.id),className:`w-full flex items-center gap-3 p-3 rounded text-left transition-all ${n===pe.id?"dropsource-btn-primary":"dropsource-btn-ghost hover:dropsource-surface"}`,children:[pe.icon,pe.label]},pe.id))})}),o.jsx(Z7,{}),o.jsxs("div",{className:"flex-1 p-4 dropsource-custom-scrollbar",children:[n==="blocks"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Drag Blocks to Canvas"}),o.jsx("p",{className:"text-xs opacity-70 mb-4",children:"Drag any block from below onto your profile canvas to add it. Each block can be individually styled and positioned."}),["Core","Content","Social","Media","Commerce"].map(pe=>{const ue=XV.filter(re=>re.category===pe);return ue.length===0?null:o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"text-xs font-medium opacity-60 mb-2 uppercase tracking-wide",children:pe}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:ue.map(({type:re,icon:J,label:ge})=>o.jsxs("div",{draggable:!0,onDragStart:oe=>{w(re),oe.dataTransfer.setData("blockKind",re)},onDragEnd:()=>w(null),className:`dropsource-btn-secondary p-3 h-auto text-xs flex flex-col items-center gap-1 cursor-grab hover:scale-105 transition-all ${v===re?"scale-95 opacity-50":""}`,children:[o.jsx("span",{className:"text-sm",children:J}),o.jsx("span",{className:"text-center leading-tight",children:ge})]},re))})]},pe)})]})}),n==="appearance"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Canvas Background"}),o.jsx("p",{className:"text-xs opacity-70 mb-3",children:"Choose a background for your profile canvas."}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[o.jsx("button",{className:`h-12 rounded border transition-all hover:scale-105 ${F==="dark"?"ring-2 ring-cyan-400/40 border-cyan-400/50":"border-white/10"}`,style:{background:"radial-gradient(1200px 800px at 25% 0%, #0e1626 0%, #0b1322 45%, #091021 100%)"},title:"Dark theme",onClick:()=>fe("dark")}),o.jsx("button",{className:`h-12 rounded border transition-all hover:scale-105 ${F==="purple"?"ring-2 ring-cyan-400/40 border-cyan-400/50":"border-white/10"}`,style:{background:"linear-gradient(135deg, #615CFF, #8F63FF)"},title:"Purple gradient",onClick:()=>fe("purple")}),o.jsx("button",{className:`h-12 rounded border transition-all hover:scale-105 ${F==="mint"?"ring-2 ring-cyan-400/40 border-cyan-400/50":"border-white/10"}`,style:{background:"linear-gradient(135deg, #00F5D4, #A78BFA)"},title:"Mint gradient",onClick:()=>fe("mint")}),o.jsx("button",{className:`h-12 rounded border transition-all hover:scale-105 ${F==="gold"?"ring-2 ring-cyan-400/40 border-cyan-400/50":"border-white/10"}`,style:{background:"linear-gradient(135deg, #FFD700, #FFB347)"},title:"Gold gradient",onClick:()=>fe("gold")})]}),o.jsxs("div",{className:"mt-4",children:[o.jsxs("label",{className:"dropsource-btn-secondary cursor-pointer block text-center p-3",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:Te,className:"hidden"}),"Upload Custom Image"]}),U&&o.jsx("p",{className:"text-xs opacity-70 mt-2",children:"Custom background uploaded"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Global Themes"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{onClick:()=>K("calm"),className:`p-3 rounded border text-sm hover:bg-white/5 ${X==="calm"?"ring-2 ring-cyan-400/40 border-cyan-400/50":""}`,style:{borderColor:X==="calm"?"var(--dropsource-brand)":"var(--card-stroke)"},children:"Calm"}),o.jsx("button",{onClick:()=>K("vibrant"),className:`p-3 rounded border text-sm hover:bg-white/5 ${X==="vibrant"?"ring-2 ring-cyan-400/40 border-cyan-400/50":""}`,style:{borderColor:X==="vibrant"?"var(--dropsource-brand)":"var(--card-stroke)"},children:"Vibrant"}),o.jsx("button",{onClick:()=>K("cosmic"),className:`p-3 rounded border text-sm hover:bg-white/5 ${X==="cosmic"?"ring-2 ring-cyan-400/40 border-cyan-400/50":""}`,style:{borderColor:X==="cosmic"?"var(--dropsource-brand)":"var(--card-stroke)"},children:"Cosmic"}),o.jsx("button",{onClick:()=>K("minimal"),className:`p-3 rounded border text-sm hover:bg-white/5 ${X==="minimal"?"ring-2 ring-cyan-400/40 border-cyan-400/50":""}`,style:{borderColor:X==="minimal"?"var(--dropsource-brand)":"var(--card-stroke)"},children:"Minimal"})]})]}),j&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Selected Block Style"}),o.jsx(VV,{block:j,onChange:pe=>{C(pe),t.current?.updateBlock(pe)}})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Theme Options"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Snap to Grid (16px)"}),o.jsx(na,{checked:T,onCheckedChange:E})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Show Grid Lines"}),o.jsx(na,{checked:D,onCheckedChange:M})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Dark Mode"}),o.jsx(na,{checked:P,onCheckedChange:ie})]})]})]})]}),n==="particles"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx(HV,{value:p,onChange:pe=>m(pe),density:g,onDensityChange:y}),o.jsx("div",{children:o.jsx(qV,{})})]}),n==="gamification"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-lg p-4 border border-purple-500/30",children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(ic,{className:"w-4 h-4 text-purple-400"}),"Profile Stats"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-400",children:O}),o.jsx("div",{className:"text-xs text-gray-400",children:"Profile Views"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-400",children:Q}),o.jsx("div",{className:"text-xs text-gray-400",children:"Profile Likes"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["Level ",ce]}),o.jsx("div",{className:"text-xs text-gray-400",children:"Current Level"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-400",children:xe}),o.jsx("div",{className:"text-xs text-gray-400",children:"Total XP"})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(zs,{className:"w-4 h-4 text-yellow-400"}),"Quick Actions"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Se,{onClick:()=>{Z(pe=>pe+1),Lh.success("Profile viewed! +1 view")},className:"w-full dropsource-btn-secondary",children:[o.jsx(wi,{className:"w-4 h-4 mr-2"}),"View Profile (+1)"]}),o.jsxs(Se,{onClick:()=>{W(pe=>pe+1),se(pe=>pe+10),Lh.success("Profile liked! +10 XP")},className:"w-full dropsource-btn-secondary",children:[o.jsx(Heart,{className:"w-4 h-4 mr-2"}),"Like Profile (+10 XP)"]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(zC,{className:"w-4 h-4 text-green-400"}),"Recent Achievements"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3 p-2 bg-green-900/20 rounded border border-green-500/30",children:[o.jsx("div",{className:"text-lg",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-green-400",children:"Profile Designer"}),o.jsx("div",{className:"text-xs text-gray-400",children:"Customized your profile layout"})]}),o.jsx("div",{className:"text-xs text-green-400",children:"+50 XP"})]}),o.jsxs("div",{className:"flex items-center gap-3 p-2 bg-blue-900/20 rounded border border-blue-500/30",children:[o.jsx("div",{className:"text-lg",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-blue-400",children:"Profile Viewer"}),o.jsx("div",{className:"text-xs text-gray-400",children:"Viewed your profile 10 times"})]}),o.jsx("div",{className:"text-xs text-blue-400",children:"+25 XP"})]})]})]})]}),n==="advanced"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx(UV,{}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Layout Presets"}),o.jsx("p",{className:"text-xs opacity-70 mb-3",children:"Three professionally designed layouts that work great out of the box."}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Se,{onClick:()=>{const pe=document.getElementById("profile-canvas-inner");pe&&t.current&&tn(async()=>{const{layoutBalanced:ue,convertLayoutToBlocks:re}=await import("./defaultLayouts-C8nlqDbR.js");return{layoutBalanced:ue,convertLayoutToBlocks:re}},[]).then(({layoutBalanced:ue,convertLayoutToBlocks:re})=>{const J=pe.clientWidth||1400,ge=ue(J),oe=re(ge);k(oe),console.log("Applied Balanced layout with",oe.length,"blocks")})},className:"w-full dropsource-btn-primary",children:"Balanced Layout"}),o.jsx(Se,{onClick:()=>{const pe=document.getElementById("profile-canvas-inner");pe&&t.current&&tn(async()=>{const{layoutCreator:ue,convertLayoutToBlocks:re}=await import("./defaultLayouts-C8nlqDbR.js");return{layoutCreator:ue,convertLayoutToBlocks:re}},[]).then(({layoutCreator:ue,convertLayoutToBlocks:re})=>{const J=pe.clientWidth||1400,ge=ue(J),oe=re(ge);k(oe),console.log("Applied Creator layout with",oe.length,"blocks")})},className:"w-full dropsource-btn-secondary",children:"Creator Layout"}),o.jsx(Se,{onClick:()=>{const pe=document.getElementById("profile-canvas-inner");pe&&t.current&&tn(async()=>{const{layoutStorefront:ue,convertLayoutToBlocks:re}=await import("./defaultLayouts-C8nlqDbR.js");return{layoutStorefront:ue,convertLayoutToBlocks:re}},[]).then(({layoutStorefront:ue,convertLayoutToBlocks:re})=>{const J=pe.clientWidth||1400,ge=ue(J),oe=re(ge);k(oe),console.log("Applied Storefront layout with",oe.length,"blocks")})},className:"w-full dropsource-btn-secondary",children:"Storefront Layout"}),o.jsxs("div",{className:"text-xs opacity-50 space-y-1 mt-3",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Balanced:"})," Hero  activity  social  tools"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Creator:"})," Dense feed on left, tools on right"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Storefront:"})," Commerce blocks prioritized"]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Privacy Settings"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Public Profile"}),o.jsx(na,{defaultChecked:!0})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Allow Comments"}),o.jsx(na,{defaultChecked:!0})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Show Activity"}),o.jsx(na,{defaultChecked:!0})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Export Options"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Se,{className:"w-full dropsource-btn-secondary",children:"Export Profile as Image"}),o.jsx(Se,{className:"w-full dropsource-btn-secondary",children:"Share Profile Link"})]})]})]})]})]}),o.jsx("div",{className:"flex-1 p-6",onDrop:pe=>{pe.preventDefault();const ue=pe.dataTransfer.getData("blockKind");if(ue){const re=pe.currentTarget.getBoundingClientRect(),J=pe.clientX-re.left-24,ge=pe.clientY-re.top-24,oe=16,ve=Math.round(J/oe)*oe,Re=Math.round(ge/oe)*oe;t.current?.addBlock(ue,ve,Re)}},onDragOver:pe=>{pe.preventDefault()},children:o.jsxs("div",{id:"profile-root",className:"relative h-full",style:{minHeight:720},onPointerDown:pe=>{const ue=pe.currentTarget.getBoundingClientRect();e.current?.burst(pe.clientX-ue.left,pe.clientY-ue.top,s)},children:[o.jsx("div",{id:"bg-layer",className:"absolute inset-0",style:{zIndex:0}}),p&&p!=="none"&&o.jsx("div",{className:"absolute inset-0",style:{zIndex:1},children:o.jsx(g_,{preset:p,density:g,zIndex:1,opacity:g==="low"?.6:g==="medium"?.8:1},`${p}-${g}`)}),o.jsx("div",{id:"profile-canvas-inner",className:"relative",style:{zIndex:10},children:o.jsx(LV,{ref:t,initialBlocks:N,onBlocksChange:k,snapToGrid:T,editMode:l&&!u,onBlockSelect:C,showGridLines:D,canvasBackground:F},`profile-canvas-${u?"preview":"edit"}-${F}-${X}`)}),o.jsx(uV,{ref:e})]})})]})]})}function qV(){const{flair:r,setFlair:e}=u_();return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Tap Flair Animation"}),o.jsx("p",{className:"text-sm dropsource-text-secondary mb-3",children:"Choose an animation that plays when visitors tap anywhere on your profile"}),o.jsx("div",{className:"space-y-2",children:YV.map(t=>o.jsxs("button",{onClick:()=>e(t.name),className:`w-full flex items-center gap-3 p-3 rounded transition-all ${r===t.name?"dropsource-btn-primary":"dropsource-surface hover:dropsource-panel"}`,children:[o.jsx("span",{className:"text-lg",children:t.emoji}),o.jsx("span",{className:"flex-1 text-left",children:t.label}),r===t.name&&o.jsx(ht,{className:"text-xs bg-blue-500/20 text-blue-400 border-blue-500/30",children:"Active"})]},t.name))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Animation Settings"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Animation Speed"}),o.jsxs("select",{className:"dropsource-input w-20 text-sm",children:[o.jsx("option",{children:"Slow"}),o.jsx("option",{defaultValue:"",children:"Normal"}),o.jsx("option",{children:"Fast"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:"Particle Count"}),o.jsxs("select",{className:"dropsource-input w-20 text-sm",children:[o.jsx("option",{children:"Low"}),o.jsx("option",{defaultValue:"",children:"Medium"}),o.jsx("option",{children:"High"})]})]})]})]})]})}function ZV({onNavigate:r}){return o.jsxs(cV,{children:[o.jsx(QT,{trigger:!1,type:"achievement",children:o.jsx(KV,{onNavigate:r})}),o.jsx(lV,{})]})}var ng="rovingFocusGroup.onEntryFocus",JV={bubbles:!1,cancelable:!0},zc="RovingFocusGroup",[_0,x_,QV]=iy(zc),[eW,y_]=yn(zc,[QV]),[tW,rW]=eW(zc),v_=b.forwardRef((r,e)=>o.jsx(_0.Provider,{scope:r.__scopeRovingFocusGroup,children:o.jsx(_0.Slot,{scope:r.__scopeRovingFocusGroup,children:o.jsx(sW,{...r,ref:e})})}));v_.displayName=zc;var sW=b.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:n=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:p=!1,...m}=r,g=b.useRef(null),y=nt(e,g),v=Ec(i),[w,j]=bi({prop:l,defaultProp:d??null,onChange:u,caller:zc}),[C,N]=b.useState(!1),k=Mr(h),T=x_(t),E=b.useRef(!1),[D,M]=b.useState(0);return b.useEffect(()=>{const P=g.current;if(P)return P.addEventListener(ng,k),()=>P.removeEventListener(ng,k)},[k]),o.jsx(tW,{scope:t,orientation:s,dir:v,loop:n,currentTabStopId:w,onItemFocus:b.useCallback(P=>j(P),[j]),onItemShiftTab:b.useCallback(()=>N(!0),[]),onFocusableItemAdd:b.useCallback(()=>M(P=>P+1),[]),onFocusableItemRemove:b.useCallback(()=>M(P=>P-1),[]),children:o.jsx(Ze.div,{tabIndex:C||D===0?-1:0,"data-orientation":s,...m,ref:y,style:{outline:"none",...r.style},onMouseDown:Ye(r.onMouseDown,()=>{E.current=!0}),onFocus:Ye(r.onFocus,P=>{const R=!E.current;if(P.target===P.currentTarget&&R&&!C){const F=new CustomEvent(ng,JV);if(P.currentTarget.dispatchEvent(F),!F.defaultPrevented){const I=T().filter(B=>B.focusable),U=I.find(B=>B.active),L=I.find(B=>B.id===w),de=[U,L,...I].filter(Boolean).map(B=>B.ref.current);S_(de,p)}}E.current=!1}),onBlur:Ye(r.onBlur,()=>N(!1))})})}),b_="RovingFocusGroupItem",w_=b.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:n=!1,tabStopId:i,children:l,...d}=r,u=Da(),h=i||u,p=rW(b_,t),m=p.currentTabStopId===h,g=x_(t),{onFocusableItemAdd:y,onFocusableItemRemove:v,currentTabStopId:w}=p;return b.useEffect(()=>{if(s)return y(),()=>v()},[s,y,v]),o.jsx(_0.ItemSlot,{scope:t,id:h,focusable:s,active:n,children:o.jsx(Ze.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...d,ref:e,onMouseDown:Ye(r.onMouseDown,j=>{s?p.onItemFocus(h):j.preventDefault()}),onFocus:Ye(r.onFocus,()=>p.onItemFocus(h)),onKeyDown:Ye(r.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){p.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const C=iW(j,p.orientation,p.dir);if(C!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let k=g().filter(T=>T.focusable).map(T=>T.ref.current);if(C==="last")k.reverse();else if(C==="prev"||C==="next"){C==="prev"&&k.reverse();const T=k.indexOf(j.currentTarget);k=p.loop?aW(k,T+1):k.slice(T+1)}setTimeout(()=>S_(k))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:w!=null}):l})})});w_.displayName=b_;var nW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oW(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function iW(r,e,t){const s=oW(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return nW[s]}function S_(r,e=!1){const t=document.activeElement;for(const s of r)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function aW(r,e){return r.map((t,s)=>r[(e+s)%r.length])}var lW=v_,cW=w_,Cf="Tabs",[dW]=yn(Cf,[y_]),C_=y_(),[uW,uy]=dW(Cf),k_=b.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:d,activationMode:u="automatic",...h}=r,p=Ec(d),[m,g]=bi({prop:s,onChange:n,defaultProp:i??"",caller:Cf});return o.jsx(uW,{scope:t,baseId:Da(),value:m,onValueChange:g,orientation:l,dir:p,activationMode:u,children:o.jsx(Ze.div,{dir:p,"data-orientation":l,...h,ref:e})})});k_.displayName=Cf;var j_="TabsList",N_=b.forwardRef((r,e)=>{const{__scopeTabs:t,loop:s=!0,...n}=r,i=uy(j_,t),l=C_(t);return o.jsx(lW,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:s,children:o.jsx(Ze.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:e})})});N_.displayName=j_;var T_="TabsTrigger",__=b.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,disabled:n=!1,...i}=r,l=uy(T_,t),d=C_(t),u=P_(l.baseId,s),h=D_(l.baseId,s),p=s===l.value;return o.jsx(cW,{asChild:!0,...d,focusable:!n,active:p,children:o.jsx(Ze.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...i,ref:e,onMouseDown:Ye(r.onMouseDown,m=>{!n&&m.button===0&&m.ctrlKey===!1?l.onValueChange(s):m.preventDefault()}),onKeyDown:Ye(r.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(s)}),onFocus:Ye(r.onFocus,()=>{const m=l.activationMode!=="manual";!p&&!n&&m&&l.onValueChange(s)})})})});__.displayName=T_;var M_="TabsContent",E_=b.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,forceMount:n,children:i,...l}=r,d=uy(M_,t),u=P_(d.baseId,s),h=D_(d.baseId,s),p=s===d.value,m=b.useRef(p);return b.useEffect(()=>{const g=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(g)},[]),o.jsx(zo,{present:n||p,children:({present:g})=>o.jsx(Ze.div,{"data-state":p?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:h,tabIndex:0,...l,ref:e,style:{...r.style,animationDuration:m.current?"0s":void 0},children:g&&i})})});E_.displayName=M_;function P_(r,e){return`${r}-trigger-${e}`}function D_(r,e){return`${r}-content-${e}`}var hW=k_,fW=N_,pW=__,mW=E_;function hy({className:r,...e}){return o.jsx(hW,{"data-slot":"tabs",className:Et("flex flex-col gap-2",r),...e})}function fy({className:r,...e}){return o.jsx(fW,{"data-slot":"tabs-list",className:Et("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",r),...e})}function zn({className:r,...e}){return o.jsx(pW,{"data-slot":"tabs-trigger",className:Et("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...e})}function In({className:r,...e}){return o.jsx(mW,{"data-slot":"tabs-content",className:Et("flex-1 outline-none",r),...e})}const gW=[{rank:1,username:"l34d3rb04rdpwnm4st3r",stars:125e4,change:"+125k",avatar:""},{rank:2,username:"idontlik3l34d3rb04rdz",stars:847300,change:"+420k",avatar:""},{rank:3,username:"wetbeaver",stars:623400,change:"+23k",avatar:""},{rank:4,username:"makemusicordie",stars:501200,change:"+15k",avatar:""},{rank:5,username:"bassdropharderthanmycock",stars:387600,change:"+8k",avatar:""},{rank:6,username:"crybaby",stars:298400,change:"+12k",avatar:""},{rank:7,username:"prisonwallet",stars:245100,change:"+6k",avatar:""},{rank:8,username:"synth_wave_king",stars:198700,change:"+9k",avatar:""},{rank:9,username:"drum_machine_god",stars:167200,change:"+4k",avatar:""},{rank:10,username:"harmony_wizard",stars:145800,change:"+7k",avatar:""},{rank:11,username:"beat_master_2024",stars:134200,change:"+3k",avatar:""},{rank:12,username:"melody_maker_pro",stars:128600,change:"+5k",avatar:""},{rank:13,username:"bass_lord_supreme",stars:122400,change:"+2k",avatar:""},{rank:14,username:"rhythm_rider",stars:117800,change:"+4k",avatar:""},{rank:15,username:"sound_sculptor",stars:112300,change:"+6k",avatar:""},{rank:16,username:"beat_architect",stars:108700,change:"+3k",avatar:""},{rank:17,username:"music_maven",stars:104200,change:"+2k",avatar:""},{rank:18,username:"frequency_wizard",stars:99800,change:"+5k",avatar:""},{rank:19,username:"audio_alchemist",stars:95600,change:"+1k",avatar:""},{rank:20,username:"sonic_surgeon",stars:91400,change:"+4k",avatar:""},{rank:69,username:"diaperlover1979",stars:42069,change:"+420",avatar:""}],xW=[{rank:1,username:"studio_hermit_24_7",hours:2847,streak:156,avatar:""},{rank:2,username:"insomniac_producer",hours:2134,streak:98,avatar:""},{rank:3,username:"grind_machine_pro",hours:1876,streak:123,avatar:""},{rank:4,username:"beat_obsessed_user",hours:1654,streak:87,avatar:""},{rank:5,username:"rhythm_addict_99",hours:1432,streak:76,avatar:""},{rank:6,username:"music_marathon_man",hours:1298,streak:65,avatar:""},{rank:7,username:"endless_creativity",hours:1156,streak:54,avatar:""},{rank:8,username:"session_warrior",hours:1034,streak:43,avatar:""},{rank:9,username:"beat_lab_scientist",hours:923,streak:38,avatar:""},{rank:10,username:"sound_architect",hours:876,streak:32,avatar:""}],yW=[{rank:1,username:"achievement_hunter_supreme",completed:156,total:160,percentage:97.5,avatar:""},{rank:2,username:"goal_crusher_elite",completed:143,total:160,percentage:89.4,avatar:""},{rank:3,username:"task_master_pro_max",completed:138,total:160,percentage:86.3,avatar:""},{rank:4,username:"completion_king_2024",completed:134,total:160,percentage:83.8,avatar:""},{rank:5,username:"perfectionist_player",completed:129,total:160,percentage:80.6,avatar:""},{rank:6,username:"challenge_champion",completed:124,total:160,percentage:77.5,avatar:""},{rank:7,username:"quest_queen_beats",completed:118,total:160,percentage:73.8,avatar:""},{rank:8,username:"mission_master_music",completed:112,total:160,percentage:70,avatar:""},{rank:9,username:"objective_overlord",completed:107,total:160,percentage:66.9,avatar:""},{rank:10,username:"progress_pioneer",completed:103,total:160,percentage:64.4,avatar:""}],vW=r=>{switch(r){case 1:return o.jsx(ic,{className:"w-5 h-5 text-yellow-400"});case 2:return o.jsx(UD,{className:"w-5 h-5 text-gray-300"});case 3:return o.jsx(zC,{className:"w-5 h-5 text-amber-600"});default:return o.jsxs("span",{className:"w-5 h-5 flex items-center justify-center text-sm font-bold dropsource-text-secondary",children:["#",r]})}};function bW({onNavigate:r}){const e=({data:t,type:s})=>o.jsx(un,{className:"h-full",children:o.jsx("div",{className:"dropsource-spacing-sm flex flex-col",children:t.map((n,i)=>{const l=s==="stars"?t[0].stars:s==="time"?t[0].hours:t[0].percentage,d=s==="stars"?n.stars:s==="time"?n.hours:n.percentage,u=Math.max(d/l*100,5);return o.jsx("div",{className:`dropsource-collectible-card ${n.rank<=3?"dropsource-card-glow":""}`,children:o.jsxs("div",{className:"flex items-center dropsource-spacing-md",children:[o.jsx("div",{className:"flex items-center dropsource-spacing-xs",style:{minWidth:"40px"},children:vW(n.rank)}),o.jsx("div",{className:"flex items-center justify-center",style:{width:"40px",height:"40px",borderRadius:"var(--radius-sharp)",background:n.rank<=3?"linear-gradient(135deg, var(--dropsource-brand), var(--dropsource-brand-hover))":"var(--dropsource-surface)",fontSize:"var(--text-lg)"},children:n.avatar}),o.jsxs("div",{className:"flex-1 dropsource-spacing-xs flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"dropsource-text-primary",style:{fontSize:"var(--text-sm)",fontWeight:"500"},children:n.username}),o.jsxs("span",{className:"dropsource-text-primary",style:{fontSize:"var(--text-lg)",fontWeight:"600"},children:[s==="stars"&&o.jsxs("span",{style:{color:"var(--dropsource-brand)"},children:[(n.stars/1e3).toFixed(0),"k"]}),s==="time"&&o.jsxs("span",{style:{color:"var(--dropsource-brand)"},children:[n.hours,"h"]}),s==="achievements"&&o.jsxs("span",{style:{color:"var(--dropsource-success)"},children:[n.percentage,"%"]})]})]}),o.jsx("div",{className:"dropsource-progress-bar",children:o.jsx("div",{className:"dropsource-progress-fill",style:{width:`${u}%`,background:s==="achievements"?"linear-gradient(90deg, var(--dropsource-brand), var(--dropsource-success))":"linear-gradient(90deg, var(--dropsource-brand), var(--dropsource-brand-hover))"}})}),o.jsxs("div",{className:"flex items-center dropsource-spacing-xs",children:[s==="stars"&&o.jsxs(o.Fragment,{children:[o.jsx(rt,{className:"w-3 h-3 dropsource-icon-outlined",style:{color:"var(--dropsource-brand)"}}),o.jsxs("span",{className:"dropsource-text-tertiary",style:{fontSize:"var(--text-xs)"},children:[n.stars.toLocaleString()," (",n.change," this week)"]})]}),s==="time"&&o.jsxs(o.Fragment,{children:[o.jsx(ja,{className:"w-3 h-3 dropsource-icon-outlined",style:{color:"var(--dropsource-brand)"}}),o.jsxs("span",{className:"dropsource-text-tertiary",style:{fontSize:"var(--text-xs)"},children:[n.hours,"h total  ",n.streak," day streak"]})]}),s==="achievements"&&o.jsxs(o.Fragment,{children:[o.jsx(ms,{className:"w-3 h-3 dropsource-icon-outlined",style:{color:"var(--dropsource-success)"}}),o.jsxs("span",{className:"dropsource-text-tertiary",style:{fontSize:"var(--text-xs)"},children:[n.completed,"/",n.total," completed (",n.percentage,"%)"]})]})]})]})]})},i)})})});return o.jsxs("div",{className:"h-full dropsource-bg dropsource-text-primary overflow-hidden",children:[o.jsx("div",{className:"dropsource-padding-lg border-b",style:{borderBottomColor:"var(--dropsource-border)"},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center dropsource-spacing-md",children:[o.jsx(Ni,{className:"w-8 h-8 dropsource-icon-outlined",style:{color:"var(--dropsource-brand)"}}),o.jsx("h1",{className:"dropsource-text-primary",style:{fontSize:"var(--text-2xl)",fontWeight:"600",letterSpacing:"-0.02em"},children:"Leaderboards"})]}),o.jsxs("button",{onClick:()=>r("home"),className:"dropsource-btn-secondary dropsource-focus-visible flex items-center dropsource-spacing-xs",children:[o.jsx(RD,{className:"w-4 h-4 dropsource-icon-outlined"}),o.jsx("span",{children:"Back to Home"})]})]})}),o.jsx("div",{className:"dropsource-padding-lg pb-0",children:o.jsx("div",{className:"max-w-md mx-auto mb-6",children:o.jsx(e_,{})})}),o.jsx("div",{className:"flex-1 dropsource-padding-lg overflow-hidden",children:o.jsxs(hy,{defaultValue:"stars",className:"h-full flex flex-col",children:[o.jsxs(fy,{className:"dropsource-toolbar flex w-full",style:{marginBottom:"calc(var(--spacing-unit) * 3)"},children:[o.jsxs(zn,{value:"stars",className:"dropsource-btn-ghost flex items-center dropsource-spacing-xs flex-1",children:[o.jsx(rt,{className:"w-4 h-4 dropsource-icon-outlined"}),o.jsx("span",{children:"Top Stars"})]}),o.jsxs(zn,{value:"time",className:"dropsource-btn-ghost flex items-center dropsource-spacing-xs flex-1",children:[o.jsx(ja,{className:"w-4 h-4 dropsource-icon-outlined"}),o.jsx("span",{children:"Time Spent"})]}),o.jsxs(zn,{value:"achievements",className:"dropsource-btn-ghost flex items-center dropsource-spacing-xs flex-1",children:[o.jsx(ms,{className:"w-4 h-4 dropsource-icon-outlined"}),o.jsx("span",{children:"Achievements"})]})]}),o.jsxs("div",{className:"flex-1 overflow-hidden",children:[o.jsx(In,{value:"stars",className:"h-full",children:o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between",style:{marginBottom:"calc(var(--spacing-unit) * 2)"},children:[o.jsx("h3",{className:"dropsource-text-primary",style:{fontSize:"var(--text-lg)",fontWeight:"500"},children:"Star Collectors"}),o.jsx("span",{className:"dropsource-surface px-2 py-1",style:{fontSize:"var(--text-xs)",borderRadius:"var(--radius-sharp)",color:"var(--dropsource-brand)"},children:"Updated every hour"})]}),o.jsx(e,{data:gW,type:"stars"})]})}),o.jsx(In,{value:"time",className:"h-full",children:o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between",style:{marginBottom:"calc(var(--spacing-unit) * 2)"},children:[o.jsx("h3",{className:"dropsource-text-primary",style:{fontSize:"var(--text-lg)",fontWeight:"500"},children:"Time Champions"}),o.jsx("span",{className:"dropsource-surface px-2 py-1",style:{fontSize:"var(--text-xs)",borderRadius:"var(--radius-sharp)",color:"var(--dropsource-brand)"},children:"All-time stats"})]}),o.jsx(e,{data:xW,type:"time"})]})}),o.jsx(In,{value:"achievements",className:"h-full",children:o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between",style:{marginBottom:"calc(var(--spacing-unit) * 2)"},children:[o.jsx("h3",{className:"dropsource-text-primary",style:{fontSize:"var(--text-lg)",fontWeight:"500"},children:"Completionists"}),o.jsx("span",{className:"dropsource-surface px-2 py-1",style:{fontSize:"var(--text-xs)",borderRadius:"var(--radius-sharp)",color:"var(--dropsource-success)"},children:"Challenge masters"})]}),o.jsx(e,{data:yW,type:"achievements"})]})})]})]})}),o.jsx("div",{className:"dropsource-divider"}),o.jsx("div",{className:"dropsource-surface dropsource-padding-md",children:o.jsxs("div",{className:"dropsource-grid-3 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"dropsource-text-primary",style:{fontSize:"var(--text-xl)",fontWeight:"600"},children:"847"}),o.jsx("div",{className:"dropsource-text-tertiary",style:{fontSize:"var(--text-xs)"},children:"Active Users"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"dropsource-text-primary",style:{fontSize:"var(--text-xl)",fontWeight:"600",color:"var(--dropsource-brand)"},children:"12.4M"}),o.jsx("div",{className:"dropsource-text-tertiary",style:{fontSize:"var(--text-xs)"},children:"Total Stars Earned"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"dropsource-text-primary",style:{fontSize:"var(--text-xl)",fontWeight:"600"},children:"3,421"}),o.jsx("div",{className:"dropsource-text-tertiary",style:{fontSize:"var(--text-xs)"},children:"Songs Created"})]})]})})]})}const A_={Common:{background:"linear-gradient(135deg, #22C55E 0%, #16A34A 100%)",border:"#22C55E",text:"#DCFCE7",glow:"rgba(34, 197, 94, 0.3)"},Rare:{background:"linear-gradient(135deg, #B450C7 0%, #FF70A6 100%)",border:"#FF70A6",text:"#FDF2F8",glow:"rgba(255, 112, 166, 0.3)"},Premium:{background:"linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%)",border:"#3B82F6",text:"#DBEAFE",glow:"rgba(59, 130, 246, 0.3)"},Elite:{background:"linear-gradient(135deg, #6A00AD 0%, #3D94FF 100%)",border:"#3D94FF",text:"#EFF6FF",glow:"rgba(61, 148, 255, 0.3)"},Legendary:{background:"linear-gradient(135deg, #F59E0B 0%, #DC2626 100%)",border:"#F59E0B",text:"#FEF3C7",glow:"rgba(245, 158, 11, 0.3)"}},wW=(r,e=!1)=>e&&(r==="Elite"||r==="Legendary")?`${r} Card`:r,og=[{id:"1",name:"Fire Track",emoji:"",creator:"Drop Source Official",rarities:["common","rare","epic"],minted:2547,physicalPrice:15,type:"sticker",serialNumber:1247,dateMinted:"2024-01-15"},{id:"2",name:"Diamond Producer",emoji:"",creator:"Drop Source Official",rarities:["premium","legendary"],minted:892,physicalPrice:25,type:"card",serialNumber:567,dateMinted:"2024-01-12"},{id:"3",name:"Beat Master",emoji:"",creator:"community_beats",rarities:["common","rare"],minted:1834,physicalPrice:12,type:"sticker",serialNumber:892,dateMinted:"2024-01-10"},{id:"4",name:"Synth Lord",emoji:"",creator:"Drop Source Official",rarities:["rare","elite","legendary"],minted:654,physicalPrice:30,type:"card",serialNumber:234,dateMinted:"2024-01-08"},{id:"5",name:"Rhythm King",emoji:"",creator:"beat_royalty",rarities:["elite","legendary"],minted:321,physicalPrice:45,type:"card",serialNumber:89,dateMinted:"2024-01-05"},{id:"6",name:"Melody Maker",emoji:"",creator:"Drop Source Official",rarities:["common","premium","rare"],minted:3421,physicalPrice:10,type:"sticker",serialNumber:1456,dateMinted:"2024-01-03"},{id:"7",name:"Bass Drop",emoji:"",creator:"bass_legends",rarities:["common","rare","elite"],minted:1967,physicalPrice:18,type:"sticker",serialNumber:743,dateMinted:"2024-01-02"},{id:"8",name:"Studio Genius",emoji:"",creator:"Drop Source Official",rarities:["legendary"],minted:150,physicalPrice:75,type:"card",serialNumber:42,dateMinted:"2024-01-01"}],zu=r=>{const e=r.charAt(0).toUpperCase()+r.slice(1).toLowerCase(),t=A_[e];return t?t.border:"#A9B7C6"},SW=r=>{const e=r.charAt(0).toUpperCase()+r.slice(1).toLowerCase();if(!A_[e])return"text-gray-400 border-gray-400";switch(e){case"Common":return"text-green-400 border-green-400";case"Rare":return"text-pink-400 border-pink-400";case"Premium":return"text-sky-400 border-sky-400";case"Elite":return"text-blue-600 border-blue-600";case"Legendary":return"text-orange-400 border-orange-400";default:return"text-gray-400 border-gray-400"}};function CW({onNavigate:r}){const[e,t]=b.useState(null),[s,n]=b.useState(null),[i,l]=b.useState(!1),[d,u]=b.useState(!1),[h,p]=b.useState([]),[m,g]=b.useState("grid"),[y,v]=b.useState("all"),[w,j]=b.useState("name"),C=T=>{n(T),l(!0)},N=()=>{s&&(u(!0),p(T=>[...T,s.id]),setTimeout(()=>{u(!1),l(!1),n(null),alert(` Successfully purchased ${s.name}! Check your scrapbook.`)},2e3))},k=og.filter(T=>y==="all"||T.rarities.includes(y)).sort((T,E)=>{switch(w){case"name":return T.name.localeCompare(E.name);case"rarity":return T.rarities[0].localeCompare(E.rarities[0]);case"price":return T.physicalPrice-E.physicalPrice;case"minted":return E.minted-T.minted;default:return 0}});return o.jsx(ws,{children:o.jsxs("div",{className:"h-full overflow-hidden",style:{background:"var(--dropsource-bg)",color:"var(--dropsource-primary)"},children:[o.jsxs("div",{className:"flex items-center justify-between",style:{background:"rgba(18, 23, 35, 0.8)",borderBottom:"1px solid var(--dropsource-border)",padding:"calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3)",zIndex:"20",backdropFilter:"blur(12px)"},children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(Se,{onClick:()=>r("community"),className:"dropsource-nav-pill flex items-center gap-2",style:{background:"transparent",color:"var(--dropsource-secondary)",border:"none",padding:"calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2)"},children:[o.jsx(Nc,{className:"w-4 h-4"}),"Back"]})}),o.jsx("div",{className:"flex-1 text-center",children:o.jsx("h1",{style:{fontSize:"32px",fontWeight:"800",fontFamily:"Inter",background:"linear-gradient(90deg, #FFD166 0%, #5BE9E9 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-0.02em"},children:"Drop Source Book"})}),o.jsx("div",{className:"w-20"})]}),o.jsx("div",{className:"p-6 h-full overflow-y-auto dropsource-custom-scrollbar",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"mb-6 text-center",children:[o.jsx("p",{className:"dropsource-text-secondary mb-4",children:"Collectible stickers and cards from the Drop Source universe"}),o.jsxs("div",{className:"flex justify-center gap-6 mb-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-400",children:h.length}),o.jsx("div",{className:"text-sm text-gray-400",children:"Owned"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-400",children:og.length}),o.jsx("div",{className:"text-sm text-gray-400",children:"Total Items"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[Math.round(h.length/og.length*100),"%"]}),o.jsx("div",{className:"text-sm text-gray-400",children:"Collection"})]})]}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-6",children:[o.jsx("div",{className:"flex gap-2",children:["all","common","rare","epic","legendary"].map(T=>o.jsx("button",{onClick:()=>v(T),className:`px-3 py-1 rounded-full text-sm font-medium transition-all ${y===T?"bg-blue-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:T.charAt(0).toUpperCase()+T.slice(1)},T))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{value:w,onChange:T=>j(T.target.value),className:"px-3 py-1 rounded-full bg-gray-700 text-gray-300 text-sm",children:[o.jsx("option",{value:"name",children:"Sort by Name"}),o.jsx("option",{value:"rarity",children:"Sort by Rarity"}),o.jsx("option",{value:"price",children:"Sort by Price"}),o.jsx("option",{value:"minted",children:"Sort by Minted"})]}),o.jsx("button",{onClick:()=>g(m==="grid"?"list":"grid"),className:"px-3 py-1 rounded-full bg-gray-700 text-gray-300 text-sm hover:bg-gray-600",children:m==="grid"?" List":" Grid"})]})]})]}),o.jsx("div",{className:m==="grid"?"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6":"space-y-4",children:k.map(T=>{const E=h.includes(T.id);return T.id,o.jsx("div",{className:"relative",children:o.jsxs(Er,{className:`dropsource-card p-6 text-center dropsource-clickable transition-all group relative ${T.type==="card"?"border-2 border-dashed":""}`,style:{borderColor:T.type==="card"?"var(--accent-gold-start)":zu(T.rarities[0]),borderWidth:"2px",minHeight:"240px"},onMouseEnter:D=>{D.currentTarget.style.transform="translateY(-2px) rotateX(2deg) rotateY(2deg)",D.currentTarget.style.boxShadow=`0 8px 24px rgba(0,0,0,0.6), 0 0 16px ${zu(T.rarities[0])}80`,D.currentTarget.style.borderColor=zu(T.rarities[0])},onMouseLeave:D=>{D.currentTarget.style.transform="translateY(0) rotateX(0deg) rotateY(0deg)",D.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)",D.currentTarget.style.borderColor=T.type==="card"?"var(--accent-gold-start)":zu(T.rarities[0])},children:[o.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 rounded z-20 dropsource-serial-overlay",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(8px)",color:"#FFFFFF",fontSize:"10px",fontFamily:"JetBrains Mono, Fira Code, monospace",fontWeight:"500",opacity:"0.8",textShadow:"0 1px 2px rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.1)"},children:["#",T.serialNumber," / 1000"]}),o.jsxs("div",{className:"text-6xl mb-4 relative",children:[T.emoji,o.jsxs("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-70 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col items-center justify-center text-white text-xs",children:[o.jsxs("div",{children:["Serial #",T.serialNumber]}),o.jsx("div",{children:T.dateMinted})]})]}),o.jsx("h3",{className:"font-semibold dropsource-text-primary mb-2",children:T.name}),o.jsx(ht,{className:`text-xs mb-3 ${T.type==="card"?"bg-gradient-to-r from-yellow-400 to-orange-500":"dropsource-btn-secondary"}`,children:T.type==="card"?"Card":"Sticker"}),o.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-center p-4 z-10",children:o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"dropsource-text-tertiary",children:"Creator: "}),o.jsx("span",{className:"dropsource-text-primary font-medium",children:T.creator})]}),o.jsxs("div",{children:[o.jsx("span",{className:"dropsource-text-tertiary",children:"Rarities: "}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:T.rarities.map((D,M)=>o.jsx(ht,{className:`text-xs ${SW(D)}`,children:wW(D.charAt(0).toUpperCase()+D.slice(1).toLowerCase(),T.type==="card")},M))})]}),o.jsxs("div",{children:[o.jsx("span",{className:"dropsource-text-tertiary",children:"Serial #: "}),o.jsxs("span",{className:"dropsource-text-primary font-medium",children:["#",T.serialNumber]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"dropsource-text-tertiary",children:"# Minted: "}),o.jsx("span",{className:"dropsource-text-primary font-medium",children:T.minted.toLocaleString()})]}),T.type==="sticker"&&o.jsx("div",{className:"pt-2 border-t border-gray-700",children:E?o.jsx("div",{className:"w-full px-4 py-2 bg-green-500/20 text-green-400 text-xs font-medium text-center rounded",children:" Owned"}):o.jsxs(Se,{className:"w-full dropsource-btn-primary text-xs flex items-center gap-2 hover:scale-105 transition-transform",onClick:()=>C(T),children:[o.jsx(X0,{className:"w-3 h-3"}),"Purchase Physical ($",T.physicalPrice,")"]})})]})})]})},T.id)})})]})}),i&&s&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-gray-900 rounded-xl p-6 max-w-md w-full mx-4 border border-gray-700",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:s.emoji}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:s.name}),o.jsx("p",{className:"text-gray-400 mb-4",children:s.description}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-2",children:["$",s.physicalPrice]}),o.jsxs("div",{className:"text-sm text-gray-400",children:["Physical ",s.type]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Se,{onClick:()=>l(!1),className:"flex-1 bg-gray-700 hover:bg-gray-600",children:"Cancel"}),o.jsx(Se,{onClick:N,className:`flex-1 ${d?"animate-pulse":""}`,style:{background:d?"linear-gradient(45deg, #10b981, #059669)":void 0},children:d?"Processing...":"Confirm Purchase"})]})]})})})]})})}function kW({onClose:r,onMinimize:e,initialPosition:t,width:s,height:n,zIndex:i,onPositionChange:l,onSizeChange:d,onFocus:u}){const[h,p]=b.useState(t),[m,g]=b.useState(!1),[y,v]=b.useState({x:0,y:0}),w=k=>{k.target.closest(".book-content")||(g(!0),v({x:k.clientX-h.x,y:k.clientY-h.y}),u())},j=k=>{if(!m)return;const T={x:k.clientX-y.x,y:k.clientY-y.y};p(T),l(T)},C=()=>{g(!1)};b.useEffect(()=>{if(m)return document.addEventListener("mousemove",j),document.addEventListener("mouseup",C),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",C)}},[m,y]);const N=k=>k==="sticker"?"":"";return o.jsx(ws,{children:o.jsxs("div",{className:`fixed rounded-2xl border border-white/8 bg-zinc-950/90 backdrop-blur-md shadow-[0_10px_40px_rgba(0,0,0,0.6)] max-h-[72vh] w-[720px] overflow-hidden flex flex-col ${m?"dragging":""}`,style:{left:h.x,top:h.y,zIndex:i,cursor:m?"grabbing":"default"},onClick:u,children:[o.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-white/5 cursor-move",onMouseDown:w,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Gh,{className:"w-5 h-5",style:{color:"#00AEEF"}}),o.jsx("h3",{style:{color:"#E6ECF3",fontSize:"16px",fontWeight:"600"},children:"Drop Source Book"}),o.jsx(ht,{style:{backgroundColor:"rgba(0, 174, 239, 0.1)",color:"#00AEEF",border:"1px solid rgba(0, 174, 239, 0.2)"},children:Pa.length})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Se,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-white",children:o.jsx(Tc,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:r,className:"text-gray-400 hover:text-red-400",children:o.jsx(Cr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"min-h-0 flex-1 overflow-y-auto p-4 book-content dropsource-custom-scrollbar",children:[o.jsx("div",{className:"p-4 text-center border-b border-white/5 -m-4 mb-4",children:o.jsx("p",{className:"dropsource-text-secondary",children:"Master catalog of all DropSource collectibles  Stickers = purchasable  Cards = collection only"})}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:Pa.map(k=>o.jsx("div",{className:"relative group",children:o.jsxs(Er,{className:"dropsource-card p-4 text-center dropsource-clickable transition-all relative",style:{borderColor:It(k.rarity),borderWidth:"2px",minHeight:"200px"},onMouseEnter:T=>{T.currentTarget.style.transform="translateY(-2px)",T.currentTarget.style.boxShadow=`0 8px 24px rgba(0,0,0,0.6), 0 0 16px ${It(k.rarity)}80`},onMouseLeave:T=>{T.currentTarget.style.transform="translateY(0)",T.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"},children:[o.jsxs("div",{className:"dropsource-serial-overlay",style:{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",color:It(k.rarity),fontSize:"10px",fontFamily:"JetBrains Mono, Fira Code, monospace",fontWeight:"600",textShadow:"0 1px 2px rgba(0,0,0,0.5)",border:`1px solid ${It(k.rarity)}`,boxShadow:`0 0 8px ${It(k.rarity)}40`},children:["Serial ",k.serial]}),o.jsx("div",{className:"text-4xl mb-3 relative",children:N(k.type)}),o.jsx("h4",{className:"font-semibold dropsource-text-primary mb-2 text-sm",children:k.name}),o.jsxs(ht,{className:"text-xs mb-3",style:{backgroundColor:j0(k.rarity),color:It(k.rarity),border:`1px solid ${It(k.rarity)}`},children:[k.rarity.charAt(0).toUpperCase()+k.rarity.slice(1)," ",k.type]}),o.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-center p-3 z-10",children:o.jsxs("div",{className:"space-y-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("span",{className:"dropsource-text-tertiary",children:"Type: "}),o.jsx("span",{className:"dropsource-text-primary font-medium",children:k.type==="sticker"?"Sticker (Purchasable)":"Card (Collection Only)"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"dropsource-text-tertiary",children:"Rarity: "}),o.jsx(ht,{className:"text-xs ml-1",style:{backgroundColor:j0(k.rarity),color:It(k.rarity),border:`1px solid ${It(k.rarity)}`},children:k.rarity.charAt(0).toUpperCase()+k.rarity.slice(1)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"dropsource-text-tertiary",children:"Total Supply: "}),o.jsx("span",{className:"dropsource-text-primary font-medium",children:k.totalSupply.toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("span",{className:"dropsource-text-tertiary",children:"Serial: "}),o.jsx("span",{className:"font-mono font-medium",style:{color:It(k.rarity),textShadow:`0 0 8px ${It(k.rarity)}40`},children:k.serial})]}),k.type==="sticker"&&o.jsxs("div",{className:"pt-2 border-t border-gray-700",children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsx("div",{className:"flex items-center gap-1",children:o.jsx("span",{className:"text-sm font-semibold",style:{color:"#00AEEF"},children:k.rarity==="common"?"$5":k.rarity==="rare"?"$10":k.rarity==="epic"?"$15":k.rarity==="legendary"?"$20":"$5"})})}),o.jsxs(Se,{className:"w-full dropsource-btn-primary text-xs flex items-center gap-2",onClick:()=>console.log(`Buy ${k.name}`),children:[o.jsx(X0,{className:"w-3 h-3"}),"Buy Sticker"]})]}),k.type==="card"&&o.jsx("div",{className:"pt-2 border-t border-gray-700",children:o.jsx("span",{className:"text-xs px-3 py-1 rounded block text-center",style:{backgroundColor:"rgba(168, 85, 247, 0.1)",color:"#A855F7",border:"1px solid rgba(168, 85, 247, 0.2)"},children:"View Only - Available via Auction/Trade"})})]})})]})},k.id))})]})]})})}const jW="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function NW(r){const[e,t]=b.useState(!1),s=()=>{t(!0)},{src:n,alt:i,style:l,className:d,...u}=r;return e?o.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${d??""}`,style:l,children:o.jsx("div",{className:"flex items-center justify-center w-full h-full",children:o.jsx("img",{src:jW,alt:"Error loading image",...u,"data-original-url":n})})}):o.jsx("img",{src:n,alt:i,className:d,style:l,...u,onError:s})}const D2=[{id:1,name:"Drake's Condom Sauce",price:42,imageUrl:"https://images.unsplash.com/photo-1609344553637-ee6623677e3d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxob25leSUyMGphciUyMGdvbGRlbnxlbnwxfHx8fDE3NTc5Mjg3MTh8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",tooltip:"buyer: drakeshotsauce",rarity:"legendary",description:"The secret sauce that makes everything smooth",serialNumber:69,dateMinted:"2024-01-15"},{id:2,name:"True Bruh Moment",price:404,imageUrl:"https://images.unsplash.com/photo-1629875832611-c14e072d7380?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx4JTIwYnV0dG9uJTIwZXJyb3IlMjByZWR8ZW58MXx8fHwxNzU3OTg1MTQyfDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",tooltip:"buyer: imaginepaying4stickers",rarity:"epic",description:"For when the code just refuses to work",serialNumber:404,dateMinted:"2024-01-12"},{id:3,name:"Weeb Crack",price:177013,imageUrl:"https://images.unsplash.com/photo-1588912914017-923900a34710?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxib29rJTIwb3BlbiUyMGFjYWRlbWljfGVufDF8fHx8MTc1Nzk4NTE0N3ww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",tooltip:"buyer: hentaiwthetentacles",rarity:"mythic",description:"Highly addictive reading material (age restricted)",serialNumber:177013,dateMinted:"2024-01-01"},{id:4,name:"Virgin Hotline",price:911,imageUrl:"https://images.unsplash.com/photo-1535882743347-fa16a8c3e48f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxwaG9uZSUyMHZpbnRhZ2UlMjByZXRyb3xlbnwxfHx8fDE3NTc5ODUxNTN8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",tooltip:"buyer: robloxrealgirl",rarity:"rare",description:"Emergency contact for desperate times",serialNumber:911,dateMinted:"2024-01-10"},{id:5,name:"Golden Flare: [Bussin Bussin]",price:123456,imageUrl:"https://images.unsplash.com/photo-1574547887997-904252c06ca3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxnb2xkJTIwc3RhciUyMHNwYXJrbGV8ZW58MXx8fHwxNzU3OTg1MTU5fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",tooltip:"buyer: starshopper",rarity:"legendary",description:"When your beats are absolutely bussin",serialNumber:1,dateMinted:"2024-01-02"},{id:6,name:"LOUDER THAN UR MOM",price:69420,imageUrl:"https://images.unsplash.com/photo-1722171098271-185f35942797?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtZWdhcGhvbmUlMjBzcGVha2VyJTIwbG91ZHxlbnwxfHx8fDE3NTc5ODUxNjV8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",tooltip:"buyer: momsgarage",rarity:"legendary",description:"Warning: May cause permanent hearing damage",serialNumber:420,dateMinted:"2024-01-08"},{id:7,name:"Secret Sauce Packet (Do Not Open)",price:42,imageUrl:"https://images.unsplash.com/photo-1609344553637-ee6623677e3d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxob25leSUyMGphciUyMGdvbGRlbnxlbnwxfHx8fDE3NTc5Mjg3MTh8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",tooltip:"seriously, do not open this",rarity:"common",description:"Contents unknown. Warranty void if opened.",serialNumber:42,dateMinted:"2024-01-14"},{id:8,name:"Forbidden Manga Collector's Badge",price:177013,imageUrl:"https://images.unsplash.com/photo-1588912914017-923900a34710?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxib29rJTIwb3BlbiUyMGFjYWRlbWljfGVufDF8fHx8MTc1Nzk4NTE0N3ww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",tooltip:"shows everyone your questionable taste",rarity:"epic",description:"Marks you as a person of culture (derogatory)",serialNumber:1337,dateMinted:"2023-12-31"},{id:9,name:"Emergency Phone-a-Member Credit",price:911,imageUrl:"https://images.unsplash.com/photo-1535882743347-fa16a8c3e48f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxwaG9uZSUyMHZpbnRhZ2UlMjByZXRyb3xlbnwxfHx8fDE3NTc5ODUxNTN8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",tooltip:"when you need backup ASAP",rarity:"common",description:"Call in reinforcements when things get rough",serialNumber:2024,dateMinted:"2024-01-05"}],Vl=r=>{switch(r.toLowerCase()){case"common":return"#6B7280";case"rare":return"#60A5FA";case"epic":return"#A855F7";case"legendary":return"#F59E0B";case"mythic":return"#EF4444";default:return"#6B7280"}},TW=r=>{switch(r.toLowerCase()){case"common":return"text-gray-400 border-gray-400";case"rare":return"text-blue-400 border-blue-400";case"epic":return"text-purple-400 border-purple-400";case"legendary":return"text-yellow-400 border-yellow-400";case"mythic":return"text-red-400 border-red-400";default:return"text-gray-400 border-gray-400"}},_W=15420,MW=1.5,EW=2,PW=100;function DW({onClose:r,onMinimize:e,initialPosition:t={x:100,y:100},width:s=800,height:n=700,zIndex:i=1e3,onPositionChange:l,onSizeChange:d,onFocus:u}){const[h,p]=b.useState([]),[m,g]=b.useState(null),[y,v]=b.useState(t),[w,j]=b.useState(!1),[C,N]=b.useState({x:0,y:0}),[k,T]=b.useState(_W),[E,D]=b.useState(0),[M,P]=b.useState(null),[R,F]=b.useState(!1),[I,U]=b.useState(null),L=V=>{const O=D2.find(Z=>Z.id===V);if(O)if(O.price<=k&&!h.includes(V)){let Z=0;(O.rarity==="legendary"||O.rarity==="mythic")&&(Z=PW);const Q=new Date;(!M||Q.getTime()-M.getTime()>1440*60*1e3)&&(Z+=Math.floor(O.price*(MW-1))),E>0&&(Z+=Math.floor(O.price*(EW-1))),p(ce=>[...ce,V]),T(ce=>ce-O.price+Z),D(ce=>ce+1),P(Q),U(O.name),F(!0);const ae=Z>0?` +${Z} bonus stars!`:"",q=E>0?` (${E+1} streak!)`:"";alert(` Successfully purchased ${O.name}!${ae}${q} Check your backpack.`),setTimeout(()=>F(!1),3e3)}else h.includes(V)?alert("You already own this item!"):alert("Not enough stars!")},X=V=>{V.target.closest(".shop-content")||(j(!0),N({x:V.clientX-y.x,y:V.clientY-y.y}),u?.())},de=V=>{if(!w)return;const O={x:V.clientX-C.x,y:V.clientY-C.y};v(O),l?.(O)},B=()=>{j(!1)};return Ne.useEffect(()=>{if(w)return document.addEventListener("mousemove",de),document.addEventListener("mouseup",B),()=>{document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",B)}},[w,C]),o.jsx(ws,{children:o.jsxs("div",{className:`fixed dropsource-floating-card ${w?"dragging":""} flex flex-col`,style:{left:y.x,top:y.y,width:s,height:n,zIndex:i,cursor:w?"grabbing":"default"},onClick:u,children:[o.jsxs("div",{className:"flex items-center justify-between border-b cursor-move",style:{padding:"calc(var(--spacing-unit) * 2)",borderBottomColor:"var(--dropsource-border)"},onMouseDown:X,children:[o.jsxs("div",{className:"flex items-center dropsource-spacing-md",children:[o.jsx(rt,{className:"w-6 h-6 dropsource-icon-outlined",style:{color:"var(--dropsource-brand)"}}),o.jsx("h2",{className:"dropsource-text-primary",style:{fontSize:"var(--text-xl)",fontWeight:"600",letterSpacing:"-0.02em"},children:"Star Shop"})]}),o.jsxs("div",{className:"flex items-center dropsource-spacing-lg",children:[o.jsxs("div",{className:"flex items-center dropsource-spacing-xs",children:[o.jsx(rt,{className:"w-5 h-5 dropsource-icon-outlined",style:{color:"var(--dropsource-brand)"}}),o.jsxs("span",{className:"dropsource-text-primary",style:{fontSize:"var(--text-md)",fontWeight:"600"},children:[k.toLocaleString(),""]}),E>0&&o.jsxs("span",{className:"ml-2 px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:"rgba(34, 197, 94, 0.1)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[" ",E," streak"]})]}),e&&o.jsx("button",{onClick:e,className:"dropsource-toolbar-button dropsource-focus-visible hover:border-blue-500 hover:text-blue-400",style:{width:"32px",height:"32px",padding:"0"},children:o.jsx(yr,{className:"w-4 h-4 dropsource-icon-outlined"})}),o.jsx("button",{onClick:r,className:"dropsource-toolbar-button dropsource-focus-visible hover:border-red-500 hover:text-red-400",style:{width:"32px",height:"32px",padding:"0"},children:o.jsx(Cr,{className:"w-5 h-5 dropsource-icon-outlined"})})]})]}),o.jsx("div",{className:"flex-1 overflow-hidden shop-content",style:{padding:"calc(var(--spacing-unit) * 2)"},children:o.jsx(un,{className:"h-full dropsource-custom-scrollbar",children:o.jsx("div",{className:"dropsource-grid dropsource-grid-3",children:D2.map(V=>o.jsxs("div",{className:"dropsource-collectible-card dropsource-clickable relative",onMouseEnter:()=>g(V.id),onMouseLeave:()=>g(null),style:{transform:m===V.id?"translateY(-2px) rotateX(2deg)":"translateY(0) rotateX(0deg)",boxShadow:m===V.id?`0 8px 32px ${Vl(V.rarity)}40`:void 0,transition:"all 200ms ease-out",borderColor:Vl(V.rarity)},children:[m===V.id&&V.serialNumber&&o.jsxs("div",{className:"absolute top-2 right-2 z-10",style:{background:"rgba(0, 0, 0, 0.8)",color:Vl(V.rarity),padding:"4px 8px",borderRadius:"var(--radius-sharp)",fontSize:"var(--text-xs)",fontWeight:"600",boxShadow:`0 0 12px ${Vl(V.rarity)}`,backdropFilter:"blur(8px)",border:`1px solid ${Vl(V.rarity)}`,animation:"fadeInSmooth 200ms ease-out"},children:["#",V.serialNumber]}),o.jsxs("div",{className:"dropsource-spacing-md flex flex-col",children:[o.jsxs("div",{className:"flex items-start dropsource-spacing-md",children:[o.jsx("div",{style:{minWidth:"48px",height:"48px"},children:o.jsx(NW,{src:V.imageUrl,alt:V.name,width:48,height:48,style:{borderRadius:"var(--radius-sharp)",objectFit:"cover"}})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"dropsource-text-primary",style:{fontSize:"var(--text-sm)",fontWeight:"600",lineHeight:"1.3"},children:V.name}),o.jsx("span",{className:`dropsource-surface px-2 py-1 ${TW(V.rarity)}`,style:{fontSize:"var(--text-xs)",borderRadius:"var(--radius-sharp)",display:"inline-block",marginTop:"calc(var(--spacing-unit) * 0.5)",border:"1px solid"},children:V.rarity.charAt(0).toUpperCase()+V.rarity.slice(1)})]})]}),o.jsx("p",{className:"dropsource-text-tertiary",style:{fontSize:"var(--text-xs)",lineHeight:"1.4"},children:V.description}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center dropsource-spacing-xs",children:[o.jsx(rt,{className:"w-4 h-4 dropsource-icon-outlined",style:{color:"var(--dropsource-brand)"}}),o.jsxs("span",{className:"dropsource-text-primary",style:{fontSize:"var(--text-sm)",fontWeight:"600"},children:[V.price>=1e3?`${(V.price/1e3).toFixed(0)}k`:V.price,""]})]}),o.jsx("div",{className:"flex dropsource-spacing-xs",children:h.includes(V.id)?o.jsx("span",{className:"dropsource-surface px-2 py-1 text-green-400",style:{fontSize:"var(--text-xs)",borderRadius:"var(--radius-sharp)",fontWeight:"600"},children:"Owned"}):o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsxs("button",{onClick:()=>L(V.id),disabled:V.price>k,className:"dropsource-btn-primary dropsource-focus-visible",style:{fontSize:"var(--text-xs)",padding:"calc(var(--spacing-unit) * 0.75) calc(var(--spacing-unit) * 1.5)",opacity:V.price>k?"0.5":"1",position:"relative",overflow:"hidden"},children:[R&&I===V.name&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400 to-orange-500 animate-pulse"}),o.jsx("span",{className:"relative z-10",children:"Buy"})]})}),o.jsx(wt,{children:o.jsx("p",{children:V.tooltip})})]})})]})]})]},V.id))})})}),o.jsxs("div",{className:"border-t text-center",style:{borderTopColor:"var(--dropsource-border)",padding:"calc(var(--spacing-unit) * 2)",background:"linear-gradient(90deg, rgba(139, 92, 246, 0.1), rgba(219, 39, 119, 0.1))"},children:[o.jsx("p",{className:"dropsource-text-secondary",style:{fontSize:"var(--text-xs)",marginBottom:"calc(var(--spacing-unit) * 0.5)"},children:" Limited Time: Double XP Weekend! "}),o.jsx("p",{style:{fontSize:"var(--text-xs)",color:"var(--dropsource-brand)"},children:" Earn 2x stars on all completed challenges "})]})]})})}const Iu=[{id:"d1",title:"Write 10 lines today",description:"Add 10 lines of lyrics to any project",reward:50,progress:7,maxProgress:10,completed:!1,icon:o.jsx(Na,{className:"w-5 h-5"}),difficulty:"easy",timeLeft:"18h 42m"},{id:"d2",title:"Visit an old project",description:"Open and edit a project older than 7 days",reward:25,progress:1,maxProgress:1,completed:!0,icon:o.jsx(ja,{className:"w-5 h-5"}),difficulty:"easy"},{id:"d3",title:"Vote on 3 posts",description:"Vote on community posts in the hub",reward:30,progress:1,maxProgress:3,completed:!1,icon:o.jsx(Sr,{className:"w-5 h-5"}),difficulty:"easy",timeLeft:"18h 42m"},{id:"d4",title:"Collaborate with a buddy",description:"Work on a project with another user",reward:100,progress:0,maxProgress:1,completed:!1,icon:o.jsx(ss,{className:"w-5 h-5"}),difficulty:"medium",timeLeft:"18h 42m"}],Bu=[{id:"w1",title:"Complete 5 daily challenges",description:"Finish your daily challenges 5 times this week",reward:500,progress:3,maxProgress:5,completed:!1,icon:o.jsx(ms,{className:"w-5 h-5"}),difficulty:"medium",timeLeft:"4d 18h"},{id:"w2",title:"Create 3 songs",description:"Publish 3 complete songs this week",reward:750,progress:1,maxProgress:3,completed:!1,icon:o.jsx(Na,{className:"w-5 h-5"}),difficulty:"hard",timeLeft:"4d 18h"},{id:"w3",title:"Use drawing tools",description:"Add drawings to 2 different projects",reward:200,progress:2,maxProgress:2,completed:!0,icon:o.jsx(xs,{className:"w-5 h-5"}),difficulty:"easy"}],Vu=[{id:"m1",title:"Master of the Month",description:"Earn 5,000 stars this month",reward:2500,progress:3420,maxProgress:5e3,completed:!1,icon:o.jsx(rt,{className:"w-5 h-5"}),difficulty:"hard",timeLeft:"12d 18h"},{id:"m2",title:"Community Champion",description:"Get 50 upvotes on your posts this month",reward:1e3,progress:23,maxProgress:50,completed:!1,icon:o.jsx(Ni,{className:"w-5 h-5"}),difficulty:"medium",timeLeft:"12d 18h"},{id:"m3",title:"Streak Master",description:"Maintain a 30-day login streak",reward:1500,progress:18,maxProgress:30,completed:!1,icon:o.jsx(IC,{className:"w-5 h-5"}),difficulty:"medium",timeLeft:"12d 18h"}],AW=r=>{switch(r){case"easy":return"text-green-400 border-green-400";case"medium":return"text-yellow-400 border-yellow-400";case"hard":return"text-red-400 border-red-400";default:return"text-gray-400 border-gray-400"}};function RW({onClose:r}){const[e,t]=b.useState("daily"),[s,n]=b.useState([...Iu,...Bu,...Vu].filter(d=>d.completed).map(d=>d.id)),i=d=>d.filter(u=>s.includes(u.id)||u.completed).reduce((u,h)=>u+h.reward,0),l=({challenge:d})=>{const u=s.includes(d.id)||d.completed,h=d.progress/d.maxProgress*100;return o.jsx(Er,{className:`dropsource-panel border-gray-700 p-4 transition-all ${u?"opacity-60 bg-green-900/10":"hover:dropsource-glow-cyan"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${u?"bg-green-900/30":"bg-gray-800/50"}`,children:d.icon}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium dropsource-text-primary",children:d.title}),o.jsx("p",{className:"text-sm dropsource-text-secondary",children:d.description})]}),o.jsx("div",{className:"flex items-center gap-2",children:u?o.jsx(rD,{className:"w-6 h-6 text-green-400"}):o.jsx(ch,{className:"w-6 h-6 dropsource-text-secondary"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"dropsource-text-secondary",children:[d.progress,"/",d.maxProgress]}),o.jsxs("span",{className:"dropsource-text-secondary",children:[Math.round(h),"%"]})]}),o.jsx(eT,{value:h,className:"h-2"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ht,{variant:"outline",className:AW(d.difficulty),children:d.difficulty}),o.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[o.jsx(rt,{className:"w-3 h-3"}),o.jsxs("span",{className:"text-xs",children:[d.reward,""]})]})]}),d.timeLeft&&!u&&o.jsxs("div",{className:"text-xs dropsource-text-secondary",children:[d.timeLeft," left"]})]})]})]})})};return o.jsxs("div",{className:"dropsource-floating-card rounded-lg w-[700px] h-[600px] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ni,{className:"w-6 h-6 text-yellow-400"}),o.jsx("h2",{className:"text-xl font-bold dropsource-text-primary",children:"Challenges & Goals"})]}),o.jsx(Se,{onClick:r,variant:"ghost",size:"sm",className:"dropsource-text-secondary hover:text-red-400",children:o.jsx(Cr,{className:"w-5 h-5"})})]}),o.jsxs(hy,{value:e,onValueChange:t,className:"flex-1 flex flex-col",children:[o.jsx("div",{className:"border-b border-gray-700 px-4",children:o.jsxs(fy,{className:"grid w-full grid-cols-3 bg-gray-800/50",children:[o.jsxs(zn,{value:"daily",className:"flex items-center gap-2",children:[o.jsx(ja,{className:"w-4 h-4"}),"Daily"]}),o.jsxs(zn,{value:"weekly",className:"flex items-center gap-2",children:[o.jsx(IC,{className:"w-4 h-4"}),"Weekly"]}),o.jsxs(zn,{value:"monthly",className:"flex items-center gap-2",children:[o.jsx(rt,{className:"w-4 h-4"}),"Monthly"]})]})}),o.jsxs("div",{className:"flex-1 overflow-hidden",children:[o.jsx(In,{value:"daily",className:"h-full",children:o.jsxs("div",{className:"p-4 space-y-4 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium dropsource-text-primary",children:"Daily Challenges"}),o.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[o.jsx(rt,{className:"w-4 h-4"}),o.jsxs("span",{className:"text-sm",children:[i(Iu)," earned"]})]})]}),o.jsx(un,{className:"flex-1",children:o.jsx("div",{className:"space-y-3",children:Iu.map(d=>o.jsx(l,{challenge:d},d.id))})})]})}),o.jsx(In,{value:"weekly",className:"h-full",children:o.jsxs("div",{className:"p-4 space-y-4 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium dropsource-text-primary",children:"Weekly Challenges"}),o.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[o.jsx(rt,{className:"w-4 h-4"}),o.jsxs("span",{className:"text-sm",children:[i(Bu)," earned"]})]})]}),o.jsx(un,{className:"flex-1",children:o.jsx("div",{className:"space-y-3",children:Bu.map(d=>o.jsx(l,{challenge:d},d.id))})})]})}),o.jsx(In,{value:"monthly",className:"h-full",children:o.jsxs("div",{className:"p-4 space-y-4 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium dropsource-text-primary",children:"Monthly Challenges"}),o.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[o.jsx(rt,{className:"w-4 h-4"}),o.jsxs("span",{className:"text-sm",children:[i(Vu)," earned"]})]})]}),o.jsx(un,{className:"flex-1",children:o.jsx("div",{className:"space-y-3",children:Vu.map(d=>o.jsx(l,{challenge:d},d.id))})})]})})]})]}),o.jsx("div",{className:"border-t border-gray-700 p-4 bg-gray-800/20",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-sm dropsource-text-secondary",children:"Track your progress and earn stars by completing challenges!"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-sm dropsource-text-secondary",children:"Total Stars Earned:"}),o.jsxs("div",{className:"flex items-center gap-1 text-yellow-400 font-medium",children:[o.jsx(rt,{className:"w-4 h-4"}),o.jsxs("span",{children:[i([...Iu,...Bu,...Vu]),""]})]})]})]})})]})}function OW({onFound:r}){const[e,t]=b.useState(!1),[s,n]=b.useState(!1),i=()=>{e||(t(!0),n(!0),r(),setTimeout(()=>{n(!1),setTimeout(()=>{t(!1)},1e3)},3e3))},l=()=>{n(!1),console.log("Added puking cat sticker to backpack!"),setTimeout(()=>{t(!1)},1e3)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`fixed bottom-4 left-4 transition-all duration-300 ${e?"opacity-50 cursor-not-allowed":"opacity-70 hover:opacity-100 cursor-pointer hover:scale-110"}`,onClick:i,style:{zIndex:1e3,transform:e?"scale(0.8)":"scale(1)"},children:o.jsxs("div",{className:`relative ${e?"":"hover:dropsource-glow-cyan animate-pulse"}`,children:[o.jsx(rt,{className:`w-6 h-6 ${e?"text-gray-500":"text-yellow-400"} transition-colors duration-300`,fill:e?"currentColor":"none"}),!e&&o.jsx("div",{className:"absolute -inset-1 bg-yellow-400/20 rounded-full animate-ping"})]})}),s&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1001]",children:o.jsxs("div",{className:"dropsource-floating-card rounded-lg p-6 w-80 text-center animate-in fade-in zoom-in duration-300",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mb-3",children:o.jsx(rt,{className:"w-8 h-8 text-white",fill:"currentColor"})}),o.jsx("h3",{className:"text-xl font-bold dropsource-text-primary mb-2",children:" You found a Secret Prize Star!"}),o.jsx("p",{className:"dropsource-text-secondary text-sm mb-4",children:"Congratulations! You discovered our hidden easter egg."}),o.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 mb-4",children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("div",{className:"text-sm dropsource-text-primary font-medium",children:"Puking Cat Sticker"}),o.jsx("div",{className:"text-xs dropsource-text-secondary",children:"Added to your backpack"})]})]}),o.jsx(Se,{onClick:l,className:"w-full dropsource-gradient text-white",children:"Accept Reward"})]})})]})}function FW({onClose:r,position:e={x:0,y:0}}){const[t,s]=b.useState(25),[n,i]=b.useState("global"),[l,d]=b.useState(!1),[u,h]=b.useState(!1),[p,m]=b.useState({x:0,y:0}),[g,y]=b.useState(e),v=k=>{if(k.target.closest(".drag-handle")){h(!0);const T=k.currentTarget.getBoundingClientRect();m({x:k.clientX-T.left,y:k.clientY-T.top})}},w=k=>{u&&y({x:Math.max(0,Math.min(window.innerWidth-340,k.clientX-p.x)),y:Math.max(0,Math.min(window.innerHeight-600,k.clientY-p.y))})},j=()=>{h(!1)};Ne.useEffect(()=>{if(u)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",j),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",j)}},[u,p]);const C=()=>{d(!0),console.log("File upload triggered")},N=()=>{console.log("Drop created:",{price:t,visibility:n}),r()};return o.jsx("div",{className:`fixed z-50 ${u?"dragging":""}`,style:{left:g.x,top:g.y,transform:"none"},onMouseDown:v,children:o.jsxs(Er,{className:"dropsource-card",style:{width:"320px",cursor:u?"grabbing":"default"},children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 drag-handle",style:{cursor:"grab"},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(uh,{className:"w-4 h-4 dropsource-text-secondary"}),o.jsx("h3",{className:"font-semibold dropsource-text-primary",children:"Create Drop"})]}),o.jsx(Se,{size:"sm",variant:"ghost",onClick:r,className:"dropsource-toolbar-button p-1",children:o.jsx(Cr,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium dropsource-text-primary mb-2",children:"Upload Content"}),l?o.jsx("div",{className:"dropsource-surface p-4 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded flex items-center justify-center",children:o.jsx(bg,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium dropsource-text-primary",children:"summer_vibes_demo.mp3"}),o.jsx("p",{className:"text-xs dropsource-text-secondary",children:"2.4 MB  Ready to drop"})]})]})}):o.jsxs("button",{onClick:C,className:"w-full border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-teal-400 transition-colors",children:[o.jsx(bg,{className:"w-8 h-8 mx-auto mb-2 dropsource-text-secondary"}),o.jsx("p",{className:"dropsource-text-secondary text-sm",children:"Click to upload audio, lyrics, or project file"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium dropsource-text-primary mb-2",children:"Price"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(rt,{className:"w-4 h-4 text-yellow-400 fill-current"}),o.jsx("input",{type:"number",value:t,onChange:k=>s(Number(k.target.value)),className:"dropsource-input flex-1",min:"1",max:"1000"}),o.jsx("span",{className:"dropsource-text-secondary text-sm",children:"stars"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium dropsource-text-primary mb-2",children:"Visibility"}),o.jsxs(m0,{value:n,onValueChange:k=>i(k),children:[o.jsx(x0,{className:"dropsource-input",children:o.jsx(g0,{})}),o.jsxs(y0,{className:"dropsource-panel",children:[o.jsx(Fh,{value:"global",className:"dropsource-text-primary hover:dropsource-surface",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ND,{className:"w-4 h-4"}),"Global - Everyone can see"]})}),o.jsx(Fh,{value:"profile",className:"dropsource-text-primary hover:dropsource-surface",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zD,{className:"w-4 h-4"}),"Profile Only - Friends and followers"]})})]})]})]}),l&&o.jsxs("div",{className:"border border-gray-700 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-xs dropsource-text-secondary",children:"Preview"}),o.jsx(ht,{className:"text-xs dropsource-text-primary",children:n==="global"?"Public":"Private"})]}),o.jsxs("div",{className:"dropsource-surface p-3 rounded",children:[o.jsx("h4",{className:"font-medium dropsource-text-primary",children:"Summer Vibes Demo"}),o.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rt,{className:"w-3 h-3 text-yellow-400 fill-current"}),o.jsx("span",{className:"text-sm font-semibold",children:t})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(wi,{className:"w-3 h-3 dropsource-text-secondary"}),o.jsx("span",{className:"text-xs dropsource-text-secondary",children:n==="global"?"Public":"Private"})]})]})]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx(Se,{onClick:r,className:"flex-1 dropsource-btn-secondary",children:"Cancel"}),o.jsx(Se,{onClick:N,disabled:!l,className:"flex-1 dropsource-btn-primary",children:"Create Drop"})]})]})]})})}const LW=D7().map((r,e)=>({id:(e+1).toString(),name:r.name,sticker:r.name,rarity:r.rarity,type:r.type,serial:r.serial,totalSupply:r.totalSupply,currentBid:Math.floor(Math.random()*500)+100,timeLeft:Math.floor(Math.random()*3600)+300,bidCount:Math.floor(Math.random()*15)+3,thumbnail:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=120&h=120&fit=crop",highestBidder:["MegaCollector","StickerKing","RareHunter","EliteTrader"][Math.floor(Math.random()*4)]})),A2=["MegaCollector","StickerKing","RareHunter","EliteTrader","CardMaster","EpicSeeker","LegendHunter"],zW=({onClose:r,onMinimize:e,initialPosition:t,width:s,height:n,zIndex:i,onPositionChange:l,onSizeChange:d,onFocus:u})=>{const[h,p]=b.useState(Date.now()),[m,g]=b.useState([]),[y,v]=b.useState(LW);b.useEffect(()=>{const T=setInterval(()=>{p(Date.now()),v(E=>E.map(D=>{const M=D.timeLeft-1;if(Math.random()<.02&&M>10){const R=[5,10,15],F=R[Math.floor(Math.random()*R.length)],I=D.currentBid,U=I+F,L=A2[Math.floor(Math.random()*A2.length)];return g(X=>[`${L} raised bid on ${D.name} ${I}  ${U} (+${F})`,...X.slice(0,4)]),{...D,timeLeft:M,currentBid:U,highestBidder:L,bidCount:D.bidCount+1}}return{...D,timeLeft:M}}))},1e3);return()=>clearInterval(T)},[]);const w=T=>{if(T<=0)return"ENDED";const E=Math.floor(T/60),D=T%60;return E>0?`${E}m ${D}s`:`${D}s`},j=T=>T<=30?"#EF4444":T<=120?"#F59E0B":"#22C55E",C=T=>T==="legendary"||T==="epic"?o.jsx(rt,{className:"w-4 h-4",fill:"currentColor"}):o.jsx(Br,{className:"w-4 h-4"}),N=T=>T==="sticker"?"":"",k=T=>{v(E=>E.map(D=>{if(D.id===T){const P=D.currentBid,R=P+5;return g(F=>[`You raised bid on ${D.name} ${P}  ${R} (+5)`,...F.slice(0,4)]),{...D,currentBid:R,highestBidder:"You",bidCount:D.bidCount+1}}return D}))};return o.jsx(ef,{title:"Live Auction House",onClose:r,onMinimize:e,initialPosition:t,width:s,height:n,zIndex:i,onPositionChange:l,onSizeChange:d,onFocus:u,children:o.jsxs("div",{className:"h-full flex flex-col auction-content","data-no-drag":!0,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(G0,{className:"w-5 h-5",style:{color:"#F59E0B"}}),o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded text-xs dropsource-btn-primary",children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE"]})]}),o.jsxs("div",{className:"min-h-0 flex-1 overflow-y-auto dropsource-custom-scrollbar",children:[o.jsxs("div",{className:"dropsource-panel mb-4 p-3 rounded",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx("span",{className:"dropsource-text-primary text-sm font-semibold",children:"Live Activity"})]}),o.jsx("div",{className:"h-6 overflow-hidden",children:m.length>0?o.jsx("div",{className:"animate-slideUp",children:o.jsx("p",{className:"dropsource-text-secondary text-xs",children:m[0]})}):o.jsx("p",{className:"dropsource-text-tertiary text-xs opacity-60",children:"Waiting for bid activity..."})})]}),o.jsx("div",{className:"dropsource-panel mb-4 p-3 rounded",children:o.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"dropsource-text-primary text-lg font-semibold",children:y.length}),o.jsx("div",{className:"dropsource-text-tertiary text-xs",children:"Active"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-yellow-400 text-lg font-semibold",children:["",y.reduce((T,E)=>T+E.currentBid,0)]}),o.jsx("div",{className:"dropsource-text-tertiary text-xs",children:"Total Bids"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-orange-400 text-lg font-semibold",children:Math.max(...y.map(T=>T.bidCount))}),o.jsx("div",{className:"dropsource-text-tertiary text-xs",children:"Most Bids"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-red-400 text-lg font-semibold",children:y.filter(T=>T.timeLeft<=60).length}),o.jsx("div",{className:"dropsource-text-tertiary text-xs",children:"Ending Soon"})]})]})}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(T=>{const E=j(T.timeLeft),D=T.timeLeft<=60;return o.jsxs("div",{className:`dropsource-card p-3 transition-all duration-200 ${D?"animate-pulse":""} group cursor-pointer`,style:{borderColor:D?"#EF4444":It(T.rarity),borderWidth:"2px",boxShadow:D?"0 0 20px rgba(239, 68, 68, 0.4), 0 2px 8px rgba(0,0,0,0.4)":`0 2px 8px rgba(0,0,0,0.4), 0 0 6px ${It(T.rarity)}30`,minHeight:"180px",position:"relative"},onMouseEnter:M=>{D||(M.currentTarget.style.transform="translateY(-2px)",M.currentTarget.style.boxShadow=`0 8px 24px rgba(0,0,0,0.6), 0 0 16px ${It(T.rarity)}80`)},onMouseLeave:M=>{D||(M.currentTarget.style.transform="translateY(0)",M.currentTarget.style.boxShadow=`0 2px 8px rgba(0,0,0,0.4), 0 0 6px ${It(T.rarity)}30`)},children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 rounded-t-lg",style:{backgroundColor:It(T.rarity)}}),o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(GC,{className:"w-3 h-3",style:{color:E}}),o.jsx("span",{style:{color:E,fontSize:"12px",fontWeight:"600"},children:w(T.timeLeft)})]}),o.jsx("div",{className:"flex items-center gap-1",style:{color:It(T.rarity)},children:C(T.rarity)})]}),o.jsxs("div",{className:"w-full h-12 rounded-lg mb-2 flex items-center justify-center relative",style:{backgroundColor:It(T.rarity),opacity:.9},children:[o.jsx("span",{className:"text-white font-bold text-lg",children:N(T.type)}),o.jsxs("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-70 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col items-center justify-center text-white text-xs",children:[o.jsxs("div",{children:["Serial ",T.serial]}),o.jsxs("div",{children:["/",T.totalSupply," minted"]})]}),D&&o.jsx("div",{className:"absolute inset-0 border-2 border-red-500 rounded-lg animate-pulse"})]}),o.jsxs("div",{className:"space-y-1 mb-3",children:[o.jsx("h4",{className:"dropsource-text-primary text-sm font-semibold",children:T.name}),o.jsxs("p",{style:{color:It(T.rarity),fontSize:"10px",textShadow:`0 0 6px ${It(T.rarity)}40`},children:[T.rarity.charAt(0).toUpperCase()+T.rarity.slice(1)," ",T.type]})]}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"dropsource-text-tertiary text-xs",children:"Current Bid"}),o.jsxs("span",{className:"text-yellow-400 text-sm font-bold",children:["",T.currentBid]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"dropsource-text-tertiary text-xs",children:"Highest Bidder"}),o.jsx("span",{style:{color:T.highestBidder==="You"?"#22C55E":"var(--dropsource-primary)",fontSize:"10px",fontWeight:T.highestBidder==="You"?"600":"400"},children:T.highestBidder})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"dropsource-text-tertiary text-xs",children:"Bids"}),o.jsx("span",{className:"text-blue-400 text-xs font-medium",children:T.bidCount})]})]}),o.jsx("div",{className:"flex gap-2",children:T.timeLeft>0?o.jsxs("button",{onClick:()=>k(T.id),className:"dropsource-btn-primary w-full py-2 rounded text-xs font-bold transition-all duration-200 flex items-center justify-center gap-1",children:[o.jsx(hh,{className:"w-3 h-3"}),"Bid ",T.currentBid+5]}):o.jsx("div",{className:"flex-1 px-4 py-2 rounded text-xs font-bold text-center bg-red-500 text-white",children:"AUCTION ENDED"})})]},T.id)})}),o.jsx("div",{className:"text-center mt-6 pt-4 border-t border-white/5",children:o.jsx("p",{className:"dropsource-text-tertiary text-xs",children:" Live bidding  Only Rare/Epic/Legendary items  All serials verified"})})]})]})})},IW=[{id:"1",type:"star",title:"Stars Earned!",message:'You earned 25 stars from "Summer Vibes" drop',timestamp:"2 hours ago",read:!1,actionable:!1},{id:"2",type:"social",title:"New Follower",message:"beat_master_99 started following you",timestamp:"4 hours ago",read:!1,actionable:!0},{id:"3",type:"message",title:"Collaboration Request",message:"melody_queen wants to collaborate on a track",timestamp:"1 day ago",read:!0,actionable:!0},{id:"4",type:"achievement",title:"Achievement Unlocked!",message:'You unlocked "First Collab" - 50 bonus stars!',timestamp:"1 day ago",read:!0,actionable:!1},{id:"5",type:"gift",title:"Gift Received",message:"synth_lord sent you a Premium badge gift",timestamp:"2 days ago",read:!0,actionable:!0}],BW=r=>{switch(r){case"star":return o.jsx(rt,{className:"w-4 h-4 text-yellow-400"});case"social":return o.jsx(ss,{className:"w-4 h-4 text-blue-400"});case"message":return o.jsx(Sr,{className:"w-4 h-4 text-green-400"});case"achievement":return o.jsx(Ni,{className:"w-4 h-4 text-purple-400"});case"gift":return o.jsx(kD,{className:"w-4 h-4 text-pink-400"});default:return o.jsx(lh,{className:"w-4 h-4 dropsource-text-secondary"})}};function VW({onClose:r,onMinimize:e,initialPosition:t,width:s,height:n,zIndex:i,onPositionChange:l,onSizeChange:d,onFocus:u}){const[h,p]=b.useState(IW),[m,g]=b.useState("all"),y=C=>{p(N=>N.map(k=>k.id===C?{...k,read:!0}:k))},v=()=>{p(C=>C.map(N=>({...N,read:!0})))},w=h.filter(C=>m==="all"||!C.read),j=h.filter(C=>!C.read).length;return o.jsx(ef,{title:"Notifications",onClose:r,onMinimize:e,initialPosition:t,width:s,height:n,zIndex:i,onPositionChange:l,onSizeChange:d,onFocus:u,children:o.jsxs("div",{className:"absolute inset-0 flex flex-col","data-no-drag":!0,children:[o.jsxs("div",{className:"flex items-center justify-between p-4 flex-shrink-0 border-b dropsource-divider",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lh,{className:"w-5 h-5 dropsource-text-primary"}),o.jsx("span",{className:"font-medium dropsource-text-primary",children:"Notifications"}),j>0&&o.jsx(ht,{className:"bg-red-500 text-white text-xs",children:j})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Se,{size:"sm",variant:"ghost",className:"dropsource-toolbar-button",children:o.jsx(ia,{className:"w-4 h-4"})}),o.jsx(Se,{size:"sm",variant:"ghost",onClick:r,className:"dropsource-toolbar-button hover:bg-red-500/20 hover:text-red-400",children:o.jsx(Cr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex gap-2 p-4 flex-shrink-0 border-b dropsource-divider",children:[o.jsx(Se,{size:"sm",onClick:()=>g("all"),className:m==="all"?"dropsource-btn-primary":"dropsource-btn-secondary",children:"All"}),o.jsxs(Se,{size:"sm",onClick:()=>g("unread"),className:m==="unread"?"dropsource-btn-primary":"dropsource-btn-secondary",children:["Unread (",j,")"]}),j>0&&o.jsx(Se,{size:"sm",onClick:v,className:"dropsource-btn-ghost ml-auto",children:"Mark All Read"})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto dropsource-custom-scrollbar",children:o.jsx("div",{className:"p-4 space-y-3",children:w.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(lh,{className:"w-8 h-8 mx-auto mb-2 dropsource-text-tertiary opacity-50"}),o.jsx("p",{className:"dropsource-text-tertiary",children:m==="unread"?"No unread notifications":"No notifications yet"})]}):w.map(C=>o.jsx("div",{className:`dropsource-surface p-3 rounded cursor-pointer transition-all ${C.read?"":"border-l-2 border-teal-400"}`,onClick:()=>!C.read&&y(C.id),children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1 flex-shrink-0",children:BW(C.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between mb-1",children:[o.jsx("h4",{className:`font-medium text-sm ${C.read?"dropsource-text-secondary":"dropsource-text-primary"}`,children:C.title}),o.jsx("span",{className:"text-xs dropsource-text-tertiary ml-2 flex-shrink-0",children:C.timestamp})]}),o.jsx("p",{className:"text-sm dropsource-text-secondary mb-2",children:C.message}),C.actionable&&o.jsx(Se,{size:"sm",className:"dropsource-btn-pill text-xs",onClick:N=>{N.stopPropagation(),console.log("Action clicked for",C.id)},children:C.type==="social"?"View Profile":C.type==="message"?"Reply":C.type==="gift"?"Accept Gift":"Action"})]})]})},C.id))})}),o.jsx("div",{className:"border-t dropsource-divider p-4 flex-shrink-0",children:o.jsx("p",{className:"text-xs dropsource-text-tertiary text-center",children:"Stay connected with the Drop Source community! "})})]})})}const Wl=[{id:"common",name:"Common",cost:25,probability:60,color:"text-gray-300",bgColor:"rgba(156, 163, 175, 0.1)",icon:o.jsx(rt,{className:"w-6 h-6"}),type:"sticker",description:"Basic collectible sticker with simple design"},{id:"uncommon",name:"Uncommon",cost:50,probability:25,color:"text-green-400",bgColor:"rgba(34, 197, 94, 0.1)",icon:o.jsx(Br,{className:"w-6 h-6"}),type:"sticker",description:"Enhanced sticker with special effects and animations"},{id:"rare",name:"Rare",cost:100,probability:10,color:"text-blue-400",bgColor:"rgba(59, 130, 246, 0.1)",icon:o.jsx(SD,{className:"w-6 h-6"}),type:"sticker",description:"Premium sticker with unique artwork and effects"},{id:"epic",name:"Epic",cost:200,probability:4,color:"text-purple-400",bgColor:"rgba(147, 51, 234, 0.1)",icon:o.jsx(ic,{className:"w-6 h-6"}),type:"card",description:"Collectible card with premium features and exclusive benefits"},{id:"legendary",name:"Legendary",cost:500,probability:1,color:"text-yellow-400",bgColor:"rgba(251, 191, 36, 0.1)",icon:o.jsx(ic,{className:"w-6 h-6"}),type:"card",description:"Ultra-rare card with exclusive benefits and special privileges"}];function WW({isOpen:r,onClose:e}){const[t,s]=b.useState(null),[n]=b.useState(2847),[i,l]=b.useState(!1),[d,u]=b.useState(""),[h,p]=b.useState(""),[m,g]=b.useState(null);b.useEffect(()=>{if(r){const v=document.querySelector(".lyrics-editor textarea, .lyrics-editor [contenteditable]");if(v){const j=v.textContent||v.value||"";p(j.slice(0,100)+(j.length>100?"...":""))}setTimeout(async()=>{try{const j=document.querySelector(".lyrics-editor")||document.querySelector("main");if(j&&window.html2canvas){const C=await window.html2canvas(j,{width:400,height:400,scale:.5,backgroundColor:"#0B0F14"});g(C.toDataURL())}}catch{console.log("Screenshot capture not available")}},100)}},[r]);const y=async v=>{const w=Wl.find(j=>j.id===v);w&&n>=w.cost&&d.trim()&&(l(!0),await new Promise(j=>setTimeout(j,2e3)),console.log(`Minting ${w.name} "${d}" for ${w.cost} stars`),console.log("Content captured:",h),l(!1),e())};return o.jsx(Vg,{children:r&&o.jsx(pi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(11, 15, 20, 0.95)",backdropFilter:"blur(20px)"},children:o.jsxs(pi.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-6xl mx-4 h-full max-h-[90vh] overflow-hidden",style:{background:"var(--dropsource-panel)",border:"1px solid var(--dropsource-border)",borderRadius:"var(--radius-sharp)"},children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:"var(--dropsource-border)"},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-yellow-400 to-orange-500",children:o.jsx(dh,{className:"w-6 h-6 text-black"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold",style:{fontSize:"var(--text-2xl)",color:"var(--dropsource-primary)"},children:"Mint Collectible Sticker"}),o.jsx("p",{style:{color:"var(--dropsource-secondary)",fontSize:"var(--text-sm)"},children:"Transform your creation into a unique collectible"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-yellow-400/10 border border-yellow-400/20",children:[o.jsx(rt,{className:"w-5 h-5 text-yellow-400 fill-current"}),o.jsx("span",{className:"font-semibold",style:{color:"var(--dropsource-primary)",fontSize:"var(--text-lg)"},children:n.toLocaleString()}),o.jsx("span",{style:{color:"var(--dropsource-secondary)",fontSize:"var(--text-sm)"},children:"Stars"})]}),o.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-red-600/20 transition-colors border border-transparent hover:border-red-400/30",children:o.jsx(Cr,{className:"w-6 h-6",style:{color:"var(--dropsource-secondary)"}})})]})]}),o.jsxs("div",{className:"flex h-full",children:[o.jsxs("div",{className:"flex-1 p-6 border-r",style:{borderColor:"var(--dropsource-border)"},children:[o.jsx("h2",{className:"font-semibold mb-4",style:{fontSize:"var(--text-xl)",color:"var(--dropsource-primary)"},children:"Preview"}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block mb-2 font-medium",style:{color:"var(--dropsource-primary)",fontSize:"var(--text-sm)"},children:"Collectible Name *"}),o.jsx(Gr,{value:d,onChange:v=>u(v.target.value),placeholder:"Enter a name for your collectible",className:"dropsource-input",maxLength:30}),o.jsxs("p",{style:{color:"var(--dropsource-tertiary)",fontSize:"var(--text-xs)"},className:"mt-1",children:[d.length,"/30 characters"]})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center h-2/3 space-y-6",children:[o.jsx("div",{className:"w-64 h-64 rounded-2xl overflow-hidden transition-all duration-300 relative",style:{background:"linear-gradient(135deg, #7C5CFF 0%, #2D81F7 50%, #25BFA6 100%)",boxShadow:"0 20px 40px rgba(0,0,0,0.3), inset 0 2px 8px rgba(255,255,255,0.1)"},children:window.stickerImageData?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:window.stickerImageData,alt:"Sticker Preview",className:"absolute inset-0 w-full h-full object-contain"}),o.jsx("div",{className:"relative z-10 p-6 h-full flex flex-col justify-end",children:o.jsxs("div",{className:"bg-black/50 backdrop-blur-sm rounded-lg p-4",children:[o.jsx("h3",{className:"font-bold text-white text-lg mb-1",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:d||"Untitled Sticker"}),o.jsx("p",{className:"text-white/90 text-xs leading-relaxed",style:{textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:h||"Your Original Creation"})]})})]}):o.jsxs("div",{className:"p-8 flex flex-col items-center justify-center h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center mb-4",children:o.jsx(xs,{className:"w-8 h-8 text-white"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"font-bold text-white text-xl mb-2",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:d||"Untitled Creation"}),o.jsx("p",{className:"text-white/80 text-sm max-w-48 truncate",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:h||"Your Original Creation"})]})]})}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("p",{style:{color:"var(--dropsource-primary)",fontSize:"var(--text-lg)"},children:"Ready to mint as collectible"}),o.jsx("p",{style:{color:"var(--dropsource-secondary)",fontSize:"var(--text-sm)"},children:"Each rarity level offers different features and drop rates"})]})]})]}),o.jsxs("div",{className:"flex-1 p-6",children:[o.jsx("h2",{className:"font-semibold mb-6",style:{fontSize:"var(--text-xl)",color:"var(--dropsource-primary)"},children:"Choose Rarity Level"}),o.jsxs("div",{className:"space-y-4 h-full overflow-y-auto dropsource-custom-scrollbar pr-2",children:[Wl.map(v=>o.jsxs(pi.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-6 rounded-xl cursor-pointer transition-all border-2 ${t===v.id?"border-teal-400 shadow-lg shadow-teal-400/20":"border-transparent hover:border-gray-500/30"} ${n<v.cost?"opacity-50 cursor-not-allowed":""}`,style:{background:v.bgColor,backdropFilter:"blur(8px)"},onClick:()=>n>=v.cost&&s(v.id),children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:v.color,children:v.icon}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-bold text-lg ${v.color}`,children:v.name}),o.jsx(ht,{className:`text-xs mt-1 ${v.type==="card"?"bg-gradient-to-r from-yellow-400 to-orange-500 text-black":"bg-gray-600 text-gray-200"}`,children:v.type.toUpperCase()})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(rt,{className:"w-4 h-4 text-yellow-400 fill-current"}),o.jsx("span",{className:"font-bold text-lg",style:{color:"var(--dropsource-primary)"},children:v.cost})]}),o.jsxs("p",{className:"text-xs",style:{color:"var(--dropsource-tertiary)"},children:[v.probability,"% drop rate"]})]})]}),o.jsx("p",{className:"text-sm leading-relaxed",style:{color:"var(--dropsource-secondary)"},children:v.description}),n<v.cost&&o.jsxs("div",{className:"mt-3 text-red-400 text-sm font-medium",children:["Insufficient Stars (Need ",(v.cost-n).toLocaleString()," more)"]})]},v.id)),o.jsxs("div",{className:"pt-6 space-y-4",children:[t&&o.jsxs(pi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-lg",style:{background:"var(--dropsource-surface)",border:"1px solid var(--dropsource-border)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{style:{color:"var(--dropsource-secondary)"},children:"Selected:"}),o.jsx("span",{className:`font-semibold ${Wl.find(v=>v.id===t)?.color}`,children:Wl.find(v=>v.id===t)?.name})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{style:{color:"var(--dropsource-secondary)"},children:"Cost:"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rt,{className:"w-4 h-4 text-yellow-400 fill-current"}),o.jsx("span",{className:"font-semibold",style:{color:"var(--dropsource-primary)"},children:Wl.find(v=>v.id===t)?.cost})]})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(Se,{onClick:e,className:"flex-1 dropsource-btn-secondary",disabled:i,children:"Cancel"}),o.jsx(Se,{onClick:()=>t&&y(t),disabled:!t||i||!d.trim(),className:"flex-1 dropsource-btn-primary relative overflow-hidden",children:i?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Minting..."]}):o.jsxs(o.Fragment,{children:[o.jsx(dh,{className:"w-4 h-4 mr-2"}),"Mint Collectible"]})})]})]})]})]})]})]})})})}const HW=[{id:"1",username:"CraftyCrow",handle:"@CraftyCrow",avatar:"",lastMessage:"Thanks for the collab! ",timestamp:new Date(Date.now()-3e5),unread:2,online:!0},{id:"2",username:"PixelSmith",handle:"@PixelSmith",avatar:"",lastMessage:"Got that sticker you wanted",timestamp:new Date(Date.now()-18e5),unread:0,online:!0},{id:"3",username:"MemeDealer",handle:"@MemeDealer",avatar:"",lastMessage:"lol that is cursed",timestamp:new Date(Date.now()-72e5),unread:1,online:!1},{id:"4",username:"ZineZebra",handle:"@ZineZebra",avatar:"",lastMessage:"When are you free for that stream?",timestamp:new Date(Date.now()-864e5),unread:0,online:!1},{id:"5",username:"BeatBuddy",handle:"@BeatBuddy",avatar:"",lastMessage:"Check out this beat I made",timestamp:new Date(Date.now()-1728e5),unread:0,online:!0}];function UW({onClose:r,onMinimize:e,initialPosition:t,width:s,height:n,zIndex:i,onPositionChange:l,onSizeChange:d,onFocus:u}){const[h,p]=b.useState(t),[m,g]=b.useState(!1),[y,v]=b.useState({x:0,y:0}),[w,j]=b.useState(""),[C,N]=b.useState(null),k=P=>{const R=P.target;R.tagName==="BUTTON"||R.closest("button")||R.closest(".dm-content")||R.closest("[data-no-drag]")||(P.preventDefault(),P.stopPropagation(),g(!0),v({x:P.clientX-h.x,y:P.clientY-h.y}),u())},T=P=>{if(!m)return;const R={x:P.clientX-y.x,y:P.clientY-y.y};p(R),l(R)},E=()=>{g(!1)};b.useEffect(()=>{if(m)return document.addEventListener("mousemove",T),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",E)}},[m,y]);const D=HW.filter(P=>P.username.toLowerCase().includes(w.toLowerCase())||P.handle.toLowerCase().includes(w.toLowerCase())),M=P=>{const F=new Date().getTime()-P.getTime(),I=Math.floor(F/6e4),U=Math.floor(F/36e5),L=Math.floor(F/864e5);return I<60?`${I}m`:U<24?`${U}h`:`${L}d`};return o.jsxs("div",{className:`fixed rounded-2xl border border-white/8 bg-zinc-950/90 backdrop-blur-md shadow-[0_10px_40px_rgba(0,0,0,0.6)] max-h-[72vh] w-[720px] overflow-hidden flex flex-col ${m?"dragging":""}`,style:{left:h.x,top:h.y,zIndex:i,cursor:m?"grabbing":"default"},onClick:u,children:[o.jsxs("div",{className:"h-12 px-4 flex items-center justify-between gap-2 border-b border-white/5 text-zinc-200 bg-transparent cursor-move select-none",onMouseDown:k,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Sr,{className:"w-5 h-5 opacity-70 hover:opacity-100"}),o.jsx("h3",{className:"text-sm font-semibold text-zinc-200",children:"Direct Messages"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Se,{variant:"ghost",size:"sm",onClick:e,className:"text-zinc-400 hover:text-zinc-200 opacity-70 hover:opacity-100",children:o.jsx(Tc,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:r,className:"text-zinc-400 hover:text-red-400 opacity-70 hover:opacity-100",children:o.jsx(Cr,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex dm-content p-4 overflow-y-auto",style:{height:"calc(100% - 48px)"},"data-no-drag":!0,children:[o.jsxs("div",{className:"border-r border-white/5 flex flex-col",style:{width:C?"280px":"100%",height:"100%"},children:[o.jsx("div",{className:"p-3 border-b border-white/5",children:o.jsxs("div",{className:"relative",children:[o.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-zinc-500 opacity-70"}),o.jsx(Gr,{value:w,onChange:P=>j(P.target.value),placeholder:"Search conversations...",className:"pl-9 bg-zinc-800 border-zinc-600 text-zinc-200 placeholder-zinc-500"})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto",style:{scrollbarWidth:"thin",scrollbarColor:"rgb(255 255 255 / 0.1) transparent"},children:[D.map(P=>o.jsx("div",{className:`rounded-lg border border-white/5 bg-zinc-900/40 hover:bg-zinc-800/50 transition p-3 mb-2 cursor-pointer ${C?.id===P.id?"bg-blue-600/20 border-blue-500/20":""}`,onClick:()=>N(P),children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:P.online?"#22C55E":"#6B7280"},children:P.avatar}),P.online&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2",style:{backgroundColor:"#22C55E",borderColor:"#0F1520"}})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"font-medium truncate text-zinc-200",children:P.username}),o.jsx("span",{className:"text-xs text-zinc-500",children:M(P.timestamp)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm truncate text-zinc-500",children:P.lastMessage}),P.unread>0&&o.jsx(ht,{className:"ml-2 px-2 py-1 text-xs bg-[#3BA7FF] text-black",children:P.unread})]})]})]})},P.id)),D.length===0&&o.jsxs("div",{className:"p-8 text-center text-zinc-500",children:[o.jsx(Sr,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),o.jsx("p",{children:"No conversations found"}),o.jsx("p",{className:"text-sm mt-1",children:"Start a new conversation with someone!"})]})]}),o.jsx("div",{className:"h-12 px-4 border-t border-white/5 bg-transparent flex items-center",children:o.jsxs(Se,{className:"w-full flex items-center gap-2 bg-[#3BA7FF] text-black hover:bg-[#2F96ED]",children:[o.jsx(Si,{className:"w-4 h-4"}),"New Message"]})})]}),C&&o.jsxs("div",{className:"flex-1 flex flex-col",children:[o.jsxs("div",{className:"h-12 px-4 flex items-center justify-between gap-2 border-b border-white/5 text-zinc-200 bg-transparent",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:C.online?"#22C55E":"#6B7280"},children:C.avatar}),C.online&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full",style:{backgroundColor:"#22C55E"}})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-zinc-200",children:C.username}),o.jsx("div",{className:"text-xs text-zinc-500",children:C.online?"Online":"Offline"})]})]}),o.jsx(Se,{variant:"ghost",size:"sm",className:"text-zinc-400 hover:text-zinc-200 opacity-70 hover:opacity-100",children:o.jsx(ac,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"flex-1 p-4 overflow-y-auto",style:{scrollbarWidth:"thin",scrollbarColor:"rgb(255 255 255 / 0.1) transparent"},children:o.jsxs("div",{className:"text-center py-8 text-zinc-500",children:[o.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-2xl mx-auto mb-3",style:{backgroundColor:C.online?"#22C55E":"#6B7280"},children:C.avatar}),o.jsx("h4",{className:"text-sm font-semibold text-zinc-200",children:C.username}),o.jsxs("p",{className:"text-sm mt-1",children:["This is the beginning of your conversation with ",C.username]})]})}),o.jsx("div",{className:"h-12 px-4 border-t border-white/5 bg-transparent flex items-center",children:o.jsxs("div",{className:"flex items-center gap-2 w-full",children:[o.jsx(Gr,{placeholder:`Message ${C.username}...`,className:"flex-1 bg-zinc-800 border-zinc-600 text-zinc-200 placeholder-zinc-500"}),o.jsx(Se,{size:"sm",className:"bg-[#3BA7FF] text-black hover:bg-[#2F96ED]",children:o.jsx(Mc,{className:"w-4 h-4"})})]})})]})]})]})}const R2=[{id:"1",username:"CraftyCrow",handle:"@CraftyCrow",avatar:"",online:!0,status:"online",activity:"Creating stickers",joinedDate:new Date(Date.now()-864e5*30),mutualFriends:12,trustScore:95},{id:"2",username:"PixelSmith",handle:"@PixelSmith",avatar:"",online:!0,status:"busy",activity:"In a collab session",joinedDate:new Date(Date.now()-864e5*45),mutualFriends:8,trustScore:92},{id:"3",username:"MemeDealer",handle:"@MemeDealer",avatar:"",online:!1,status:"offline",joinedDate:new Date(Date.now()-864e5*15),mutualFriends:23,trustScore:88},{id:"4",username:"ZineZebra",handle:"@ZineZebra",avatar:"",online:!0,status:"away",activity:"Streaming",joinedDate:new Date(Date.now()-864e5*60),mutualFriends:15,trustScore:97},{id:"5",username:"BeatBuddy",handle:"@BeatBuddy",avatar:"",online:!0,status:"online",activity:"Making beats",joinedDate:new Date(Date.now()-864e5*20),mutualFriends:6,trustScore:89}],Wu=[{id:"r1",username:"SynthMaster",handle:"@SynthMaster",avatar:"",mutualFriends:3,requestDate:new Date(Date.now()-36e5*2)},{id:"r2",username:"VectorVoid",handle:"@VectorVoid",avatar:"",mutualFriends:7,requestDate:new Date(Date.now()-36e5*6)}];function $W({onClose:r,onMinimize:e,initialPosition:t,width:s,height:n,zIndex:i,onPositionChange:l,onSizeChange:d,onFocus:u}){const[h,p]=b.useState(t),[m,g]=b.useState(!1),[y,v]=b.useState({x:0,y:0}),[w,j]=b.useState(""),[C,N]=b.useState("friends"),k=F=>{F.target.closest(".friends-content")||(g(!0),v({x:F.clientX-h.x,y:F.clientY-h.y}),u())},T=F=>{if(!m)return;const I={x:F.clientX-y.x,y:F.clientY-y.y};p(I),l(I)},E=()=>{g(!1)};b.useEffect(()=>{if(m)return document.addEventListener("mousemove",T),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",E)}},[m,y]);const D=F=>{switch(F){case"online":return"#22C55E";case"away":return"#EAB308";case"busy":return"#EF4444";case"offline":return"#6B7280";default:return"#6B7280"}},M=R2.filter(F=>F.username.toLowerCase().includes(w.toLowerCase())||F.handle.toLowerCase().includes(w.toLowerCase())),P=M.filter(F=>F.online),R=M.filter(F=>!F.online);return o.jsxs("div",{className:`fixed rounded-2xl border border-white/8 bg-zinc-950/90 backdrop-blur-md shadow-[0_10px_40px_rgba(0,0,0,0.6)] max-h-[72vh] w-[720px] overflow-hidden flex flex-col ${m?"dragging":""}`,style:{left:h.x,top:h.y,zIndex:i,cursor:m?"grabbing":"default"},onClick:u,children:[o.jsxs("div",{className:"h-12 px-4 flex items-center justify-between gap-2 border-b border-white/5 text-zinc-200 bg-transparent cursor-move",onMouseDown:k,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ss,{className:"w-5 h-5 opacity-70 hover:opacity-100"}),o.jsx("h3",{className:"text-sm font-semibold text-zinc-200",children:"Friends"}),o.jsx(ht,{className:"bg-blue-600/20 text-blue-400 border-blue-600/30",children:R2.length})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Se,{variant:"ghost",size:"sm",onClick:e,className:"text-zinc-400 hover:text-zinc-200 opacity-70 hover:opacity-100",children:o.jsx(Tc,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:r,className:"text-zinc-400 hover:text-red-400 opacity-70 hover:opacity-100",children:o.jsx(Cr,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"flex-1 overflow-hidden friends-content p-4",children:o.jsxs(hy,{value:C,onValueChange:N,className:"h-full flex flex-col",children:[o.jsxs(fy,{className:"grid w-full grid-cols-3 m-0 rounded-none border-b border-white/5 bg-transparent h-12",children:[o.jsx(zn,{value:"friends",className:"data-[state=active]:text-zinc-200 data-[state=active]:bg-transparent text-zinc-500 bg-transparent border-none relative data-[state=active]:after:absolute data-[state=active]:after:left-2 data-[state=active]:after:right-2 data-[state=active]:after:-bottom-[6px] data-[state=active]:after:h-[2px] data-[state=active]:after:rounded-full data-[state=active]:after:bg-[#3BA7FF]",children:"Friends"}),o.jsxs(zn,{value:"requests",className:"data-[state=active]:text-zinc-200 data-[state=active]:bg-transparent text-zinc-500 bg-transparent border-none relative data-[state=active]:after:absolute data-[state=active]:after:left-2 data-[state=active]:after:right-2 data-[state=active]:after:-bottom-[6px] data-[state=active]:after:h-[2px] data-[state=active]:after:rounded-full data-[state=active]:after:bg-[#3BA7FF]",children:["Requests",Wu.length>0&&o.jsx(ht,{className:"ml-2 px-1 py-0 text-xs bg-rose-600 text-white",children:Wu.length})]}),o.jsx(zn,{value:"blocked",className:"data-[state=active]:text-zinc-200 data-[state=active]:bg-transparent text-zinc-500 bg-transparent border-none relative data-[state=active]:after:absolute data-[state=active]:after:left-2 data-[state=active]:after:right-2 data-[state=active]:after:-bottom-[6px] data-[state=active]:after:h-[2px] data-[state=active]:after:rounded-full data-[state=active]:after:bg-[#3BA7FF]",children:"Blocked"})]}),o.jsxs(In,{value:"friends",className:"flex-1 overflow-hidden m-0",children:[o.jsx("div",{className:"p-3 border-b border-white/5",children:o.jsxs("div",{className:"relative",children:[o.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-zinc-500 opacity-70"}),o.jsx(Gr,{value:w,onChange:F=>j(F.target.value),placeholder:"Search friends...",className:"pl-9 bg-zinc-800 border-zinc-600 text-zinc-200 placeholder-zinc-500"})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto",style:{scrollbarWidth:"thin",scrollbarColor:"rgb(255 255 255 / 0.1) transparent"},children:[P.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"px-4 py-2 text-xs font-semibold text-zinc-500 bg-green-600/10",children:["ONLINE  ",P.length]}),P.map(F=>o.jsx("div",{className:"rounded-lg border border-white/5 bg-zinc-900/40 hover:bg-zinc-800/50 transition p-3 mb-2 cursor-pointer",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:D(F.status)},children:F.avatar}),o.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2",style:{backgroundColor:D(F.status),borderColor:"#0F1520"}})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"font-medium truncate text-zinc-200",children:F.username}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rt,{className:"w-3 h-3 text-yellow-500"}),o.jsxs("span",{className:"text-xs text-yellow-500",children:[F.trustScore,"%"]})]})]}),o.jsx("div",{className:"text-sm truncate text-zinc-500",children:F.activity||F.handle})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(Se,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0 text-gray-400 hover:text-white",children:o.jsx(Sr,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0 text-gray-400 hover:text-white",children:o.jsx(ac,{className:"w-4 h-4"})})]})]})},F.id))]}),R.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"px-4 py-2 text-xs font-semibold",style:{color:"#A9B7C6",backgroundColor:"rgba(107, 114, 128, 0.1)"},children:["OFFLINE  ",R.length]}),R.map(F=>o.jsx("div",{className:"p-3 border-b hover:bg-gray-800/50 cursor-pointer transition-colors duration-150 opacity-60",style:{borderColor:"#1A2531"},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"relative",children:o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:"#6B7280"},children:F.avatar})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"font-medium truncate",style:{color:"#E6ECF3"},children:F.username}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rt,{className:"w-3 h-3",style:{color:"#FFB039"}}),o.jsxs("span",{className:"text-xs",style:{color:"#FFB039"},children:[F.trustScore,"%"]})]})]}),o.jsx("div",{className:"text-sm truncate",style:{color:"#A9B7C6"},children:F.handle})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(Se,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0 text-gray-400 hover:text-white",children:o.jsx(Sr,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0 text-gray-400 hover:text-white",children:o.jsx(ac,{className:"w-4 h-4"})})]})]})},F.id))]}),M.length===0&&o.jsxs("div",{className:"p-8 text-center",style:{color:"#A9B7C6"},children:[o.jsx(ss,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),o.jsx("p",{children:"No friends found"})]})]})]}),o.jsx(In,{value:"requests",className:"flex-1 overflow-hidden m-0",children:o.jsxs("div",{className:"flex-1 overflow-y-auto dropsource-custom-scrollbar",style:{maxHeight:"calc(100% - 50px)",overflowY:"auto"},children:[Wu.map(F=>o.jsxs("div",{className:"p-4 border-b",style:{borderColor:"#1A2531"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:"#00AEEF"},children:F.avatar}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{style:{color:"#E6ECF3",fontWeight:"600"},children:F.username}),o.jsxs("div",{style:{color:"#A9B7C6",fontSize:"12px"},children:[F.mutualFriends," mutual friends"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Se,{size:"sm",className:"flex-1",style:{backgroundColor:"#22C55E",color:"#000"},children:"Accept"}),o.jsx(Se,{variant:"ghost",size:"sm",className:"flex-1 text-gray-400 hover:text-white border border-gray-600",children:"Decline"})]})]},F.id)),Wu.length===0&&o.jsxs("div",{className:"p-8 text-center",style:{color:"#A9B7C6"},children:[o.jsx(wg,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),o.jsx("p",{children:"No pending requests"})]})]})}),o.jsx(In,{value:"blocked",className:"flex-1 overflow-hidden m-0",children:o.jsxs("div",{className:"p-8 text-center",style:{color:"#A9B7C6"},children:[o.jsx(ss,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),o.jsx("p",{children:"No blocked users"})]})})]})}),o.jsx("div",{className:"p-3 border-t",style:{borderColor:"#1A2531"},children:o.jsxs(Se,{className:"w-full flex items-center gap-2",style:{backgroundColor:"#00AEEF",color:"#000"},children:[o.jsx(wg,{className:"w-4 h-4"}),"Add Friend"]})})]})}function GW({onClose:r,onMinimize:e,initialPosition:t,width:s,height:n,zIndex:i,onPositionChange:l,onSizeChange:d,onFocus:u}){const[h,p]=b.useState(t),[m,g]=b.useState(!1),[y,v]=b.useState({x:0,y:0}),[w,j]=b.useState(null),[C,N]=b.useState("all"),k=A7(),T=L=>{const X=L.target;X.tagName==="BUTTON"||X.closest("button")||X.closest(".scrapbook-content")||(L.preventDefault(),L.stopPropagation(),g(!0),v({x:L.clientX-h.x,y:L.clientY-h.y}),u())},E=L=>{if(!m)return;const X={x:L.clientX-y.x,y:L.clientY-y.y};p(X),l(X)},D=()=>{g(!1)};Ne.useEffect(()=>{if(m)return document.addEventListener("mousemove",E),document.addEventListener("mouseup",D),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",D)}},[m,y]);const M=L=>{alert(`Listing ${L.name} for auction! `)},P=L=>{alert(`Opening trade window for ${L.name}! `)},R=L=>{L.price&&alert(`Purchasing physical ${L.name} for $${L.price}! `)},F=L=>L==="legendary"||L==="special"?o.jsx(rt,{className:"w-3 h-3",fill:"currentColor"}):L==="epic"?o.jsx(zs,{className:"w-3 h-3",fill:"currentColor"}):o.jsx(Br,{className:"w-3 h-3"}),I=L=>L.charAt(0).toUpperCase()+L.slice(1),U=k.filter(L=>C==="all"?!0:C==="stickers"?L.type==="sticker":C==="cards"?L.type==="card":!0);return o.jsxs("div",{className:"fixed rounded-2xl shadow-2xl overflow-hidden flex flex-col",style:{left:h.x,top:h.y,width:`${s}px`,height:`${n}px`,zIndex:i,backgroundColor:"#0F1520",border:"1px solid rgba(167, 139, 250, 0.3)",boxShadow:"0 0 40px rgba(167, 139, 250, 0.2)",cursor:m?"grabbing":"default"},onClick:u,children:[o.jsxs("div",{className:"h-14 px-4 flex items-center justify-between border-b cursor-move select-none",style:{background:"linear-gradient(135deg, #1a1f2e 0%, #0a0f1a 100%)",borderBottom:"1px solid rgba(167, 139, 250, 0.2)"},onMouseDown:T,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("h3",{className:"text-xl font-bold",style:{background:"linear-gradient(90deg, #A78BFA, #FF6BAA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"My Scrapbook"}),o.jsxs("span",{className:"text-sm text-gray-400",children:[U.length," items"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-white/10 transition-all",children:o.jsx(Tc,{className:"w-4 h-4 text-gray-400"})}),o.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-white/10 transition-all hover:rotate-90",children:o.jsx(Cr,{className:"w-4 h-4 text-gray-400"})})]})]}),o.jsx("div",{className:"p-4 border-b",style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:o.jsx("div",{className:"flex gap-2",children:["all","stickers","cards"].map(L=>o.jsx("button",{onClick:()=>N(L),className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200",style:{backgroundColor:C===L?"rgba(167, 139, 250, 0.2)":"rgba(255,255,255,0.05)",border:`1px solid ${C===L?"#A78BFA":"rgba(255,255,255,0.1)"}`,color:C===L?"#A78BFA":"#9ca3af"},children:L.charAt(0).toUpperCase()+L.slice(1)},L))})}),o.jsx("div",{className:"flex-1 p-4 overflow-y-auto scrapbook-content",style:{backgroundColor:"#0a0f1a"},children:o.jsx("div",{className:"grid grid-cols-2 gap-4",children:U.map(L=>{const X=w===L.id,de=It(L.rarity),B=j0(L.rarity);return o.jsxs("div",{className:"relative rounded-xl overflow-hidden transition-all duration-300",style:{backgroundColor:"#1a1f2e",border:`2px solid ${X?de:"rgba(255,255,255,0.1)"}`,transform:X?"scale(1.05)":"scale(1)",boxShadow:X?`0 15px 30px ${B}`:"0 4px 12px rgba(0,0,0,0.3)"},onMouseEnter:()=>j(L.id),onMouseLeave:()=>j(null),children:[o.jsxs("div",{className:"relative h-32 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${B}, rgba(255,255,255,0.05))`},children:[X&&o.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:`radial-gradient(circle at center, ${de} 0%, transparent 70%)`,animation:"pulse 2s infinite"}}),o.jsxs("div",{className:"relative z-10 text-5xl",children:[L.type==="sticker"&&"",L.type==="card"&&""]}),o.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 rounded-full flex items-center gap-1 text-xs font-bold",style:{backgroundColor:B,border:`1px solid ${de}`,color:de},children:[F(L.rarity),I(L.rarity)]}),X&&o.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-bold",style:{backgroundColor:"rgba(0,0,0,0.6)",color:de},children:L.serial}),(L.rarity==="epic"||L.rarity==="legendary")&&o.jsx("div",{className:"absolute inset-0 opacity-40",style:{background:"linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%)",animation:"shine 3s infinite"}})]}),o.jsxs("div",{className:"p-3",children:[o.jsx("h4",{className:"font-bold text-sm mb-2 truncate",style:{color:"#F5F7FF"},children:L.name}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("button",{onClick:()=>M(L),className:"px-2 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 flex items-center justify-center gap-1",style:{backgroundColor:"rgba(251, 191, 36, 0.1)",border:"1px solid rgba(251, 191, 36, 0.3)",color:"#fbbf24"},children:[o.jsx(G0,{className:"w-3 h-3"}),"Auction"]}),o.jsxs("button",{onClick:()=>P(L),className:"px-2 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 flex items-center justify-center gap-1",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",color:"#3b82f6"},children:[o.jsx(y3,{className:"w-3 h-3"}),"Trade"]})]}),L.price&&o.jsxs("button",{onClick:()=>R(L),className:"px-2 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 flex items-center justify-center gap-1 w-full",style:{backgroundColor:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#22c55e"},children:[o.jsx(X0,{className:"w-3 h-3"}),"Buy Physical $",L.price]})]})]})]},L.id)})})}),o.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 0.3; }
          50% { opacity: 0.6; }
        }
        
        @keyframes shine {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
      `})]})}function YW({onNavigate:r}){const[e,t]=b.useState("drop-source-admin"),[s,n]=b.useState(""),i=[{id:"drop-source-admin",name:"Drop Source (Admin)",avatar:"",lastMessage:"So glad you love it! Have you checked out the Kickstarter?",time:"1h ago",unread:0,online:!0}],l=[{id:1,sender:"me",text:"Great Site! I've been looking for a spot to connect with a community and share/sell my works! I also love the sticker/card system! So creative!",time:"1h ago",isOwn:!0},{id:2,sender:"drop-source-admin",text:"So glad you love it! Have you checked out the Kickstarter?",time:"1h ago",isOwn:!1},{id:3,sender:"me",text:"Yep! I'm backing right now, I can't wait to see it when it's finished!",time:"1h ago",isOwn:!0}],d=i.find(h=>h.id===e),u=()=>{s.trim()&&(console.log("Sending message:",s),n(""))};return o.jsxs("div",{className:"h-screen flex flex-col overflow-hidden",style:{background:"linear-gradient(180deg, #0A0F1C 0%, #111827 100%)",color:"var(--dropsource-primary)"},children:[o.jsxs("header",{className:"flex items-center justify-between",style:{background:"rgba(18, 23, 35, 0.95)",borderBottom:"1px solid rgba(0, 174, 239, 0.2)",padding:"calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3)",backdropFilter:"blur(12px)",zIndex:20},children:[o.jsx("div",{className:"flex items-center dropsource-spacing-md",children:o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsxs("button",{onClick:()=>r("community"),className:"dropsource-nav-pill dropsource-focus-visible flex items-center gap-2",style:{padding:"calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2)"},children:[o.jsx(Nc,{className:"w-4 h-4"}),o.jsx("span",{children:"Back to Home"})]})}),o.jsx(wt,{children:"Back to Community Hub"})]})}),o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("h1",{style:{color:"#00AEEF",fontSize:"var(--text-lg)",fontWeight:"600"},children:"Direct Contact Portal"}),o.jsx("p",{style:{color:"var(--dropsource-tertiary)",fontSize:"var(--text-sm)",marginTop:"2px"},children:"Connect with creators"})]}),o.jsx("div",{className:"flex items-center dropsource-spacing-sm",children:o.jsxs("div",{className:"relative",children:[o.jsx(Gr,{placeholder:"Search conversations...",className:"dropsource-input pr-10",style:{width:"200px",paddingLeft:"calc(var(--spacing-unit) * 2)"}}),o.jsx(Io,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 dropsource-text-tertiary"})]})})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsxs("div",{className:"w-80 flex flex-col",style:{background:"rgba(17, 24, 39, 0.8)",borderRight:"1px solid rgba(0, 174, 239, 0.2)"},children:[o.jsx("div",{className:"p-4",style:{borderBottom:"1px solid rgba(0, 174, 239, 0.2)"},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{style:{fontSize:"var(--text-md)",fontWeight:"600",color:"var(--dropsource-primary)"},children:"Messages"}),o.jsx("button",{className:"dropsource-toolbar-button",children:o.jsx(ac,{className:"w-4 h-4"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto dropsource-custom-scrollbar",children:i.map(h=>o.jsx("div",{onClick:()=>t(h.id),className:"p-4 cursor-pointer transition-all duration-150",style:{borderBottom:"1px solid rgba(0, 174, 239, 0.1)",background:e===h.id?"rgba(0, 174, 239, 0.1)":"transparent",borderLeft:e===h.id?"2px solid #00AEEF":"2px solid transparent"},onMouseEnter:p=>{e!==h.id&&(p.currentTarget.style.background="rgba(0, 174, 239, 0.05)")},onMouseLeave:p=>{e!==h.id&&(p.currentTarget.style.background="transparent")},children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-dropsource-surface flex items-center justify-center text-lg",children:h.avatar}),h.online&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-dropsource-panel"})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{style:{fontSize:"var(--text-sm)",fontWeight:"500",color:"var(--dropsource-primary)"},children:h.name}),o.jsx("span",{style:{fontSize:"var(--text-xs)",color:"var(--dropsource-tertiary)"},children:h.time})]}),o.jsx("p",{style:{fontSize:"var(--text-xs)",color:"var(--dropsource-secondary)",marginTop:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:h.lastMessage})]}),h.unread>0&&o.jsx("div",{className:"w-5 h-5 bg-dropsource-brand rounded-full flex items-center justify-center text-xs font-semibold text-black",children:h.unread})]})},h.id))})]}),o.jsxs("div",{className:"flex-1 flex flex-col",children:[d&&o.jsxs("div",{className:"p-4 flex items-center justify-between",style:{borderBottom:"1px solid rgba(0, 174, 239, 0.2)",background:"rgba(17, 24, 39, 0.6)"},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-dropsource-surface flex items-center justify-center",children:d.avatar}),d.online&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-2.5 h-2.5 bg-green-500 rounded-full border border-dropsource-surface"})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{fontSize:"var(--text-sm)",fontWeight:"500",color:"var(--dropsource-primary)"},children:d.name}),o.jsx("p",{style:{fontSize:"var(--text-xs)",color:"var(--dropsource-tertiary)"},children:d.online?"Online":"Last seen 1h ago"})]})]}),o.jsx("div",{className:"flex items-center dropsource-spacing-sm"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 dropsource-custom-scrollbar",children:o.jsx("div",{className:"space-y-4",children:l.map(h=>o.jsxs("div",{className:`flex ${h.isOwn?"justify-end":"justify-start"} gap-3`,children:[!h.isOwn&&o.jsx("div",{className:"dcp-message-avatar",children:""}),o.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg",style:{background:h.isOwn?"#00AEEF":"rgba(17, 24, 39, 0.8)",color:h.isOwn?"#000":"var(--dropsource-primary)",borderRadius:"var(--radius-sharp)"},children:[o.jsx("p",{style:{fontSize:"var(--text-sm)"},children:h.text}),o.jsx("p",{style:{fontSize:"var(--text-xs)",marginTop:"4px",opacity:.7},children:h.time})]}),h.isOwn&&o.jsx("div",{className:"dcp-message-avatar",children:""})]},h.id))})}),o.jsx("div",{className:"p-4",style:{borderTop:"1px solid rgba(0, 174, 239, 0.2)",background:"rgba(17, 24, 39, 0.6)"},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Gr,{value:s,onChange:h=>n(h.target.value),placeholder:"Type a message...",className:"dropsource-input",onKeyPress:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),u())}})}),o.jsx(Se,{onClick:u,disabled:!s.trim(),className:"px-4",style:{background:"#00AEEF",color:"#000",border:"none",borderRadius:"var(--radius-sharp)"},children:o.jsx(Mc,{className:"w-4 h-4"})})]})})]})]})]})}function XW({onNavigate:r}){const[e,t]=b.useState("all"),s=[{id:1,title:"DropSource Kickstarter Campaign Goes Live!",excerpt:"Join us on Kickstarter to fund the community-owned creator hub. Backers get early access features and limited edition collectibles.",emoji:"",author:"Drop Source Team",authorAvatar:"",publishedAt:"2 hours ago",category:"Kickstarter",likes:1234,comments:234,featured:!0,tags:["kickstarter"]},{id:2,title:"Introducing DropSource Stickers & Card Creation System",excerpt:"Create unique stickers and collectible cards from your work, trade with friends, and showcase your journey. Here's how it works and what's coming next.",emoji:"",author:"Drop Source Team",authorAvatar:"",publishedAt:"6 hours ago",category:"Features",likes:892,comments:156,featured:!1,tags:["features"]},{id:3,title:"How to Connect with the DropSource Community",excerpt:"Find collaborators, join creator groups, and take part in community challenges. A quick guide to meaningful connections on DropSource.",emoji:"",author:"Drop Source Team",authorAvatar:"",publishedAt:"8 hours ago",category:"Community",likes:567,comments:89,featured:!1,tags:["community"]},{id:4,title:"Platform Update: AI Collaboration Tools",excerpt:"New AI assistance for brainstorming, versioning, and feedback so teams can move from idea to drop faster.",emoji:"",author:"Drop Source Team",authorAvatar:"",publishedAt:"1 day ago",category:"Updates",likes:723,comments:134,featured:!1,tags:["updates"]},{id:5,title:"Getting Started Guide for New Users",excerpt:"Everything you need to know on day oneprofiles, projects, stickers/cards, and posting to Creator News.",emoji:"",author:"Drop Source Team",authorAvatar:"",publishedAt:"2 days ago",category:"Tutorials",likes:445,comments:78,featured:!1,tags:["tutorials"]}],n=[{id:1,author:"PixelSmith",avatar:"",specialty:"Digital Artist",title:"Indie Artist Hits 1,000 Sticker Sales",excerpt:"A milestone for creator-led commerce: PixelSmith's neon sticker set crossed 1K sales with community promos and Spotlight boosts. Tips inside.",timeAgo:"3 hours ago",reactions:312,comments:45,isSpotlight:!0,category:"Achievement"},{id:2,author:"VerseWriter",avatar:"",specialty:"Poet / Storyteller",title:"How One Creator Built a Fanbase Overnight",excerpt:"A single heartfelt story, a clear call-to-action, and cross-posting to Creator News pushed VerseWriter to the top of the week's trends.",timeAgo:"5 hours ago",reactions:198,comments:32,isSpotlight:!1,category:"Success Story"},{id:3,author:"CodeCrafter",avatar:"",specialty:"Indie Developer",title:"Community Raises $2K for Local Studio",excerpt:"Creators pooled sales and tips to help CodeCrafter finish a small recording/streaming setupshowing how DropSource rallies behind its own.",timeAgo:"8 hours ago",reactions:456,comments:67,isSpotlight:!0,category:"Community Support"},{id:4,author:"SnackLord",avatar:"",specialty:"Beat Creator",title:"This Beat Is Basically Just Microwave Sounds (and it slaps)",excerpt:"A playful experiment turned into a community earwormproof that creativity > gear when the idea hits.",timeAgo:"2 hours ago",reactions:89,comments:23,isSpotlight:!1,category:"Experimental"},{id:5,author:"MemeDealer",avatar:"",specialty:"Content Creator",title:"Sticker War: Cat vs. Frog Edition",excerpt:"Two sticker sets entered, one meme emerged victorious. Voters crowned a champion and unlocked a limited badge.",timeAgo:"6 hours ago",reactions:156,comments:38,isSpotlight:!1,category:"Community Event"},{id:6,author:"BugHunter",avatar:"",specialty:"QA Tester",title:"When You Upload the Wrong File and Still Trend",excerpt:"A mislabeled voice memo accidentally posted, the community laughed, then ralliedturning a mistake into a viral moment.",timeAgo:"1 day ago",reactions:234,comments:56,isSpotlight:!1,category:"Community Love"}],i=[{id:1,title:"DropSource Community Hits 50K Active Creators",excerpt:"A milestone celebration of our thriving creative community. From bedroom producers to chart-toppers, this is what collaborative creation looks like.",emoji:"",author:"Drop Source Team",authorAvatar:"",publishedAt:"1 week ago",category:"Hall of Fame",likes:5670,comments:892,featured:!1,tags:["golden"],isGolden:!0},{id:2,title:"The Beat That Changed Everything: Community Success Story",excerpt:"How a simple loop shared on DropSource became a worldwide hit, featuring three different creators and five million streams.",emoji:"",author:"Drop Source Team",authorAvatar:"",publishedAt:"2 weeks ago",category:"Legend",likes:4320,comments:567,featured:!1,tags:["golden"],isGolden:!0},{id:3,title:"Creator of the Year: The PixelSmith Journey",excerpt:"From first upload to platform superstarthe inspiring story of how one artist built a creative empire through community collaboration.",emoji:"",author:"Drop Source Team",authorAvatar:"",publishedAt:"3 weeks ago",category:"Achievement",likes:3890,comments:445,featured:!1,tags:["golden"],isGolden:!0},{id:4,title:"Most Remixed Track Record Broken",excerpt:"A single DropSource upload spawned over 1,000 community remixes, creating the largest collaborative music project in platform history.",emoji:"",author:"Drop Source Team",authorAvatar:"",publishedAt:"1 month ago",category:"Record",likes:7200,comments:1156,featured:!1,tags:["golden"],isGolden:!0}],l=()=>e==="all"?s:e==="golden"?i:s.filter(h=>h.tags.includes(e)),d=s.find(h=>h.featured),u=({item:h,isCreator:p=!1,isGolden:m=!1})=>o.jsxs("div",{className:"rounded transition-all duration-200",style:{backgroundColor:"var(--ds-card)",border:h.isSpotlight?"1px solid #FFD700":"1px solid var(--ds-border)",padding:"20px"},onMouseEnter:g=>{g.currentTarget.style.transform="translateY(-2px)",g.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.3)"},onMouseLeave:g=>{g.currentTarget.style.transform="translateY(0)",g.currentTarget.style.boxShadow="none"},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:`news-category-pill news-category-${h.category.toLowerCase()}`,title:h.category,children:h.category}),h.featured&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded text-xs",style:{background:"linear-gradient(220deg, #FFD700 0%, #FFB347 100%)",color:"var(--ds-bg)",fontWeight:"600"},children:[o.jsx(rt,{className:"w-3 h-3"}),"Featured"]}),h.isSpotlight&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded text-xs",style:{background:"linear-gradient(220deg, #FFD700 0%, #FFB347 100%)",color:"var(--ds-bg)",fontWeight:"600"},children:[o.jsx(rt,{className:"w-3 h-3"}),"Spotlight"]}),h.isGolden&&o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded text-xs",style:{background:"linear-gradient(220deg, #FFB039 0%, #FFD369 100%)",color:"var(--ds-bg)",fontWeight:"600"},children:[o.jsx(rt,{className:"w-3 h-3"}),"Hall of Fame"]})]}),o.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[(h.emoji||h.avatar)&&o.jsx("div",{className:"text-2xl flex-shrink-0",children:h.emoji||h.avatar}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{style:{fontSize:"var(--text-md)",fontWeight:"600",color:"var(--ds-text)",lineHeight:"1.4",marginBottom:"8px"},children:p?`${h.author}  ${h.title}`:h.title}),p&&o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{style:{fontSize:"var(--text-xs)",color:"var(--ds-text-subtle)"},children:h.specialty}),o.jsxs("span",{style:{fontSize:"var(--text-xs)",color:"var(--ds-text-subtle)"},children:[" ",h.timeAgo]})]})]})]}),o.jsx("p",{style:{fontSize:"var(--text-sm)",color:"var(--ds-text-subtle)",lineHeight:"1.5",marginBottom:"16px"},children:h.excerpt}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs",style:{backgroundColor:"rgba(15, 21, 32, 0.8)"},children:p?h.avatar:h.authorAvatar}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"var(--text-xs)",fontWeight:"500",color:"var(--ds-text)"},children:h.author}),o.jsx("p",{style:{fontSize:"var(--text-xs)",color:"var(--ds-text-subtle)"},children:p?h.timeAgo:h.publishedAt})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{className:"flex items-center gap-1 p-1 rounded",children:[o.jsx(Mo,{className:"w-3 h-3",style:{color:h.isGolden?"#FFB039":h.isSpotlight?"#FFD700":"var(--ds-blue)"}}),o.jsx("span",{style:{fontSize:"var(--text-xs)",color:h.isGolden?"#FFB039":h.isSpotlight?"#FFD700":"var(--ds-blue)",fontWeight:"500"},children:p?h.reactions:h.likes})]}),o.jsxs("button",{className:"flex items-center gap-1 p-1 rounded",children:[o.jsx(Sr,{className:"w-3 h-3",style:{color:"var(--ds-text-subtle)"}}),o.jsx("span",{style:{fontSize:"var(--text-xs)",color:"var(--ds-text-subtle)"},children:h.comments})]})]})]})]});return o.jsxs("div",{className:"h-screen flex flex-col overflow-hidden",style:{background:"var(--ds-bg)",color:"var(--ds-text)"},children:[o.jsxs("header",{className:"flex items-center justify-between",style:{background:"rgba(15, 21, 32, 0.95)",borderBottom:"1px solid var(--ds-border)",padding:"calc(var(--spacing-unit) * 3) calc(var(--spacing-unit) * 6)",backdropFilter:"blur(12px)",zIndex:20},children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsxs("button",{onClick:()=>r("community"),className:"flex items-center gap-2 px-4 py-2 rounded transition-all duration-150",style:{color:"var(--ds-text)",backgroundColor:"transparent"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="var(--ds-blue-soft)",h.currentTarget.style.color="var(--ds-blue)"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent",h.currentTarget.style.color="var(--ds-text)"},children:[o.jsx(Nc,{className:"w-4 h-4"}),o.jsx("span",{children:"Back to Home"})]})}),o.jsx(wt,{children:"Back to Community Hub"})]})}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4",style:{color:"var(--ds-text-subtle)",zIndex:1}}),o.jsx(Gr,{placeholder:"Search articles...",className:"pl-10 pr-4 py-2",style:{width:"200px",color:"var(--ds-text)",backgroundColor:"var(--ds-card)",border:"1px solid var(--ds-border)",borderRadius:"4px",paddingLeft:"40px"}})]}),o.jsx("button",{className:"p-2 rounded transition-all duration-150",style:{color:"var(--ds-text-subtle)",backgroundColor:"transparent"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="var(--ds-blue-soft)",h.currentTarget.style.color="var(--ds-blue)"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent",h.currentTarget.style.color="var(--ds-text-subtle)"},children:o.jsx(vD,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",width:"100%"},children:o.jsxs("div",{style:{width:"1120px",paddingLeft:"24px",paddingRight:"24px",paddingTop:"24px",paddingBottom:"24px",position:"relative"},children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{style:{color:"var(--ds-blue)",fontSize:"var(--text-xl)",fontWeight:"600"},children:"Drop NEWS"}),o.jsx("p",{style:{color:"var(--ds-text-subtle)",fontSize:"var(--text-sm)",marginTop:"4px"},children:"Learn about DropSource, Kickstarter progress & community updates"})]}),o.jsx("div",{className:"flex items-center gap-6 justify-center",style:{marginBottom:"24px"},children:[{id:"all",label:"All News"},{id:"creator",label:"Creator"},{id:"golden",label:"Golden"},{id:"kickstarter",label:"Kickstarter"},{id:"features",label:"Features"},{id:"community",label:"Community"},{id:"tutorials",label:"Tutorials"},{id:"updates",label:"Updates"}].map(h=>o.jsx("button",{onClick:()=>t(h.id),className:"px-4 py-2 rounded transition-all duration-150",style:{backgroundColor:e===h.id?h.id==="golden"?"rgba(255, 176, 57, 0.16)":(h.id==="creator","rgba(99,179,255,0.16)"):"transparent",color:e===h.id?h.id==="golden"?"#FFB039":(h.id==="creator","#63B3FF"):h.id==="creator"&&e==="all"?"#FFB039":"var(--ds-text-subtle)",border:e===h.id?"1px solid "+(h.id==="golden"?"#FFB039":(h.id==="creator","#63B3FF")):h.id==="creator"&&e==="all"?"2px solid #FFB039":"1px solid transparent",fontSize:"var(--text-sm)",fontWeight:h.id==="creator"&&e==="all"?"500":"400"},children:h.label},h.id))}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px",width:"1096px",margin:"0 auto",justifyItems:"center"},children:e==="creator"?n.map(h=>o.jsx("div",{style:{width:"100%",height:"fit-content"},children:o.jsx(u,{item:h,isCreator:!0})},h.id)):e==="golden"?i.map(h=>o.jsx("div",{style:{width:"100%",height:"fit-content"},children:o.jsx(u,{item:h,isCreator:!1,isGolden:!0})},h.id)):o.jsxs(o.Fragment,{children:[d&&e==="all"&&o.jsxs("div",{className:"overflow-hidden rounded relative",style:{backgroundColor:"var(--ds-card)",border:"1px solid var(--ds-border)",padding:"32px",width:"100%",height:"fit-content"},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 rounded",style:{background:"linear-gradient(220deg, #FFD700 0%, #FFB347 100%)",color:"var(--ds-bg)",fontSize:"var(--text-xs)",fontWeight:"600"},children:[o.jsx(rt,{className:"w-3 h-3"}),"Featured"]}),o.jsx(ht,{variant:"outline",style:{color:"var(--ds-blue)",borderColor:"var(--ds-blue)",backgroundColor:"var(--ds-blue-soft)"},children:d.category})]}),o.jsxs("div",{className:"flex items-start gap-6",children:[o.jsx("div",{className:"text-6xl",children:d.emoji}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{style:{fontSize:"var(--text-xl)",fontWeight:"600",color:"var(--ds-text)",marginBottom:"12px"},children:d.title}),o.jsx("p",{style:{fontSize:"var(--text-base)",color:"var(--ds-text-subtle)",lineHeight:"1.6",marginBottom:"16px"},children:d.excerpt}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(15, 21, 32, 0.8)"},children:d.authorAvatar}),o.jsxs("div",{children:[o.jsx("p",{style:{fontSize:"var(--text-sm)",fontWeight:"500",color:"var(--ds-text)"},children:d.author}),o.jsx("p",{style:{fontSize:"var(--text-xs)",color:"var(--ds-text-subtle)"},children:d.publishedAt})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{className:"flex items-center gap-1 p-2 rounded",children:[o.jsx(Mo,{className:"w-4 h-4",style:{color:"var(--ds-blue)"}}),o.jsx("span",{style:{fontSize:"var(--text-xs)",color:"var(--ds-blue)",fontWeight:"500"},children:d.likes})]}),o.jsxs("button",{className:"flex items-center gap-1 p-2 rounded",children:[o.jsx(Sr,{className:"w-4 h-4",style:{color:"var(--ds-text-subtle)"}}),o.jsx("span",{style:{fontSize:"var(--text-xs)",color:"var(--ds-text-subtle)"},children:d.comments})]})]})]})]})]})]}),l().filter(h=>!h.featured||e!=="all").map(h=>o.jsx("div",{style:{width:"100%",height:"fit-content"},children:o.jsx(u,{item:h,isCreator:!1})},h.id))]})})]})})]})}const KW=[{id:"general",name:"#general",active:!0,description:"General discussion"},{id:"show-and-tell",name:"#show-and-tell",active:!1,description:"Share your creations"},{id:"memes",name:"#memes",active:!1,description:"Memes and fun content"},{id:"trades",name:"#trades",active:!1,description:"Trading collectibles"},{id:"stickers",name:"#stickers",active:!1,description:"Sticker discussion"},{id:"auctions",name:"#auctions",active:!1,description:"Live auctions"},{id:"help",name:"#help",active:!1,description:"Get help and support"},{id:"offtopic",name:"#offtopic",active:!1,description:"Off-topic chat"}],qW=["CraftyCrow","CodeWizard","PixelSmith","MidnightCoder","ZineZebra","AuctionBot","MemeQueen","DevLife","PixelPal","CoffeeCreator","SnackAttack","ReactiveRaven","FireStarter","LinkSeeker","SerialHunter","BeatHarderThnMyMeat","tax_evasion_420","GothGF","SynthMaster"],ZW=[{id:"1",username:"CraftyCrow",handle:"@CraftyCrow",avatar:"",content:"just dropped 'Retro Sunflower' [Sticker]  Serial 88/250",timestamp:new Date(Date.now()-5e3),type:"sticker",channel:"general",attachments:[{type:"sticker",title:"Retro Sunflower",creator:"CraftyCrow",serial:"88/250",rarity:"rare"}]},{id:"2",username:"CodeWizard",handle:"@CodeWizard",avatar:"",content:"brb exporting a 'Mega Frog Pack'",timestamp:new Date(Date.now()-15e3),type:"text",channel:"general"},{id:"3",username:"PixelSmith",handle:"@PixelSmith",avatar:"",content:"anyone trading Cheese God 3000? #ISO @CraftyCrow might have one",timestamp:new Date(Date.now()-25e3),type:"text",channel:"trades",mentions:["CraftyCrow"]},{id:"4",username:"MidnightCoder",handle:"@MidnightCoder",avatar:"",content:"mood: debugging at 2am ",timestamp:new Date(Date.now()-35e3),type:"text",channel:"general"},{id:"5",username:"ZineZebra",handle:"@ZineZebra",avatar:"",content:"thanks @PixelSmith for the collab! preview",timestamp:new Date(Date.now()-45e3),type:"image",channel:"show-and-tell",mentions:["PixelSmith"],attachments:[{type:"image",title:"Collab Preview",url:"https://picsum.photos/200/120?random=1"}]},{id:"6",username:"AuctionBot",handle:"@AuctionBot",avatar:"",content:"auction in 10: Bonk Horny Jail (Card)  current  45",timestamp:new Date(Date.now()-55e3),type:"card",channel:"auctions",attachments:[{type:"card",title:"Bonk Horny Jail",serial:"12/100",rarity:"elite"}]},{id:"7",username:"MemeQueen",handle:"@MemeQueen",avatar:"",content:"ship it or skip it",timestamp:new Date(Date.now()-65e3),type:"text",channel:"memes"},{id:"8",username:"DevLife",handle:"@DevLife",avatar:"",content:"ctrl+s your feelings",timestamp:new Date(Date.now()-75e3),type:"text",channel:"general"},{id:"9",username:"PixelPal",handle:"@PixelPal",avatar:"",content:"pixels > sleep",timestamp:new Date(Date.now()-85e3),type:"text",channel:"general"},{id:"10",username:"CoffeeCreator",handle:"@CoffeeCreator",avatar:"",content:"gm gm",timestamp:new Date(Date.now()-95e3),type:"text",channel:"general"}],O2=[{id:"11",username:"SnackAttack",handle:"@SnackAttack",avatar:"",content:"back from snack run",timestamp:new Date(Date.now()-105e3),type:"text",channel:"general"},{id:"12",username:"ReactiveRaven",handle:"@ReactiveRaven",avatar:"",content:"W",timestamp:new Date(Date.now()-115e3),type:"text",channel:"general"},{id:"13",username:"FireStarter",handle:"@FireStarter",avatar:"",content:"fire",timestamp:new Date(Date.now()-125e3),type:"text",channel:"general"},{id:"14",username:"LinkSeeker",handle:"@LinkSeeker",avatar:"",content:"send link?",timestamp:new Date(Date.now()-135e3),type:"text",channel:"general"},{id:"15",username:"SerialHunter",handle:"@SerialHunter",avatar:"",content:"serial pls",timestamp:new Date(Date.now()-145e3),type:"text",channel:"general"}];function JW({onClose:r,onMinimize:e,initialPosition:t,width:s,height:n,zIndex:i,onPositionChange:l,onSizeChange:d,onFocus:u}){const[h,p]=b.useState("general"),[m,g]=b.useState(ZW),[y,v]=b.useState(""),[w,j]=b.useState(!1),[C,N]=b.useState({x:0,y:0}),[k,T]=b.useState(t),[E,D]=b.useState(!1),[M,P]=b.useState(""),[R,F]=b.useState(null),I=b.useRef(null),U=["Share a WIP","Drop a sticker","Shout out a creator with @"],[L,X]=b.useState(0);b.useEffect(()=>{const q=setInterval(()=>{X(ce=>(ce+1)%U.length)},3e3);return()=>clearInterval(q)},[]),b.useEffect(()=>{const q=setInterval(()=>{if(Math.random()>.7){const ce=O2[Math.floor(Math.random()*O2.length)],we={...ce,id:`${Date.now()}-${Math.random()}`,timestamp:new Date,channel:Math.random()>.7?h:ce.channel||"general"};g(xe=>[...xe.slice(-20),we])}},3e3);return()=>clearInterval(q)},[h]),b.useEffect(()=>{I.current?.scrollIntoView({behavior:"smooth"})},[m]),b.useEffect(()=>{const q=y.lastIndexOf("@");if(q!==-1){const ce=y.slice(q+1);ce.length>0&&!ce.includes(" ")?(P(ce.toLowerCase()),D(!0)):ce.length===0?(P(""),D(!0)):D(!1)}else D(!1)},[y]);const de=q=>{q.target.closest(".chat-content")||(j(!0),N({x:q.clientX-k.x,y:q.clientY-k.y}),u())},B=q=>{if(!w)return;const ce={x:q.clientX-C.x,y:q.clientY-C.y};T(ce),l(ce)},V=()=>{j(!1)};b.useEffect(()=>{if(w)return document.addEventListener("mousemove",B),document.addEventListener("mouseup",V),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",V)}},[w,C]);const O=q=>({common:"#22C55E",rare:"#FF70A6",premium:"#60A5FA",elite:"#3D94FF",legendary:"#F59E0B"})[q]||"#22C55E",Z=m.filter(q=>q.channel===h||!q.channel),Q=qW.filter(q=>q.toLowerCase().includes(M)),W=q=>{const ce=y.lastIndexOf("@"),we=y.slice(0,ce),xe=y.slice(ce).replace(/@\w*/,`@${q} `);v(we+xe),D(!1)},ae=q=>{const ce=q.type==="system",we=xe=>{const se=[],K=/@(\w+)/g,fe=/'([^']+)'/g;let ie=0,Te;for(;(Te=K.exec(xe))!==null;)Te.index>ie&&se.push(xe.slice(ie,Te.index)),se.push(o.jsx("span",{className:"text-blue-400 font-medium hover:text-blue-300 cursor-pointer",children:Te[0]},`mention-${Te.index}`)),ie=Te.index+Te[0].length;if(ie<xe.length){let pe=xe.slice(ie);const ue=[];let re=0;for(;(Te=fe.exec(pe))!==null;)Te.index>re&&ue.push(pe.slice(re,Te.index)),ue.push(o.jsxs("span",{className:"text-purple-400 font-medium hover:text-purple-300 cursor-pointer",onMouseEnter:()=>F({name:Te[1],x:0,y:0}),onMouseLeave:()=>F(null),children:["'",Te[1],"'"]},`sticker-${Te.index}`)),re=Te.index+Te[0].length;re<pe.length&&ue.push(pe.slice(re)),se.push(...ue)}return se.length>1?se:xe};return o.jsxs("div",{className:`flex gap-3 ${ce?"justify-center":""} group`,children:[!ce&&o.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-xs font-semibold text-white flex-shrink-0",children:q.avatar}),o.jsxs("div",{className:`flex-1 ${ce?"text-center":""}`,children:[!ce&&o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-semibold text-white",children:q.username}),o.jsx("span",{className:"text-xs text-gray-400",children:q.handle}),o.jsx("span",{className:"text-xs text-gray-500",children:q.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),o.jsx("div",{className:`text-sm ${ce?"text-gray-400 italic":"text-gray-200"}`,children:we(q.content)}),q.attachments&&o.jsx("div",{className:"mt-2 flex gap-2",children:q.attachments.map((xe,se)=>o.jsxs("div",{className:"relative group/attachment",children:[xe.type==="sticker"&&o.jsx("div",{className:"w-24 h-24 rounded border-2 bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold hover:scale-105 transition-transform cursor-pointer",style:{borderColor:O(xe.rarity||"common")},children:""}),xe.type==="card"&&o.jsx("div",{className:"w-32 h-20 rounded border-2 bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center text-white font-bold hover:scale-105 transition-transform cursor-pointer",style:{borderColor:O(xe.rarity||"common")},children:""}),xe.type==="image"&&o.jsx("img",{src:xe.url,alt:xe.title,className:"max-w-xs rounded hover:scale-105 transition-transform cursor-pointer"}),o.jsxs("div",{className:"absolute -top-24 left-1/2 transform -translate-x-1/2 bg-black/95 text-white text-xs rounded-lg px-4 py-3 opacity-0 group-hover/attachment:opacity-100 transition-opacity pointer-events-none z-50 whitespace-nowrap border border-gray-600",children:[o.jsx("div",{className:"font-semibold text-center mb-2",children:xe.title}),xe.creator&&o.jsxs("div",{className:"text-gray-300",children:["Creator: ",xe.creator]}),xe.serial&&o.jsxs("div",{className:"text-gray-300",children:["Serial ",xe.serial]}),xe.rarity&&o.jsx("div",{className:"flex items-center justify-center gap-2 mt-2 mb-2",children:o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold text-black",style:{backgroundColor:O(xe.rarity)},children:xe.rarity.charAt(0).toUpperCase()+xe.rarity.slice(1)})}),o.jsxs("div",{className:"flex gap-1 mt-2 text-xs justify-center",children:[o.jsx("button",{className:"bg-blue-600 px-3 py-1 rounded hover:bg-blue-500 transition-colors",children:"View"}),o.jsx("button",{className:"bg-green-600 px-3 py-1 rounded hover:bg-green-500 transition-colors",children:"Gift"}),o.jsx("button",{className:"bg-yellow-600 px-3 py-1 rounded hover:bg-yellow-500 transition-colors",children:"Trade"}),o.jsx("button",{className:"bg-purple-600 px-3 py-1 rounded hover:bg-purple-500 transition-colors",children:"Auction"})]})]})]},se))})]})]},q.id)};return o.jsxs("div",{className:`fixed rounded-2xl border border-white/8 bg-zinc-950/90 backdrop-blur-md shadow-[0_10px_40px_rgba(0,0,0,0.6)] w-[820px] max-h-[72vh] overflow-hidden flex flex-col ${w?"dragging":""}`,style:{left:k.x,top:k.y,zIndex:i,cursor:w?"grabbing":"default"},onClick:u,children:[o.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-white/5 cursor-move",onMouseDown:de,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Sr,{className:"w-5 h-5 text-blue-400"}),o.jsx("h3",{className:"font-semibold text-white",children:"Live Chats"}),o.jsxs(ht,{className:"bg-green-600/20 text-green-400 border-green-600/30",children:[Z.length," msgs"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx(Se,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:o.jsx(Io,{className:"w-4 h-4"})})}),o.jsx(wt,{children:"Search Messages"})]}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx(Se,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:o.jsx(Si,{className:"w-4 h-4"})})}),o.jsx(wt,{children:"Create/Join Channel"})]}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-white",children:o.jsx(Tc,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",onClick:r,className:"text-gray-400 hover:text-red-400",children:o.jsx(Cr,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"h-10 px-3 flex items-center gap-2 border-b border-white/5 bg-gray-900/50",children:o.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-thin",children:KW.map(q=>{const ce=m.filter(xe=>xe.channel===q.id||!xe.channel&&q.id==="general"),we=ce.some(xe=>xe.timestamp>new Date(Date.now()-3e4));return o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsxs("button",{onClick:()=>p(q.id),className:`px-4 py-2 rounded-lg text-xs font-medium whitespace-nowrap transition-all relative flex items-center gap-2 ${h===q.id?"bg-blue-600 text-white shadow-lg shadow-blue-600/30 border border-blue-500":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50 border border-gray-600/50"}`,children:[o.jsx(Y0,{className:"w-3 h-3"}),q.name.replace("#",""),we&&h!==q.id&&o.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"})]})}),o.jsx(wt,{children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium",children:q.name}),o.jsx("div",{className:"text-xs text-gray-400",children:q.description}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[ce.length," messages"]})]})})]},q.id)})})}),o.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto",children:o.jsxs("div",{className:"p-4 space-y-4 chat-content dropsource-custom-scrollbar",children:[Z.map(ae),o.jsx("div",{ref:I})]})}),o.jsxs("div",{className:"h-12 px-3 border-t border-white/5 flex items-center gap-2 relative",children:[E&&Q.length>0&&o.jsx("div",{className:"absolute bottom-full left-3 right-3 mb-2 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-10 max-h-32 overflow-y-auto",children:Q.slice(0,5).map(q=>o.jsxs("button",{onClick:()=>W(q),className:"w-full px-3 py-2 text-left text-gray-200 hover:bg-gray-700 transition-colors flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-xs font-semibold text-white",children:q.charAt(0)}),o.jsxs("span",{children:["@",q]})]},q))}),o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(Gr,{value:y,onChange:q=>v(q.target.value),placeholder:U[L],className:"pr-16 bg-gray-800 border-gray-600 text-white placeholder-gray-400",onKeyPress:q=>{if(q.key==="Enter"&&y.trim()&&!E){const ce=(y.match(/@(\w+)/g)||[]).map(xe=>xe.slice(1)),we={id:Date.now().toString(),username:"You",handle:"@you",avatar:"",content:y,timestamp:new Date,type:"text",channel:h,mentions:ce};g(xe=>[...xe,we]),v("")}}}),o.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1",children:[o.jsx(Se,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-400 hover:text-white",children:o.jsx($C,{className:"w-4 h-4"})}),o.jsx(Se,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-400 hover:text-white",children:o.jsx(HC,{className:"w-4 h-4"})})]})]}),o.jsx(Se,{size:"sm",className:"bg-blue-600 hover:bg-blue-500",disabled:!y.trim(),onClick:()=>{if(y.trim()){const q=(y.match(/@(\w+)/g)||[]).map(we=>we.slice(1)),ce={id:Date.now().toString(),username:"You",handle:"@you",avatar:"",content:y,timestamp:new Date,type:"text",channel:h,mentions:q};g(we=>[...we,ce]),v("")}},children:o.jsx(Mc,{className:"w-4 h-4"})})]})]})}const QW=[{to:"community",label:"Home"},{to:"community-feed",label:"Community Hub"},{to:"pad",label:"Pad"},{to:"shop",label:"Shop"},{to:"profile",label:"Profile"},{to:"dms",label:"DMs"},{to:"friends",label:"Friends"},{to:"scrapbook",label:"Scrapbook"},{to:"book",label:"DropSource Book"},{to:"auction",label:"Auction"},{to:"live-chat",label:"Chat"}];function eH({currentPage:r,onNavigate:e,onOpenFeature:t}){const{open:s,focus:n,state:i}=K0(),l=d=>{["community","community-feed","pad","profile","book"].includes(d.to)?e(d.to):d.to==="live-chat"?i.isOpen?n():s():t(d.to)};return o.jsx("nav",{className:"sticky top-0 z-40 border-b backdrop-blur-md",style:{backgroundColor:"rgba(11, 15, 20, 0.9)",borderBottomColor:"#1A2531",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:o.jsxs("div",{className:"mx-auto h-12 flex items-center justify-between px-6",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("span",{className:"text-lg font-bold dropsource-logo-enhanced cursor-pointer",onClick:()=>e("community"),style:{background:"linear-gradient(90deg, #00AEEF 0%, #8F63FF 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"DropSource"})}),o.jsx("div",{className:"flex items-center gap-2",children:QW.map(d=>{const u=r===d.to;return o.jsxs("button",{onClick:()=>l(d),className:"px-4 py-2 text-sm font-medium transition-all duration-200 relative",style:{color:u?"#E6ECF3":"#A9B7C6",backgroundColor:"transparent",border:"none",borderRadius:"4px",position:"relative"},onMouseEnter:h=>{u||(h.currentTarget.style.color="#E6ECF3")},onMouseLeave:h=>{u||(h.currentTarget.style.color="#A9B7C6")},children:[d.label,u&&o.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 rounded-full",style:{backgroundColor:"#3BA7FF"}})]},d.to)})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full",style:{backgroundColor:"rgba(255, 176, 57, 0.1)",border:"1px solid rgba(255, 176, 57, 0.3)"},children:[o.jsx(rt,{className:"w-4 h-4",style:{color:"#FFB039"}}),o.jsx("span",{className:"text-sm font-medium",style:{color:"#FFB039"},children:"2,847"})]}),o.jsxs("button",{onClick:()=>t("notifications"),className:"p-2 rounded-full transition-all duration-200 relative",style:{backgroundColor:"rgba(99, 179, 255, 0.1)",border:"1px solid rgba(99, 179, 255, 0.3)",color:"#63B3FF"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="rgba(99, 179, 255, 0.2)",d.currentTarget.style.transform="scale(1.05)"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="rgba(99, 179, 255, 0.1)",d.currentTarget.style.transform="scale(1)"},children:[o.jsx(lh,{className:"w-4 h-4"}),o.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full flex items-center justify-center",style:{backgroundColor:"#FF6B6B"},children:o.jsx("span",{className:"text-xs font-bold text-white",children:"3"})})]}),o.jsx("span",{className:"text-sm font-medium",style:{color:"#E6ECF3"},children:"Test User"})]})]})})}function tH(){const[r,e]=b.useState("community"),[t,s]=b.useState(120),[n,i]=b.useState(!1),[l,d]=b.useState([]),[u,h]=b.useState([]),[p,m]=b.useState(1e3),[g,y]=b.useState(!1),[v,w]=b.useState({x:0,y:0}),[j,C]=b.useState(!1),[N,k]=b.useState(!1),[T,E]=b.useState("#60A5FA"),[D,M]=b.useState(3),[P,R]=b.useState("brush"),[F,I]=b.useState(!1),[U,L]=b.useState(!1),X=b.useRef(null);b.useEffect(()=>{U&&X.current?KN.initStickerModeSafe(X.current):!U&&X.current},[U]),b.useEffect(()=>()=>{X.current},[]);const[de,B]=b.useState(!1),[V,O]=b.useState(!0),[Z]=b.useState([{id:"1",title:"Summer Vibes",lastModified:new Date("2024-01-15"),bpm:110,key:"G",hasUnreadChanges:!0},{id:"2",title:"Midnight Dreams",lastModified:new Date("2024-01-14"),bpm:85,key:"Am"},{id:"3",title:"Electric Soul",lastModified:new Date("2024-01-13"),bpm:128,key:"Em",hasUnreadChanges:!0}]),Q=he=>{if(he==="rhyme-highlight"){Te();return}if(he==="drawing"||he==="drawing-tools"){pe();return}if(he==="minting"){B(!0);return}if(he==="projects"){I(!0);return}if(he==="ai"||he==="ai-assist"){if(l.some(Ce=>Ce.type==="ai")){W("ai");return}const hr=l.length*30,me=we("ai"),_e={type:"ai",position:{x:100+hr,y:100+hr},size:me,zIndex:p+l.length+10};d(Ce=>[...Ce,_e]);return}if(he==="collaboration"||he==="buddy"){if(l.some(Ce=>Ce.type==="buddy")){W("buddy");return}const hr=l.length*30,me=we("buddy"),_e={type:"buddy",position:{x:100+hr,y:100+hr},size:me,zIndex:p+l.length+10};d(Ce=>[...Ce,_e]);return}const Ge=l.some(Pt=>Pt.type===he),st=u.some(Pt=>Pt.type===he);if(Ge){W(he);return}if(st){q(he);return}const lt=l.length*30,yt=we(he);let kr={x:100+lt,y:100+lt};const $s={type:he,position:kr,size:yt,zIndex:p+l.length+10};d(Pt=>[...Pt,$s])},W=he=>{d(Ge=>Ge.filter(st=>st.type!==he)),h(Ge=>Ge.filter(st=>st.type!==he))},ae=he=>{const Ge=ce(he);d(st=>st.filter(lt=>lt.type!==he)),h(st=>[...st,{type:he,title:Ge}])},q=he=>{h(yt=>yt.filter(kr=>kr.type!==he));const Ge=l.length*30,st=we(he);let lt={x:100+Ge,y:100+Ge};d(yt=>[...yt,{type:he,position:lt,size:st,zIndex:p+yt.length+10}])},ce=he=>({"rhyme-highlight":"Highlight Rhymes",rhyme:"Rhyme Helper",chord:"Chord Helper",syllable:"Syllable Counter",metronome:"Metronome & Tap",audio:"Audio Notes",drawing:"Drawing",ai:"AI Assist",buddy:"Buddy",projects:"Projects",shop:"Star Shop",contact:"Direct Contact",challenges:"Challenges & Goals",auction:"Auction House",notifications:"Notifications",news:"News",minting:"Mint Collectible","live-chat":"Live Chat",dms:"Direct Messages",friends:"Friends List",scrapbook:"Scrapbook",book:"Drop Source Book"})[he]||"Unknown Feature",we=he=>({"rhyme-highlight":{width:400,height:500},rhyme:{width:400,height:500},chord:{width:450,height:550},syllable:{width:350,height:400},metronome:{width:300,height:350},audio:{width:500,height:600},drawing:{width:600,height:500},ai:{width:500,height:700},buddy:{width:400,height:600},projects:{width:500,height:650},shop:{width:800,height:700},contact:{width:500,height:600},challenges:{width:600,height:700},auction:{width:500,height:600},notifications:{width:400,height:500},news:{width:500,height:600},minting:{width:400,height:650},"live-chat":{width:450,height:Math.min(window.innerHeight*.8,650)},dms:{width:400,height:500},friends:{width:350,height:450},scrapbook:{width:500,height:600},book:{width:600,height:700}})[he]||{width:400,height:500},xe=he=>{const Ge=p+50;d(st=>st.map(lt=>lt.type===he?{...lt,zIndex:Ge}:lt)),m(Ge)},se=(he,Ge)=>{d(st=>st.map(lt=>lt.type===he?{...lt,position:Ge}:lt))},K=(he,Ge)=>{d(st=>st.map(lt=>lt.type===he?{...lt,size:Ge}:lt))},fe=he=>{const st={rhyme:()=>o.jsx(WB,{}),chord:()=>o.jsx(b9,{}),syllable:()=>o.jsx(w9,{}),metronome:()=>o.jsx(B9,{currentBpm:t,onBpmChange:ge}),audio:()=>o.jsx(BB,{}),ai:()=>o.jsx(V9,{}),buddy:()=>o.jsx(m7,{}),shop:()=>o.jsx(DW,{onClose:()=>W("shop")}),challenges:()=>o.jsx(RW,{onClose:()=>W("challenges")})}[he];return st?st():null},ie=new Set(l.map(he=>he.type)),Te=()=>{C(!j)},pe=()=>{k(!N)},ue=()=>{},re=()=>{window.undoDrawing&&window.undoDrawing()},J=()=>{window.clearDrawing&&window.clearDrawing()},ge=he=>{s(he)};b.useEffect(()=>{window.updateProjectBpm=ge},[]);const oe=he=>{he==="home"?e("community"):he==="editor"||he==="pad"?e("pad"):he==="community-hub"?e("community-hub"):he==="community-feed"?e("community-feed"):he==="shop"?Q("shop"):he==="book"?Q("book"):e(he==="dcp"?"dcp":he==="news"?"news":he==="community"?"community":he)},ve=he=>{const Ge=he.currentTarget.getBoundingClientRect();w({x:Ge.left+Ge.width/2,y:Ge.top}),y(!0)},Re=()=>{},De=()=>{L(!0),k(!0)},Je=()=>{L(!1),k(!1)},He=()=>{switch(r){case"community":return o.jsx(i2,{onNavigate:oe,onOpenFeature:Q});case"community-hub":return o.jsx(C7,{onNavigate:oe});case"community-feed":return o.jsx(G7,{onNavigate:oe});case"profile":return o.jsx(ZV,{onNavigate:oe});case"leaderboard":return o.jsx(bW,{onNavigate:oe});case"book":return o.jsx(CW,{onNavigate:oe});case"dcp":return o.jsx(YW,{onNavigate:oe});case"news":return o.jsx(XW,{onNavigate:oe});case"pad":return o.jsx("div",{ref:X,className:"pad-container flex-1 relative transition-all duration-1000 h-full",children:o.jsx("main",{className:"h-full p-6 relative",children:o.jsx(dA,{isRhymeHighlightEnabled:j,isDrawingMode:N,onDrawingStart:ue,showStats:!1,selectedColor:T,brushSize:D,selectedTool:P,onUndo:re,onClearDrawing:J})})});default:return o.jsx(i2,{onNavigate:oe,onOpenFeature:Q})}};return o.jsx(nA,{children:o.jsx(ws,{children:o.jsxs("div",{className:"h-screen dropsource-bg dropsource-text-primary flex flex-col overflow-hidden",children:[r!=="community"&&o.jsx(eH,{currentPage:r,onNavigate:oe,onOpenFeature:Q}),o.jsx("div",{className:"flex-1 overflow-hidden transition-all duration-300 ease-out",style:{animation:"fadeInSmooth 300ms ease-out"},children:He()},r),o.jsx(NA,{isOpen:n,onClose:()=>i(!1),projects:Z,currentProjectId:"1",onSelectProject:he=>{console.log("Select project:",he),i(!1)},onCreateProject:()=>{console.log("Create new project"),i(!1)},onDuplicateProject:he=>console.log("Duplicate project:",he),onDeleteProject:he=>console.log("Delete project:",he)}),r==="pad"&&o.jsx(PA,{onOpenFeature:Q,activeFeatures:ie,onToggleRhymeHighlight:Te,onToggleDrawing:pe,isRhymeHighlightActive:j,isDrawingActive:N,isStickerMode:U,onEnterStickerMode:De,onExitStickerMode:Je,isBarVisible:V,onToggleBarVisibility:()=>O(!V)}),o.jsx(f6,{isOpen:F,onClose:()=>I(!1),onSelectProject:he=>{console.log("Selected project:",he)}}),o.jsx(WW,{isOpen:de,onClose:()=>B(!1)}),l.map(he=>{if(he.type==="live-chat")return o.jsx(Ne.Fragment,{children:o.jsx(JW,{onClose:()=>W(he.type),onMinimize:()=>ae(he.type),initialPosition:he.position,width:he.size.width,height:he.size.height,zIndex:he.zIndex,onPositionChange:Ge=>se(he.type,Ge),onSizeChange:Ge=>K(he.type,Ge),onFocus:()=>xe(he.type)})},he.type);if(["auction","notifications","dms","friends","scrapbook","book"].includes(he.type)){const Ge={auction:zW,notifications:VW,dms:UW,friends:$W,scrapbook:GW,book:kW}[he.type];if(Ge)return o.jsx(Ge,{onClose:()=>W(he.type),onMinimize:()=>ae(he.type),initialPosition:he.position,width:he.size.width,height:he.size.height,zIndex:he.zIndex,onPositionChange:st=>se(he.type,st),onSizeChange:st=>K(he.type,st),onFocus:()=>xe(he.type)},he.type)}return o.jsx(Ne.Fragment,{children:o.jsx(ef,{title:ce(he.type),onClose:()=>W(he.type),onMinimize:()=>ae(he.type),initialPosition:he.position,width:he.size.width,height:he.size.height,zIndex:he.zIndex,onPositionChange:Ge=>se(he.type,Ge),onSizeChange:Ge=>K(he.type,Ge),onFocus:()=>xe(he.type),children:fe(he.type)})},he.type)}),o.jsx(S6,{minimizedCards:u,onRestoreCard:q,onCloseCard:W}),o.jsx(OW,{onFound:Re}),r!=="pad"&&r!=="community"&&r!=="dcp"&&r!=="news"&&o.jsx(ws,{children:o.jsxs("div",{className:"fixed z-50 flex flex-col gap-3",style:{bottom:"calc(var(--spacing-unit) * 3)",right:"calc(var(--spacing-unit) * 3)"},children:[o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("button",{onClick:()=>Q("challenges"),className:"dropsource-toolbar-button dropsource-focus-visible dropsource-clickable flex items-center justify-center",style:{width:"48px",height:"48px",padding:"0",backgroundColor:"var(--dropsource-panel)",border:"1px solid var(--dropsource-border)",borderRadius:"var(--radius-sharp)"},children:o.jsx(Ni,{className:"w-5 h-5 dropsource-icon-outlined"})})}),o.jsx(wt,{side:"left",className:"dropsource-card",children:o.jsx("p",{style:{fontSize:"var(--text-sm)"},children:"Challenges"})})]}),o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("button",{onClick:ve,className:"dropsource-focus-visible dropsource-clickable flex items-center justify-center relative drop-button",style:{width:"48px",height:"48px",padding:"0",background:"linear-gradient(135deg, #00AEEF 0%, #8F63FF 100%)",border:"none",borderRadius:"var(--radius-sharp)",color:"#fff",transition:"all 250ms ease-out",boxShadow:"0 0 20px rgba(0, 174, 239, 0.3)"},onMouseEnter:he=>{he.currentTarget.style.transform="translateY(-2px) scale(1.05)",he.currentTarget.style.boxShadow="0 0 30px rgba(143, 99, 255, 0.6)"},onMouseLeave:he=>{he.currentTarget.style.transform="translateY(0) scale(1)",he.currentTarget.style.boxShadow="0 0 20px rgba(0, 174, 239, 0.3)"},children:o.jsx(U0,{className:"w-6 h-6",style:{strokeWidth:"2.5px",strokeLinecap:"round",strokeLinejoin:"round"}})})}),o.jsx(wt,{side:"left",className:"dropsource-card",children:o.jsx("p",{style:{fontSize:"var(--text-sm)"},children:"Drop"})})]})]})}),r!=="pad"&&r!=="community"&&o.jsx(ws,{children:o.jsx("div",{className:"fixed z-50",style:{bottom:"calc(var(--spacing-unit) * 3)",left:"calc(var(--spacing-unit) * 3)"},children:o.jsxs(_t,{children:[o.jsx(bt,{asChild:!0,children:o.jsx("button",{onClick:()=>I(!0),className:"dropsource-toolbar-button dropsource-focus-visible dropsource-clickable flex items-center justify-center",style:{width:"48px",height:"48px",padding:"0",backgroundColor:"var(--dropsource-panel)",border:"1px solid var(--dropsource-border)",borderRadius:"var(--radius-sharp)"},children:o.jsx($0,{className:"w-5 h-5 dropsource-icon-outlined"})})}),o.jsx(wt,{side:"right",className:"dropsource-card",children:o.jsx("p",{style:{fontSize:"var(--text-sm)"},children:"Projects"})})]})})}),g&&o.jsx(FW,{onClose:()=>y(!1),position:v}),o.jsx(iA,{})]})})})}FM.createRoot(document.getElementById("root")).render(o.jsx(tH,{}));
